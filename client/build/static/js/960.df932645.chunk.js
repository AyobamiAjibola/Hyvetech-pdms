(self.webpackChunkclient=self.webpackChunkclient||[]).push([[960],{96569:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(72791),r=n(54440),a=n(94070),s=n(1413),o=n(55931),l=n(80184),c=(0,i.forwardRef)((function(e,t){return(0,l.jsx)(o.Z,(0,s.Z)({direction:"left",ref:t},e))}));function d(e){var t=e.duration,n=void 0===t?3e3:t;return(0,l.jsx)(r.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.show,autoHideDuration:n,onClose:e.onClose,TransitionComponent:c,children:(0,l.jsx)(a.Z,{onClose:e.onClose,variant:"filled",severity:e.alertType,sx:{width:"100%"},children:e.message})},e.message)}},80226:function(e,t,n){"use strict";var i=n(1413),r=(n(72791),n(47071)),a=n(80184);var s={color:"red"};t.Z=function(e){return e.hasError?(0,a.jsx)(r.Z,{sx:(0,i.Z)((0,i.Z)({},s),e.helperStyle),children:e.message}):null}},63694:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});n(72791);var i=n(26864),r=n(79012),a=n(68096),s=n(30829),o=n(54535),l=n(23786),c=n(80226),d=n(80184),u={PaperProps:{style:{maxHeight:224,width:250}}};function m(e){var t=(0,i.u6)(),n=t.errors,m=t.touched;return(0,d.jsxs)(r.Z,{sx:e.inputGroupStyle,children:[(0,d.jsxs)(a.Z,{fullWidth:e.fullWidth,error:n[e.name]&&m[e.name],children:[(0,d.jsx)(s.Z,{id:e.name,children:e.label}),(0,d.jsxs)(o.Z,{disabled:e.disabled,sx:e.textInputStyle,size:e.size,labelId:e.name,multiple:e.multiple,id:e.name,value:e.value,name:e.name,label:e.label,onChange:e.onChange,MenuProps:u,children:[(0,d.jsx)(l.Z,{value:"",children:"..."}),e.data.map((function(t,n){return(0,d.jsx)(l.Z,{onClick:function(){e.onClick&&e.onClick(t)},value:t.value,children:t.label},n)}))]})]}),(0,d.jsx)(c.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&m[e.name]})]})}},27802:function(e,t,n){"use strict";var i=n(1413),r=(n(72791),n(79012)),a=n(48550),s=n(26864),o=n(80226),l=n(80184);t.Z=function(e){var t=(0,s.u6)(),n=t.errors,c=t.touched;return(0,l.jsxs)(r.Z,{sx:e.inputGroupStyle,children:[(0,l.jsx)(a.Z,(0,i.Z)({size:e.size,placeholder:(null===e||void 0===e?void 0:e.placeholder)||void 0,onBlur:e.onBlur,sx:e.textInputStyle,fullWidth:e.fullWidth,error:n[e.name]&&c[e.name]},e)),(0,l.jsx)(o.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&c[e.name]})]})}},9463:function(e,t,n){"use strict";n.r(t),n.d(t,{AppContext:function(){return Bs},default:function(){return Os}});var i=n(70885),r=n(72791),a=n(38689),s=n(3975),o=n(48491),l=n(26003),c=new a.$U;s.Z.subscribe((function(){var e,t=s.Z.getState().authenticationReducer,n=JSON.parse(sessionStorage.getItem(o.H3.permissions));null!==n?(e=n,c.update(d(e))):(e=t.permissions).length&&c.update(d(e))}));var d=function(e){var t=new a.z4(a.$U),n=t.can,i=t.rules;return e.forEach((function(e){var t=e.action,i=e.subject;n(t,i)})),i},u=(0,r.createContext)(c),m=(0,l.M4)(u.Consumer),h=u,x=n(1413),f=n(64554),p=n(34663),v=n(20890),Z=n(13400),g=n(98008),j=n(16871),b=n(81918),S=n(3710),w=n(49565),y=n(9911),C=n(72355),A=n(72426),P=n.n(A),k=n(94515),N=n(57482),D=n(3525),E=n(70039),I=n(12565),T=n(29961),q=n(81333),L=n(38930),V=n(80184);var F=function(){var e=(0,T.l)(),t=e.current.state;return(0,V.jsx)(q.Z,{color:"primary",variant:"outlined",shape:"rounded",page:t.pagination.page+1,count:t.pagination.pageCount,renderItem:function(e){return(0,V.jsx)(L.Z,(0,x.Z)((0,x.Z)({},e),{},{disableRipple:!0}))},onChange:function(t,n){return e.current.setPage(n-1)}})};function M(){return(0,V.jsx)(I.n,{children:(0,V.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:(0,V.jsx)(N.Z,{})})})}var R=function(e){return(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(D._,(0,x.Z)((0,x.Z)({},e),{},{loading:e.loading,pagination:!0,autoHeight:!0,pageSize:5,rowsPerPageOptions:[5],components:{Pagination:F,LoadingOverlay:M,Toolbar:e.showToolbar?E.n:null},rows:e.rows,columns:e.columns,sortModel:e.sortModel,onSortModelChange:function(t){e.sortModel&&e.onSortModel&&e.onSortModel(t)},disableSelectionOnClick:!0,disableColumnFilter:!0,disableColumnSelector:!0,componentsProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}}}))})};var U=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"planCategory",headerName:"Plans Category",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"modeOfService",headerName:"Mode Of Service",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"status",headerName:"Status",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"Pending"===t?(0,V.jsx)(b.Z,{label:t,color:"warning",size:"small"}):"In-progress"===t?(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"}):"Complete"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"info",size:"small"})}},{field:"appointmentDate",headerName:"Appointment Date",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).format("LLL")}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},B=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,j.s0)(),o=(0,w.Z)((function(e){return e.appointmentReducer})),l=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===o.getAppointmentsStatus&&l((0,C.Xi)())}),[o.getAppointmentsStatus,l]),(0,r.useEffect)((function(){"completed"===o.getAppointmentsStatus&&a(o.appointments)}),[o.appointments,o.getAppointmentsStatus,l]),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Appointments"}),(0,V.jsx)(f.Z,{children:(0,V.jsx)(R,{rows:n,columns:U({onView:function(e){s("/appointments/".concat(e.id))}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0})})]})};var O=function(){return(0,V.jsx)("div",{children:(0,V.jsx)("h1",{children:"Vehicles"})})},W=n(61889),z=n(24518),G=n(53767),J=n(94721),H=n(65927),Y=n(75864);var Q=n(27140),K=n.n(Q),X=n(48621),_=n(51757);function $(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(null),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,w.Z)((function(e){return e.userReducer})),j=(0,y.Z)(),b=(0,r.useMemo)((function(){return sessionStorage.getItem(X.Z.auth.admin)}),[]);return(0,r.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem(o.H3.permissions));if(null===e)throw new Error("You are not authorized to access this resource");e.forEach((function(e){"manage"===e.action&&"all"===e.subject&&a(!0),"manage"===e.action&&"technician"===e.subject&&d(!0),"manage"===e.action&&"driver"===e.subject&&x(!0)}))}),[]),(0,r.useEffect)((function(){if(!b)throw new Error("You are not authorized to access this resource");var e=K().decode(b);j((0,_._)(e.userId))}),[j,b]),(0,r.useEffect)((function(){"completed"===g.getUserStatus&&Z(g.user)}),[g.getUserStatus,g.user]),{isSuperAdmin:n,isTechAdmin:c,isDriverAdmin:h,user:v}}var ee=n(74165),te=n(15861),ne=n(97893),ie=n(39709),re=n(22406),ae=n(61419),se=n(48550),oe=n(54535),le=n(23786),ce=n(96569),de=n(4819),ue=n.n(de);function me(e){return new Intl.NumberFormat("en-GB",{minimumFractionDigits:2}).format(e)}var he=function(e){if(e.length>5){var t=e,n=!1,i="phone number invalid, but fixed";return"+"==e[0]&&(t=e.substring(1),n=!0),"2"==t[0]&&"3"==t[1]&&"4"==t[2]&&(t="0"+t.substring(3),n=!0),"0"==t[0]&&"7"!=t[1]&&"8"!=t[1]&&"9"!=t[1]&&(i="Not a Nigerian Number",n=!0),t.length>11&&(i="Phone number invalid",n=!0),{error:n,message:i,phone:t=(t=t.trim()).replaceAll(" ","")}}return{error:!1,message:"",phone:e}};function xe(e){for(var t=[],n=0;n<=e;n++)t.push(n);return t}function fe(e){return"object"===typeof e?URL.createObjectURL(e):"".concat(X.Z.api.baseURL,"/").concat(e)}function pe(){window.location.reload()}function ve(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return new Blob([i],{type:n})}function Ze(e){var t=(0,r.useState)({accountType:"individual",firstName:"",email:"",lastName:"",companyName:"",phone:"",creditRating:"N/A",state:"Abuja (FCT)",district:"",address:""}),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)([]),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(!1),h=(0,i.Z)(m,2),p=h[0],Z=h[1],g=(0,r.useState)(),j=(0,i.Z)(g,2),b=j[0],S=j[1],C=(0,r.useState)(),A=(0,i.Z)(C,2),P=A[0],k=A[1];(0,r.useEffect)((function(){s({accountType:"individual",firstName:"",email:"",lastName:"",companyName:"",phone:"",creditRating:"N/A",state:"Abuja (FCT)",district:"",address:""})}),[e.visible]);var N=(0,y.Z)(),D=(0,w.Z)((function(e){return e.customerReducer}));(0,r.useEffect)((function(){var e=o.PO.map((function(e){return{label:e.name,value:e.name}}));u(e)}),[]),(0,r.useEffect)((function(){"idle"==D.addCustomerStatus&&Z(!1),"loading"==D.addCustomerStatus&&Z(!0),"completed"==D.addCustomerStatus&&(N((0,Y.Jb)()),Z(!1),k({message:"Created Successfully"}),e.callback(a),e.setVisible(!1)),"failed"==D.addCustomerStatus&&(N((0,Y.Jb)()),Z(!1),S({message:(null===D||void 0===D?void 0:D.addCustomerError)||""}))}),[D.addCustomerStatus,N]);var E=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(){var t,n,i,r;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ue().object({firstName:ue().string().required().label("First Name"),lastName:ue().string().required().label("Last Name"),email:ue().string().required().label("Email"),state:ue().string().required().label("State"),district:ue().string().required().label("District"),phone:ue().string().required().label("Phone"),address:ue().string().optional().label("Address"),creditRating:ue().string().optional().label("Credit Rating"),companyName:ue().string().optional().label("Company Name"),accountType:ue().string().optional().label("Account Type")}).validate(a),!(n=t.error)){e.next=4;break}return S({message:n.message}),e.abrupt("return");case 4:if(!(i=he(a.phone)).error){e.next=8;break}return S({message:(null===i||void 0===i?void 0:i.message)||""}),e.abrupt("return");case 8:(r=a).phone=i.phone,N((0,H.hd)(r));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(re.Z,{open:e.visible,onClose:function(){e.setVisible(!1)},sx:{},children:(0,V.jsxs)(f.Z,{bgcolor:"black",sx:{borderColor:"blue",borderWidth:1,boxShadow:"1px solid blue"},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"60%",padding:20,borderRadius:8,borderColor:"blue",borderWidth:1},children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:5,children:(0,V.jsx)("h2",{children:"Create Customer"})}),(0,V.jsxs)(W.ZP,{container:!0,xs:6,children:[(0,V.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){s((0,x.Z)((0,x.Z)({},a),{},{accountType:"corporate"}))},children:["Corporate",(0,V.jsx)(ae.Z,{name:"account",checked:"corporate"===a.accountType})]}),(0,V.jsx)("div",{}),(0,V.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){s((0,x.Z)((0,x.Z)({},a),{},{accountType:"individual"}))},children:["Individual",(0,V.jsx)(ae.Z,{name:"account",checked:"individual"===a.accountType})]})]}),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(ne.Z,{style:{cursor:"pointer"},onClick:function(){return e.setVisible(!1)}})})]}),(0,V.jsxs)(f.Z,{sx:{},children:[(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(se.Z,{label:"First Name",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{firstName:e.target.value}))},value:a.firstName,fullWidth:!0}),(0,V.jsx)(se.Z,{label:"Last Name",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{lastName:e.target.value}))},value:a.lastName,fullWidth:!0})]}),(0,V.jsx)("br",{}),(0,V.jsx)(G.Z,{direction:"row",spacing:2,children:(0,V.jsx)(se.Z,{label:"Company Name",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{companyName:e.target.value}))},value:a.companyName,fullWidth:!0})}),(0,V.jsx)("br",{}),(0,V.jsx)(se.Z,{label:"Email",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{email:e.target.value}))},value:a.email,fullWidth:!0}),(0,V.jsx)("br",{}),(0,V.jsx)("br",{}),(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(se.Z,{label:"Phone",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{phone:e.target.value}))},value:a.phone,fullWidth:!0}),(0,V.jsx)(se.Z,{label:"Credit Rating",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{creditRating:e.target.value}))},value:a.creditRating,fullWidth:!0})]}),(0,V.jsx)("br",{}),(0,V.jsx)(se.Z,{label:"Address",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{address:e.target.value}))},value:a.address,fullWidth:!0}),(0,V.jsx)("br",{}),(0,V.jsx)("br",{}),(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(oe.Z,{onChange:function(e){console.log(e," e")},value:a.state,name:"State",label:"State",fullWidth:!0,children:d.map((function(e,t){return(0,V.jsx)(le.Z,{onClick:function(){console.log(e,"item"),s((0,x.Z)((0,x.Z)({},a),{},{state:e.value}))},value:e.value,children:e.label},t)}))}),(0,V.jsx)(se.Z,{label:"District",onChange:function(e){return s((0,x.Z)((0,x.Z)({},a),{},{district:e.target.value}))},value:a.district,fullWidth:!0})]}),(0,V.jsx)("br",{}),(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",width:"100%"},children:[(0,V.jsx)(ie.Z,{type:"submit",loading:p,disabled:p,onClick:function(){E()},variant:"contained",color:"success",children:"Create"}),(0,V.jsx)(v.Z,{style:{width:"50%"},children:"Customer should sign in on AutoHyve App with email and phone number as password"})]})]})]})}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==b,message:null===b||void 0===b?void 0:b.message,onClose:function(){return S(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==P,message:null===P||void 0===P?void 0:P.message,onClose:function(){return k(void 0)}})]})}var ge=function(e){return[{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,renderCell:function(t){return(0,V.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return e.onView(t.row)},children:t?"".concat(t.row.firstName," ").concat(t.row.lastName):""})}},{field:"company",headerName:"Company Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e.row.companyName?"".concat(e.row.companyName):""}},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"creditRating",headerName:"Credit Rating",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){return e.row.creditRating||"N/A"},sortable:!0},{field:"receivables",headerName:"Receivables",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(){return"N/A"},sortable:!0}]},je=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e?"".concat(e.row.firstName," ").concat(e.row.lastName):""}},{field:"enabled",headerName:"Status",headerAlign:"center",align:"center",type:"boolean",width:100,sortable:!0,renderCell:function(e){return e.row.enabled?(0,V.jsx)(b.Z,{label:"Active",size:"small",color:"success"}):(0,V.jsx)(b.Z,{label:"Inactive",size:"small",color:"warning"})}},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},be=function(){var e=(0,r.useContext)(Bs).setCustomer,t=(0,r.useState)(!1),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)([{field:"id",sort:"asc"}]),f=(0,i.Z)(x,2),p=f[0],v=f[1],Z=(0,w.Z)((function(e){return e.customerReducer})),g=(0,y.Z)();return(0,r.useEffect)((function(){return function(){g((0,Y.Hp)())}}),[g]),(0,r.useEffect)((function(){"idle"===Z.getNewCustomersStatus&&g((0,H.Kg)())}),[Z.getNewCustomersStatus,g]),(0,r.useEffect)((function(){"loading"===Z.getNewCustomersStatus&&c(!0)}),[Z.getNewCustomersStatus,g]),(0,r.useEffect)((function(){"completed"===Z.getNewCustomersStatus&&(c(!1),h(Z.customers))}),[Z.customers,Z.getNewCustomersStatus]),(0,r.useEffect)((function(){"failed"===Z.getNewCustomersStatus&&c(!0)}),[Z.getNewCustomersStatus]),{rows:m,sortModel:p,setSortModel:v,loading:l,handleDelete:function(){a(!1)},showDelete:n,setShowDelete:a}}(),l=(0,j.s0)(),c=$().isTechAdmin,d=function(t){e(t),l("/customers/".concat(t.id),{state:{customer:t}})},u=function(){o.setShowDelete(!0)};return(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:10,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Customers"})}),(0,V.jsx)(W.ZP,{item:!0,hidden:!c,children:(0,V.jsx)(z.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){s(!0)},children:"CREATE"})})]}),(0,V.jsx)(G.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",divider:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(G.Z,{direction:"row",sx:{width:"100%"},children:(0,V.jsx)(R,{loading:o.loading,rows:o.rows,columns:c?ge({onDelete:u,onView:d}):je({onDelete:u,onView:d}),showToolbar:!0,sortModel:o.sortModel,onSortModel:o.setSortModel,checkboxSelection:!0,disableSelectionOnClick:!0})})}),(0,V.jsx)(Ze,{callback:function(e){console.log(e),window.location.reload()},visible:a,setVisible:s})]})},Se=n(10703),we=n(72032);var ye=function(e){var t,n,i,r,a,s,o,l=P()(null===(t=e.data)||void 0===t?void 0:t.timestamp).fromNow(!1);return(0,V.jsxs)(f.Z,{sx:{bgcolor:e.bgColor,boxShadow:5,borderRadius:3,p:2,minWidth:300},children:[(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"}},children:"".concat(null===(n=e.data)||void 0===n?void 0:n.name).concat(null!==(i=e.data)&&void 0!==i&&i.y&&(null===(r=e.data)||void 0===r?void 0:r.y)>1?"(s)":"")}),(0,V.jsx)(f.Z,{sx:{color:"text.primary",fontSize:34,fontWeight:"medium"},children:null===(a=e.data)||void 0===a?void 0:a.y}),null!==(s=e.data)&&void 0!==s&&s.y?(0,V.jsx)(f.Z,{component:we.Z,sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},fontSize:16,verticalAlign:"sub"}}):null,(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},display:"inline",fontWeight:"medium",mx:.5},children:null!==(o=e.data)&&void 0!==o&&o.y?"today, ".concat(l):null}),(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},display:"inline",fontSize:12}})]})},Ce=n(80007),Ae=n(13771),Pe=n(78546),ke=n(16656),Ne=n(4934),De=n(37596),Ee=n(50427),Ie=n(95643),Te=n(29718),qe=n(12003),Le=n.n(qe),Ve=n(75193),Fe=n.n(Ve),Me=n(41900),Re=n.n(Me);function Ue(e){var t=(0,r.useRef)(null),n={chart:{plotBackgroundColor:void 0,plotBorderWidth:void 0,plotShadow:!1,type:"pie",width:400},title:{text:e.title},caption:{text:e.caption},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:e.series,credits:{enabled:!1}};return(0,V.jsx)(f.Z,{component:"div",sx:{width:"100%",minWidth:400},children:(0,V.jsx)(Le(),(0,x.Z)({highcharts:Te,options:n,ref:t},e))})}function Be(e){var t,n,i,a=(0,r.useRef)(null),s={chart:{type:"column",width:1660},title:{text:e.title},caption:{text:e.caption},xAxis:{categories:e.categories},yAxis:{min:0,allowDecimals:!1,title:{text:e.yAxisText},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:(null===(t=Te.defaultOptions.title)||void 0===t?void 0:t.style)&&(null===(n=Te.defaultOptions.title)||void 0===n?void 0:n.style.color)||"gray",textOutline:"none"}}},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:(null===(i=Te.defaultOptions.legend)||void 0===i?void 0:i.backgroundColor)||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal"}},series:e.series,credits:{enabled:!1}};return(0,V.jsx)(f.Z,{component:"div",sx:{boxShadow:5,width:"100%",minWidth:1660},children:(0,V.jsx)(Le(),(0,x.Z)({highcharts:Te,options:s,ref:a},e))})}Fe()(Te),Re()(Te),Fe()(Te),Re()(Te);var Oe=n(64349),We=n(13796),ze=n(67010),Ge=n(10181);function Je(e){return(0,V.jsxs)(f.Z,{sx:{bgcolor:e.bgColor,boxShadow:5,borderRadius:3,p:2,minWidth:300},children:[(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"}},children:e.title}),(0,V.jsx)(f.Z,{sx:{color:"text.primary",fontSize:34,fontWeight:"medium"},children:e.data}),(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},display:"inline",fontSize:12}})]})}var He=n(77520);var Ye=function(){var e,t,n,a,s,l,c,d,u,m,h,x,f=(0,r.useState)(),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,w.Z)((function(e){return e.dashboardReducer})),j=(0,w.Z)((function(e){return e.customerReducer})),b=(0,w.Z)((function(e){return e.rideShareReducer})),S=(0,w.Z)((function(e){return e.technicianReducer})),C=(0,w.Z)((function(e){return e.partnerReducer})),A=(0,y.Z)();(0,r.useEffect)((function(){"idle"===g.getAnalyticsStatus&&A((0,Oe.w)())}),[g.getAnalyticsStatus,A]),(0,r.useEffect)((function(){A((0,H.QH)()),A((0,We.M3)()),A((0,Ge.tG)()),A((0,He.rR)())}),[A]),(0,r.useEffect)((function(){"completed"===g.getAnalyticsStatus&&g.analytics&&Z(function(e){var t=e.monthlyData.appointments.data.map((function(e){return e.y})),n={name:e.monthlyData.appointments.name,data:t,stack:"A"},i=e.monthlyData.customers.data.map((function(e){return e.y})),r={name:e.monthlyData.customers.name,data:i,stack:"A"},a=e.monthlyData.vehicles.data.map((function(e){return e.y})),s={name:e.monthlyData.vehicles.name,data:a,stack:"B"},o=e.monthlyData.transactions.data.map((function(e){return e.y}));return[n,r,s,{name:e.monthlyData.transactions.name,data:o,stack:"B"}]}(g.analytics))}),[g.analytics,g.stackedMonthlyData,g.getAnalyticsStatus]);var k=(0,r.useMemo)((function(){return j.customers.length}),[j.customers]),N=(0,r.useMemo)((function(){return b.drivers.length}),[b.drivers]),D=(0,r.useMemo)((function(){return S.technicians.length}),[S.technicians]),E=(0,r.useMemo)((function(){return C.partners.length}),[C.partners]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",sx:{p:1},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,direction:"column",children:(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:!0,spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Je,{title:"Total Partners",data:E,bgColor:Ce.Z[600]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Je,{data:k,title:"Total Customers",bgColor:Ae.Z[600]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Je,{title:"Total Drivers",data:N,bgColor:Pe.Z[600]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Je,{title:"Total Technicians",data:D,bgColor:ke.Z[600]})})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,direction:"column",children:(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:!0,spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(ye,{data:null===(e=g.analytics)||void 0===e?void 0:e.dailyData.appointments.data[0],bgColor:Ne.Z[600]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(ye,{data:null===(t=g.analytics)||void 0===t?void 0:t.dailyData.customers.data[0],bgColor:De.Z[600]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(ye,{data:null===(n=g.analytics)||void 0===n?void 0:n.dailyData.vehicles.data[0],bgColor:Ee.Z[600]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(ye,{data:null===(a=g.analytics)||void 0===a?void 0:a.dailyData.transactions.data[0],bgColor:Ie.Z[600]})})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,direction:"column",children:(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:!0,spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Se.Z,{children:(0,V.jsx)(Ue,{title:"Customers, ".concat(P()().format("MMM YYYY"),"."),series:null===(s=g.analytics)||void 0===s||null===(l=s.monthlyData)||void 0===l?void 0:l.customers})})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Se.Z,{children:(0,V.jsx)(Ue,{title:"Appointments, ".concat(P()().format("MMM YYYY"),"."),series:null===(c=g.analytics)||void 0===c||null===(d=c.monthlyData)||void 0===d?void 0:d.appointments})})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Se.Z,{children:(0,V.jsx)(Ue,{title:"Vehicles, ".concat(P()().format("MMM YYYY"),"."),series:null===(u=g.analytics)||void 0===u||null===(m=u.monthlyData)||void 0===m?void 0:m.vehicles})})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Se.Z,{children:(0,V.jsx)(Ue,{title:"Transactions, ".concat(P()().format("MMM YYYY"),"."),series:null===(h=g.analytics)||void 0===h||null===(x=h.monthlyData)||void 0===x?void 0:x.transactions})})})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(Be,{title:"",categories:o.gg,yAxisText:"Monthly Appointments, Customers, DriverVehicles and Transactions",series:v})})]}),(0,V.jsx)(ze.Z,{show:"loading"===g.getAnalyticsStatus}),(0,V.jsx)(ze.Z,{show:"loading"===j.getCustomersStatus}),(0,V.jsx)(ze.Z,{show:"loading"===b.getDriversStatus}),(0,V.jsx)(ze.Z,{show:"loading"===S.getTechniciansStatus})]})},Qe=n(51691),Ke=n(97123),Xe=n(13967),_e=n(39124),$e=n(43896),et=n(55931);function tt(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var nt=n(45987),it=["children","value","index"];function rt(e){var t=e.children,n=e.value,i=e.index,r=(0,nt.Z)(e,it);return(0,V.jsx)("div",(0,x.Z)((0,x.Z)({role:"tabpanel",hidden:n!==i,id:"full-width-tabpanel-".concat(i),"aria-labelledby":"full-width-tab-".concat(i)},r),{},{children:n===i&&t}))}var at=n(15834),st=n(57842),ot=n(84022),lt=n(63829),ct=n(45898);function dt(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useRef)(null),l=(0,Xe.Z)(),c=(0,y.Z)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(_e.Z,{centered:!0,value:a,onChange:function(e,t){s(t),c((0,at.ij)()),c((0,at.Qj)()),c((0,at.$S)()),c((0,st.CO)()),c((0,st.UF)()),c((0,st.uR)()),c((0,st.NW)()),c((0,st.S4)()),c((0,st.a4)()),c((0,st.aS)()),c((0,Y.nO)()),c((0,ot.zQ)()),c((0,ot.$R)()),c((0,ot.F$)()),c((0,ot.L3)()),c((0,ot.Pn)()),c((0,ot.Nh)()),c((0,ot._v)()),c((0,ot.EF)()),c((0,ot.gP)()),c((0,ot.Ok)()),c((0,ot.yr)()),c((0,ot.Iu)()),c((0,lt.dI)()),c((0,lt.CV)()),c((0,lt.OK)()),c((0,ct.t8)()),c((0,ct.uI)()),c((0,ct.i3)())},"aria-label":"icon label tabs example",children:e.tabMenus.map((function(e,t){return(0,V.jsx)($e.Z,(0,x.Z)({label:e.name},tt(t)),t)}))}),e.tabMenus.map((function(e,t){return(0,V.jsx)(et.Z,{direction:"right",in:a===t,container:o.current,children:(0,V.jsx)("div",{children:(0,V.jsx)(rt,{value:a,index:t,dir:l.direction,children:(0,V.jsx)(f.Z,{sx:{pt:6},children:(0,V.jsx)(e.Element,{})})})})},t)}))]})}var ut=function(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useRef)(null),l=(0,Xe.Z)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(_e.Z,{centered:!0,value:a,onChange:function(e,t){s(t)},"aria-label":"icon label tabs example",children:e.tabMenus.map((function(e,t){return(0,V.jsx)($e.Z,(0,x.Z)({label:e.name},tt(t)),t)}))}),e.tabMenus.map((function(e,t){return(0,V.jsx)(et.Z,{direction:"right",in:a===t,container:o.current,children:(0,V.jsx)("div",{children:(0,V.jsx)(rt,{value:a,index:t,dir:l.direction,children:(0,V.jsx)(f.Z,{sx:{pt:6},children:(0,V.jsx)(e.Element,{})})})})},t)}))]})},mt=n(32636),ht=(0,r.createContext)(null);var xt=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=$().isTechAdmin,o=(0,j.TH)();return(0,r.useEffect)((function(){if(o.state){var e=o.state;a(e.customer)}}),[o.state]),(0,V.jsx)(G.Z,{direction:"column",spacing:5,divider:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsxs)(Se.Z,{sx:{p:3},children:[(0,V.jsx)(mt.Z,{style:{cursor:"pointer"},onClick:function(){return window.history.back()}}),(0,V.jsx)(ht.Provider,{value:{customer:n,setCustomer:a},children:(0,V.jsx)(ut,{tabMenus:s?rr:ar})})]})})};var ft=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"planCategory",headerName:"Plans Category",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"modeOfService",headerName:"Mode Of Service",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"status",headerName:"Status",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"Pending"===t?(0,V.jsx)(b.Z,{label:t,color:"warning",size:"small"}):"In-progress"===t?(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"}):"Complete"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"info",size:"small"})}},{field:"appointmentDate",headerName:"Appointment Date",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},pt=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(ht).customer,o=(0,w.Z)((function(e){return e.customerReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,H.f)(s.id))}),[l,s]),(0,r.useEffect)((function(){"completed"===o.getCustomerAppointmentsStatus&&a(o.appointments)}),[o.getCustomerAppointmentsStatus,o.appointments]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(R,{rows:n,columns:ft({onView:function(e){c("/appointments/".concat(e.id))}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getCustomerAppointmentsStatus})})};var vt=function(){return(0,V.jsx)(v.Z,{children:"Quotes"})};var Zt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"reference",headerName:"Reference",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"amount",headerName:"Amount",headerAlign:"center",align:"center",type:"number",sortable:!0},{field:"purpose",headerName:"Purpose",headerAlign:"center",width:200,align:"center",type:"string",sortable:!0},{field:"status",headerName:"PaymentStatus",headerAlign:"center",align:"center",width:150,type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"success"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):t===o.X3.txn_init?(0,V.jsx)(b.Z,{label:"pending",color:"warning",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"})}},{field:"serviceStatus",headerName:"Service Status",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"paidAt",headerName:"Paid At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return e.value?P()(e.value).utc(!0).format("LLL"):"-"}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},gt=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(ht).customer,o=(0,w.Z)((function(e){return e.customerReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,H.XZ)(s.id))}),[l,s]),(0,r.useEffect)((function(){"completed"===o.getCustomerTransactionsStatus&&a(o.transactions)}),[o.getCustomerTransactionsStatus,o.transactions]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(G.Z,{direction:"row",spacing:2,children:(0,V.jsx)(R,{rows:n,columns:Zt({onView:function(e){c("/transactions/".concat(e.id),{state:{transaction:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getCustomerTransactionsStatus})})})};var jt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"plateNumber",headerName:"Plate Number",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"make",headerName:"Make",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"model",headerName:"Model",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"modelYear",headerName:"Year",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"isBooked",headerName:"Booked",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){return e.row.isBooked?(0,V.jsx)(b.Z,{label:"Yes",color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:"No",color:"error",size:"small"})}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},bt=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(ht).customer,o=(0,w.Z)((function(e){return e.customerReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,H.ur)(s.id))}),[s,l]),(0,r.useEffect)((function(){"completed"===o.getCustomerVehiclesStatus&&a(o.vehicles)}),[o.getCustomerVehiclesStatus,o.vehicles]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(G.Z,{direction:"row",spacing:2,children:(0,V.jsx)(R,{rows:n,columns:jt({onView:function(e){c("/vehicles/".concat(e.id),{state:{vehicle:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getCustomerVehiclesStatus})})})};var St=function(){return(0,V.jsx)(v.Z,{children:"Quotes"})},wt=(0,r.createContext)(null);var yt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"reference",headerName:"Reference",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"amount",headerName:"Amount",headerAlign:"center",align:"center",type:"number",sortable:!0},{field:"purpose",headerName:"Purpose",headerAlign:"center",width:200,align:"center",type:"string",sortable:!0},{field:"status",headerName:"PaymentStatus",headerAlign:"center",align:"center",width:150,type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"success"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):t===o.X3.txn_init?(0,V.jsx)(b.Z,{label:"pending",color:"warning",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"})}},{field:"serviceStatus",headerName:"Service Status",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"paidAt",headerName:"Paid At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return e.value?P()(e.value).utc(!0).format("LLL"):"-"}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},Ct=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(wt).driver,o=(0,w.Z)((function(e){return e.rideShareReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,We.e_)(s.id))}),[l,s]),(0,r.useEffect)((function(){"completed"===o.getDriverTransactionsStatus&&a(o.transactions)}),[o.getDriverTransactionsStatus,o.transactions]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(G.Z,{direction:"row",spacing:2,children:(0,V.jsx)(R,{rows:n,columns:yt({onView:function(e){c("/transactions/".concat(e.id),{state:{transaction:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getDriverTransactionsStatus})})})};var At=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"plateNumber",headerName:"Plate Number",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"make",headerName:"Make",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"model",headerName:"Model",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"modelYear",headerName:"Year",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"isBooked",headerName:"Booked",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){return e.row.isBooked?(0,V.jsx)(b.Z,{label:"Yes",color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:"No",color:"error",size:"small"})}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},Pt=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(wt).driver,o=(0,w.Z)((function(e){return e.rideShareReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,We.TR)(s.id))}),[s,l]),(0,r.useEffect)((function(){"completed"===o.getDriverVehiclesStatus&&a(o.vehicles)}),[o.getDriverVehiclesStatus,o.vehicles]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(G.Z,{direction:"row",spacing:2,children:(0,V.jsx)(R,{rows:n,columns:At({onView:function(e){c("/vehicles/".concat(e.id),{state:{vehicle:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getDriverVehiclesStatus})})})},kt=n(39281),Nt=n(79836),Dt=n(53382),Et=n(35855),It=n(53994),Tt=n(93044),qt=n(5574),Lt=n(84395),Vt=n(65661),Ft=n(39157),Mt=(0,r.forwardRef)((function(e,t){return(0,V.jsx)(et.Z,(0,x.Z)({direction:"up",ref:t},e))})),Rt=n(29823);var Ut=function(e){var t=(0,r.useRef)(null);return(0,V.jsx)("div",{children:(0,V.jsxs)(qt.Z,{open:e.show,TransitionComponent:Mt,keepMounted:!0,onClose:e.onClose,"aria-describedby":"app-modal",maxWidth:e.size,fullWidth:e.fullWidth,fullScreen:e.fullScreen,scroll:"paper",children:[(0,V.jsx)(Lt.Z,{sx:{position:"relative"},children:(0,V.jsx)(p.Z,{children:(0,V.jsx)(Z.Z,{edge:"start",color:"inherit",onClick:e.onClose,"aria-label":"close",children:(0,V.jsx)(Rt.Z,{})})})}),(0,V.jsx)(Vt.Z,{children:e.title}),(0,V.jsx)(Ft.Z,{ref:t,sx:{height:e.contentHeight},children:e.Content}),e.ActionComponent&&e.ActionComponent]})})},Bt=n(24408),Ot=n(41181);var Wt=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(null),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(null),p=(0,i.Z)(x,2),v=p[0],Z=p[1],g=(0,w.Z)((function(e){return e.rideShareReducer})),j=(0,w.Z)((function(e){return e.customerReducer}));(0,r.useEffect)((function(){h(g.driver),Z(j.customer)}),[j.customer,g.driver]);var b=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t){var n,i;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(X.Z.api.driverBaseURL,"/").concat(t),e.next=3,Ot.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;c(e)},setTimeout((function(){return a(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(kt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:(0,V.jsx)(Nt.Z,{sx:{maxWidth:500},"aria-label":"simple table",children:m?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"First Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:m.firstName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Last Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:m.lastName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Phone Number"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:m.phone})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (front)"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:m.frontLicenseImageUrl&&(0,V.jsx)(Tt.Z,{onClick:function(){return b(m.frontLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:m.frontLicenseImageUrl,children:(0,V.jsx)(Bt.Z,{})})})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (rear)"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:m.rearLicenseImageUrl&&(0,V.jsx)(Tt.Z,{onClick:function(){return b(m.rearLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:m.rearLicenseImageUrl,children:(0,V.jsx)(Bt.Z,{})})})]})]}):v?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"First Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.firstName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Last Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.lastName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Phone Number"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.phone})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (front)"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.frontLicenseImageUrl&&(0,V.jsx)(Tt.Z,{onClick:function(){return b(v.frontLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:v.frontLicenseImageUrl,children:(0,V.jsx)(Bt.Z,{})})})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (rear)"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.rearLicenseImageUrl&&(0,V.jsx)(Tt.Z,{onClick:function(){return b(v.rearLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:v.rearLicenseImageUrl,children:(0,V.jsx)(Bt.Z,{})})})]})]}):(0,V.jsx)(Dt.Z,{children:(0,V.jsx)(Et.Z,{children:(0,V.jsx)(It.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(N.Z,{})})})})})})}),(0,V.jsx)(Ut,{fullScreen:!0,show:n,title:"Driver license",size:"xl",Content:(0,V.jsx)("img",{width:"50%",src:l,alt:"Driver license",crossOrigin:"anonymous"}),onClose:function(){return a(!1)}})]})};var zt=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useContext)(wt).driver,u=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t){var n,i;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(X.Z.api.driverBaseURL,"/").concat(t),e.next=3,Ot.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;c(e)},setTimeout((function(){return a(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(kt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:(0,V.jsx)(Nt.Z,{sx:{maxWidth:500},"aria-label":"simple table",children:d?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"First Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:d.firstName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Last Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:d.lastName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Phone Number"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:d.phone})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (front)"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:d.frontLicenseImageUrl&&(0,V.jsx)(Tt.Z,{onClick:function(){return u(d.frontLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:d.frontLicenseImageUrl,children:(0,V.jsx)(Bt.Z,{})})})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (rear)"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:d.rearLicenseImageUrl&&(0,V.jsx)(Tt.Z,{onClick:function(){return u(d.rearLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:d.rearLicenseImageUrl,children:(0,V.jsx)(Bt.Z,{})})})]})]}):(0,V.jsx)(Dt.Z,{children:(0,V.jsx)(Et.Z,{children:(0,V.jsx)(It.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(N.Z,{})})})})})})}),(0,V.jsx)(Ut,{fullScreen:!0,show:n,title:"Driver license",size:"xl",Content:(0,V.jsx)("img",{width:"50%",src:l,alt:"Driver license",crossOrigin:"anonymous"}),onClose:function(){return a(!1)}})]})},Gt=n(90493),Jt=n(15021),Ht=n(20653),Yt=n(49900),Qt=n(56355),Kt=n(57621),Xt=n(42169),_t=n(39504),$t=n(72363),en=n.p+"static/media/car1.b6158c8b8916b3751e82.jpg",tn=n(30399),nn=n(46813),rn=n(42982),an=n(763),sn=n.n(an),on=n(5712),ln=n(94070),cn=n(59908),dn=n.n(cn);function un(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],f=m[1],p=(0,r.useState)(!1),v=(0,i.Z)(p,2),Z=v[0],g=v[1],b=(0,r.useState)(!1),S=(0,i.Z)(b,2),C=S[0],A=S[1],P=(0,r.useState)(),k=(0,i.Z)(P,2),N=k[0],D=k[1],E=(0,r.useState)(),I=(0,i.Z)(E,2),T=I[0],q=I[1],L=(0,r.useState)(null),V=(0,i.Z)(L,2),F=V[0],M=V[1],R=(0,r.useState)(null),U=(0,i.Z)(R,2),B=U[0],O=U[1],W=(0,r.useState)(0),z=(0,i.Z)(W,2),G=z[0],J=z[1],H=(0,r.useState)(!1),Y=(0,i.Z)(H,2),Q=Y[0],K=Y[1],_=(0,r.useState)({active:!1,confirmPassword:"",email:"",firstName:"",lastName:"",password:"",phone:""}),ee=(0,i.Z)(_,2),te=ee[0],ne=ee[1],ie=$(),re=(0,j.UO)(),ae=(0,w.Z)((function(e){return e.technicianReducer})),se=(0,y.Z)();(0,r.useEffect)((function(){"idle"===ae.getTechniciansStatus&&(re.id?se((0,Ge.ug)(+re.id)):se((0,Ge.tG)()))}),[se,re.id,ae.getTechniciansStatus]),(0,r.useEffect)((function(){"loading"===ae.createTechnicianStatus&&K("loading"===ae.createTechnicianStatus)}),[se,ae.createTechnicianStatus]),(0,r.useEffect)((function(){"completed"===ae.createTechnicianStatus&&(a(!1),K(!1),q({message:ae.createTechnicianSuccess}),se((0,Ge.tG)()))}),[se,ae.createTechnicianStatus,ae.createTechnicianSuccess]),(0,r.useEffect)((function(){"failed"===ae.createTechnicianStatus&&(a(!1),K(!1),ae.createTechnicianError&&D({message:ae.createTechnicianError}))}),[se,ae.createTechnicianError,ae.createTechnicianStatus]),(0,r.useEffect)((function(){"loading"===ae.updateTechnicianStatus&&K("loading"===ae.updateTechnicianStatus)}),[se,ae.updateTechnicianStatus]),(0,r.useEffect)((function(){"completed"===ae.updateTechnicianStatus&&(d(!1),K(!1),q({message:ae.updateTechnicianSuccess}),se((0,Ge.tG)()))}),[se,ae.updateTechnicianStatus,ae.updateTechnicianSuccess]),(0,r.useEffect)((function(){"failed"===ae.updateTechnicianStatus&&(d(!1),K(!1),ae.updateTechnicianError&&D({message:ae.updateTechnicianError}))}),[se,ae.updateTechnicianError,ae.updateTechnicianStatus]),(0,r.useEffect)((function(){"loading"===ae.deleteTechnicianStatus&&K("loading"===ae.deleteTechnicianStatus)}),[se,ae.deleteTechnicianStatus]),(0,r.useEffect)((function(){"completed"===ae.deleteTechnicianStatus&&(f(!1),K(!1),q({message:ae.deleteTechnicianSuccess}),se((0,Ge.tG)()))}),[se,ae.deleteTechnicianStatus,ae.deleteTechnicianSuccess]),(0,r.useEffect)((function(){"failed"===ae.deleteTechnicianStatus&&(f(!1),K(!1),ae.deleteTechnicianError&&D({message:ae.deleteTechnicianError}))}),[se,ae.deleteTechnicianError,ae.deleteTechnicianStatus]);return{showCreate:n,setShowCreate:a,showEdit:c,setShowEdit:d,showDelete:h,setShowDelete:f,error:N,setError:D,success:T,setSuccess:q,showView:Z,setShowView:g,detail:F,setDetail:M,showViewJob:C,setShowViewJob:A,job:B,setJob:O,initialValues:te,setInitialValues:ne,techId:G,setTechId:J,loading:Q,handleDelete:function(){F?se((0,Ge.tc)(F.id)):D({message:o.X3.internalError}),f(!1)},handleView:function(e){M(e),g(!0)},handleEdit:function(e){var t=(0,x.Z)((0,x.Z)({},e),{},{id:"".concat(G)});se((0,Ge.wl)(t))},handleCreate:function(e){var t=(0,x.Z)((0,x.Z)({},e),{},{role:X.Z.roles[5]});if(ie.isTechAdmin&&ie.user)return t.partnerId="".concat(ie.user.partner.id),void se((0,Ge.qK)(t));if(re.id)return t.partnerId=re.id,void se((0,Ge.qK)(t));throw new Error("An error occurred. Contact support")}}}var mn=n(17100),hn=(0,r.createContext)(null);var xn=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],p=m[1],g=(0,r.useState)([]),b=(0,i.Z)(g,2),S=b[0],C=b[1],A=(0,r.useState)(),P=(0,i.Z)(A,2),k=P[0],D=P[1],E=(0,r.useContext)(hn),I=E.driverSub,T=E.vehicle,q=E.setViewSub,L=(0,j.s0)();un();var F=(0,j.UO)(),M=$(),R=(0,r.useMemo)((function(){return M.isTechAdmin&&M.user?M.user.partner.id:F.id?+F.id:void 0}),[M.isTechAdmin,M.user,F.id]),U=(0,w.Z)((function(e){return e.jobReducer})),B=(0,w.Z)((function(e){return e.technicianReducer})),O=(0,w.Z)((function(e){return e.checkListReducer})),z=(0,y.Z)();(0,r.useEffect)((function(){if("completed"===O.getCheckListsStatus&&R){var e=O.checkLists;(e=e.filter((function(e){return e.partners.find((function(e){return e.id===R}))}))).length&&C(e)}}),[O.getCheckListsStatus,O.checkLists,R]),(0,r.useEffect)((function(){"completed"===B.getTechniciansStatus&&a(B.technicians.filter((function(e){return!e.hasJob&&e.active})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})))}),[B.getTechniciansStatus,B.technicians]),(0,r.useEffect)((function(){"completed"===U.driverAssignJobStatus&&T&&(p({message:U.driverAssignJobSuccess}),z((0,tn.XB)(R)),z((0,Ge.tG)()),z((0,nn.IN)(T.id)),q(!1))}),[z,U.driverAssignJobStatus,U.driverAssignJobSuccess,R,q,T]),(0,r.useEffect)((function(){"failed"===U.driverAssignJobStatus&&U.driverAssignJobError&&d({message:U.driverAssignJobError})}),[U.driverAssignJobError,U.driverAssignJobStatus]);var G=(0,r.useMemo)((function(){if(I){var e=I.maxDriveIn,t=(0,rn.Z)(I.jobs);t.length+=e-t.length;for(var n=I.jobs.length>0?I.jobs.length:0;n<t.length;n++)t[n]={};return t}return[]}),[I]),J=(0,r.useMemo)((function(){return!I||I.vehicles.every((function(e){return e.onInspection||e.onMaintenance}))}),[I]),H=(0,r.useCallback)((function(e){return L("/job-check-list-report/".concat(e.id),{state:{job:e}})}),[L]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(kt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:I?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Plan Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:dn().words(I.planType)})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Plan"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:I.paymentPlan})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Amount"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:me(+I.amount)})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Status"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:I.transaction.status})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Mode Of Service"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:I.modeOfService})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Drive-in Count"}),(0,V.jsxs)(It.Z,{colSpan:4,align:"right",children:[I.driveInCount,"/",I.maxDriveIn]})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Mobile Count"}),(0,V.jsxs)(It.Z,{colSpan:4,align:"right",children:[I.mobileCount,"/",I.maxMobile]})]})]}):(0,V.jsx)(Dt.Z,{children:(0,V.jsx)(Et.Z,{children:(0,V.jsx)(It.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(N.Z,{})})})})})}),(0,V.jsx)(v.Z,{variant:"h6",component:"div",display:"block",sx:{mt:2},gutterBottom:!0,children:"Inspections"}),(0,V.jsxs)(W.ZP,{container:!0,direction:"column",spacing:1,children:[(0,V.jsx)(W.ZP,{item:!0,xs:!0,hidden:J,children:(0,V.jsx)(on.Z,{disabled:J,options:S,getOptionLabel:function(e){return e.name},onChange:function(e,t){t&&D(t.id)},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Check List"}))}})}),G.map((function(e,t){return(0,V.jsxs)(r.Fragment,{children:[sn().isEmpty(e)&&(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(on.Z,{disabled:J,options:n,onChange:function(e,t){t&&function(e){if(!S.length)return d({message:"You do not have a check list for inspection."});if(void 0===k)return d({message:"You must select one check list for this inspection"});var t={partnerId:R,techId:+e,subscriptionId:null===I||void 0===I?void 0:I.id,checkListId:k,jobId:void 0,client:"Driver"};z((0,tn.ay)(t))}(t.value)},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Assign To"}))}})}),!sn().isEmpty(e)&&(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(ln.Z,{severity:o.jf.complete===e.status?"success":"info",action:o.jf.complete===e.status&&(0,V.jsx)(Z.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return H(e)},children:(0,V.jsx)(mn.Z,{fontSize:"inherit"})}),children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:e.name}),(0,V.jsxs)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:["status: ",e.status]})]})})]},t)}))]}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==h,message:null===h||void 0===h?void 0:h.message,onClose:function(){return p(void 0)}})]})};function fn(e){var t=(0,r.useState)(!1),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useContext)(hn),h=m.setDriverSub,x=m.vehicle,p=m.setVehicle,g=m.viewSub,b=m.setViewSub,S=(0,j.UO)(),C=(0,w.Z)((function(e){return e.vehicleReducer})),A=(0,w.Z)((function(e){return e.jobReducer})),k=(0,y.Z)(),N=(0,j.TH)();(0,r.useEffect)((function(){var e=S.id;"idle"===A.getJobsStatus&&k((0,tn.XB)(+e))}),[k,A.getJobsStatus,S.id]),(0,r.useEffect)((function(){C.getDriverVehicleSubscriptionStatus}),[C.driverSubscriptions,C.getDriverVehicleSubscriptionStatus]),(0,r.useEffect)((function(){if(N.state){var e=N.state;e.vehicle&&(p(e.vehicle),k((0,nn.IN)(e.vehicle.id)))}x&&k((0,nn.IN)(x.id))}),[k,N.state,e.isCustomer,e.isDriver,p,x]);var D=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t){var n,i;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(X.Z.api.driverBaseURL,"/").concat(t),e.next=3,Ot.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;u(e)},setTimeout((function(){return s(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[x?(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,V.jsxs)(Kt.Z,{children:[(0,V.jsx)(Xt.Z,{component:"img",alt:"green iguana",height:"140",image:en}),(0,V.jsx)(_t.Z,{children:(0,V.jsxs)(v.Z,{variant:"h5",component:"div",children:[x.modelYear," ",x.make," ",x.model]})}),(0,V.jsx)($t.Z,{children:(0,V.jsx)(z.Z,{variant:"contained",color:"secondary",size:"small",children:"Book Inspection"})})]})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,sm:9,md:9,children:[(0,V.jsx)(Kt.Z,{children:(0,V.jsxs)(_t.Z,{children:[(0,V.jsxs)(G.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Make"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.make})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model Year"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.modelYear})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.engineCylinders})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Ownership"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.isOwner?"Owner":"-"})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Date Added"}),(0,V.jsx)(v.Z,{variant:"caption",children:P()(x.createdAt).format("LL")})]})]}),(0,V.jsx)(J.Z,{sx:{my:2}}),(0,V.jsxs)(G.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.model})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.engineModel})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"VIN"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.vin})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.type})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Plate Number"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.plateNumber})]})]}),(0,V.jsx)(J.Z,{sx:{my:2}}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:"Vehicle Papers"}),(0,V.jsxs)(G.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Vehicle Inspection"}),x.vehicleInspectionFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return D(x.vehicleInspectionFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.vehicleInspectionFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Motor Receipt"}),x.motorReceiptFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return D(x.motorReceiptFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.motorReceiptFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Proof Of Ownership"}),x.proofOfOwnershipFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return D(x.proofOfOwnershipFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.proofOfOwnershipFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Road Worthiness"}),x.roadWorthinessFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return D(x.roadWorthinessFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.roadWorthinessFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Registration Number"}),x.registrationNumberFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return D(x.registrationNumberFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.registrationNumberFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Third Party Insurance"}),x.thirdPartyInsuranceFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return D(x.thirdPartyInsuranceFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.thirdPartyInsuranceFileUrl,children:(0,V.jsx)(Bt.Z,{})})]})]})]})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:{xs:2,md:2},children:[(0,V.jsxs)(W.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Estimates"}),(0,V.jsx)(G.Z,{children:(0,V.jsx)(Kt.Z,{children:(0,V.jsx)(_t.Z,{})})})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Subscriptions"}),(0,V.jsx)(G.Z,{children:(0,V.jsx)(Kt.Z,{children:(0,V.jsx)(_t.Z,{children:(0,V.jsx)(Gt.Z,{children:C.driverSubscriptions.length?C.driverSubscriptions.filter((function(e){return e.status!==o.lD.cancel})).map((function(e,t){return(0,V.jsxs)(Jt.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){h(e),b(!0)}(e)},edge:"end","aria-label":"view",children:(0,V.jsx)(Qt.U9w,{})}),children:[(0,V.jsx)(Ht.Z,{children:(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(Qt.RPl,{})})}),(0,V.jsx)(Yt.Z,{primary:"".concat(e.planType),secondary:"(".concat(e.status,") ").concat(e.planCategory," ").concat(e.paymentPlan)})]},t)})):(0,V.jsx)(Jt.ZP,{children:(0,V.jsx)(Yt.Z,{primary:"No Subscriptions"})})})})})})]})]})]})]}):(0,V.jsx)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{children:"No Data"})})}),(0,V.jsx)(Ut,{show:a,title:"Vehicle paper",fullScreen:!0,Content:(0,V.jsx)("img",{width:"50%",src:d,alt:"Vehicle paper",crossOrigin:"anonymous"}),onClose:function(){return s(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"xs",show:g,Content:(0,V.jsx)(xn,{}),onClose:function(){return b(!1)}})]})}var pn=n(20155),vn=n(96241);function Zn(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],p=m[1],g=(0,r.useState)([]),b=(0,i.Z)(g,2),S=b[0],C=b[1],A=(0,r.useState)(),P=(0,i.Z)(A,2),k=P[0],D=P[1],E=(0,r.useContext)(hn),I=E.customerSub,T=E.vehicle,q=E.setViewSub,L=(0,j.s0)();un();var F=(0,j.UO)(),M=$(),R=(0,r.useMemo)((function(){return M.isTechAdmin&&M.user?M.user.partner.id:F.id?+F.id:void 0}),[M.isTechAdmin,M.user,F.id]),U=(0,w.Z)((function(e){return e.jobReducer})),B=(0,w.Z)((function(e){return e.technicianReducer})),O=(0,w.Z)((function(e){return e.checkListReducer})),z=(0,y.Z)();(0,r.useEffect)((function(){if("completed"===O.getCheckListsStatus&&R){var e=O.checkLists;(e=e.filter((function(e){return e.partners.find((function(e){return e.id===R}))}))).length&&C(e)}}),[O.getCheckListsStatus,O.checkLists,R]),(0,r.useEffect)((function(){"completed"===B.getTechniciansStatus&&a(B.technicians.filter((function(e){return!e.hasJob&&e.active})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})))}),[B.getTechniciansStatus,B.technicians]),(0,r.useEffect)((function(){"completed"===U.driverAssignJobStatus&&T&&(p({message:U.driverAssignJobSuccess}),z((0,tn.XB)(R)),z((0,Ge.tG)()),z((0,nn.IN)(T.id)),q(!1))}),[z,U.driverAssignJobStatus,U.driverAssignJobSuccess,R,q,T]),(0,r.useEffect)((function(){"failed"===U.driverAssignJobStatus&&U.driverAssignJobError&&d({message:U.driverAssignJobError})}),[U.driverAssignJobError,U.driverAssignJobStatus]);var G=(0,r.useMemo)((function(){if(I){var e=I.maxDriveIn,t=(0,rn.Z)(I.jobs);t.length+=e-t.length;for(var n=I.jobs.length>0?I.jobs.length:0;n<t.length;n++)t[n]={};return t}return[]}),[I]),J=(0,r.useMemo)((function(){return!I||I.vehicles.every((function(e){return e.onInspection||e.onMaintenance}))}),[I]),H=(0,r.useCallback)((function(e){return L("/job-check-list-report/".concat(e.id),{state:{job:e}})}),[L]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(kt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:I?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Plan Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:dn().words(I.planType)})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Plan"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:I.paymentPlan})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Amount"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:me(+I.amount)})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Status"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:I.transaction.status})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Mode Of Service"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:I.modeOfService})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Drive-in Count"}),(0,V.jsxs)(It.Z,{colSpan:4,align:"right",children:[I.driveInCount,"/",I.maxDriveIn]})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Mobile Count"}),(0,V.jsxs)(It.Z,{colSpan:4,align:"right",children:[I.mobileCount,"/",I.maxMobile]})]})]}):(0,V.jsx)(Dt.Z,{children:(0,V.jsx)(Et.Z,{children:(0,V.jsx)(It.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(N.Z,{})})})})})}),(0,V.jsx)(v.Z,{variant:"h6",component:"div",display:"block",sx:{mt:2},gutterBottom:!0,children:"Inspections"}),(0,V.jsxs)(W.ZP,{container:!0,direction:"column",spacing:1,children:[(0,V.jsx)(W.ZP,{item:!0,xs:!0,hidden:J,children:(0,V.jsx)(on.Z,{disabled:J,options:S,getOptionLabel:function(e){return e.name},onChange:function(e,t){t&&D(t.id)},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Check List"}))}})}),G.map((function(e,t){return(0,V.jsxs)(r.Fragment,{children:[sn().isEmpty(e)&&(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(on.Z,{disabled:J,options:n,onChange:function(e,t){t&&function(e){if(!S.length)return d({message:"You do not have a check list for inspection."});if(void 0===k)return d({message:"You must select one check list for this inspection"});var t={partnerId:R,techId:+e,subscriptionId:null===I||void 0===I?void 0:I.id,checkListId:k};z((0,tn.ay)(t))}(t.value)},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Assign To"}))}})}),!sn().isEmpty(e)&&(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(ln.Z,{severity:o.jf.complete===e.status?"success":"info",action:o.jf.complete===e.status&&(0,V.jsx)(Z.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return H(e)},children:(0,V.jsx)(mn.Z,{fontSize:"inherit"})}),children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:e.name}),(0,V.jsxs)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:["status: ",e.status]})]})})]},t)}))]}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==h,message:null===h||void 0===h?void 0:h.message,onClose:function(){return p(void 0)}})]})}function gn(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,j.UO)(),m=(0,w.Z)((function(e){return e.vehicleReducer})),h=(0,w.Z)((function(e){return e.jobReducer})),x=(0,y.Z)(),p=(0,r.useContext)(hn),g=p.setCustomerSub,b=p.vehicle,S=p.setVehicle,C=p.setViewSub,A=p.viewSub,k=(0,j.TH)();(0,r.useEffect)((function(){var e=u.id;"idle"===h.getJobsStatus&&x((0,tn.XB)(+e))}),[x,h.getJobsStatus,u.id]),(0,r.useEffect)((function(){m.getCustomerVehicleSubscriptionStatus}),[m.customerSubscriptions,m.getCustomerVehicleSubscriptionStatus]),(0,r.useEffect)((function(){if(k.state){var e=k.state;e.vehicle&&(S(e.vehicle),x((0,nn.$u)(e.vehicle.id)))}b&&x((0,nn.$u)(b.id))}),[x,k.state,S,b]);var N=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t){var n,i;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(X.Z.api.driverBaseURL,"/").concat(t),e.next=3,Ot.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;d(e)},setTimeout((function(){return a(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[b?(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,V.jsxs)(Kt.Z,{children:[(0,V.jsx)(Xt.Z,{component:"img",alt:"green iguana",height:"140",image:en}),(0,V.jsx)(_t.Z,{children:(0,V.jsxs)(v.Z,{variant:"h5",component:"div",children:[b.modelYear," ",b.make," ",b.model]})}),(0,V.jsx)($t.Z,{children:(0,V.jsx)(z.Z,{variant:"contained",color:"secondary",size:"small",children:"Book Inspection"})})]})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,sm:9,md:9,children:[(0,V.jsx)(Kt.Z,{children:(0,V.jsxs)(_t.Z,{children:[(0,V.jsxs)(G.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Make"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.make})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model Year"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.modelYear})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.engineCylinders})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Ownership"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.isOwner?"Owner":"-"})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Date Added"}),(0,V.jsx)(v.Z,{variant:"caption",children:P()(b.createdAt).format("LL")})]})]}),(0,V.jsx)(J.Z,{sx:{my:2}}),(0,V.jsxs)(G.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.model})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.engineModel})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"VIN"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.vin})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.type})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Plate Number"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.plateNumber})]})]}),(0,V.jsx)(J.Z,{sx:{my:2}}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:"Vehicle Papers"}),(0,V.jsxs)(G.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Vehicle Inspection"}),b.vehicleInspectionFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return N(b.vehicleInspectionFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.vehicleInspectionFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Motor Receipt"}),b.motorReceiptFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return N(b.motorReceiptFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.motorReceiptFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Proof Of Ownership"}),b.proofOfOwnershipFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return N(b.proofOfOwnershipFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.proofOfOwnershipFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Road Worthiness"}),b.roadWorthinessFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return N(b.roadWorthinessFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.roadWorthinessFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Registration Number"}),b.registrationNumberFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return N(b.registrationNumberFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.registrationNumberFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Third Party Insurance"}),b.thirdPartyInsuranceFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return N(b.thirdPartyInsuranceFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.thirdPartyInsuranceFileUrl,children:(0,V.jsx)(Bt.Z,{})})]})]})]})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:{xs:2,md:2},children:[(0,V.jsxs)(W.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Estimates"}),(0,V.jsx)(G.Z,{children:(0,V.jsx)(Kt.Z,{children:(0,V.jsx)(_t.Z,{})})})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Subscriptions"}),(0,V.jsx)(G.Z,{children:(0,V.jsx)(Kt.Z,{children:(0,V.jsx)(_t.Z,{children:(0,V.jsx)(Gt.Z,{children:m.customerSubscriptions.length?m.customerSubscriptions.filter((function(e){return e.status!==o.lD.cancel})).map((function(e,t){return(0,V.jsxs)(Jt.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){g(e),C(!0)}(e)},edge:"end","aria-label":"view",children:(0,V.jsx)(Qt.U9w,{})}),children:[(0,V.jsx)(Ht.Z,{children:(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(Qt.RPl,{})})}),(0,V.jsx)(Yt.Z,{primary:"".concat(e.planType),secondary:"(".concat(e.status,") ").concat(e.planCategory," ").concat(e.paymentPlan)})]},t)})):(0,V.jsx)(Jt.ZP,{children:(0,V.jsx)(Yt.Z,{primary:"No Subscriptions"})})})})})})]})]})]})]}):(0,V.jsx)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{children:"No Data"})})}),(0,V.jsx)(Ut,{show:n,title:"Vehicle paper",fullScreen:!0,Content:(0,V.jsx)("img",{width:"50%",src:c,alt:"Vehicle paper",crossOrigin:"anonymous"}),onClose:function(){return a(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"xs",show:A,Content:(0,V.jsx)(Zn,{}),onClose:function(){return C(!1)}})]})}var jn,bn,Sn=n(26864),wn=n(4942),yn=n(76863),Cn={name:{name:"name",label:"Company Full Name*",error:{invalid:"Invalid Company Full Name.",required:"Company Full Name is required"}},phone:{name:"phone",label:"Contact Number*",error:{invalid:"Phone number is invalid",required:"Phone is required"}},email:{name:"email",label:"Email*",error:{invalid:"Email is invalid",required:"Email is required"}},category:{name:"category",label:"Category*",error:{invalid:"Category is invalid",required:"Category is required"}},workshopAddress:{name:"workshopAddress",label:"Workshop Address*",error:{invalid:"Workshop Address is invalid",required:"Workshop Address is required"}},district:{name:"district",label:"District*",error:{invalid:"District is invalid",required:"Please choose district."}},state:{name:"state",label:"State*",error:{invalid:"State is invalid",required:"Please choose state."}},yearOfIncorporation:{name:"yearOfIncorporation",label:"Year Of Incorporation*",error:{invalid:"Year Of Incorporation is invalid",required:"Please provide Year Of Incorporation."}},cac:{name:"cac",label:"CAC*",error:{invalid:"CAC is invalid",required:"Please provide cac."}},vatNumber:{name:"vatNumber",label:"VAT Number",error:{invalid:"VAT Number is invalid",required:"Please provide VAT Number."}},nameOfDirector:{name:"nameOfDirector",label:"Name of Director*",error:{invalid:"Name of Director is invalid",required:"Please provide Name of Director."}},nameOfManager:{name:"nameOfManager",label:"Name of Manager*",error:{invalid:"Name of Manager is invalid",required:"Please provide Name of Manager."}},totalStaff:{name:"totalStaff",label:"Total Staff*",error:{invalid:"Total Staff is invalid",required:"Total Staff is required"}},totalTechnicians:{name:"totalTechnicians",label:"Total Technicians*",error:{invalid:"Total Technicians is invalid",required:"Total Technicians is required"}},logo:{name:"logo",label:"Company Logo*",error:{invalid:"Company Logo is invalid",required:"Company Logo is required"}},googleMap:{name:"googleMap",label:"Google map link*",error:{invalid:"Google map link is invalid",required:"Google map link is required"}},brands:{name:"brands",label:"Brands*",error:{invalid:"Brands is invalid",required:"Brands is required"}},images:{name:"images",label:"Images",error:{invalid:"Images is invalid",required:"Images is required"}},workingHours:{name:"workingHours",label:"Working Hours*",error:{invalid:"Working Hours is invalid",required:"Working Hours is required"}},bankName:{name:"bankName",label:"Bank Name*",error:{invalid:"Bank Name is invalid",required:"Bank Name is required"}},accountName:{name:"accountName",label:"Account Name*",error:{invalid:"Account Name is invalid",required:"Account Name is required"}},accountNumber:{name:"accountNumber",label:"Account Number*",error:{invalid:"Account Number is invalid",required:"Account Number is required"}}},An={fields:Cn,initialValues:{name:"",phone:"",email:"",category:"",state:"",logo:""},schema:[yn.Ry().shape({name:yn.Z_().required(Cn.name.error.required).label(Cn.name.label),phone:yn.Z_().max(11).required(Cn.phone.error.required).label(Cn.phone.label),email:yn.Z_().email().required(Cn.email.error.required).label(Cn.email.label),category:yn.Z_().required(Cn.category.error.required).label(Cn.category.label),state:yn.Z_().required(Cn.state.error.required).label(Cn.state.label),logo:yn.nK().nullable().label(Cn.logo.label)}),yn.Ry().shape((jn={},(0,wn.Z)(jn,Cn.name.name,yn.Z_().required(Cn.name.error.required).label(Cn.name.label)),(0,wn.Z)(jn,Cn.nameOfDirector.name,yn.Z_().required(Cn.nameOfDirector.error.required).label(Cn.nameOfDirector.label)),(0,wn.Z)(jn,Cn.nameOfManager.name,yn.Z_().required(Cn.nameOfManager.error.required).label(Cn.nameOfManager.label)),(0,wn.Z)(jn,Cn.cac.name,yn.Z_().required(Cn.cac.error.required).label(Cn.cac.label)),(0,wn.Z)(jn,Cn.vatNumber.name,yn.Z_().nullable().label(Cn.vatNumber.label)),(0,wn.Z)(jn,Cn.workshopAddress.name,yn.Z_().required().label(Cn.workshopAddress.label)),jn)),yn.Ry().shape((bn={},(0,wn.Z)(bn,Cn.accountName.name,yn.Z_().required(Cn.accountName.error.required).label(Cn.accountName.label)),(0,wn.Z)(bn,Cn.accountNumber.name,yn.Z_().length(10,Cn.accountNumber.error.invalid).required(Cn.accountNumber.error.required).label(Cn.accountNumber.label)),(0,wn.Z)(bn,Cn.bankName.name,yn.Z_().required(Cn.bankName.error.required).label(Cn.bankName.label)),(0,wn.Z)(bn,Cn.googleMap.name,yn.Z_().required(Cn.googleMap.error.required).label(Cn.googleMap.label)),(0,wn.Z)(bn,Cn.logo.name,yn.Z_().required(Cn.logo.error.required).label(Cn.logo.label)),(0,wn.Z)(bn,Cn.phone.name,yn.Z_().required(Cn.phone.error.required).label(Cn.phone.label)),(0,wn.Z)(bn,Cn.totalStaff.name,yn.Z_().required(Cn.totalStaff.error.required).label(Cn.totalStaff.label)),(0,wn.Z)(bn,Cn.totalTechnicians.name,yn.Z_().required(Cn.totalTechnicians.error.required).label(Cn.totalTechnicians.label)),(0,wn.Z)(bn,"brands",yn.IX().of(yn.Ry().shape({name:yn.Z_().nullable(),description:yn.Z_().nullable()})).nullable()),(0,wn.Z)(bn,"workingHours",yn.IX().of(yn.Ry().shape({days:yn.IX().of(yn.Z_()),from:yn.hT().nullable(),to:yn.hT().nullable()}).nullable())),bn))]},Pn=n(27802),kn=n(95683),Nn=An.fields;var Dn=function(e){var t=(0,Sn.u6)(),n=t.handleChange,i=t.values;return(0,V.jsx)(Sn.l0,{autoComplete:"off",children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.name,name:Nn.name.name,label:Nn.name.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.nameOfDirector,name:Nn.nameOfDirector.name,label:Nn.nameOfDirector.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.nameOfManager,name:Nn.nameOfManager.name,label:Nn.nameOfManager.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.cac,name:Nn.cac.name,label:Nn.cac.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.vatNumber,name:Nn.vatNumber.name,label:Nn.vatNumber.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.workshopAddress,name:Nn.workshopAddress.name,label:Nn.workshopAddress.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(ie.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",size:"large",endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})})},En=n(43245),In=n(65370),Tn=n(68087),qn=n(87520),Ln=n(36571),Vn=n(34837),Fn=n(79012),Mn=n(80226);function Rn(e){var t=(0,Sn.u6)(),n=t.errors,i=t.touched,r=t.setFieldValue;return(0,V.jsx)(Ln._,{dateAdapter:qn.Z,children:(0,V.jsxs)(Fn.Z,{sx:e.inputGroupStyle,children:[(0,V.jsx)(Vn.d,{onChange:function(t){r(e.name,t)},value:e.value,renderInput:function(t){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},t),e))}}),(0,V.jsx)(Mn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})})}var Un=n(81278),Bn=An.fields;var On=function(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,Sn.u6)(),c=l.values,d=l.handleChange,u=l.setFieldValue,m=l.errors,h=l.touched,f=(0,w.Z)((function(e){return e.miscellaneousReducer})),p=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===f.getBanksStatus&&p((0,Un.p)())}),[p,f.getBanksStatus]),(0,r.useEffect)((function(){"completed"===f.getBanksStatus&&s(f.banks.filter((function(e){return e.active&&"Nigeria"===e.country})).map((function(e){return{label:e.name,value:e.code}})))}),[f.banks,f.getBanksStatus]),(0,V.jsx)(Sn.l0,{children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,justifyContent:"space-evenly",alignItems:"center",spacing:2,mb:3,children:[(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(z.Z,{endIcon:(0,V.jsx)(En.Z,{}),color:"primary","aria-label":"upload picture",component:"label",children:["upload logo",(0,V.jsx)("input",{hidden:!0,name:Bn.logo.name,onChange:function(e){var t=e.target.files;t&&u(Bn.logo.name,t[0])},accept:"image/*",type:"file"})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:c.logo&&(0,V.jsx)("img",{src:fe(c.logo),crossOrigin:"anonymous",width:"10%",alt:"logo"})})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Pn.Z,{onChange:d,value:c.phone,name:Bn.phone.name,label:Bn.phone.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Pn.Z,{onChange:d,value:c.totalStaff,name:Bn.totalStaff.name,label:Bn.totalStaff.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Pn.Z,{onChange:d,value:c.totalTechnicians,name:Bn.totalTechnicians.name,label:Bn.totalTechnicians.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Pn.Z,{onChange:d,value:c.googleMap,name:Bn.googleMap.name,label:Bn.googleMap.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{variant:"h6",children:"Bank Account"})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(on.Z,{options:a,value:{label:c.bankName,value:c.bankName},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){t&&u(Bn.bankName.name,t.label)},renderInput:function(e){return(0,V.jsx)(Pn.Z,(0,x.Z)((0,x.Z)({},e),{},{name:Bn.bankName.name,label:Bn.bankName.label,onChange:d,value:c.bankName}))}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Pn.Z,{onChange:d,value:c.accountName,name:Bn.accountName.name,label:Bn.accountName.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Pn.Z,{onChange:d,value:c.accountNumber,name:Bn.accountNumber.name,label:Bn.accountNumber.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{variant:"h6",children:"Brands"})}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:Bn.brands.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.brands.length>0&&c.brands.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)(W.ZP,{item:!0,xs:"name"===e?4:8,sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"brands.".concat(n,".").concat(e),label:e,value:t[e],onChange:d,error:void 0!==m.brands&&void 0!==h.brands})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",description:""})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{variant:"h6",children:"Working Hours"})}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:Bn.workingHours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.workingHours.length>0&&c.workingHours.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:"days"===e?(0,V.jsx)(W.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(on.Z,{multiple:!0,options:o.z1,value:t.days,onChange:function(t,i){u("workingHours.".concat(n,".").concat(e),i)},onInputChange:function(t,i){u("workingHours.".concat(n,".").concat(e),i)},renderInput:function(t){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},t),{},{name:"workingHours.".concat(n,".").concat(e)}))}})}):(0,V.jsx)(W.ZP,{item:!0,xs:3,sx:{mb:2},children:(0,V.jsx)(Rn,{fullWidth:!0,variant:"outlined",name:"workingHours.".concat(n,".").concat(e),label:e,value:t[e]})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({days:[],from:new Date,to:new Date})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(ie.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",size:"large",endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})})},Wn=An.schema;var zn=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)({cac:"",name:"",nameOfDirector:"",nameOfManager:"",vatNumber:"",workshopAddress:""}),m=(0,i.Z)(u,2),h=m[0],p=m[1],Z=(0,r.useState)({accountName:"",accountNumber:"",bankName:"",googleMap:"",logo:"",phone:"",totalStaff:"",totalTechnicians:"",brands:[{name:"",description:""}],workingHours:[{days:[],from:new Date,to:new Date}]}),g=(0,i.Z)(Z,2),j=g[0],b=g[1],S=(0,r.useContext)(dr).partner,C=(0,w.Z)((function(e){return e.partnerReducer})),A=(0,y.Z)();return(0,r.useEffect)((function(){if(S){p((function(e){return(0,x.Z)((0,x.Z)({},e),{},{cac:S.cac?S.cac:"",name:S.name?S.name:"",nameOfDirector:S.nameOfDirector?S.nameOfDirector:"",nameOfManager:S.nameOfManager?S.nameOfManager:"",vatNumber:S.vatNumber?S.vatNumber:"",workshopAddress:S.contact.address?S.contact.address:""})}));var e=S.workingHours,t=S.brands;b((function(n){return(0,x.Z)((0,x.Z)({},n),{},{logo:S.logo?S.logo:"",accountName:S.accountName?S.accountName:"",googleMap:S.googleMap?S.googleMap:"",accountNumber:S.accountNumber?S.accountNumber:"",bankName:S.bankName?S.bankName:"",phone:S.phone?S.phone:"",totalStaff:S.totalStaff?"".concat(S.totalStaff):"",totalTechnicians:S.totalTechnicians?"".concat(S.totalTechnicians):"",workingHours:e||[{days:[],from:new Date,to:new Date}],brands:t||[{name:"",description:""}]})}))}}),[S]),(0,r.useEffect)((function(){"completed"===C.createPartnerKycStatus&&a({message:C.createPartnerKycSuccess})}),[C.createPartnerKycSuccess,C.createPartnerKycStatus]),(0,r.useEffect)((function(){"failed"===C.createPartnerKycStatus&&C.createPartnerKycError&&d({message:C.createPartnerKycError})}),[C.createPartnerKycError,C.createPartnerKycStatus]),(0,r.useEffect)((function(){"completed"===C.createPartnerSettingsStatus&&a({message:C.createPartnerSettingsSuccess})}),[C.createPartnerSettingsSuccess,C.createPartnerSettingsStatus]),(0,r.useEffect)((function(){"failed"===C.createPartnerSettingsStatus&&C.createPartnerSettingsError&&d({message:C.createPartnerSettingsError})}),[C.createPartnerSettingsError,C.createPartnerSettingsStatus]),(0,r.useEffect)((function(){return function(){A((0,ot._v)()),A((0,ot.EF)())}}),[A]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(G.Z,{spacing:5,divider:(0,V.jsx)(J.Z,{orientation:"horizontal"}),children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"h6",children:"KYC"}),(0,V.jsx)(f.Z,{sx:{my:1}}),(0,V.jsx)(Sn.J9,{onSubmit:function(e){if(!S)throw new Error(o.X3.internalError);A((0,He.U)({partnerId:S.id,data:e}))},initialValues:h,validationSchema:Wn[1],enableReinitialize:!0,children:(0,V.jsx)(Dn,{isSubmitting:"loading"===C.createPartnerKycStatus})})]}),(0,V.jsx)(f.Z,{children:(0,V.jsx)(Sn.J9,{onSubmit:function(e){if(!S)throw new Error(o.X3.internalError);A((0,He.ZP)({partnerId:S.id,data:e}))},initialValues:j,validationSchema:Wn[2],enableReinitialize:!0,children:(0,V.jsx)(On,{isSubmitting:"loading"===C.createPartnerKycStatus})})})]}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==n,message:null===n||void 0===n?void 0:n.message,onClose:function(){return a(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}})]})},Gn=n(11304),Jn=n(13239);function Hn(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useRef)(null),l=(0,Xe.Z)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(_e.Z,{centered:!0,value:a,onChange:function(e,t){s(t)},"aria-label":"icon label tabs example",children:e.tabMenus.map((function(e,t){return(0,V.jsx)($e.Z,(0,x.Z)({disabled:e.disableTab,label:e.name},tt(t)),t)}))}),e.tabMenus.map((function(t,n){return(0,V.jsx)(et.Z,{direction:e.slideDirection,in:a===n,container:o.current,children:(0,V.jsx)("div",{children:(0,V.jsx)(rt,{value:a,index:n,dir:l.direction,children:(0,V.jsx)(f.Z,{sx:{pt:6},children:(0,V.jsx)(t.Element,{})})})})},n)}))]})}var Yn=(0,Gn.D)({matchFrom:"any",stringify:function(e){return"".concat(e.query)}}),Qn=(0,r.createContext)(null);var Kn=function(){var e=r.useState(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=r.useState(""),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],p=(0,r.useState)(null),v=(0,i.Z)(p,2),Z=v[0],g=v[1],b=(0,w.Z)((function(e){return e.partnerReducer})),S=(0,w.Z)((function(e){return e.rideShareReducer})),C=(0,y.Z)(),A=(0,j.UO)(),P=$(),k=(0,r.useMemo)((function(){return P.isTechAdmin&&P.user?P.user.partner.id:A.id?+A.id:void 0}),[P.isTechAdmin,P.user,A.id]);return(0,r.useEffect)((function(){"idle"===b.getDriversFilterDataStatus&&k&&C((0,He.RJ)(+k))}),[C,k,b.getDriversFilterDataStatus]),(0,r.useEffect)((function(){"completed"===b.getDriversFilterDataStatus&&h(b.driversFilterData)}),[b.driversFilterData,b.getDriversFilterDataStatus]),(0,r.useEffect)((function(){"completed"===S.getDriverStatus&&g(S.driver)}),[S.driver,S.getDriverStatus]),(0,r.useEffect)((function(){return function(){g(null),C((0,ot.Nh)())}}),[C]),(0,V.jsxs)(Qn.Provider,{value:{driver:Z,setDriver:g},children:[(0,V.jsxs)(G.Z,{direction:"column",spacing:5,children:[(0,V.jsx)(W.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(on.Z,{filterOptions:Yn,inputValue:l,value:n,loading:"loading"===b.getDriversFilterDataStatus,getOptionLabel:function(e){return e.fullName},isOptionEqualToValue:function(e,t){return e.fullName===t.fullName},onChange:function(e,t){var n;a(t),(n=null===t||void 0===t?void 0:t.id)&&C((0,We.pQ)(n))},onInputChange:function(e,t,n){c(t),"clear"===n&&(g(null),pe())},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{label:"Search driver by First name, last name, car plate number.",InputProps:(0,x.Z)((0,x.Z)({},e.InputProps),{},{endAdornment:(0,V.jsxs)(r.Fragment,{children:["loading"===b.getDriversFilterDataStatus?(0,V.jsx)(Jn.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},options:m})})}),(0,V.jsxs)(f.Z,{hidden:null===Z,children:[(0,V.jsx)(J.Z,{orientation:"horizontal"}),(0,V.jsx)(Se.Z,{sx:{p:3},children:(0,V.jsx)(Hn,{slideDirection:"left",tabMenus:lr})})]})]}),(0,V.jsx)(ze.Z,{show:"loading"===S.getDriverStatus})]})},Xn=n(5397),_n={fields:{name:{name:"name",label:"Payment Plans Name*",error:{invalid:"Invalid Payment Plans.",required:"Payment Plans name is required"}},discount:{name:"discount",label:"Discount (%)",error:{invalid:"Discount is invalid",required:"Phone is required"}},plan:{name:"plan",label:"Select Plans*",error:{invalid:"Plan is invalid",required:"Plans is required"}},coverage:{name:"coverage",label:"Coverage",error:{invalid:"Coverage is invalid",required:"Coverage is required"}},description:{name:"description",label:"Description",error:{invalid:"Description is invalid",required:"Description is required."}},parameter:{name:"parameter",label:"Parameters",error:{invalid:"Parameters is invalid",required:"Parameters is required"}},pricing:{name:"pricing",label:"Pricing*",error:{invalid:"Pricing is invalid",required:"Pricing is required"}}},initialValues:{name:"",discount:"",plan:"",coverage:"",description:[{value:""}],parameter:[{name:"",unit:"",value:""}],pricing:[{interval:"",amount:""}]},schema:yn.Ry().shape({name:yn.Z_().required().label("Payment Plans Name"),discount:yn.Z_().nullable().label("Discount"),plan:yn.Z_().required().label("Plans Name"),coverage:yn.Z_().required().label("Coverage"),description:yn.IX().of(yn.Ry()).nullable().label("Payment Plans Description"),parameter:yn.IX().of(yn.Ry()).nullable().label("Payment Plans Coverage"),pricing:yn.IX().of(yn.Ry()).required().label("Payment Plans Pricing")})},$n=n(63694),ei=n(47071),ti=n(63466),ni=["None","Litre"],ii=[{label:"Annually",value:"annually"},{label:"Biannually",value:"biannually"},{label:"Quarterly",value:"quarterly"},{label:"Monthly",value:"monthly"},{label:"Weekly",value:"weekly"},{label:"Daily",value:"daily"},{label:"Hourly",value:"hourly"}];function ri(){var e,t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,Sn.u6)(),l=o.handleChange,c=o.values,d=o.errors,u=o.touched,m=(0,w.Z)((function(e){return e.partnerReducer}));return(0,r.useEffect)((function(){s(m.plans.map((function(e){return{label:e.label.replaceAll("_"," "),value:e.label}})))}),[m.plans]),(0,V.jsxs)(Sn.l0,{autoComplete:"off",children:[(0,V.jsxs)(W.ZP,{spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},container:!0,children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:l,value:c.name,name:_n.fields.name.name,label:_n.fields.name.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)($n.Z,{onChange:l,value:c.plan,name:_n.fields.plan.name,label:_n.fields.plan.label,data:a})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:l,value:c.discount,name:_n.fields.discount.name,label:_n.fields.discount.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)($n.Z,{onChange:l,value:c.coverage,name:_n.fields.coverage.name,label:_n.fields.coverage.label,data:[{label:"NationWide",value:"NATION_WIDE"}]})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"subtitle1",display:"block",children:"Pricing Models"})]}),(0,V.jsxs)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:[(0,V.jsx)(Sn.F2,{name:_n.fields.pricing.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.pricing.length>0&&c.pricing.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:"interval"===e?(0,V.jsx)(W.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(se.Z,{select:!0,fullWidth:!0,variant:"outlined",name:"pricing.".concat(n,".").concat(e),label:e,onChange:l,value:t.interval,children:ii.map((function(e,t){return(0,V.jsx)(le.Z,{value:e.value,children:e.label},t)}))})}):(0,V.jsx)(W.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"pricing.".concat(n,".").concat(e),label:e,onChange:l})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({interval:"",amount:""})},children:(0,V.jsx)(Tn.Z,{})})})]})}}),(null===d||void 0===d?void 0:d.pricing)&&(null===u||void 0===u?void 0:u.pricing)&&(0,V.jsx)(ei.Z,{children:null===d||void 0===d||null===(e=d.pricing)||void 0===e?void 0:e.toString()})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"subtitle1",display:"block",children:"Description(s)"})]}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:_n.fields.description.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.description.length>0&&c.description.map((function(t,n){return(0,V.jsx)(W.ZP,{item:!0,xs:11,children:Object.keys(t).map((function(t){return(0,V.jsx)(Fn.Z,{sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"description.".concat(n,".").concat(t),label:_n.fields.description.label,onChange:l,InputProps:{endAdornment:(0,V.jsx)(ti.Z,{position:"end",children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})}})},"".concat(t))}))},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({value:""})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",display:"block",children:"Parameter(s)"})]}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:_n.fields.parameter.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.parameter.length>0&&c.parameter.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:"unit"===e?(0,V.jsx)(W.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(se.Z,{select:!0,fullWidth:!0,variant:"outlined",name:"parameter.".concat(n,".").concat(e),label:e,onChange:l,value:t.unit,children:ni.map((function(e,t){return(0,V.jsx)(le.Z,{value:e,children:e},t)}))})}):(0,V.jsx)(W.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parameter.".concat(n,".").concat(e),label:e,onChange:l})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",unit:"",value:""})},children:(0,V.jsx)(Tn.Z,{})})})]})}})})]}),(0,V.jsx)(W.ZP,{item:!0,mt:1,sx:{mx:"auto"},children:(0,V.jsx)(ie.Z,{loading:"loading"===m.addPaymentPlanStatus,fullWidth:!0,variant:"contained",type:"submit",endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})}var ai=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"name",headerName:"Name",headerAlign:"left",width:220,align:"left",type:"string",sortable:!0},{field:"plan",headerName:"Plan",headerAlign:"center",width:300,align:"center",type:"string",sortable:!0,valueGetter:function(e){var t=e.row.plan;return t?t.label.replaceAll("_"," "):""}},{field:"coverage",headerName:"Coverage",headerAlign:"center",width:180,align:"center",type:"string",sortable:!0,valueGetter:function(e){var t=e.row.coverage;return t?t.replaceAll("_"," "):""}},{field:"createdAt",headerName:"Created At",headerAlign:"center",width:180,align:"center",type:"string",sortable:!0,valueFormatter:function(e){var t=e.value;return t?P()(t).utc(!0).format("LL"):""}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",width:180,align:"center",type:"string",sortable:!0,valueFormatter:function(e){var t=e.value;return t?P()(t).utc(!0).format("LL"):""}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(Xn.Z,{sx:{color:"red"}}),onClick:function(){return e.onDelete(t.row)},label:"Delete",showInMenu:!1},1)]}}]},si=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(),b=(0,i.Z)(g,2),S=b[0],C=b[1],A=(0,r.useState)(),k=(0,i.Z)(A,2),N=k[0],D=k[1],E=(0,j.UO)(),I=(0,w.Z)((function(e){return e.partnerReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"completed"===I.addPaymentPlanStatus&&a(!1)}),[I.addPaymentPlanStatus]),(0,r.useEffect)((function(){"completed"===I.deletePaymentPlanStatus&&C({message:I.deletePaymentPlanSuccess})}),[I.deletePaymentPlanStatus,I.deletePaymentPlanSuccess]),(0,r.useEffect)((function(){"failed"===I.deletePaymentPlanStatus&&I.deletePaymentPlanError&&Z({message:I.deletePaymentPlanError})}),[I.deletePaymentPlanStatus,I.deletePaymentPlanError]),(0,r.useEffect)((function(){return function(){T((0,ot.gP)())}}),[T]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",mb:1,children:[(0,V.jsx)(W.ZP,{item:!0}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(z.Z,{onClick:function(){a(!0)},size:"small",variant:"contained",color:"success",children:"Add"})})]}),(0,V.jsx)(R,{loading:"loading"===I.getPaymentPlansStatus,showToolbar:!0,rows:I.paymentPlans,columns:ai({onView:function(e){d(!0),D(e)},onDelete:function(e){x(!0),D(e)}})})]}),(0,V.jsx)(Ut,{fullWidth:!0,size:"md",show:n,Content:(0,V.jsx)(Sn.J9,{initialValues:_n.initialValues,validationSchema:_n.schema,onSubmit:function(e,t){var n={name:e.name,discount:e.discount,plan:e.plan,coverage:e.coverage,descriptions:e.description,parameters:e.parameter,pricing:e.pricing};if(e.pricing.forEach((function(e){if(!e.interval.length||!e.amount.length)return Z({message:"Pricing is required."})})),void 0===E.id)throw Error("Partner ID is required");T((0,He.QR)({paymentPlan:n,partnerId:E.id})),t.resetForm()},children:(0,V.jsx)(ri,{})}),onClose:function(){a(!1)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==(null===v||void 0===v?void 0:v.message),message:null===v||void 0===v?void 0:v.message,onClose:function(){return Z(void 0)}}),(0,V.jsx)(Ut,{show:c,Content:N?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Plan Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:dn().words(N.name).replaceAll("_"," ")})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Label"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:N.label})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Coverage"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:N.coverage})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"On Promo"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:N.hasPromo?"Yes":"No"})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Date Added"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:P()(N.createdAt).format("LLL")})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Date Modified"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:P()(N.updatedAt).format("LLL")})]})]}):null,onClose:function(){return d(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,show:h,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return x(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:function(){N&&(T((0,He.YL)(N.id)),x(!1))},children:"Agree"})]}),onClose:function(){return x(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==S,message:null===S||void 0===S?void 0:S.message,onClose:function(){return C(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==v,message:null===v||void 0===v?void 0:v.message,onClose:function(){return Z(void 0)}})]})},oi={fields:{programme:{name:"programme",label:"Choose Programme*",error:{invalid:"Programme is invalid",required:"Programme is required"}},serviceMode:{name:"serviceMode",label:"Choose Service Mode*",error:{invalid:"Service Mode is invalid",required:"Service Mode is required"}},label:{name:"label",label:"Plans Name*",error:{invalid:"Invalid name.",required:"Partner name is required"}},minVehicles:{name:"minVehicles",label:"Min Vehicle(s)*",error:{invalid:"Min Vehicle(s) is invalid",required:"Min Vehicle(s) is required"}},maxVehicles:{name:"maxVehicles",label:"Max Vehicle(s)*",error:{invalid:"Max Vehicle(s) is invalid",required:"Max Vehicle(s) is required"}},validity:{name:"validity",label:"Interval*",error:{invalid:"Payment Interval is invalid",required:"Payment Interval is required"}},mobile:{name:"mobile",label:"No of Mobile Service*",error:{invalid:"Mobile Service is invalid.",required:"Mobile Service is required."}},driveIn:{name:"driveIn",label:"No of Drive-in Service*",error:{invalid:"Drive-in Service is invalid",required:"Drive-in Service is required."}}},initialValues:{programme:"Inspection",serviceMode:"Mobile",label:"",minVehicles:"0",maxVehicles:"0",validity:"",mobile:"0",driveIn:"0"},schema:yn.Ry().shape({programme:yn.Z_().required().label("Programme"),serviceMode:yn.Z_().required().label("Service Mode"),label:yn.Z_().required().label("Plans Name"),minVehicles:yn.Z_().required().label("Minimum Vehicle"),maxVehicles:yn.Z_().required().label("Maximum  Vehicle"),validity:yn.Z_().required().label("Plans Validity"),mobile:yn.Z_().required().label("No of Mobile Service"),driveIn:yn.Z_().required().label("No of Drive-in Service")})},li=n(68096),ci=n(17133),di=n(88970),ui=n(85523);var mi=function(e){var t=(0,Sn.u6)(),n=t.errors,i=t.touched;return(0,V.jsxs)(li.Z,{error:n[e.name]&&i[e.name],children:[(0,V.jsx)(ci.Z,{id:"row-radio-buttons-group-label",children:e.label}),(0,V.jsx)(di.Z,(0,x.Z)((0,x.Z)({"aria-labelledby":"row-radio-buttons-group-label",row:e.row},e),{},{children:e.buttons.map((function(e,t){return(0,V.jsx)(ui.Z,{value:e.value,control:(0,V.jsx)(ae.Z,{}),label:e.label},t)}))})),(0,V.jsx)(Mn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})};function hi(){var e=(0,Sn.u6)(),t=e.handleChange,n=e.values,i=e.setFieldValue;(0,r.useEffect)((function(){"Mobile"!==n.serviceMode&&"Drive-in"!==n.serviceMode&&"Hybrid"!==n.serviceMode||(i("mobile","0"),i("driveIn","0"))}),[i,n.serviceMode]);var a=(0,w.Z)((function(e){return e.partnerReducer})),s=(0,r.useMemo)((function(){return parseInt(n.driveIn)+parseInt(n.mobile)}),[n.driveIn,n.mobile]);return(0,V.jsx)(Sn.l0,{children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",sx:{p:1},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(mi,{row:!0,name:oi.fields.programme.name,label:oi.fields.programme.label,value:n.programme,buttons:[{label:"Inspection",value:"Inspection"},{label:"Maintenance",value:"Maintenance"}],onChange:t})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(mi,{row:!0,name:oi.fields.serviceMode.name,label:oi.fields.serviceMode.label,value:n.serviceMode,buttons:[{label:"Mobile",value:"Mobile"},{label:"Drive-in",value:"Drive-in"},{label:"Hybrid",value:"Hybrid"}],onChange:t})}),(0,V.jsx)(W.ZP,{item:!0,xs:6,children:(0,V.jsx)(Pn.Z,{fullWidth:!0,onChange:t,value:n.label,name:oi.fields.label.name,label:oi.fields.label.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.minVehicles,name:oi.fields.minVehicles.name,label:oi.fields.minVehicles.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.maxVehicles,name:oi.fields.maxVehicles.name,label:oi.fields.maxVehicles.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0",max:"12"},onChange:t,value:n.validity,name:oi.fields.validity.name,label:"".concat(oi.fields.validity.label," (month)")})}),(0,V.jsx)(W.ZP,{hidden:"Mobile"===n.serviceMode,item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.driveIn,name:oi.fields.driveIn.name,label:oi.fields.driveIn.label})}),(0,V.jsx)(W.ZP,{hidden:"Drive-in"===n.serviceMode,item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.mobile,name:oi.fields.mobile.name,label:oi.fields.mobile.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsxs)(v.Z,{children:["Total ","Maintenance"===n.programme?"Services":"Inspections",": ",s]})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,mt:1,sx:{mx:"auto"},children:(0,V.jsx)(ie.Z,{loading:"loading"===a.addPlanStatus,type:"submit",variant:"contained",color:"info",fullWidth:!0,endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})})}var xi=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"label",headerName:"Name",headerAlign:"left",width:300,align:"left",type:"string",sortable:!0,valueFormatter:function(e){return e.value?e.value.replaceAll("_"," "):""}},{field:"validity",headerName:"Interval",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"serviceMode",headerName:"Service Mode",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"maxVehicles",headerName:"Maximum Vehicles",headerAlign:"center",width:170,align:"center",type:"string",sortable:!0},{field:"minVehicles",headerName:"Minimum Vehicles",headerAlign:"center",width:170,align:"center",type:"string",sortable:!0},{field:"inspections",headerName:"Inspections",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(Xn.Z,{sx:{color:"red"}}),onClick:function(){return e.onDelete(t.row)},label:"Delete",showInMenu:!1},1)]}}]},fi=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(),b=(0,i.Z)(g,2),S=b[0],C=b[1],A=(0,r.useState)(),k=(0,i.Z)(A,2),N=k[0],D=k[1],E=(0,j.UO)(),I=(0,w.Z)((function(e){return e.partnerReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"completed"===I.addPlanStatus&&a(!1)}),[I.addPlanStatus]),(0,r.useEffect)((function(){"completed"===I.deletePlanStatus&&C({message:I.deletePlanSuccess})}),[I.deletePlanStatus,I.deletePlanSuccess]),(0,r.useEffect)((function(){"failed"===I.deletePlanStatus&&I.deletePlanError&&D({message:I.deletePlanError})}),[I.deletePlanError,I.deletePlanStatus]),(0,r.useEffect)((function(){return function(){T((0,ot.Ok)())}}),[T]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",mb:1,children:[(0,V.jsx)(W.ZP,{item:!0}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(z.Z,{onClick:function(){a(!0)},size:"small",variant:"contained",color:"success",children:"Add"})})]}),(0,V.jsx)(R,{loading:"loading"===I.getPlansStatus,showToolbar:!0,rows:I.plans,columns:xi({onView:function(e){d(!0),Z(e)},onDelete:function(e){x(!0),Z(e)}})})]}),(0,V.jsx)(Ut,{fullWidth:!0,size:"md",show:n,Content:(0,V.jsx)(Sn.J9,{validationSchema:oi.schema,initialValues:oi.initialValues,onSubmit:function(e,t){var n={label:e.label,minVehicles:+e.minVehicles,maxVehicles:+e.maxVehicles,validity:"".concat(e.validity," months"),mobile:+e.mobile,driveIn:+e.driveIn,inspections:parseInt(e.driveIn)+parseInt(e.mobile),programme:e.programme,serviceMode:e.serviceMode};if(void 0===E.id)throw Error("Partner ID is required");T((0,He.o$)({plan:n,partnerId:E.id})),t.resetForm()},children:(0,V.jsx)(hi,{})}),onClose:function(){a(!1)}}),(0,V.jsx)(Ut,{show:c,Content:v?(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Plan Name"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:dn().words(v.label).replaceAll("_"," ")})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Validity"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.validity})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Inspections"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.inspections})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Min/Max Vehicles"}),(0,V.jsxs)(It.Z,{colSpan:4,align:"right",children:[v.minVehicles,"/",v.maxVehicles]})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Total Drive-in"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.driveIn})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Total Mobile"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:v.mobile})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Date Added"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:P()(v.createdAt).format("LLL")})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{colSpan:4,component:"th",scope:"row",children:"Date Modified"}),(0,V.jsx)(It.Z,{colSpan:4,align:"right",children:P()(v.updatedAt).format("LLL")})]})]}):null,onClose:function(){return d(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,show:h,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return x(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:function(){v&&(T((0,He.iP)(v.id)),x(!1))},children:"Agree"})]}),onClose:function(){return x(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==S,message:null===S||void 0===S?void 0:S.message,onClose:function(){return C(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==N,message:null===N||void 0===N?void 0:N.message,onClose:function(){return D(void 0)}})]})},pi={cac:{name:"cac",label:"CAC",error:{invalid:"CAC is invalid",required:"CAC is required"}},phone:{name:"phone",label:"Phone Number",error:{invalid:"Phone Number is invalid",required:"Phone Number is required"}},totalStaff:{name:"totalStaff",label:"Total Staff",error:{invalid:"Total Staff is invalid",required:"Total Staff is required"}},yearOfIncorporation:{name:"yearOfIncorporation",label:"Year of Incorporation",error:{invalid:"Year of Incorporation is invalid",required:"Year of Incorporation is required"}},brands:{name:"brands",label:"Brands",error:{invalid:"Brands is invalid",required:"Brands is required"}},images:{name:"images",label:"Images",error:{invalid:"Images is invalid",required:"Images is required"}},workingHours:{name:"workingHours",label:"Working Hours",error:{invalid:"Working Hours is invalid",required:"Working Hours is required"}}},vi={initialValues:{cac:"",phone:"",totalStaff:"",yearOfIncorporation:new Date,brands:[{name:"",description:"",image:""}],images:[{value:""}],workingHours:[{from:new Date,to:new Date}]},schema:yn.Ry().shape({cac:yn.Z_().nullable().label(pi.cac.label),phone:yn.Z_().nullable().label(pi.phone.label),totalStaff:yn.Z_().nullable().label(pi.totalStaff.label),yearOfIncorporation:yn.Z_().nullable().label(pi.yearOfIncorporation.label),brands:yn.IX().of(yn.Ry()).nullable().label(pi.brands.label),images:yn.IX().of(yn.Ry()).nullable().label(pi.images.label),workingHours:yn.IX().of(yn.Ry()).nullable().label(pi.workingHours.label)}),fields:pi},Zi=n(73540);function gi(e){var t=(0,Sn.u6)(),n=t.errors,i=t.touched,r=t.setFieldValue,a=t.setFieldTouched,s=function(t){a(e.name,0===t.target.value.length)};return(0,V.jsx)(Ln._,{dateAdapter:qn.Z,children:(0,V.jsxs)(Fn.Z,{sx:e.inputGroupStyle,children:[(0,V.jsx)(Zi.$,{views:e.views,onChange:function(t){r(e.name,t)},value:e.value,date:e.value,rawValue:e.value,renderInput:function(t){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)((0,x.Z)({},t),e),{},{onBlur:s}))}}),(0,V.jsx)(Mn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})})}var ji=function(){var e=(0,Sn.u6)(),t=e.handleChange,n=e.values;return(0,V.jsx)(Sn.l0,{children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Pn.Z,{onChange:t,value:n.totalStaff,name:vi.fields.totalStaff.name,label:vi.fields.totalStaff.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Pn.Z,{onChange:t,value:n.cac,name:vi.fields.cac.name,label:vi.fields.cac.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(gi,{views:["year"],value:n.yearOfIncorporation,name:vi.fields.yearOfIncorporation.name,label:vi.fields.yearOfIncorporation.label})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"h6",display:"block",children:"Brands"})]}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:vi.fields.brands.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[n.brands.length>0&&n.brands.map((function(n,i){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(n).map((function(e){return(0,V.jsx)(r.Fragment,{children:"image"===e?(0,V.jsx)(W.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",type:"file",inputProps:{accept:".png, .jpg, .jpeg"},name:"parameter.".concat(i,".").concat(e),onChange:t,value:n.image})}):(0,V.jsx)(W.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"brand.".concat(i,".").concat(e),label:e,onChange:t})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(i)},children:(0,V.jsx)(In.Z,{})})})]},i)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",description:"",image:""})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"h6",display:"block",children:"Working Hours"})]}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:vi.fields.workingHours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[n.workingHours.length>0&&n.workingHours.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)(W.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(gi,{fullWidth:!0,variant:"outlined",name:"workingHour.".concat(n,".").concat(e),label:e,value:t[e],views:["day"]})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({from:new Date,to:new Date})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"h6",display:"block",children:"Images"})]}),(0,V.jsx)(W.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(Sn.F2,{name:vi.fields.images.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[n.images.length>0&&n.images.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)(W.ZP,{item:!0,xs:11,sx:{mb:2},children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"image.".concat(n,".").concat(e),value:t[e],type:"file",inputProps:{accept:".png, .jpg, .jpeg"}})})},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({value:""})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(ie.Z,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",size:"large",endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})})};var bi,Si,wi=function(){return(0,V.jsx)(f.Z,{children:(0,V.jsx)(Sn.J9,{validationSchema:vi.schema,initialValues:vi.initialValues,onSubmit:function(){},children:(0,V.jsx)(ji,{})})})},yi=n(38820),Ci=n(43992),Ai=n(26784),Pi={firstName:{name:"firstName",label:"First Name*",error:{invalid:"Invalid First Name.",required:"First Name is required"}},lastName:{name:"lastName",label:"Last Name*",error:{invalid:"Invalid Last Name",required:"Last Name is required"}},email:{name:"email",label:"Email*",error:{invalid:"Invalid email.",required:"Email is required"}},phone:{name:"phone",label:"Phone",error:{invalid:"Invalid Phone Number",required:"Phone Number is required"}},password:{name:"password",label:"Password*",error:{invalid:"Password must contain 8 to 20 characters,\n         and at least One, uppercase letter, lowercase letter, \n         special case character e.g @!&, and number",required:"Password is required"}},confirmPassword:{name:"confirmPassword",label:"Confirm Password*",error:{invalid:"Passwords do not match",required:"Confirm Password is required"}},active:{name:"active",label:"Active*",error:{invalid:"Active is invalid",required:"Active is required"}}},ki={fields:Pi,initialValues:{confirmPassword:"",email:"",firstName:"",lastName:"",password:"",phone:"",active:!1},schema:[yn.Ry().shape((bi={},(0,wn.Z)(bi,Pi.firstName.name,yn.Z_().max(80,Pi.firstName.error.invalid).label(Pi.firstName.label).required(Pi.firstName.error.required)),(0,wn.Z)(bi,Pi.lastName.name,yn.Z_().max(80,Pi.lastName.error.invalid).label(Pi.lastName.label).required(Pi.lastName.error.required)),(0,wn.Z)(bi,Pi.email.name,yn.Z_().email(Pi.email.error.invalid).required(Pi.email.error.required).label(Pi.email.label)),(0,wn.Z)(bi,Pi.phone.name,yn.Z_().max(11,Pi.phone.error.invalid).required(Pi.phone.error.required).label(Pi.phone.label)),(0,wn.Z)(bi,Pi.password.name,yn.Z_().required(Pi.password.error.required).matches(new RegExp(o.mS),Pi.password.error.invalid).label(Pi.password.label)),(0,wn.Z)(bi,Pi.confirmPassword.name,yn.Z_().oneOf([yn.iH(Pi.password.name),null],Pi.confirmPassword.error.invalid).label(Pi.confirmPassword.label).required(Pi.confirmPassword.error.required)),(0,wn.Z)(bi,Pi.active.name,yn.O7().oneOf([!0],Pi.active.error.required).required(Pi.active.error.required)),bi)),yn.Ry().shape((Si={},(0,wn.Z)(Si,Pi.firstName.name,yn.Z_().max(80,Pi.firstName.error.invalid).label(Pi.firstName.label).required(Pi.firstName.error.required)),(0,wn.Z)(Si,Pi.lastName.name,yn.Z_().max(80,Pi.lastName.error.invalid).label(Pi.lastName.label).required(Pi.lastName.error.required)),(0,wn.Z)(Si,Pi.email.name,yn.Z_().email(Pi.email.error.invalid).required(Pi.email.error.required).label(Pi.email.label)),(0,wn.Z)(Si,Pi.phone.name,yn.Z_().max(11,Pi.phone.error.invalid).required(Pi.phone.error.required).label(Pi.phone.label)),(0,wn.Z)(Si,Pi.active.name,yn.O7().oneOf([!0],Pi.active.error.required).required(Pi.active.error.required)),Si))]},Ni=n(148),Di=n(89891);var Ei=function(e){var t=(0,Sn.u6)(),n=t.errors,i=t.touched;return(0,V.jsxs)(Fn.Z,{children:[(0,V.jsx)(ui.Z,{control:(0,V.jsx)(Di.Z,{checked:e.value,onChange:e.onChange,name:e.name,onBlur:e.onBlur,size:e.size}),label:e.label}),(0,V.jsx)(Mn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})},Ii=ki.fields;var Ti=function(e){var t=(0,Sn.u6)(),n=t.handleChange,i=t.values,a=t.resetForm,s=(0,r.useContext)(Mi),o=s.showCreate,l=s.showEdit;return(0,r.useEffect)((function(){o&&l||a()}),[a,o,l]),(0,V.jsx)(Sn.l0,{children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(Ei,{onChange:n,value:i.active,name:Ii.active.name,label:Ii.active.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.firstName,name:Ii.firstName.name,label:Ii.firstName.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.lastName,name:Ii.lastName.name,label:Ii.lastName.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.email,name:Ii.email.name,label:Ii.email.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.phone,name:Ii.phone.name,label:Ii.phone.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.password,name:Ii.password.name,label:Ii.password.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:n,value:i.confirmPassword,name:Ii.confirmPassword.name,label:Ii.confirmPassword.label})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(ie.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",endIcon:(0,V.jsx)(Ni.Z,{}),children:"Submit"})]})]})})},qi=n(20068),Li=n(26827),Vi=n(5092),Fi=function(e){var t=e.setShow,n=(0,r.useState)(!1),a=(0,i.Z)(n,2),s=a[0],l=a[1],c=(0,r.useState)(!1),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),p=(0,i.Z)(h,2),Z=p[0],g=p[1],C=(0,r.useState)(),A=(0,i.Z)(C,2),D=A[0],E=A[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,r.useState)([]),M=(0,i.Z)(F,2),U=M[0],B=M[1],O=$(),H=(0,r.useContext)(Mi),Y=H.detail,Q=H.setShowViewJob,K=H.showViewJob,X=H.job,_=H.setJob,ee=(0,j.UO)(),te=(0,j.s0)(),ie=(0,w.Z)((function(e){return e.jobReducer})),re=(0,w.Z)((function(e){return e.technicianReducer})),ae=(0,y.Z)();(0,r.useEffect)((function(){"idle"===re.getTechniciansStatus&&(ee.id?ae((0,Ge.ug)(+ee.id)):ae((0,Ge.tG)()))}),[ae,ee.id,re.getTechniciansStatus]),(0,r.useEffect)((function(){"completed"===re.getTechniciansStatus&&B(re.technicians.filter((function(e){return!e.hasJob&&e.active})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})))}),[re.getTechniciansStatus,re.technicians]),(0,r.useEffect)((function(){var e;return"completed"===ie.cancelJobStatus&&(E({message:ie.cancelJobSuccess}),ee.id?ae((0,Ge.ug)(+ee.id)):ae((0,Ge.tG)()),e=setTimeout((function(){t&&t(!1)}),2e3)),function(){clearTimeout(e)}}),[ae,ie.cancelJobStatus,ie.cancelJobSuccess,ee.id,t]),(0,r.useEffect)((function(){"failed"===ie.cancelJobStatus&&ie.cancelJobError&&L({message:ie.cancelJobError})}),[ie.cancelJobError,ie.cancelJobStatus]),(0,r.useEffect)((function(){var e;return"completed"===ie.reassignJobStatus&&(E({message:ie.reassignJobSuccess}),ee.id?ae((0,Ge.ug)(+ee.id)):ae((0,Ge.tG)()),e=setTimeout((function(){t&&t(!1)}),2e3)),function(){clearTimeout(e)}}),[ae,ie.reassignJobStatus,ie.reassignJobSuccess,ee.id,t]),(0,r.useEffect)((function(){"failed"===ie.reassignJobStatus&&ie.reassignJobError&&L({message:ie.reassignJobError})}),[ie.reassignJobError,ie.reassignJobStatus]);var oe=(0,r.useMemo)((function(){var e=0,t=0,n=0;return Y&&(e=Y.jobs.filter((function(e){return e.status===o.jf.pending})).length,t=Y.jobs.filter((function(e){return e.status===o.jf.complete})).length,n=Y.jobs.filter((function(e){return e.status===o.jf.inProgress})).length),{pending:e,complete:t,inProgress:n}}),[Y]),le=(0,r.useCallback)((function(e){_(e),Q(!0)}),[_,Q]),de=(0,r.useCallback)((function(e){g(e.id),_(e),l(!0)}),[_]),ue=(0,r.useCallback)((function(e){_(e),m(!0)}),[_]),me=(0,r.useCallback)((function(e){return te("/job-check-list-report/".concat(e.id),{state:{job:e}})}),[te]),he=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"type",headerName:"Type",headerAlign:"center",align:"center",sortable:!0,type:"string",width:180},{field:"status",headerName:"Status",headerAlign:"center",align:"center",sortable:!0,type:"string",width:150,renderCell:function(e){var t=e.value;return t===o.jf.pending?(0,V.jsx)(b.Z,{label:t,color:"warning"}):t===o.jf.inProgress?(0,V.jsx)(b.Z,{label:t,color:"error"}):t===o.jf.complete?(0,V.jsx)(b.Z,{label:t,color:"success"}):""}},{field:"jobDate",headerName:"Completed Date",headerAlign:"center",align:"center",sortable:!0,type:"dateTime",width:200,valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",sortable:!0,type:"dateTime",width:200,valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):""}},{field:"actions",type:"actions",headerAlign:"center",align:"center",width:200,getActions:function(e){var t=e.row;return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(qi.Z,{title:"view job",children:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}})}),onClick:function(){return le(e.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{hidden:!O.isTechAdmin,icon:(0,V.jsx)(qi.Z,{title:"view report",children:(0,V.jsx)(Li.Z,{sx:{color:"limegreen"}})}),onClick:function(){return me(e.row)},label:"Edit",showInMenu:!1,sx:{display:t.status===o.jf.complete?"block":"none"}},1),(0,V.jsx)(k.u,{sx:{display:t.status===o.jf.complete?"none":"block"},icon:(0,V.jsx)(qi.Z,{title:"reassign job",children:(0,V.jsx)(Vi.Z,{sx:{color:"yellowgreen"}})}),onClick:function(){return ue(t)},label:"View",showInMenu:!1},2),(0,V.jsx)(k.u,{sx:{display:t.status===o.jf.complete?"none":"block"},icon:(0,V.jsx)(qi.Z,{title:"cancel job",children:(0,V.jsx)(ne.Z,{sx:{color:"orangered"}})}),onClick:function(){return de(t)},label:"View",showInMenu:!1},3)]}}]}),[O.isTechAdmin,le,me,de,ue]);return(0,V.jsxs)(r.Fragment,{children:[Y?(0,V.jsxs)(G.Z,{spacing:4,divider:(0,V.jsx)(J.Z,{orientation:"horizontal"}),children:[(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Kt.Z,{children:(0,V.jsxs)(_t.Z,{sx:{textAlign:"center"},children:[(0,V.jsx)(v.Z,{variant:"body1",children:"Jobs Pending"}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:oe.pending})]})})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Kt.Z,{children:(0,V.jsxs)(_t.Z,{sx:{textAlign:"center"},children:[(0,V.jsx)(v.Z,{variant:"body1",children:"Jobs In-Progress"}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:oe.inProgress})]})})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Kt.Z,{children:(0,V.jsxs)(_t.Z,{sx:{textAlign:"center"},children:[(0,V.jsx)(v.Z,{variant:"body1",children:"Jobs Completed"}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:oe.complete})]})})})]}),(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsxs)(W.ZP,{item:!0,xs:12,md:4,children:[(0,V.jsx)(v.Z,{variant:"h5",children:"Personal Information"}),(0,V.jsx)(kt.Z,{component:Se.Z,children:(0,V.jsx)(Nt.Z,{children:(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"First Name"}),(0,V.jsx)(It.Z,{component:"td",children:Y.firstName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Last Name"}),(0,V.jsx)(It.Z,{component:"td",children:Y.lastName})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Email"}),(0,V.jsx)(It.Z,{component:"td",children:Y.email})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Phone Number"}),(0,V.jsx)(It.Z,{component:"td",children:Y.phone})]})]})})})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,md:8,children:[(0,V.jsx)(v.Z,{variant:"h5",children:"Jobs"}),(0,V.jsx)(R,{rows:Y.jobs,columns:he})]})]})]}):(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(N.Z,{})}),(0,V.jsx)(Ut,{fullWidth:!0,show:K,Content:X?(0,V.jsx)(kt.Z,{component:Se.Z,children:(0,V.jsx)(Nt.Z,{children:(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Name"}),(0,V.jsx)(It.Z,{component:"td",children:X.name})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Type"}),(0,V.jsx)(It.Z,{component:"td",children:X.type})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Status"}),(0,V.jsx)(It.Z,{component:"td",children:X.status})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Date"}),(0,V.jsx)(It.Z,{component:"td",children:X.jobDate?P()(X.jobDate).format("LLL"):"-"})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Client"}),(0,V.jsx)(It.Z,{component:"td",children:X.vehicleOwner})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",children:"Vehicle Info"}),(0,V.jsxs)(It.Z,{component:"td",children:[X.vehicle.make," ",X.vehicle.model," (",X.vehicle.plateNumber,")"]})]})]})})}):null,onClose:function(){return Q(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,show:s,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return l(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:function(){Z&&X&&(l(!1),ae((0,tn.hV)({partnerId:X.partnerId,data:{jobId:Z,client:"Driver"}})))},children:"Agree"})]}),onClose:function(){return l(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"sm",show:u,Content:(0,V.jsx)(f.Z,{sx:{p:1},children:(0,V.jsx)(on.Z,{options:U,onChange:function(e,t){t&&function(e){if(X&&ee.id){var t=X.rideShareDriverSubscriptionId?X.rideShareDriverSubscriptionId:X.customerSubscriptionId,n=X.rideShareDriverSubscriptionId?"Driver":"Customer",i={partnerId:+ee.id,techId:+e,subscriptionId:t,checkListId:X.checkList.id,jobId:X.id,client:n};ae((0,tn.r$)(i))}m(!1)}(t.value)},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Reassign To"}))}})}),onClose:function(){return m(!1)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==q,message:null===q||void 0===q?void 0:q.message,onClose:function(){return L(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==D,message:null===D||void 0===D?void 0:D.message,onClose:function(){return E(void 0)}}),(0,V.jsx)(ze.Z,{show:"loading"===ie.cancelJobStatus}),(0,V.jsx)(ze.Z,{show:"loading"===ie.reassignJobStatus})]})},Mi=(0,r.createContext)(null);var Ri=function(){var e,t,n=un(),i=(0,w.Z)((function(e){return e.technicianReducer})),a=(0,y.Z)();(0,r.useEffect)((function(){return function(){a((0,Ai.mm)()),a((0,Ai.RZ)()),a((0,Ai.et)()),a((0,Ai.HR)()),n.setInitialValues({active:!1,confirmPassword:"",email:"",firstName:"",lastName:"",password:"",phone:""}),n.setJob(null),n.setDetail(null),n.setShowEdit(!1),n.setShowView(!1),n.setShowViewJob(!1),n.setShowCreate(!1),n.setShowDelete(!1),n.setError(void 0),n.setSuccess(void 0)}}),[a]);var s=(0,r.useMemo)((function(){return i.technicians}),[i.technicians]),l=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e?"".concat(e.row.firstName," ").concat(e.row.lastName):""}},{field:"active",headerName:"Active",headerAlign:"center",align:"center",type:"boolean",width:100,sortable:!0},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(e){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return n.handleView(e.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(yi.Z,{sx:{color:"limegreen"}}),onClick:function(){var t=e.row;n.setShowEdit(!0),n.setTechId(t.id),n.setInitialValues((function(e){return(0,x.Z)((0,x.Z)({},e),{},{active:t.active,firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone})}))},label:"Edit",showInMenu:!1},1),(0,V.jsx)(k.u,{icon:(0,V.jsx)(ne.Z,{sx:{color:"indianred"}}),onClick:function(){n.setShowDelete(!0),n.setDetail(e.row)},label:"Delete",showInMenu:!1},2)]}}]}),[n]);return(0,V.jsxs)(Mi.Provider,{value:{showCreate:n.showCreate,setShowCreate:n.setShowCreate,showEdit:n.showEdit,setShowEdit:n.setShowEdit,showDelete:n.showDelete,setShowDelete:n.setShowDelete,showView:n.showView,setShowView:n.setShowView,detail:n.detail,setDetail:n.setDetail,showViewJob:n.showViewJob,setShowViewJob:n.setShowViewJob,job:n.job,setJob:n.setJob},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Technicians"})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(m,{I:"manage",a:"technician",children:(0,V.jsx)(z.Z,{onClick:function(){return n.setShowCreate(!0)},variant:"outlined",color:"success",endIcon:(0,V.jsx)(Ci.Z,{}),children:"Create"})})})]}),(0,V.jsx)(G.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",divider:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(G.Z,{direction:"row",sx:{width:"100%"},children:(0,V.jsx)(R,{loading:"loading"===i.getTechniciansStatus,rows:s,columns:l,showToolbar:!0})})})]}),(0,V.jsx)(Ut,{fullWidth:!0,size:"md",show:n.showCreate,Content:(0,V.jsx)(Sn.J9,{onSubmit:n.handleCreate,initialValues:ki.initialValues,validationSchema:ki.schema[0],children:(0,V.jsx)(Ti,{isSubmitting:n.loading})}),onClose:function(){return n.setShowCreate(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"md",show:n.showEdit,Content:(0,V.jsx)(Sn.J9,{onSubmit:n.handleEdit,initialValues:n.initialValues,validationSchema:ki.schema[1],enableReinitialize:!0,children:(0,V.jsx)(Ti,{isSubmitting:n.loading})}),onClose:function(){return n.setShowEdit(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,fullScreen:!0,show:n.showView,Content:(0,V.jsx)(Fi,{setShow:n.setShowView}),onClose:function(){return n.setShowView(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,show:n.showDelete,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return n.setShowDelete(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:n.handleDelete,children:"Agree"})]}),onClose:function(){return n.setShowDelete(!1)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==n.error,message:null===(e=n.error)||void 0===e?void 0:e.message,onClose:function(){return n.setError(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==n.success,message:null===(t=n.success)||void 0===t?void 0:t.message,onClose:function(){return n.setSuccess(void 0)}})]})},Ui={firstName:{name:"firstName",label:"First Name",error:{invalid:"First Name is invalid",required:"First Name is required"}},lastName:{name:"lastName",label:"Last Name",error:{invalid:"Last Name is invalid",required:"Last Name is required"}},phone:{name:"phone",label:"Phone Number",error:{invalid:"Phone Number is invalid",required:"Phone Number is required"}},email:{name:"email",label:"Email Address",error:{invalid:"Email Address is invalid",required:"Email Address is required"}},state:{name:"state",label:"State",error:{invalid:"State is invalid",required:"State is required"}},parts:{name:"parts",label:"Parts",error:{invalid:"Part is invalid",required:"Part is required"}},labours:{name:"labours",label:"Labour",error:{invalid:"Labour is invalid",required:"Labour is required"}},tax:{name:"tax",label:"Tax",error:{invalid:"Tax is invalid",required:"Tax is required"}},taxPart:{name:"tax",label:"Tax",error:{invalid:"Tax is invalid",required:"Tax is required"}},discount:{name:"discount",label:"Discount (%)",error:{invalid:"Discount is invalid",required:"Discount is required"}},address:{name:"address",label:"Address",error:{invalid:"Address is invalid",required:"Address is required"}},addressType:{name:"addressType",label:"Type",error:{invalid:"Address Type is invalid",required:"Address Type is required"}},vin:{name:"vin",label:"VIN",error:{invalid:"VIN is invalid",required:"VIN is required"}},make:{name:"make",label:"Make",error:{invalid:"Make is invalid",required:"Make is required"}},model:{name:"model",label:"Model",error:{invalid:"Model is invalid",required:"Model is required"}},modelYear:{name:"modelYear",label:"Model Year",error:{invalid:"Model Year is invalid",required:"Model Year is required"}},mileageValue:{name:"mileage",label:"Mileage Value",error:{invalid:"Mileage Value is invalid",required:"Mileage Value is required"}},mileageUnit:{name:"mileage",label:"Mileage Unit",error:{invalid:"Mileage Unit is invalid",required:"Mileage Unit is required"}},partsTotal:{name:"mileage",label:"Parts Total",error:{invalid:"Parts Total is invalid",required:"Parts Total is required"}},laboursTotal:{name:"mileage",label:"Labours Total",error:{invalid:"Labours Total is invalid",required:"Labours Total is required"}},grandTotal:{name:"mileage",label:"Grand Total",error:{invalid:"Grand Total is invalid",required:"Grand Total is required"}},plateNumber:{name:"plateNumber",label:"Plate Number",error:{invalid:"Plate Number is invalid",required:"Plate Number is required"}},depositAmount:{name:"depositAmount",label:"Deposit Amount",error:{invalid:"Deposit Amount is invalid",required:"Deposit Amount is required"}},paidAmount:{name:"paidAmount",label:"Paid Amount",error:{invalid:"Paid Amount is invalid",required:"Paid Amount is required"}},additionalDeposit:{name:"additionalDeposit",label:"Additional Amount",error:{invalid:"Additional Amount is invalid",required:"Additional Amount is required"}},jobDuration:{name:"jobDuration",label:"Job Duration",error:{invalid:"Job Duration is invalid",required:"Job Duration is required"}},jobDurationValue:{name:"mileage",label:"Job Duration Value",error:{invalid:"Job Duration Value is invalid",required:"Job Duration Value is required"}},jobDurationUnit:{name:"mileage",label:"Job Duration Unit",error:{invalid:"Job Duration Unit is invalid",required:"Job Duration Unit is required"}}},Bi={fields:Ui,initialValues:{mileage:{count:"",unit:""},plateNumber:"",depositAmount:"0",additionalDeposit:"0",paidAmount:"0",jobDuration:{count:"0",interval:""},firstName:"",lastName:"",make:"",model:"",modelYear:"",phone:"",vin:"",address:"",addressType:"",parts:[{name:"",warranty:{warranty:"",interval:""},quantity:{quantity:"0",unit:""},price:"0",amount:"0"}],labours:[{title:"",cost:"0"}],tax:"0",taxPart:"0"},schema:yn.Ry().shape({firstName:yn.Z_().nullable().label(Ui.firstName.label),lastName:yn.Z_().nullable().label(Ui.lastName.label),address:yn.Z_().nullable().label(Ui.address.label),addressType:yn.Z_().nullable().label(Ui.addressType.label),phone:yn.Z_().nullable().label(Ui.phone.label),vin:yn.Z_().nullable().label(Ui.vin.label),make:yn.Z_().nullable().label(Ui.make.label),model:yn.Z_().nullable().label(Ui.model.label),modelYear:yn.Z_().nullable().label(Ui.modelYear.label),plateNumber:yn.Z_().nullable().label(Ui.plateNumber.label),tax:yn.Z_().optional().nullable().label(Ui.tax.label),taxPart:yn.Z_().optional().nullable().label(Ui.taxPart.label),depositAmount:yn.Z_().nullable().label(Ui.depositAmount.label),additionalDeposit:yn.Z_().nullable().label(Ui.additionalDeposit.label)})},Oi=n(94454),Wi=n(22935);var zi=function(e){var t=e.index,n=e.warranty,i=e.handleChange,a=e.values;return(0,V.jsx)(r.Fragment,{children:Object.keys(n).map((function(e,n){return(0,V.jsxs)(W.ZP,{item:!0,xs:!0,container:!0,children:["warranty"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",label:e,type:"number",inputProps:{min:"0"},onChange:i,name:"parts.".concat(t,".warranty.warranty"),value:a.parts[t].warranty.warranty})}),"interval"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)($n.Z,{data:[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],fullWidth:!0,label:e,onChange:i,name:"parts.".concat(t,".warranty.interval"),value:a.parts[t].warranty.interval})})]},n)}))})};var Gi=function(e){var t=e.index,n=e.quantity,i=e.handleChange,a=e.values;return(0,V.jsx)(r.Fragment,{children:Object.keys(n).map((function(e,n){return(0,V.jsxs)(W.ZP,{item:!0,xs:!0,container:!0,spacing:.2,children:["quantity"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",label:e,type:"number",inputProps:{min:"0"},name:"parts.".concat(t,".quantity.quantity"),value:a.parts[t].quantity.quantity,onChange:i})}),"unit"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)($n.Z,{data:[{label:"pcs",value:"pcs"},{label:"pair",value:"pair"},{label:"litres",value:"litres"},{label:"set",value:"set"},{label:"kg",value:"kg"},{label:"hrs",value:"hrs"},{label:"kit",value:"kit"}],fullWidth:!0,label:e,name:"parts.".concat(t,".quantity.unit"),value:a.parts[t].quantity.unit,onChange:i})})]},n)}))})},Ji=Bi.fields;function Hi(e){var t=(0,w.Z)((function(e){return e.vehicleReducer}));return console.log(e.vinOptions,"props.vinOptions"),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Vehicle Information"}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(on.Z,{options:e.vinOptions||[],onChange:function(t,n){e.handleChangeVIN({target:{value:n}})},value:e.values.vin,disabled:e.disabled,renderInput:function(n){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},n),{},{label:Ji.vin.label,name:Ji.vin.name,onChange:function(t){e.handleChangeVIN(t)},InputProps:(0,x.Z)((0,x.Z)({},n.InputProps),{},{endAdornment:(0,V.jsx)(ti.Z,{position:"end",sx:{position:"absolute",left:"90%"},children:"loading"===t.getVehicleVINStatus&&(0,V.jsx)(Jn.Z,{size:25})})})}))}})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Pn.Z,{onChange:e.handleChange,disabled:e.disabled,label:Ji.modelYear.label,value:e.values.modelYear,name:Ji.modelYear.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Pn.Z,{onChange:e.handleChange,disabled:e.disabled,label:Ji.make.label,value:e.values.make,name:Ji.make.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Pn.Z,{onChange:e.handleChange,disabled:e.disabled,value:e.values.model,name:Ji.model.name,label:Ji.model.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Pn.Z,{onChange:e.handleChange,disabled:e.disabled,value:e.values.plateNumber,name:Ji.plateNumber.name,label:Ji.plateNumber.label})}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,container:!0,spacing:.5,children:[(0,V.jsx)(W.ZP,{item:!0,xs:8,children:(0,V.jsx)(Pn.Z,{onChange:e.handleChange,disabled:e.disabled,value:e.values.mileage.count,name:"mileage.count",label:Ji.mileageValue.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)($n.Z,{data:[{label:"miles",value:"miles"},{label:"km",value:"km"}],onChange:e.handleChange,disabled:e.disabled,value:e.values.mileage.unit,name:"mileage.unit",label:"Unit",fullWidth:!0})})]})]})}var Yi=(0,r.memo)(Hi),Qi=Bi.fields,Ki=(0,Gn.D)({matchFrom:"any",stringify:function(e){return"".concat(e.query)}});function Xi(e){var t,n,a=(0,r.useState)(0),s=(0,i.Z)(a,2),l=s[0],c=s[1],d=(0,r.useState)(0),u=(0,i.Z)(d,2),m=u[0],h=u[1],f=(0,r.useState)(),p=(0,i.Z)(f,2),g=p[0],b=p[1],S=(0,r.useState)(),C=(0,i.Z)(S,2),A=C[0],P=C[1],k=r.useState(null),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=r.useState(""),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,r.useState)([]),M=(0,i.Z)(F,2),R=M[0],U=M[1],B=(0,r.useState)([]),O=(0,i.Z)(B,2),z=O[0],G=O[1],Y=(0,r.useState)([]),Q=(0,i.Z)(Y,2),K=Q[0],X=Q[1],_=(0,w.Z)((function(e){return e.vehicleReducer})),ee=(0,w.Z)((function(e){return e.estimateReducer})),te=(0,w.Z)((function(e){return e.partnerReducer})),ne=(0,w.Z)((function(e){return e.customerReducer})),re=(0,y.Z)(),ae=(0,Sn.u6)(),oe=ae.values,le=ae.handleChange,de=ae.setFieldValue,ue=ae.setFieldTouched,xe=ae.resetForm,fe=(0,r.useState)(void 0===(null===oe||void 0===oe||null===(t=oe.estimate)||void 0===t?void 0:t.tax)||0!==parseInt(oe.estimate.tax)),ve=(0,i.Z)(fe,2),Ze=ve[0],ge=ve[1],je=(0,r.useState)(void 0!==(null===oe||void 0===oe||null===(n=oe.estimate)||void 0===n?void 0:n.taxPart)&&(parseInt(oe.estimate.taxPart),!1)),be=(0,i.Z)(je,2),Se=be[0],we=be[1];(0,r.useEffect)((function(){setTimeout((function(){if(void 0!=oe.estimate){var e,t,n=void 0===(null===oe||void 0===oe||null===(e=oe.estimate)||void 0===e?void 0:e.tax)||0!==parseInt(oe.estimate.tax);ge(n);var i=void 0!==(null===oe||void 0===oe||null===(t=oe.estimate)||void 0===t?void 0:t.taxPart)&&(parseInt(oe.estimate.taxPart),!1);we(i),console.log(n,i,"_lab, _part")}else console.log("did not reach","_lab, _part")}),3e3)}),[null===e||void 0===e?void 0:e.isPopUp,e,ne.getCustomerStatus]);var ye=e.setGrandTotal,Ce=e.setPartTotal,Ae=e.setLabourTotal,Pe=e.showCreate,ke=e.showEdit,Ne=e.grandTotal,De=e.labourTotal,Ee=e.partTotal,Ie=$().isTechAdmin,Te=(0,j.UO)(),qe=$(),Le=(0,r.useMemo)((function(){return qe.isTechAdmin&&qe.user?qe.user.partner.id:Te.id?+Te.id:void 0}),[qe.isTechAdmin,qe.user,Te.id]);(0,r.useEffect)((function(){Le&&(re((0,He.gI)(+Le)),re((0,He.mx)(Le)))}),[re,Le]),(0,r.useEffect)((function(){"completed"===te.getOwnersFilterDataStatus&&U(te.ownersFilterData)}),[te.ownersFilterData,te.getOwnersFilterDataStatus]),(0,r.useEffect)((function(){Pe&&ke||xe()}),[xe,Pe,ke]),(0,r.useEffect)((function(){for(var e=0,t=0;t<oe.parts.length;t++)oe.parts[t].amount&&(e+=parseInt(oe.parts[t].amount));Ce(e)}),[Ce,oe.parts]),(0,r.useEffect)((function(){for(var e=0,t=0;t<oe.labours.length;t++)oe.labours[t].cost&&(e+=parseInt(oe.labours[t].cost));Ae(e)}),[Ae,oe.labours]),(0,r.useEffect)((function(){if(Se){var e=.075*Ee;de("taxPart",me(e)),h(e)}else h(0)}),[Ee,de,Se]),(0,r.useEffect)((function(){if(Ze){var e=.075*De;de("tax",me(e)),c(e)}else c(0)}),[De,de,Ze]),(0,r.useEffect)((function(){var e=0;Ze||(e=m+Ee+De,console.log(m+Ee+De)),Se||(e=l+Ee+De,console.log(l+Ee+De)),Se&&Ze?(e=l+m+Ee+De,console.log(l+m+Ee+De)):Se||Ze||(e=Ee+De,console.log(Ee+De)),ye(e),console.log(e)}),[l,Ee,m,De,ye,Ze,Se]),(0,r.useEffect)((function(){"completed"===_.getVehicleVINStatus&&_.vehicleVINDetails.forEach((function(e){var t=(0,x.Z)({},e);"engineCylinders"===e.label&&(t.value="".concat(e.value," cylinders")),de(t.label,t.value),ue(t.label,!1)}))}),[_.getVehicleVINStatus,_.vehicleVINDetails,de,ue]),(0,r.useEffect)((function(){"failed"===_.getVehicleVINStatus&&_.getVehicleVINError&&P({message:_.getVehicleVINError})}),[_.getVehicleVINError,_.getVehicleVINStatus]);var Ve=(0,r.useCallback)((function(e){var t=e.target.value;b(setTimeout((function(){re((0,nn.xv)(t))}),2e3)),de("vin",t)}),[re,de]),Fe=(0,r.useCallback)((function(e,t){var n="parts.".concat(t,".quantity.quantity"),i="parts.".concat(t,".quantity.unit"),r="parts.".concat(t,".price"),a="parts.".concat(t,".amount"),s=n===e.target.name,o=r===e.target.name,l=i===e.target.name;if(s){var c=+oe.parts[t].price*+e.target.value;de(n,e.target.value),de(a,"".concat(c))}if(o){var d=+oe.parts[t].quantity.quantity*+e.target.value;de(r,e.target.value),de(a,"".concat(d))}l&&de(i,e.target.value)}),[de,oe.parts]),Me=(0,r.useMemo)((function(){return"loading"===ee.sendDraftEstimateStatus||"loading"===ee.createEstimateStatus}),[ee.createEstimateStatus,ee.sendDraftEstimateStatus]),Re=(0,r.useMemo)((function(){return"loading"===ee.updateEstimateStatus||"loading"===ee.saveEstimateStatus}),[ee.saveEstimateStatus,ee.updateEstimateStatus]);(0,r.useEffect)((function(){"completed"!=ee.saveEstimateStatus&&"completed"!=ee.updateEstimateStatus&&"completed"!=ee.createEstimateStatus&&"completed"!=ee.sendDraftEstimateStatus||pe()}),[ee.saveEstimateStatus,ee.updateEstimateStatus,ee.createEstimateStatus,ee.sendDraftEstimateStatus]),(0,r.useEffect)((function(){return function(){clearTimeout(g),re((0,ct.i3)())}}),[g,re]);return(0,r.useEffect)((function(){if("completed"===ne.getCustomerStatus){var e,t=ne.customer;console.log(t,"_customer"),de(Qi.firstName.name,t.firstName),de(Qi.lastName.name,t.lastName),de(Qi.phone.name,t.phone),de(Qi.email.name,t.email),de(Qi.state.name,(null===(e=t.contacts[0])||void 0===e?void 0:e.state)||"");var n=t.vehicles.map((function(e){return(null===e||void 0===e?void 0:e.vin)||""}));G(n)}}),[D,ne.getCustomerStatus]),(0,r.useEffect)((function(){Ze||(de(Qi.tax.name,0),console.log("making labor 0","mainLog1")),Se||(de(Qi.taxPart.name,0),console.log("making part 0","mainLog1"))}),[Ze,Se]),(0,r.useEffect)((function(){var e=o.PO.map((function(e){return{label:e.name,value:e.name}}));X(e)}),[]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Sn.l0,{autoComplete:"off",autoCorrect:"off",children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[Ie&&((null===e||void 0===e?void 0:e.isPopUp)||!1)&&(0,V.jsxs)(W.ZP,{style:{width:"100%"},children:[(0,V.jsx)("div",{style:{marginTop:10,paddingTop:15,paddingBottom:15,width:"100%"}}),(0,V.jsx)(W.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(on.Z,{filterOptions:Ki,inputValue:q,value:D,loading:"loading"===te.getDriversFilterDataStatus,getOptionLabel:function(e){return e.fullName},isOptionEqualToValue:function(e,t){return e.fullName===t.fullName},onChange:function(e,t){var n;E(t),(n=null===t||void 0===t?void 0:t.id)&&re((0,H.ki)(n))},onInputChange:function(e,t,n){L(t),"clear"===n&&pe()},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{label:"Search customer by First name, last name, car plate number.",InputProps:(0,x.Z)((0,x.Z)({},e.InputProps),{},{endAdornment:(0,V.jsxs)(r.Fragment,{children:["loading"===te.getDriversFilterDataStatus?(0,V.jsx)(Jn.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},options:R})})}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Customer Information"}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Pn.Z,{onChange:le,label:Qi.email.label,value:oe.email,name:Qi.email.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"completed"===ne.getCustomerStatus?(0,V.jsx)(Pn.Z,{onChange:le,label:Qi.state.label,value:oe.state,name:Qi.state.name}):(0,V.jsx)($n.Z,{onChange:function(e){console.log(e)},value:oe.state,name:Qi.state.name,label:Qi.state.label,data:K,fullWidth:!0})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{onChange:le,label:Qi.firstName.label,value:oe.firstName,name:Qi.firstName.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{onChange:le,label:Qi.lastName.label,value:oe.lastName,name:Qi.lastName.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(Pn.Z,{type:"tel",onChange:function(e){console.log(e,"logger");var t=he(e.target.value);t.error&&P({message:(null===t||void 0===t?void 0:t.message)||""}),le({target:{name:e.target.name,value:t.phone}})},label:Qi.phone.label,value:oe.phone,name:Qi.phone.name,placeholder:"Phone e.g 080..."})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:!0,spacing:.2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)($n.Z,{data:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}],onChange:le,value:oe.addressType,name:Qi.addressType.name,label:Qi.addressType.label,fullWidth:!0})}),(0,V.jsx)(W.ZP,{item:!0,xs:9,children:(0,V.jsx)(Pn.Z,{onChange:le,value:oe.address,name:Qi.address.name,label:Qi.address.label})})]}),(0,V.jsx)(Yi,{vinOptions:z,values:oe,handleChange:le,handleChangeVIN:Ve}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:Qi.parts.label}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(Sn.F2,{name:Qi.parts.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[oe.parts.length>0&&oe.parts.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:13,columns:14,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["name"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:le})}),"warranty"===e&&(0,V.jsx)(zi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:le,index:n,values:oe})),"quantity"===e&&(0,V.jsx)(Gi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:function(e){return Fe(e,n)},index:n,values:oe})),"price"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:function(e){return Fe(e,n)},type:"number",inputProps:{min:"0"}})}),"amount"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:le,type:"number",disabled:!0})})]},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",warranty:{warranty:"",interval:""},quantity:{quantity:"0",unit:""},price:"0",amount:"0"})},children:(0,V.jsx)(Tn.Z,{})})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(W.ZP,{item:!0,xs:8}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[Se&&(0,V.jsx)(se.Z,{name:Qi.taxPart.name,value:oe.taxPart,label:"".concat(Qi.taxPart.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),"Sub Total: \u20a6",me(Math.round(Ee))]})]})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:Qi.labours.label}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(Sn.F2,{name:Qi.labours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[oe.labours.length>0&&oe.labours.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["title"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:8,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:le})}),"cost"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:le,type:"number",inputProps:{min:"0"}})})]},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({title:"",cost:"0"})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(W.ZP,{item:!0,xs:6}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[Ze&&(0,V.jsx)(se.Z,{name:Qi.tax.name,value:oe.tax,label:"".concat(Qi.tax.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),(0,V.jsxs)(v.Z,{children:[" Sub Total: \u20a6",me(Math.round(De))]})]}),(0,V.jsx)(W.ZP,{item:!0,style:{},children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{children:"Apply Tax"}),(0,V.jsx)(Oi.Z,{checked:Ze,onClick:function(){return ge(!Ze)}})]})})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Job Information"}),(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)(v.Z,{variant:"h6",children:["Grand Total: \u20a6",me(Math.round(Ne))]})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Pn.Z,{onChange:le,value:oe.depositAmount,name:Qi.depositAmount.name,label:Qi.depositAmount.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,container:!0,spacing:.5,children:[(0,V.jsx)(W.ZP,{item:!0,xs:8,children:(0,V.jsx)(Pn.Z,{onChange:le,value:oe.jobDuration.count,name:"jobDuration.count",label:Qi.jobDuration.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)($n.Z,{data:[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],onChange:le,value:oe.jobDuration.interval,name:"jobDuration.interval",label:"Interval",fullWidth:!0})})]}),parseInt(oe.depositAmount)>0&&parseInt(oe.depositAmount)<=Ne&&(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(J.Z,{sx:{mb:3},flexItem:!0,orientation:"horizontal"}),(0,V.jsx)(ie.Z,{type:"submit",loading:Re,disabled:Re||oe.status===o.GM.sent||oe.status===o.GM.invoiced,variant:"contained",color:"secondary",endIcon:(0,V.jsx)(kn.Z,{}),onClick:function(){e.setSave(!0)},children:"Save"}),(0,V.jsx)(ie.Z,{sx:{ml:2},type:"submit",loading:Me,disabled:oe.status===o.GM.invoiced,onClick:function(){e.setSave(!1)},variant:"contained",color:"success",endIcon:oe.status===o.GM.sent?(0,V.jsx)(Wi.Z,{}):(0,V.jsx)(Ni.Z,{}),children:oe.status===o.GM.sent?"Save & Send":"Send"})]})]})}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==A,message:null===A||void 0===A?void 0:A.message,onClose:function(){return P(void 0)}})]})}var _i=(0,r.memo)(Xi),$i=n(15203),er=n(95174);function tr(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(Bi.initialValues),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(0),u=(0,i.Z)(d,2),m=u[0],h=u[1],f=(0,r.useState)(0),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(0),b=(0,i.Z)(g,2),S=b[0],C=b[1],A=(0,r.useState)(),P=(0,i.Z)(A,2),k=P[0],N=P[1],D=(0,r.useState)(),E=(0,i.Z)(D,2),I=E[0],T=E[1],q=(0,r.useState)([]),L=(0,i.Z)(q,2),V=L[0],F=L[1],M=(0,r.useState)(!1),R=(0,i.Z)(M,2),U=R[0],B=R[1],O=(0,r.useState)(!1),W=(0,i.Z)(O,2),z=W[0],G=W[1],J=(0,r.useState)(!1),Y=(0,i.Z)(J,2),Q=Y[0],_=Y[1],$=(0,r.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],ie=(0,r.useState)(),re=(0,i.Z)(ie,2),ae=re[0],se=re[1],oe=(0,r.useState)(),le=(0,i.Z)(oe,2),ce=le[0],de=le[1],ue=(0,r.useState)(!1),me=(0,i.Z)(ue,2),he=me[0],xe=me[1],fe=(0,w.Z)((function(e){return e.estimateReducer})),ve=(0,y.Z)(),Ze=(0,j.UO)(),ge=(0,r.useCallback)((function(){ve((0,er.JA)()),ve((0,er.HJ)()),ve((0,er.Ys)()),ve((0,er.B$)()),xe(!1)}),[ve]);(0,r.useEffect)((function(){var e=K().decode(sessionStorage.getItem(X.Z.auth.admin));Ze.id&&de(+Ze.id),e.partnerId&&de(e.partnerId)}),[Ze]),(0,r.useEffect)((function(){"idle"===fe.getEstimatesStatus&&ve((0,$i.UD)())}),[ve,fe.getEstimatesStatus]),(0,r.useEffect)((function(){"failed"===fe.getEstimatesStatus&&fe.getEstimatesError&&T({message:fe.getEstimatesError})}),[fe.getEstimatesError,fe.getEstimatesStatus]),(0,r.useEffect)((function(){"completed"===fe.getEstimatesStatus&&F(fe.estimates)}),[fe.estimates,fe.getEstimatesStatus]),(0,r.useEffect)((function(){"failed"===fe.createEstimateStatus&&(fe.createEstimateError&&T({message:fe.createEstimateError}),ge())}),[fe.createEstimateError,fe.createEstimateStatus,ge]),(0,r.useEffect)((function(){"completed"===fe.createEstimateStatus&&(N({message:fe.createEstimateSuccess}),ge())}),[fe.createEstimateStatus,fe.createEstimateSuccess,ge]),(0,r.useEffect)((function(){"failed"===fe.saveEstimateStatus&&(fe.saveEstimateError&&T({message:fe.saveEstimateError}),ge())}),[fe.saveEstimateError,fe.saveEstimateStatus,ge]),(0,r.useEffect)((function(){"completed"===fe.saveEstimateStatus&&(N({message:fe.saveEstimateSuccess}),ge(),ve((0,$i.UD)()),pe())}),[ve,fe.saveEstimateStatus,fe.saveEstimateSuccess,ge]),(0,r.useEffect)((function(){"failed"===fe.updateEstimateStatus&&(fe.updateEstimateError&&T({message:fe.updateEstimateError}),ge())}),[fe.updateEstimateError,fe.updateEstimateStatus,ge]),(0,r.useEffect)((function(){"completed"===fe.updateEstimateStatus&&(N({message:fe.updateEstimateSuccess}),ge(),ve((0,$i.UD)()))}),[ve,fe.updateEstimateStatus,fe.updateEstimateSuccess,ge]),(0,r.useEffect)((function(){"failed"===fe.deleteEstimateStatus&&(T({message:fe.deleteEstimateError}),ge())}),[fe.deleteEstimateError,fe.deleteEstimateStatus,ge]),(0,r.useEffect)((function(){"completed"===fe.deleteEstimateStatus&&(N({message:fe.deleteEstimateSuccess}),ge(),ve((0,$i.UD)()))}),[ve,fe.deleteEstimateStatus,fe.deleteEstimateSuccess,ge]),(0,r.useEffect)((function(){"failed"===fe.sendDraftEstimateStatus&&(fe.sendDraftEstimateError&&T({message:fe.sendDraftEstimateError}),ge())}),[fe.sendDraftEstimateError,fe.sendDraftEstimateStatus,ge]),(0,r.useEffect)((function(){"completed"===fe.sendDraftEstimateStatus&&(N({message:fe.sendDraftEstimateSuccess}),ge(),ve((0,$i.UD)()))}),[ve,fe.sendDraftEstimateStatus,fe.sendDraftEstimateSuccess,ge]);var je=(0,r.useCallback)((function(e){ve((0,$i.UD)());var t=V.find((function(t){return t.id===e}));if(t){var n=t.rideShareDriver,i=t.customer,r=t.vehicle;ve((0,H.ki)(null===i||void 0===i?void 0:i.id));var a=t.parts,s=t.labours;c((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:n?n.firstName:i.firstName,lastName:n?n.lastName:i.lastName,email:n?n.email:i.email,phone:n?n.phone:i.phone,make:r&&r.make?r.make:"",model:r&&r.model?r.model:"",plateNumber:r&&r.plateNumber?r.plateNumber:"",vin:r&&r.vin?r.vin:"",modelYear:r&&r.modelYear?r.modelYear:"",address:t.address?t.address:"",addressType:t.addressType?t.addressType:"",jobDuration:{count:"".concat(t.jobDurationValue),interval:t.jobDurationUnit},depositAmount:"".concat(t.depositAmount),tax:"".concat(t.tax),mileage:{count:r&&r.mileageValue?r.mileageValue:"",unit:r&&r.mileageUnit?r.mileageUnit:""},parts:a,labours:s,status:t.status,estimate:t})})),C(t.grandTotal),Z(t.partsTotal),h(t.laboursTotal),se(e),G(!0)}else T({message:"An Error Occurred. Please try again or contact support"})}),[ve,V]),be=(0,r.useCallback)((function(e){se(e),ne(!0)}),[]),Se=(0,r.useCallback)((function(){ae&&ve((0,$i.pL)(ae)),ne(!1)}),[ve,ae]);return{setLabourTotal:h,setPartTotal:Z,setGrandTotal:C,success:k,setSuccess:N,error:I,setError:T,estimates:V,setEstimates:F,showCreate:U,setShowCreate:B,showEdit:z,setShowEdit:G,driver:n,setDriver:a,initialValues:l,setInitialValues:c,estimateId:ae,partTotal:v,labourTotal:m,grandTotal:S,showView:Q,setShowView:_,save:he,setSave:xe,onEdit:je,handleCreateEstimate:function(e,t){var n=e.depositAmount;if("null"===n||!n)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must not be empty.");if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");if(Math.round(parseInt(n))>Math.round(S))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit  must be less than or equal to Grand Total ".concat(Math.round(S)));var i={id:ce,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};console.log(Object.keys(i),"realsentdata"),ve((0,$i.D9)(i))},handleSaveEstimate:function(e,t){var n=e.depositAmount;if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");var i={id:ce,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};console.log(Object.keys(i),"realsentdata"),ve((0,$i.hR)(i))},handleUpdateEstimate:function(e,t){var n=e.depositAmount;if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");var i={id:ae,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};ve((0,$i.Nl)(i))},handleSendDraftEstimate:function(e,t){var n=e.depositAmount;if("null"===n||!n)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must not be empty.");if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");var i=Math.round(parseInt(n)),r=Math.round(S);if(i>r)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit  must be less than or equal to Grand Total ".concat(Math.round(S)));if(i>r)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit  must be less than or equal to Grand Total ".concat(Math.round(S)));var a={id:ae,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};ve((0,$i.uQ)(a))},onView:function(e){se(e),_(!0)},showDelete:te,setShowDelete:ne,onDelete:be,handleDelete:Se}}var nr=(0,Gn.D)({matchFrom:"any",stringify:function(e){return"".concat(e.query)}});var ir=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],p=m[1],v=(0,r.useState)(),Z=(0,i.Z)(v,2),g=Z[0],j=Z[1],b=(0,r.useState)({firstName:"",email:"",lastName:"",companyName:"",accountType:"",phone:"",creditRating:"",state:"",district:""}),S=(0,i.Z)(b,2),C=S[0],A=S[1];(0,r.useEffect)((function(){var e=o.PO.map((function(e){return{label:e.name,value:e.name}}));a(e)}),[]);var P=(0,r.useContext)(ht).customer;(0,r.useEffect)((function(){var e,t;A({firstName:null===P||void 0===P?void 0:P.firstName,email:null===P||void 0===P?void 0:P.email,lastName:null===P||void 0===P?void 0:P.lastName,companyName:null===P||void 0===P?void 0:P.companyName,accountType:null!=(null===P||void 0===P?void 0:P.companyName)?"Corporate":"Individual",phone:null===P||void 0===P?void 0:P.phone,creditRating:(null===P||void 0===P?void 0:P.creditRating)||"",state:(null===P||void 0===P||null===(e=P.contacts[0])||void 0===e?void 0:e.state)||"",district:(null===P||void 0===P||null===(t=P.contacts[0])||void 0===t?void 0:t.district)||""}),d(!1)}),[P]);var k=(0,w.Z)((function(e){return e.customerReducer})),N=(0,y.Z)();(0,r.useEffect)((function(){"idle"==k.updateCustomerStatus&&d(!1),"loading"==k.updateCustomerStatus&&d(!0),"completed"==k.updateCustomerStatus&&(N((0,Y.OT)()),d(!1),j({message:"Edited Successfully"}),setTimeout((function(){window.history.back()}),1e3)),"failed"==k.updateCustomerStatus&&(N((0,Y.OT)()),d(!1),p({message:(null===k||void 0===k?void 0:k.updateCustomerError)||""}))}),[k.updateCustomerStatus,N]);var D=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(){var t,n;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0),t=null===P||void 0===P?void 0:P.id,n={id:t,firstName:C.firstName,lastName:C.lastName,phone:C.phone,creditRating:C.creditRating,state:C.state,district:C.district},N((0,H.VE)(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(G.Z,{spacing:2,children:[(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(se.Z,{label:"First Name",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{firstName:e.target.value}))},value:C.firstName,fullWidth:!0}),(0,V.jsx)(se.Z,{label:"Last Name",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{lastName:e.target.value}))},value:C.lastName,fullWidth:!0})]}),(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(se.Z,{label:"Company Name",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{companyName:e.target.value}))},value:C.companyName,fullWidth:!0}),(0,V.jsx)(se.Z,{label:"Account Type",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{accountType:e.target.value}))},disabled:!0,value:C.accountType,fullWidth:!0})]}),(0,V.jsx)(se.Z,{label:"Email",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{email:e.target.value}))},disabled:!0,value:C.email,fullWidth:!0}),(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(se.Z,{label:"Phone",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{phone:e.target.value}))},value:C.phone,fullWidth:!0}),(0,V.jsx)(se.Z,{label:"Credit Rating",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{creditRating:e.target.value}))},value:C.creditRating,fullWidth:!0})]}),(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(oe.Z,{onChange:function(e){console.log(e," e")},value:C.state,name:"State",label:"State",fullWidth:!0,children:n.map((function(e,t){return(0,V.jsx)(le.Z,{onClick:function(){console.log(e,"item"),A((0,x.Z)((0,x.Z)({},C),{},{state:e.value}))},value:e.value,children:e.label},t)}))}),(0,V.jsx)(se.Z,{label:"District",onChange:function(e){return A((0,x.Z)((0,x.Z)({},C),{},{district:e.target.value}))},value:C.district,fullWidth:!0})]}),(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,V.jsx)(ie.Z,{type:"submit",loading:c,disabled:c,onClick:function(){D()},variant:"contained",color:"success",children:"Update"})})]}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==h,message:null===h||void 0===h?void 0:h.message,onClose:function(){return p(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==g,message:null===g||void 0===g?void 0:g.message,onClose:function(){return j(void 0)}})]})},rr=[{name:"Profile",Element:ir},{name:"Vehicles",Element:bt}],ar=[{name:"Vehicles",Element:bt},{name:"Appointments",Element:pt},{name:"Transactions",Element:gt},{name:"Quotes",Element:vt}],sr=[{name:"Profile",Element:zt},{name:"Vehicles",Element:Pt},{name:"Transactions",Element:Ct},{name:"Estimates",Element:St}],or=[{tag:o.Qw,name:"Plans",Element:fi},{tag:o.Qw,name:"Payment Plans",Element:si},{tag:o.Qw,name:"Settings",Element:wi},{tag:o.bX,name:"Auto Hyve",Element:function(){var e=r.useState(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=r.useState(""),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)([]),m=(0,i.Z)(u,2),h=m[0],p=m[1],v=(0,r.useState)(),Z=(0,i.Z)(v,2),g=Z[0],b=Z[1],S=(0,r.useState)(cr),C=(0,i.Z)(S,2),A=C[0],P=C[1];console.log(h);var k=(0,j.UO)(),N=$(),D=(0,r.useContext)(dr).partner,E=(0,w.Z)((function(e){return e.partnerReducer})),I=(0,w.Z)((function(e){return e.customerReducer})),T=(0,y.Z)(),q=(0,r.useMemo)((function(){return N.isTechAdmin&&N.user?N.user.partner.id:k.id?+k.id:void 0}),[N.isTechAdmin,N.user,k.id]);return(0,r.useEffect)((function(){if(D){var e=sn().pick(D,Object.keys(o.Dw)),t=Object.values(e).some((function(e){return null===e})),n=(0,rn.Z)(A);if(t){var i=n.find((function(e){return"estimate"===e.tag}));if(i){var r=n.indexOf(i);n[r].disableTab=!0,n[r].name="Create Estimate (Disabled)",P(n)}}}}),[D,A]),(0,r.useEffect)((function(){q&&(T((0,He.gI)(+q)),T((0,He.mx)(q)))}),[T,q]),(0,r.useEffect)((function(){"completed"===E.getOwnersFilterDataStatus&&p(E.ownersFilterData)}),[E.ownersFilterData,E.getOwnersFilterDataStatus]),(0,r.useEffect)((function(){"completed"===I.getCustomerStatus&&I.customer&&b(I.customer)}),[I.customer,I.getCustomerStatus]),(0,r.useEffect)((function(){return function(){b(void 0),T((0,ot.Iu)()),T((0,Y.nO)())}}),[T]),(0,V.jsxs)(ht.Provider,{value:{customer:g,setCustomer:b},children:[(0,V.jsxs)(G.Z,{direction:"column",spacing:5,children:[(0,V.jsx)(W.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(on.Z,{filterOptions:nr,inputValue:c,value:n,loading:"loading"===E.getDriversFilterDataStatus,getOptionLabel:function(e){return e.fullName},isOptionEqualToValue:function(e,t){return e.fullName===t.fullName},onChange:function(e,t){var n;a(t),(n=null===t||void 0===t?void 0:t.id)&&T((0,H.ki)(n))},onInputChange:function(e,t,n){d(t),"clear"===n&&(b(void 0),pe())},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{label:"Search customer by First name, last name, car plate number.",InputProps:(0,x.Z)((0,x.Z)({},e.InputProps),{},{endAdornment:(0,V.jsxs)(r.Fragment,{children:["loading"===E.getDriversFilterDataStatus?(0,V.jsx)(Jn.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},options:h})})}),(0,V.jsxs)(f.Z,{hidden:void 0===g,children:[(0,V.jsx)(J.Z,{orientation:"horizontal"}),(0,V.jsx)(Se.Z,{sx:{p:3},children:(0,V.jsx)(Hn,{slideDirection:"left",tabMenus:A})})]})]}),(0,V.jsx)(ze.Z,{show:"loading"===I.getCustomerStatus})]})}},{tag:o.bX,name:"Ride Share Hyve",Element:Kn},{tag:o.bX,name:"Garage Profile & Settings",Element:zn},{tag:o.bX,name:"Technician Management",Element:Ri}],lr=[{tag:"driver",name:"Customer Profile",Element:Wt},{tag:"driver",name:"Vehicles",Element:function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(!1),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(null),p=(0,i.Z)(x,2),v=p[0],g=p[1],j=(0,r.useState)(null),b=(0,i.Z)(j,2),S=b[0],C=b[1],A=(0,r.useState)([]),P=(0,i.Z)(A,2),k=P[0],D=P[1],E=(0,w.Z)((function(e){return e.rideShareReducer})),I=(0,w.Z)((function(e){return e.checkListReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===I.getCheckListsStatus&&T((0,vn.un)())}),[T,I.getCheckListsStatus]),(0,r.useEffect)((function(){E.driver&&D(E.driver.vehicles)}),[E.driver]),(0,r.useEffect)((function(){return function(){h(!1),g(null),T((0,pn.nW)()),T((0,pn.Gl)())}}),[T,g,h]),(0,V.jsxs)(hn.Provider,{value:{viewSub:m,setViewSub:h,driverSub:v,setDriverSub:g,customerSub:S,setCustomerSub:C,vehicle:n,setVehicle:a},children:[(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(f.Z,{sx:{width:500},children:(0,V.jsx)(Gt.Z,{dense:!0,children:k.length?k.map((function(e,t){return(0,V.jsxs)(Jt.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){a(e),c(!0)}(e)},edge:"end","aria-label":"delete",children:(0,V.jsx)(Qt.U9w,{})}),children:[(0,V.jsx)(Ht.Z,{children:(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(Qt.OI4,{})})}),(0,V.jsx)(Yt.Z,{primary:e.make,secondary:"".concat(e.modelYear," ").concat(e.model," (").concat(e.plateNumber,")")})]},t)})):(0,V.jsx)(Jt.ZP,{children:(0,V.jsx)(Yt.Z,{primary:"No data",secondary:"Driver have not added a vehicle yet."})})})})}),(0,V.jsx)(Ut,{fullWidth:!0,fullScreen:!0,show:l,Content:n?(0,V.jsx)(fn,{}):(0,V.jsx)(N.Z,{}),onClose:function(){return c(!1)}})]})}}],cr=[{tag:"profile",name:"Customer Profile",Element:Wt},{tag:"vehicles",name:"Vehicles",Element:function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(!1),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(null),p=(0,i.Z)(x,2),v=p[0],g=p[1],j=(0,r.useState)(null),b=(0,i.Z)(j,2),S=b[0],C=b[1],A=(0,r.useState)([]),P=(0,i.Z)(A,2),k=P[0],D=P[1],E=(0,w.Z)((function(e){return e.customerReducer})),I=(0,w.Z)((function(e){return e.checkListReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===I.getCheckListsStatus&&T((0,vn.un)())}),[T,I.getCheckListsStatus]),(0,r.useEffect)((function(){E.customer&&D(E.customer.vehicles)}),[E.customer]),(0,r.useEffect)((function(){return function(){h(!1),g(null),T((0,pn.nW)()),T((0,pn.Gl)())}}),[T,g,h]),(0,V.jsxs)(hn.Provider,{value:{viewSub:m,setViewSub:h,driverSub:v,setDriverSub:g,customerSub:S,setCustomerSub:C,vehicle:n,setVehicle:a},children:[(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(f.Z,{sx:{width:500},children:(0,V.jsx)(Gt.Z,{dense:!0,children:k.length?k.map((function(e,t){return(0,V.jsxs)(Jt.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){a(e),c(!0)}(e)},edge:"end","aria-label":"delete",children:(0,V.jsx)(Qt.U9w,{})}),children:[(0,V.jsx)(Ht.Z,{children:(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(Qt.OI4,{})})}),(0,V.jsx)(Yt.Z,{primary:e.make,secondary:"".concat(e.modelYear," ").concat(e.model," (").concat(e.plateNumber,")")})]},t)})):(0,V.jsx)(Jt.ZP,{children:(0,V.jsx)(Yt.Z,{primary:"No data",secondary:"Customer have not added a vehicle yet."})})})})}),(0,V.jsx)(Ut,{fullWidth:!0,fullScreen:!0,show:l,Content:n?(0,V.jsx)(gn,{}):(0,V.jsx)(N.Z,{}),onClose:function(){return c(!1)}})]})}},{tag:"estimate",name:"Create Estimate",Element:function(){var e,t,n=(0,w.Z)((function(e){return e.estimateReducer})),i=(0,y.Z)(),a=(0,r.useContext)(ht).customer,s=tr();return(0,r.useEffect)((function(){a&&s.setInitialValues((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:a.firstName?a.firstName:"",lastName:a.lastName?a.lastName:"",phone:a.phone?a.phone:"",address:"",addressType:""})}))}),[a]),(0,r.useEffect)((function(){i((0,er.JA)()),i((0,er.HJ)()),s.setSave(!1)}),[i,s]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(f.Z,{sx:{minWidth:"100%"},children:(0,V.jsx)(Sn.J9,{onSubmit:function(e,t){s.save?s.handleSaveEstimate(e,t):s.handleCreateEstimate(e,t)},initialValues:s.initialValues,validationSchema:Bi.schema,enableReinitialize:!0,children:(0,V.jsx)(_i,{isSubmitting:"loading"===n.createEstimateStatus||"loading"===n.saveEstimateStatus,setGrandTotal:s.setGrandTotal,setPartTotal:s.setPartTotal,setLabourTotal:s.setLabourTotal,grandTotal:s.grandTotal,labourTotal:s.labourTotal,partTotal:s.partTotal,setSave:s.setSave})})})}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==s.success,message:null===(e=s.success)||void 0===e?void 0:e.message,onClose:function(){return s.setSuccess(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==s.error,message:null===(t=s.error)||void 0===t?void 0:t.message,onClose:function(){return s.setError(void 0)}})]})}}],dr=(0,r.createContext)(null);var ur=function(){var e,t=(0,r.useState)(""),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(""),c=(0,i.Z)(l,2),d=c[0],u=c[1],h=(0,r.useState)(null),x=(0,i.Z)(h,2),f=x[0],p=x[1],v=(0,r.useState)([]),Z=(0,i.Z)(v,2),g=Z[0],b=Z[1],S=(0,r.useState)(!1),C=(0,i.Z)(S,2),A=C[0],P=C[1],k=(0,r.useState)(),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,r.useState)(),M=(0,i.Z)(F,2),R=M[0],U=M[1],B=(0,r.useState)(),O=(0,i.Z)(B,2),H=O[0],Y=O[1],Q=(0,j.UO)(),K=(0,j.s0)(),X=$(),_=(0,r.useMemo)((function(){return X.isTechAdmin&&X.user?X.user.partnerId:Q.id?+Q.id:void 0}),[X.isTechAdmin,X.user,Q.id]),ee=(0,w.Z)((function(e){return e.partnerReducer})),te=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===ee.getPartnerStatus&&_&&te((0,He.mx)(_))}),[te,_,ee.getPartnerStatus]),(0,r.useEffect)((function(){if("completed"===ee.getPartnerStatus&&ee.partner){var e=ee.partner;e.categories.forEach((function(e){e.name===o.Qw&&b(or.filter((function(e){return e.tag===o.Qw}))),e.name===o.bX&&b(or.filter((function(e){return e.tag===o.bX})))})),p(e)}}),[ee.getPartnerStatus,ee.partner]),(0,r.useEffect)((function(){"idle"===ee.getPlansStatus&&_&&te((0,He.E4)(_))}),[te,_,ee.getPlansStatus]),(0,r.useEffect)((function(){"idle"===ee.getPaymentPlansStatus&&_&&te((0,He.o7)(_))}),[te,_,ee.getPaymentPlansStatus]),(0,r.useEffect)((function(){"completed"===ee.deletePartnerStatus&&(L({message:ee.deletePartnerSuccess}),Y(setTimeout((function(){return K(-1)}),1e3)))}),[K,ee.deletePartnerStatus,ee.deletePartnerSuccess]),(0,r.useEffect)((function(){"failed"===ee.deletePartnerStatus&&ee.deletePartnerError&&U({message:ee.deletePartnerError})}),[ee.deletePartnerStatus,ee.deletePartnerError]),(0,r.useEffect)((function(){return function(){te((0,ot.F$)()),te((0,ot.Pn)()),te((0,ot.L3)()),te((0,ot.yr)()),te((0,er.JA)()),te((0,ot.a9)()),clearTimeout(H)}}),[H,te]),(0,r.useEffect)((function(){"completed"===ee.togglePartnerStatus&&(L({message:ee.togglePartnerSuccess}),Y(setTimeout((function(){return pe()}),1e3)))}),[K,ee.togglePartnerStatus,ee.togglePartnerSuccess]),(0,r.useEffect)((function(){"failed"===ee.togglePartnerStatus&&ee.togglePartnerError&&U({message:ee.togglePartnerError})}),[ee.togglePartnerStatus,ee.togglePartnerError]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:9,children:(0,V.jsx)("h1",{children:null===f||void 0===f?void 0:f.name})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(m,{I:"manage",a:"all",children:(0,V.jsx)(ie.Z,{onClick:function(){return function(e){E(e),P(!0)}(_)},endIcon:(0,V.jsx)(Xn.Z,{}),variant:"outlined",color:"error",size:"small",children:"Delete"})})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(m,{I:"manage",a:"all",children:(0,V.jsx)(ie.Z,{onClick:function(){return function(e){e&&te((0,He.aw)(e))}(_)},variant:"outlined",color:"info",size:"small",children:(1==(null===f||void 0===f||null===(e=f.users[0])||void 0===e?void 0:e.active)?"Disable Partner":"Enable Partner")||""})})})]}),(0,V.jsx)(dr.Provider,{value:{programme:a,setProgramme:s,modeOfService:d,setModeOfService:u,partner:f,setPartner:p,showDelete:A,setShowDelete:P},children:(0,V.jsx)(G.Z,{direction:"column",spacing:5,divider:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(Se.Z,{sx:{p:3},children:(0,V.jsx)(dt,{tabMenus:g})})})}),(0,V.jsx)(Ut,{fullWidth:!0,show:A,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return P(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:function(){D&&te((0,He.Dr)(D)),P(!1)},children:"Agree"})]}),onClose:function(){return P(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==q,message:null===q||void 0===q?void 0:q.message,onClose:function(){return L(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==R,message:null===R||void 0===R?void 0:R.message,onClose:function(){return U(void 0)}})]})};var mr=function(){var e=$().isSuperAdmin;return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(m,{I:"manage",a:"all",children:e&&(0,V.jsx)(Ye,{})}),(0,V.jsx)(m,{I:"manage",an:"technician",children:!e&&(0,V.jsx)(ur,{})})]})};var hr=function(){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)("h1",{children:"Transactions"})})},xr="appointmentPage_title__EIyvw",fr="appointmentPage_subtitle__uhG+Q";var pr=function(e){return(0,V.jsx)("div",{children:(0,V.jsxs)(qt.Z,{fullScreen:e.fullScreen,maxWidth:e.size,fullWidth:e.fullWidth,open:e.open,onClose:e.onClose,TransitionComponent:Mt,children:[(0,V.jsx)(Lt.Z,{sx:{position:"relative"},children:(0,V.jsx)(p.Z,{children:(0,V.jsx)(Z.Z,{edge:"start",color:"inherit",onClick:e.onClose,"aria-label":"close",children:(0,V.jsx)(Rt.Z,{})})})}),(0,V.jsx)(Ft.Z,{children:e.Content})]})})},vr=n(58795),Zr=n(46472);function gr(){var e=(0,w.Z)((function(e){return e.timeSlotReducer})),t=(0,y.Z)();(0,r.useEffect)((function(){"idle"===e.getTimeSlotsStatus&&t((0,vr.Ke)())}),[e.getTimeSlotsStatus,t]),(0,r.useEffect)((function(){var n=P()();if("completed"===e.getTimeSlotsStatus){var i=n.format("YYYY-MM-DD"),r=n.toISOString();t((0,vr.Fi)({shortDate:i,fullDate:r}));var a=(0,rn.Z)(e.slots);return a=a.map((function(e){return{id:e.id,available:e.available,label:e.label,time:e.time}})),t((0,vr.eH)({date:i,slots:a,now:!0})),function(){t((0,Zr.A)())}}}),[e.getTimeSlotsStatus,t])}var jr,br,Sr,wr=n(57064),yr=n(1588),Cr={vehicleFault:{name:"vehicleFault",label:"Describe Vehicle Fault",error:{invalid:"Vehicle fault is invalid",required:"Please enter your vehicle fault"}},location:{name:"location",label:"Enter your location",error:{invalid:"Service location is invalid",required:"Please enter your service location."}},vehicle:{name:"vehicle",label:"Select Vehicle",error:{invalid:"Vehicle is invalid",required:"Vehicle is required"}}},Ar={fields:Cr,initialValues:(jr={},(0,wn.Z)(jr,Cr.vehicleFault.name,""),(0,wn.Z)(jr,Cr.location.name,""),(0,wn.Z)(jr,Cr.vehicle.name,""),jr),schema:[yn.Ry().shape((br={},(0,wn.Z)(br,Cr.vehicleFault.name,yn.Z_().required(Cr.vehicleFault.error.required).label(Cr.vehicleFault.label)),(0,wn.Z)(br,Cr.location.name,yn.Z_().required(Cr.location.error.required).label(Cr.location.label)),br)),yn.Ry().shape((Sr={},(0,wn.Z)(Sr,Cr.vehicleFault.name,yn.Z_().required(Cr.vehicleFault.error.required).label(Cr.vehicleFault.label)),(0,wn.Z)(Sr,Cr.location.name,yn.Z_().required(Cr.location.error.required).label(Cr.location.label)),(0,wn.Z)(Sr,Cr.vehicle.name,yn.Z_().required(Cr.vehicle.error.required).label(Cr.vehicle.label)),Sr))]},Pr=(0,Gn.D)();var kr=function(){var e=(0,Sn.u6)(),t=e.values,n=e.setFieldValue,i=e.handleBlur,r=e.errors,a=e.touched,s=(0,w.Z)((function(e){return e.customerReducer}));return(0,V.jsx)(on.Z,{onChange:function(e,t,i){return"clear"===i?n(Ar.fields.location.name,""):"string"===typeof t?n(Ar.fields.location.name,t):t.inputValue?n(Ar.fields.location.name,t.inputValue):void 0},onBlur:i,value:t.location,fullWidth:!0,className:"locationTextField",freeSolo:!0,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},filterOptions:function(e,t){var n=Pr(e,t),i=t.inputValue,r=e.some((function(e){return i===e.title}));return""===i||r||n.push({inputValue:i,title:'Add "'.concat(i,'"')}),n},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{name:Ar.fields.location.name,label:Ar.fields.location.label,fullWidth:!0,error:void 0!==r.location&&void 0!==a.location,helperText:r.location&&a.location&&r.location}))},options:s.contacts.filter((function(e){return e.address})).map((function(e){return e.label})),isOptionEqualToValue:function(e,t){return e.label===t.label}})};function Nr(){var e=(0,r.useContext)(Bs),t=e.planTab,n=e.setPlanTab,i=e.showTime,a=e.setShowTime,s=e.checkedSlot,o=e.setCheckedSlot,l=e.mobileDate,c=e.setMobileDate,d=e.showBookingBtn,u=e.setShowBookingBtn;return(0,V.jsxs)(f.Z,{sx:{width:"100%"},children:[(0,V.jsxs)(_e.Z,{value:t,onChange:function(e,t){n(t),d&&u(!d),l&&c(!l),s&&o(!s),i&&a(!i)},children:[(0,V.jsx)($e.Z,(0,x.Z)({label:"Mobile"},tt(t))),(0,V.jsx)($e.Z,(0,x.Z)({label:"Drive-in"},tt(t)))]}),(0,V.jsx)(rt,{value:t,index:0,children:(0,V.jsx)(Jt.ZP,{alignItems:"flex-start",sx:{p:0,my:2},children:(0,V.jsx)(kr,{})})}),(0,V.jsx)(rt,{value:t,index:1,children:(0,V.jsxs)(Jt.ZP,{alignItems:"flex-start",sx:{p:0,my:2},children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(Tt.Z,{sx:{bgcolor:Ee.Z[300]},children:(0,V.jsx)(yr.Z,{})})}),(0,V.jsx)(Yt.Z,{primary:X.Z.office.primary,secondary:X.Z.office.secondary})]})})]})}var Dr=function(e){var t=e.planCategory;return(0,V.jsx)(Gt.Z,{children:function(e){switch(e){case o.YM:return(0,V.jsx)(Jt.ZP,{alignItems:"flex-start",sx:{p:0},children:(0,V.jsx)(kr,{})});case o.dg:return(0,V.jsxs)(Jt.ZP,{alignItems:"flex-start",sx:{p:0},children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(Tt.Z,{sx:{bgcolor:Ee.Z[300]},children:(0,V.jsx)(yr.Z,{})})}),(0,V.jsx)(Yt.Z,{primary:X.Z.office.primary,secondary:X.Z.office.secondary})]});case o.eW:return(0,V.jsx)(Nr,{})}}(t)})},Er=n(11452),Ir=new Date,Tr=Ir.getUTCFullYear(),qr=Ir.getUTCMonth(),Lr=Ir.getUTCDate();var Vr=function(e){var t=e.setDate,n=e.date,a=e.maxDate,s=void 0===a?new Date(Tr+1,11,31):a,o=e.minDate,l=void 0===o?new Date(Tr,qr,Lr):o,c=(0,r.useState)(),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),p=(0,i.Z)(h,2),Z=p[0],g=p[1];(0,r.useEffect)((function(){g(l),m(s)}),[]);var j=(0,w.Z)((function(e){return e.timeSlotReducer})),b=(0,r.useContext)(Bs),S=b.setShowBookingBtn,C=b.showBookingBtn,A=b.checkedSlot,k=b.setCheckedSlot,N=(0,y.Z)(),D=function(e){C&&S(!C),A&&k(!A),e=P()(e);var t=P()(j.fullDate);if(e.format("LL")===t.format("LL")){var n=e.format("YYYY-MM-DD");N((0,vr.eH)({date:n,slots:X.Z.slots,now:!0}))}else{var i=e.format("YYYY-MM-DD");N((0,vr.eH)({date:i,slots:X.Z.slots}))}};return(0,V.jsx)(Ln._,{dateAdapter:qn.Z,children:(0,V.jsxs)(f.Z,{sx:{"& .PrivatePickersSlideTransition-root":{minHeight:180,maxHeight:180,height:"100%"},"& .MuiYearPicker-root":{minHeight:180,maxHeight:180,height:"100%"},'& .PrivatePickersSlideTransition-root [role="row"]':{margin:0}},children:[(0,V.jsx)(v.Z,{textAlign:"center",variant:"subtitle2",display:"block",gutterBottom:!0,sx:{mb:1,fontSize:function(e){return e.spacing(1.5)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},children:"Select Date"}),(0,V.jsx)(Er.w,{displayStaticWrapperAs:"desktop",openTo:"day",value:n,onChange:function(e){C&&S(!C),A&&k(!A),t(e)},onYearChange:D,onMonthChange:D,onAccept:D,renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)({},e))},disablePast:!0,minDate:Z,maxDate:u,date:n,openPicker:!1,rawValue:n})]})})},Fr=new Date,Mr=Fr.getUTCFullYear(),Rr=Fr.getUTCMonth(),Ur=Fr.getUTCDate();var Br=function(e){var t=e.date,n=e.setDate,a=e.minDate,s=void 0===a?new Date(Mr,Rr,Ur):a,o=e.maxDate,l=void 0===o?new Date(Mr+1,11,31):o,c=(0,r.useState)(),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),p=(0,i.Z)(h,2),Z=p[0],g=p[1],j=(0,r.useState)(new Date),b=(0,i.Z)(j,2),S=b[0],w=b[1],y=(0,r.useContext)(Bs),C=y.setMobileDate,A=y.showTime,k=y.setShowTime;(0,r.useEffect)((function(){g(s),m(l)}),[]),(0,r.useEffect)((function(){var e=P()(S),i=P()(t),r=P()({year:e.year(),month:e.month(),date:e.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()});n(r.toDate())}),[S,n]);var N=function(e){w(e),k(!0)};return(0,V.jsx)(Ln._,{dateAdapter:qn.Z,children:(0,V.jsxs)(f.Z,{sx:{mb:2,"& .PrivatePickersSlideTransition-root":{minHeight:180,maxHeight:180,height:"100%"},"& .MuiYearPicker-root":{minHeight:180,maxHeight:180,height:"100%"},'& .PrivatePickersSlideTransition-root [role="row"]':{margin:0}},children:[(0,V.jsx)(v.Z,{textAlign:"center",variant:"subtitle2",display:"block",gutterBottom:!0,sx:{mb:1,fontSize:function(e){return e.spacing(1)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},children:"Select Preferred Date"}),(0,V.jsx)(Er.w,{displayStaticWrapperAs:"desktop",openTo:"day",renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,sx:{alignSelf:"center"}}))},value:S,showToolbar:!1,maxDate:u,minDate:Z,onChange:N,onAccept:N,disablePast:!0,rawValue:t,date:t,openPicker:!1,disableHighlightToday:!0,componentsProps:{actionBar:{actions:[]}}}),A&&(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(v.Z,{sx:{mt:2,mb:1,fontSize:function(e){return e.spacing(1)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},textAlign:"center",variant:"subtitle2",display:"block",children:"Select Preferred Time"}),(0,V.jsx)(Vn.d,{renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0}))},value:t,onChange:function(e){var t=P()(S),i=P()(e),r=P()({year:t.year(),month:t.month(),date:t.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()});n(r.toDate())},ampm:!0,onClose:function(){return C(!0)},date:t,rawValue:t})]})]})})};var Or=function(){var e=(0,Sn.u6)(),t=e.values,n=e.setFieldValue,i=e.handleBlur,a=e.errors,s=e.touched,o=(0,r.useContext)(Bs).vehicles;return 0===o.length?null:(0,V.jsx)(on.Z,{onChange:function(e,t,i){return"clear"===i?n(Ar.fields.vehicle.name,""):"string"===typeof t?n(Ar.fields.vehicle.name,t):t.inputValue?n(Ar.fields.vehicle.name,t.inputValue):void 0},onBlur:i,value:t.vehicle,fullWidth:!0,freeSolo:!0,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},filterOptions:function(e,t){var n=Pr(e,t),i=t.inputValue,r=e.some((function(e){return i===e.title}));return""===i||r||n.push({inputValue:i,title:'Add "'.concat(i,'"')}),n},renderInput:function(e){return(0,V.jsx)(se.Z,(0,x.Z)((0,x.Z)({},e),{},{name:Ar.fields.vehicle.name,label:Ar.fields.vehicle.label,fullWidth:!0,error:void 0!==a.vehicle&&void 0!==s.vehicle,helperText:a.vehicle&&s.vehicle&&a.vehicle}))},options:o.filter((function(e){return!e.isBooked})).map((function(e){return"(".concat(e.modelYear,") ").concat(e.make," ").concat(e.model)})),isOptionEqualToValue:function(e,t){return e.label===t.label}})};function Wr(e){return(0,V.jsxs)("div",{children:[e.video&&(0,V.jsxs)("video",{controls:!0,src:e.video,height:80,width:140,style:{borderRadius:"10px",cursor:"pointer",marginRight:"10px"},children:[(0,V.jsx)("track",{default:!0,kind:"captions",srcLang:"en",src:""}),"Sorry, your browser does not support embedded videos."]}),e.image&&(0,V.jsx)("img",{src:e.image,className:"imageContainer",style:{borderRadius:"10px",cursor:"pointer"},alt:"complaint"})]})}var zr=function(e){var t=e.planCategory,n=e.date,i=e.setDate,a=e.height,s=e.width,l=e.image,c=(0,r.useContext)(Bs).planTab,d=(0,Sn.u6)(),u=d.handleBlur,m=d.handleChange,h=d.errors,x=d.touched,p=d.values,v=d.setErrors;return(0,r.useEffect)((function(){v({})}),[c,v]),(0,V.jsxs)(W.ZP,{container:!0,rowSpacing:{xs:2,sm:4,md:6},columnSpacing:{xs:2,sm:4,md:6},sx:{mb:3},children:[(0,V.jsxs)(W.ZP,{item:!0,xs:12,md:6,className:"topOne",children:[(0,V.jsx)(Or,{}),"Mobile"===t&&(0,V.jsx)(f.Z,{sx:{mt:3}}),(0,V.jsx)(Dr,{planCategory:t}),"Mobile"===t&&(0,V.jsx)(f.Z,{sx:{mt:3}}),"Drive-in"===t&&(0,V.jsx)(f.Z,{sx:{mt:3}}),(0,V.jsx)(se.Z,{label:Ar.fields.vehicleFault.label,value:p.vehicleFault,name:Ar.fields.vehicleFault.name,onChange:m,onBlur:u,multiline:!0,fullWidth:!0,className:"vehicleFaultTextField",rows:1,error:void 0!==h.vehicleFault&&void 0!==x.vehicleFault,helperText:h.vehicleFault&&x.vehicleFault&&h.vehicleFault}),(0,V.jsx)(f.Z,{className:"uploadGridImageVideoContainer",children:(0,V.jsxs)(f.Z,{children:[(0,V.jsx)("div",{className:"upload-image-wrapper",children:l&&(0,V.jsx)(Wr,{height:a,width:s,image:l})}),(0,V.jsx)("label",{htmlFor:"actual-btn",className:l?"hideContainer":"upload-image-container",children:(0,V.jsx)(Qt.Dmm,{className:"single-icon"})})]})})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:t===o.eW&&0===c||t===o.YM?(0,V.jsx)(Br,{date:n,setDate:i}):(0,V.jsx)(Vr,{date:n,setDate:i})})]})},Gr="data:image/png;base64,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",Jr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAEy0lEQVR4nO2ZXWwUVRTHf3d2u6W0ldJqaAuIfFiKpVSElialodqCQFuisFBRkAChhBCeJBp5mhiJRB6JIUggSAIkto0JtWCEh0bQB4gaxWwMRCIx8eOBFrXbbZedOT60209oO7OlQ+L9Pc2cuffc/zl7Zu6ZWdBoNBqNRqPRaDSa/yHKq4Ur19blKWV9AYhSsvrS5023vNBheLEogKGsIDAbmGOjgp7p8GphUQTixwqSvdLhWQIeF3QCvBbgNToBXgvwGr+TwVXVwX3Au8CZyy2NbwPySFQ5R1VWBw8bUIfIoUsXmj4a60SnFXAAyAH2V1UHj5mm6XkFmaZpVFUHjyl4S2CGKHXAyXxHnWBVdfAwsL9/spwoKy6sN03THm3uqtoN+ZaodUpYBMwH8oG03ssdCkI2ElKoH0DOX25puj2aT9M0ja+v3/hYUDv7NAkfXrrQ+M5YY3LaCquV1cGjArsH2E4uL16460FJqK2tndxlJ+8R2AYUOlzrW+CTWDjteGvrqa6hF03TNK5e/+k4sGOA+fjllsbdOLg1fQ5FcftWqGVu3nPZwNJe0+I7v/81a9sbdc2tra0CUFFR4Z9XsHRvTPyNwHpgmtN1gFxgjRGIbp+TVxBZ8nzB96FQSKAn+CvXb5xQqO3xwQo5sby4cHdcw1hx+zI0vBKE01NT1Y72LqZjcxakbOCEgF8omh2lZF43c7ItMtIsstJ6iuZuh8G9Dh+//Onn2q0AP/4aIBobJu1KzLZffyrN90d7WE6ieHPAtYdW4aiBOJ0wcO7QJCjFRRFKgKy4LTPdZlNZmNWLI0wKjO3H6YoqLn6XwqdXJ9MeHlSkd5Ximghr4gZBTpUXF+50Ezwk/jr8oGcCAD4DtlSEWV8aJjnJ3W7ZfV/R+E0qZ79KxXpQeMLp5SULt7sNHsbne4CqqgmeR6iJG7LSLQ4E/6Hg6eg4uIcbdwJ80DSFtn/7d12luJiRomobGhqsRHwnvI9XVW+YjVAeP5+eaXGkvm3cggconBXlyK42cjNjfTYRSv6O+nIT9Z1QApYsqU9CGWeAKdDzyx/c2k5mmuuKfChZ6RYHt9wjM73Pd5Ydi52pqKhw1M0OJaEETM1u24tIKYDfJ7y3+R7ZGQlV5IjkTLUwX2vH16+63Jf6ZH0iPh33AXFWrdqaKr5YA73d3KayTl5aNKxfGXey0m0iUYPQb0kAKHihIH/u0Zs3b9534891BdhJkT30NjjZGRabV4TdunLMlhUdTOuvtJyIFRi2C42VRG6BvkbkldJOkv0T92I4KSCsWxbpOxdlbHPry1UCKtfW5dHb2yf7hcoJKP2hrCzqJNCbdIUUvbh643w3flwlQClrXfy4dH436Snj/9QfjSdShGV53X3nfp/UjDD8obi7BZQsih8umOnq2TMuLJjRv7b0vGY7xl0CRC2IH87L8S4Bz+b2N0ZKke/Gx6BW+OWaV4ssMTaCGq252AdMBthc3kGKR39rRLrh3JX4NxU6FLw/0ngRZRs+u/nL5qaf47ZBgVq20YxSM52IGCDAa9IEDo04Qgm2rfYCz8RNg28BQ3U+EmmPFTIoxkEVYPj8K8Wy1iMyaWJFTQy2SMSXlPSZ1zo0Go1Go9FoNBqNRqPRaDQajXf8B8XydueffF9IAAAAAElFTkSuQmCC";function Hr(e){var t=e.handleChange,n=e.slot,i=(0,w.Z)((function(e){return e.timeSlotReducer})),a=(0,r.useContext)(Bs).checkedSlot;return(0,V.jsx)("div",{className:"radio-container",children:i.slots.map((function(e,i){return(0,V.jsxs)("div",{className:"radio-btn",children:[(0,V.jsx)("input",{disabled:!1===e.available,type:"radio",value:e.time,name:"time",id:"".concat(e.time),onChange:t,checked:a&&e.time===n}),(0,V.jsx)(z.Z,{disabled:!e.available,className:e.available?"time-btn":"disabled time-btn",children:(0,V.jsxs)("label",{htmlFor:e.time,children:["Morning"===e.label&&(0,V.jsx)("img",{src:Gr,alt:"slot",className:"slot-img"}),"Late Morning"===e.label&&(0,V.jsx)("img",{src:Gr,alt:"slot",className:"slot-img"}),"Afternoon"===e.label&&(0,V.jsx)("img",{src:Jr,alt:"slot",className:"slot-img"}),"Late Afternoon"===e.label&&(0,V.jsx)("img",{src:Jr,alt:"slot",className:"slot-img"}),(0,V.jsx)("div",{children:(0,V.jsx)("span",{className:"time-slot-btn-title",children:e.time})})]})})]},i)}))})}var Yr=(0,r.memo)(Hr);var Qr=function(e){var t=e.slot,n=e.handleSelectSlot,i=e.planCategory,a=(0,r.useContext)(Bs).planTab;return(0,V.jsx)(W.ZP,{container:!0,rowSpacing:{xs:2,sm:4,md:6},columnSpacing:{xs:2,sm:4,md:6},sx:{mb:3},children:(0!==a||i===o.dg)&&(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{variant:"subtitle2",textAlign:"center",gutterBottom:!0,sx:{fontSize:function(e){return e.spacing(1.5)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},children:"Select available slot"}),(0,V.jsx)(Yr,{slot:t,handleChange:n})]})})},Kr=n(16856);var Xr=function(){var e=(0,r.useContext)(Bs),t=e.showBookingBtn,n=e.mobileDate;return(0,V.jsxs)(W.ZP,{container:!0,rowSpacing:{xs:2,sm:4,md:6},columnSpacing:{xs:2,sm:4,md:6},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,alignSelf:"center",children:(0,V.jsx)(r.Fragment,{})}),(t||n)&&(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(z.Z,{startIcon:(0,V.jsx)(Kr.etD,{}),className:"submit-book-btn",fullWidth:!0,variant:"contained",type:"submit",children:"Book appointment"})})]})};function _r(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(""),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(""),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useRef)(),j=(0,r.useRef)();(0,r.useEffect)((function(){var e=localStorage.getItem(o.H3.bookingData);if(e){var t=JSON.parse(e);t.vehicleFaultImg&&a("".concat(X.Z.api.customerBaseURL,"/").concat(t.vehicleFaultImg)),t.vehicleFaultVideo&&d("".concat(X.Z.api.customerBaseURL,"/").concat(t.vehicleFaultVideo))}}),[]);return{handleUploadVideo:function(e){var t=e.target.files;if(null!==t&&void 0!==t&&t.length){var n=t[0];Z(n);var i=URL.createObjectURL(n);d(i)}},handleUploadImage:function(e){var t=e.target.files;if(null!==t&&void 0!==t&&t.length){var n=t[0];x(n);var i=URL.createObjectURL(n);a(i)}},image:n,video:c,imageSrc:h,videoSrc:v,resetVideo:function(){void 0!==g.current&&(g.current.value=""),d("")},resetImage:function(){void 0!==j.current&&(j.current.value=""),a("")},imageRef:j,videoRef:g,setVideoSrc:Z,setImageSrc:x,height:50,width:50}}var $r={location:"",vehicleFault:"",vehicle:""};function ea(e){var t=(0,r.useState)(new Date),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(""),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(o.dg),h=(0,i.Z)(m,2),f=h[0],p=h[1],v=(0,r.useState)($r),Z=(0,i.Z)(v,2),g=Z[0],j=Z[1],b=(0,r.useContext)(Bs),S=b.setShowBookingBtn,w=b.showBookingBtn,A=b.setCheckedSlot,k=b.planTab,N=b.showBooking,D=b.setShowBooking,E=b.setMobileDate,I=b.setShowTime,T=b.setPlanTab,q=b.vehicles,L=b.customer,F=_r(),M=F.image,R=F.height,U=F.width,B=(0,y.Z)();(0,r.useEffect)((function(){e.planCategory&&(e.planCategory===o.dg&&j((function(e){return(0,x.Z)((0,x.Z)({},e),{},{location:o.N9})})),p(e.planCategory))}),[e.planCategory]),(0,r.useEffect)((function(){return function(){S(!1),A(!1),I(!1),E(!1),T(0),localStorage.removeItem(o.H3.bookingData)}}),[A,E,T,S,I]);var O=(0,r.useCallback)((function(e){w||S(!0),A(e.target.checked),u(e.target.value)}),[A,S,w]);return(0,V.jsx)(Se.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},className:"bookingFormContainer",children:(0,V.jsx)(Sn.J9,{initialValues:g,validationSchema:Ar.schema[1],onSubmit:function(t,n){if(f===o.YM&&!t.location.length)return n.setFieldError(Ar.fields.location.name,Ar.fields.location.error.required);if(f===o.eW&&0===k&&!t.location.length)return n.setFieldError(Ar.fields.location.name,Ar.fields.location.error.required);var i=t.location,r=d;f===o.dg&&(i=X.Z.office.secondary),f===o.eW&&1===k&&(i=X.Z.office.secondary),(f===o.YM||f===o.eW&&0===k)&&(r=P()(a.toISOString()).format("LT")),(f===o.dg||f===o.eW&&1===k)&&N&&D(!N);var s=q.find((function(e){return"(".concat(e.modelYear,") ").concat(e.make," ").concat(e.model)===t.vehicle}));if(s&&L){var l={planCategory:f,appointmentDate:a.toISOString(),vehicleFault:t.vehicleFault,vehicleId:s.id,customerId:L.id,location:i,reference:e.paymentReference,subscriptionName:e.subscriptionName,amount:e.amount,timeSlot:r};B((0,C.gz)(l))}D(!1),S(!1)},enableReinitialize:!0,children:(0,V.jsxs)(Sn.l0,{children:[(0,V.jsxs)(G.Z,{sx:{my:2},children:[(0,V.jsx)("h5",{className:"time-header-schedule",children:"Schedule An Inspection"}),(0,V.jsx)(zr,{date:a,setDate:s,planCategory:f,height:R,width:U,image:M}),(0,V.jsx)(Qr,{slot:d,handleSelectSlot:O,planCategory:f}),(0,V.jsx)(Xr,{})]}),(0,V.jsx)("div",{className:"bottomDiv"})]})})})}var ta=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useContext)(Bs),m=u.showBooking,h=u.setShowBooking,x=u.customer,p=u.setVehicles,v=u.setShowVehicles,Z=(0,w.Z)((function(e){return e.customerReducer})),g=(0,w.Z)((function(e){return e.appointmentReducer})),b=(0,y.Z)();gr();var S=(0,j.TH)();(0,r.useEffect)((function(){var e=S.state;a(e.transaction)}),[S.state]),(0,r.useEffect)((function(){"completed"===g.createAppointmentStatus&&x&&(d({message:"Successfully scheduled appointment"}),b((0,H.XZ)(x.id)))}),[b,x,g.createAppointmentStatus]),(0,r.useEffect)((function(){if("completed"===Z.getCustomerTransactionsStatus){var e=Z.transactions.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}));e&&a(e)}}),[Z.getCustomerTransactionsStatus,Z.transactions,null===n||void 0===n?void 0:n.id]),(0,r.useEffect)((function(){x&&b((0,H.ur)(x.id))}),[x,b]),(0,r.useEffect)((function(){"completed"===Z.getCustomerVehiclesStatus&&p(Z.vehicles)}),[Z.getCustomerVehiclesStatus,Z.vehicles,p]);var C=(0,r.useMemo)((function(){var e,t,i,r;switch(null===n||void 0===n?void 0:n.purpose){case null===n||void 0===n||null===(e=n.purpose.match(o.dg))||void 0===e?void 0:e.input:var a=null===n||void 0===n?void 0:n.purpose.match(o.dg);a&&(r=a[0]);break;case null===n||void 0===n||null===(t=n.purpose.match(o.YM))||void 0===t?void 0:t.input:var s=null===n||void 0===n?void 0:n.purpose.match(o.YM);s&&(r=s[0]);break;case null===n||void 0===n||null===(i=n.purpose.match(o.eW))||void 0===i?void 0:i.input:var l=null===n||void 0===n?void 0:n.purpose.match(o.eW);l&&(r=l[0])}return r}),[n]),A=(0,r.useMemo)((function(){var e,t,i,r,a;switch(null===n||void 0===n?void 0:n.purpose){case null===n||void 0===n||null===(e=n.purpose.match(o.ZX))||void 0===e?void 0:e.input:var s=null===n||void 0===n?void 0:n.purpose.match(o.ZX);s&&(a=s[0]);break;case null===n||void 0===n||null===(t=n.purpose.match(o.wv))||void 0===t?void 0:t.input:var l=null===n||void 0===n?void 0:n.purpose.match(o.wv);l&&(a=l[0]);break;case null===n||void 0===n||null===(i=n.purpose.match(o.Zw))||void 0===i?void 0:i.input:var c=null===n||void 0===n?void 0:n.purpose.match(o.Zw);c&&(a=c[0]);break;case null===n||void 0===n||null===(r=n.purpose.match(o.uz))||void 0===r?void 0:r.input:var d=null===n||void 0===n?void 0:n.purpose.match(o.uz);d&&(a=d[0])}return a}),[n]),k=(0,r.useMemo)((function(){var e=!0;return"success"===(null===n||void 0===n?void 0:n.status)&&"unprocessed"===(null===n||void 0===n?void 0:n.serviceStatus)&&(e=!1),"success"!==(null===n||void 0===n?void 0:n.status)&&"unprocessed"===(null===n||void 0===n?void 0:n.serviceStatus)&&(e=!1),e}),[n]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:9,children:(0,V.jsxs)(f.Z,{mb:2,children:[(0,V.jsx)("span",{className:xr,children:"Transaction"})," -"," ",(0,V.jsxs)("span",{className:fr,children:[null===n||void 0===n?void 0:n.serviceStatus," on ",P()(null===n||void 0===n?void 0:n.createdAt).format("LLL"),", for ",null===n||void 0===n?void 0:n.purpose]})]})}),!k&&(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsxs)(z.Z,{size:"small",onClick:function(){h(!0),v(!0)},fullWidth:!0,variant:"outlined",color:"primary",sx:{textTransform:"capitalize"},children:["Schedule ",null===n||void 0===n?void 0:n.purpose]})})]}),(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(kt.Z,{component:Se.Z,children:(0,V.jsx)(Nt.Z,{children:(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Channel"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.channel})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Card Number"}),(0,V.jsxs)(It.Z,{align:"left",children:["************",null===n||void 0===n?void 0:n.last4]})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Bank"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.bank})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Card Type"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.cardType})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Card Expiry"}),(0,V.jsxs)(It.Z,{align:"left",children:[null===n||void 0===n?void 0:n.expMonth,"/",null===n||void 0===n?void 0:n.expYear]})]})]})})})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(kt.Z,{component:Se.Z,children:(0,V.jsx)(Nt.Z,{children:(0,V.jsxs)(Dt.Z,{children:[(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Amount"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.amount})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Currency"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.currency})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Reference"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.reference})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Plan Code"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.planCode})]}),(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.Z,{component:"th",scope:"row",children:"Status"}),(0,V.jsx)(It.Z,{align:"left",children:null===n||void 0===n?void 0:n.status})]})]})})})})]})]}),(0,V.jsx)(pr,{fullScreen:!0,open:m,Content:(0,V.jsx)(ea,{planCategory:C,subscriptionName:A,amount:null===n||void 0===n?void 0:n.amount,paymentReference:null===n||void 0===n?void 0:n.reference}),onClose:function(){v(!1),h(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}})]})},na=n(9976);var ia=function(e){var t=(0,r.useState)(),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useState)(!1),l=(0,i.Z)(o,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],x=m[1],p=(0,y.Z)(),Z=(0,j.TH)();(0,r.useEffect)((function(){if(Z.state){var t=Z.state;t.vehicle&&s(t.vehicle)}e.vehicle&&s(e.vehicle)}),[p,Z.state,e.vehicle]);var g=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t){var n,i;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(X.Z.api.driverBaseURL,"/").concat(t),e.next=3,Ot.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;x(e)},setTimeout((function(){return d(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[a?(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,V.jsxs)(Kt.Z,{children:[(0,V.jsx)(Xt.Z,{component:"img",alt:"green iguana",height:"140",image:en}),(0,V.jsx)(_t.Z,{children:(0,V.jsxs)(v.Z,{variant:"h5",component:"div",children:[a.modelYear," ",a.make," ",a.model]})}),(0,V.jsx)($t.Z,{children:(0,V.jsx)(z.Z,{variant:"contained",color:"secondary",size:"small",children:"Book Inspection"})})]})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,sm:9,md:9,children:[(0,V.jsx)(Kt.Z,{children:(0,V.jsxs)(_t.Z,{children:[(0,V.jsxs)(G.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Make"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.make})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model Year"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.modelYear})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.engineCylinders})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Ownership"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.isOwner?"Owner":"-"})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Date Added"}),(0,V.jsx)(v.Z,{variant:"caption",children:P()(a.createdAt).format("LL")})]})]}),(0,V.jsx)(J.Z,{sx:{my:2}}),(0,V.jsxs)(G.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.model})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.engineModel})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"VIN"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.vin})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.type})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Plate Number"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.plateNumber})]})]}),(0,V.jsx)(J.Z,{sx:{my:2}}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:"Vehicle Papers"}),(0,V.jsxs)(G.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Vehicle Inspection"}),a.vehicleInspectionFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.vehicleInspectionFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.vehicleInspectionFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Motor Receipt"}),a.motorReceiptFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.motorReceiptFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.motorReceiptFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Proof Of Ownership"}),a.proofOfOwnershipFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.proofOfOwnershipFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.proofOfOwnershipFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Road Worthiness"}),a.roadWorthinessFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.roadWorthinessFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.roadWorthinessFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Registration Number"}),a.registrationNumberFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.registrationNumberFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.registrationNumberFileUrl,children:(0,V.jsx)(Bt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Third Party Insurance"}),a.thirdPartyInsuranceFileUrl&&(0,V.jsx)(Tt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.thirdPartyInsuranceFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.thirdPartyInsuranceFileUrl,children:(0,V.jsx)(Bt.Z,{})})]})]})]})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:{xs:2,md:2},children:[(0,V.jsx)(W.ZP,{item:!0,xs:6,children:(0,V.jsx)(v.Z,{sx:{my:1},children:"Estimates"})}),(0,V.jsx)(W.ZP,{item:!0,xs:6,children:(0,V.jsx)(v.Z,{sx:{my:1},children:"Subscriptions"})})]})]})]}):(0,V.jsx)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{children:"No Data"})})}),(0,V.jsx)(Ut,{show:c,title:"Vehicle paper",size:"sm",Content:(0,V.jsx)(na.BB,{file:h,children:xe(10).map((function(e,t){return(0,V.jsx)(na.T3,{pageNumber:e},t)}))}),onClose:function(){return d(!1)}})]})},ra=n(33402),aa=n(95080),sa=n(30829),oa=n(66647),la=n(47630),ca=n(32923),da=n(72456),ua=n(76106),ma="data:image/jpeg;base64,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",ha={location:"",vehicleFault:""};function xa(e){var t=(0,r.useState)(new Date),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(""),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(o.dg),h=(0,i.Z)(m,2),f=h[0],p=h[1],v=(0,r.useState)(),Z=(0,i.Z)(v,2),g=Z[0],j=Z[1],b=(0,r.useState)(ha),S=(0,i.Z)(b,2),A=S[0],k=S[1],N=(0,r.useState)(""),D=(0,i.Z)(N,2),E=D[0],I=D[1],T=(0,r.useContext)(Bs),q=T.setShowBookingBtn,L=T.showBookingBtn,F=T.setCheckedSlot,M=T.planTab,R=T.showBooking,U=T.setShowBooking,B=T.setMobileDate,O=T.setShowTime,W=T.setPlanTab,z=_r(),J=z.image,H=z.height,Y=z.width,Q=(0,y.Z)(),K=(0,w.Z)((function(e){return e.timeSlotReducer}));(0,r.useEffect)((function(){if(e.appointment){var t=e.appointment,n="";t.planCategory===o.eW&&(t.serviceLocation!==o.N9?(n=t.serviceLocation,I(n)):n=o.N9),t.planCategory===o.dg&&(n=o.N9),t.planCategory===o.YM&&(n=t.serviceLocation,I(n)),p(t.planCategory),j(t),k({location:n,vehicleFault:t.vehicleFault.description?t.vehicleFault.description:""})}}),[e.appointment]),(0,r.useEffect)((function(){f===o.eW&&1===M&&k((function(e){return(0,x.Z)((0,x.Z)({},e),{},{location:o.N9})})),f===o.eW&&0===M&&k((function(e){return(0,x.Z)((0,x.Z)({},e),{},{location:E})})),s(new Date)}),[E,f,M]),(0,r.useEffect)((function(){return function(){q(!1),F(!1),O(!1),B(!1),W(0),localStorage.removeItem(o.H3.bookingData)}}),[F,B,W,q,O]);var _=(0,r.useCallback)((function(e){L||q(!0),F(e.target.checked),u(e.target.value)}),[F,q,L]);return(0,V.jsx)(Se.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},className:"bookingFormContainer",children:(0,V.jsx)(Sn.J9,{initialValues:A,validationSchema:Ar.schema[0],onSubmit:function(e,t){if(f===o.YM&&!e.location.length)return t.setFieldError(Ar.fields.location.name,Ar.fields.location.error.required);if(f===o.eW&&0===M&&!e.location.length)return t.setFieldError(Ar.fields.location.name,Ar.fields.location.error.required);var n=e.location,i=d;if(f===o.dg&&(n=X.Z.office.secondary),f===o.eW&&1===M&&(n=X.Z.office.secondary),(f===o.YM||f===o.eW&&0===M)&&(i=P()(a.toISOString()).format("LT")),f===o.dg||f===o.eW&&1===M){var r,s=null===(r=K.timeSlot)||void 0===r?void 0:r.date,l=d;R&&U(!R),localStorage.setItem(o.H3.timeSlot,JSON.stringify({date:s,time:l}))}var c=null===g||void 0===g?void 0:g.id,u={planCategory:f,customerId:null===g||void 0===g?void 0:g.customerId,time:a.toISOString(),vehicleFault:e.vehicleFault,location:n,timeSlot:i};Q((0,C.zZ)({id:c,data:u})),U(!1),q(!1)},enableReinitialize:!0,children:(0,V.jsxs)(Sn.l0,{children:[(0,V.jsxs)(G.Z,{sx:{my:2},children:[(0,V.jsx)("h5",{className:"time-header-schedule",children:"Schedule An Inspection"}),(0,V.jsx)(zr,{date:a,setDate:s,planCategory:f,height:H,width:Y,image:J}),(0,V.jsx)(Qr,{slot:d,handleSelectSlot:_,planCategory:f}),(0,V.jsx)(Xr,{})]}),(0,V.jsx)("div",{className:"bottomDiv"})]})})})}var fa=(0,la.ZP)(Se.Z)((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",textAlign:"center",color:t.palette.text.secondary,height:80,width:250,flexGrow:1}})),pa=(0,la.ZP)("img")({margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%",borderRadius:10}),va=function(){var e,t,n,a,s,l,c,d,u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],x=m[1],p=(0,r.useState)([]),g=(0,i.Z)(p,2),S=g[0],A=g[1],k=(0,r.useState)(),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,r.useState)(),M=(0,i.Z)(F,2),R=M[0],U=M[1],B=(0,r.useState)(""),O=(0,i.Z)(B,2),H=O[0],Y=O[1],Q=(0,r.useState)(!1),K=(0,i.Z)(Q,2),_=K[0],$=K[1],ne=(0,r.useState)(!1),ie=(0,i.Z)(ne,2),re=ie[0],ae=ie[1],se=(0,r.useState)(),ce=(0,i.Z)(se,2),de=ce[0],ue=ce[1],he=(0,r.useState)(),fe=(0,i.Z)(he,2),pe=fe[0],ve=fe[1],Ze=(0,r.useState)(""),ge=(0,i.Z)(Ze,2),je=ge[0],be=ge[1],we=(0,r.useState)(),ye=(0,i.Z)(we,2),Ce=ye[0],Ae=ye[1],Pe=(0,r.useState)(!1),ke=(0,i.Z)(Pe,2),Ne=ke[0],De=ke[1],Ee=(0,r.useState)(""),Ie=(0,i.Z)(Ee,2),Te=Ie[0],qe=Ie[1],Le=(0,r.useRef)(null),Ve=(0,r.useRef)(null),Fe=(0,r.useRef)(null),Me=(0,j.TH)(),Re=(0,j.UO)();gr();var Ue=(0,r.useContext)(Bs),Be=Ue.showBooking,Oe=Ue.setShowBooking,We=(0,w.Z)((function(e){return e.appointmentReducer})),ze=(0,y.Z)();(0,r.useEffect)((function(){ze((0,C._$)(+Re.id))}),[Me.state,ze,Re.id]),(0,r.useEffect)((function(){"completed"===We.getAppointmentStatus&&x(We.appointment)}),[We.getAppointmentStatus,We.appointment]),(0,r.useEffect)((function(){"completed"===We.updateAppointmentStatus&&(A([]),x(We.appointment))}),[We.appointment,We.updateAppointmentStatus]);var Ge=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t,n){var i,r,a,s;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n="".concat(X.Z.api.baseURL,"/").concat(n),i=n.split("/docs/")[1].trim(),e.next=5,(0,Ot.Z)({url:n,method:"GET",responseType:"blob"});case 5:r=e.sent,a=window.URL.createObjectURL(new Blob([r.data])),(s=document.createElement("a")).href=a,s.setAttribute("download",i),document.body.appendChild(s),s.click();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Je=function(e){var t=e.target.files;if(null!==t&&void 0!==t&&t.length){var n=e.target.name,i=t[0],r=(0,rn.Z)(S);if(r.length){var a=r.find((function(e){return e.title===n}));if(a){var s=r.indexOf(a);r[s].img=ma,A(r)}else A((function(e){return[].concat((0,rn.Z)(e),[{img:ma,title:i.name,showDeleteIcon:!0}])}))}else A([{img:ma,title:i.name,showDeleteIcon:!0}]);n===o.Qy&&E(i),n===o.UK&&L(i),n===o.Rf&&U(i)}},He=function(e){Le.current&&(Le.current.value=""),Ve.current&&(Ve.current.value=""),Fe.current&&(Fe.current.value="");var t,n=(0,rn.Z)(S);if(e){if(t=n.find((function(t){return t.title===e}))){var i=n.indexOf(t);n.splice(i,1)}A(n)}},Ye=function(){D&&(be(D.name),ue(D)),q&&(be(q.name),ue(q)),R&&(be(R.name),ue(R)),Ae(setTimeout((function(){$(!0)}),100))},Xe=function(){return De(!1)};return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",marginBottom:2,children:[(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:xr,children:"Appointment"})," -"," ",(0,V.jsxs)("span",{className:fr,children:[null===h||void 0===h||null===(e=h.customer)||void 0===e?void 0:e.firstName," ",null===h||void 0===h||null===(t=h.customer)||void 0===t?void 0:t.lastName," | ",null===h||void 0===h||null===(n=h.customer)||void 0===n?void 0:n.email," |"," ",null===h||void 0===h||null===(a=h.customer)||void 0===a?void 0:a.phone]})]})}),(0,V.jsx)(W.ZP,{item:!0,children:S.length||H.length&&H!==(null===h||void 0===h?void 0:h.status)?(0,V.jsx)(z.Z,{onClick:function(){var e={};h&&(e.appointmentId=h.id,D&&(e.inventory=D),q&&(e.report=q),R&&(e.estimate=R),H.length&&(e.status=H)),ze((0,C.b4)(e))},variant:"outlined",children:"Update"}):null})]}),(0,V.jsx)(f.Z,{sx:{flexGrow:1},children:h?(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Se.Z,{elevation:5,sx:{p:2,backgroundColor:function(e){return"dark"===e.palette.mode?"#1A2027":"#fff"}},children:(0,V.jsxs)(W.ZP,{container:!0,spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(aa.Z,{children:(0,V.jsx)(pa,{alt:"complex",src:en})})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,sm:!0,container:!0,children:[(0,V.jsx)(W.ZP,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsxs)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"div",children:[null===(s=h.vehicle)||void 0===s?void 0:s.modelYear," ",null===(l=h.vehicle)||void 0===l?void 0:l.model," (",null===(c=h.vehicle)||void 0===c?void 0:c.plateNumber,")"]})})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsx)(v.Z,{variant:"subtitle1",component:"div",children:(null===(d=h.vehicle)||void 0===d?void 0:d.isBooked)&&(0,V.jsx)(b.Z,{size:"small",label:"Booked",color:"success"})})})]})]})})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,md:8,children:[(0,V.jsxs)(G.Z,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:2},justifyContent:"center",alignItems:"center",children:[(0,V.jsxs)(fa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Programme"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.programme})]}),(0,V.jsxs)(fa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Service Mode"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.modeOfService})]}),(0,V.jsxs)(fa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Status"}),(0,V.jsx)(v.Z,{variant:"caption",children:H.length?H:h.status})]}),(0,V.jsxs)(fa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Service Cost"}),(0,V.jsxs)(v.Z,{variant:"caption",children:["\u20a6",me(+h.serviceCost)]})]})]}),(0,V.jsx)(f.Z,{sx:{my:{xs:1,sm:2,md:2}}}),(0,V.jsxs)(G.Z,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:2},justifyContent:"center",alignItems:"center",children:[(0,V.jsxs)(fa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Date & Time"}),(0,V.jsxs)(v.Z,{variant:"caption",children:[P()(h.appointmentDate).format("LLL"),(0,V.jsx)("br",{}),h.timeSlot]})]}),(0,V.jsxs)(fa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Service Location"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.serviceLocation})]}),(0,V.jsx)(fa,{elevation:5,children:(0,V.jsxs)(W.ZP,{container:!0,children:[h.vehicleFault.imagePath&&(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(Tt.Z,{onClick:function(){return function(e){e="".concat(X.Z.api.customerBaseURL,"/").concat(e),ve(e),ae(!0)}(h.vehicleFault.imagePath)},sx:{cursor:"pointer"},variant:"square",src:h.vehicleFault.imagePath,children:(0,V.jsx)(ca.Z,{})})}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{children:"Complaint"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.vehicleFault.description})]})]})})]}),(0,V.jsx)(J.Z,{orientation:"horizontal",sx:{my:{xs:2,sm:4,md:6}}}),(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(z.Z,{disabled:h.status===o.lD.cancel||h.status===o.lD.complete,onClick:function(){Be||Oe(!0)},size:"small",variant:"outlined",color:"info",children:"Reschedule"}),(0,V.jsx)(z.Z,{disabled:h.status===o.lD.cancel||h.status===o.lD.complete,onClick:function(){qe("By cancelling this appointments, you will not be able to undo this action. \n      Are you sure you want to cancel?."),De(!0)},size:"small",sx:{ml:1},variant:"outlined",color:"error",children:"Cancel"})]}),(0,V.jsx)(W.ZP,{item:!0,container:!0,xs:!0,justifyContent:"space-between",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsxs)(G.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(li.Z,{size:"small",sx:{maxWidth:100,width:"100%"},children:[(0,V.jsx)(sa.Z,{id:"demo-select-small",children:"Status"}),(0,V.jsxs)(oe.Z,{labelId:"demo-select-small",id:"demo-select-small",value:H,label:"Status",onChange:function(e){return Y(e.target.value)},children:[(0,V.jsx)(le.Z,{value:"",children:(0,V.jsx)("em",{children:"..."})}),(0,V.jsx)(le.Z,{value:"Pending",children:"Pending"}),(0,V.jsx)(le.Z,{value:"In-Progress",children:"In-Progress"}),(0,V.jsx)(le.Z,{value:"Complete",children:"Complete"})]})]}),h.inventoryFile?(0,V.jsx)(z.Z,{variant:"outlined",onClick:function(e){return Ge(e,null===h||void 0===h?void 0:h.inventoryFile)},startIcon:(0,V.jsx)(da.Z,{}),children:o.Qy}):(0,V.jsxs)(z.Z,{variant:"outlined",startIcon:(0,V.jsx)(ua.Z,{}),component:"label",children:[o.Qy,(0,V.jsx)("input",{hidden:!0,onClick:function(){return He()},onChange:Je,name:o.Qy,ref:Le,accept:"application/pdf",type:"file"})]}),h.reportFile?(0,V.jsx)(z.Z,{variant:"outlined",onClick:function(e){return Ge(e,null===h||void 0===h?void 0:h.reportFile)},startIcon:(0,V.jsx)(da.Z,{}),children:o.UK}):(0,V.jsxs)(z.Z,{variant:"outlined",startIcon:(0,V.jsx)(ua.Z,{}),component:"label",children:[o.UK,(0,V.jsx)("input",{name:o.UK,onClick:function(){return He()},onChange:Je,ref:Ve,hidden:!0,accept:"application/pdf",type:"file"})]}),h.estimateFile?(0,V.jsx)(z.Z,{variant:"outlined",onClick:function(e){return Ge(e,null===h||void 0===h?void 0:h.estimateFile)},startIcon:(0,V.jsx)(da.Z,{}),children:o.Rf}):(0,V.jsxs)(z.Z,{variant:"outlined",startIcon:(0,V.jsx)(ua.Z,{}),component:"label",children:[o.Rf,(0,V.jsx)("input",{name:o.Rf,onClick:function(){return He()},onChange:Je,ref:Fe,hidden:!0,accept:"application/pdf",type:"file"})]})]})})})]}),(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(W.ZP,{item:!0,xs:!0}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(G.Z,{direction:"row",spacing:1,sx:{mt:{xs:2,md:3}},children:S.length>0?(0,V.jsx)(r.Fragment,{children:S.map((function(e,t){return(0,V.jsxs)(Kt.Z,{sx:{minWidth:150,maxHeight:250},children:[(0,V.jsx)(oa.Z,{children:(0,V.jsx)(Xt.Z,{onClick:Ye,component:"img",height:"140",image:e.img,alt:"green iguana"})}),(0,V.jsx)($t.Z,{children:e.showDeleteIcon&&(0,V.jsx)(Z.Z,{onClick:function(){return He(e.title)},sx:{color:"red"},"aria-label":"info about ".concat(e.title),children:(0,V.jsx)(Xn.Z,{})})})]},t)}))}):null})})]})]})]}):(0,V.jsx)(ra.Z,{variant:"rectangular",children:(0,V.jsx)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12}})})})]}),(0,V.jsx)(Ut,{show:_,title:je,size:"md",Content:(0,V.jsx)(na.BB,{file:de,children:xe(10).map((function(e,t){return(0,V.jsx)(na.T3,{pageNumber:e},t)}))}),onClose:function(){clearTimeout(Ce),$(!1)}}),(0,V.jsx)(Ut,{show:re,title:"Complaint",size:"sm",Content:(0,V.jsx)("img",{width:"100%",src:pe,alt:"complaint"}),onClose:function(){return ae(!1)}}),(0,V.jsx)(Ut,{show:Ne,title:"Cancel Appointment",size:"sm",Content:(0,V.jsx)(Qe.Z,{children:Te}),onClose:Xe,ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:Xe,children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:function(){var e={id:null===h||void 0===h?void 0:h.id,customerId:null===h||void 0===h?void 0:h.customerId};ze((0,C.Pg)(e)),De(!1)},children:"Agree"})]})}),(0,V.jsx)(pr,{fullScreen:!0,open:Be,Content:(0,V.jsx)(xa,{appointment:h}),onClose:function(){return Oe(!1)}})]})},Za=(0,la.ZP)(aa.Z)((function(e){var t,n=e.theme;return t={position:"relative",height:200},(0,wn.Z)(t,n.breakpoints.down("sm"),{width:"100% !important",height:100}),(0,wn.Z)(t,"&:hover, &.Mui-focusVisible",{zIndex:1,"& .MuiImageBackdrop-root":{opacity:.15},"& .MuiImageMarked-root":{opacity:0},"& .MuiTypography-root":{border:"4px solid currentColor"}}),t})),ga=(0,la.ZP)("span")({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"}),ja=(0,la.ZP)("span")((function(e){return{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.theme.palette.common.white}})),ba=(0,la.ZP)("span")((function(e){var t=e.theme;return{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:t.palette.common.black,opacity:.4,transition:t.transitions.create("opacity")}})),Sa=(0,la.ZP)("span")((function(e){var t=e.theme;return{height:3,width:18,backgroundColor:t.palette.common.white,position:"absolute",bottom:-2,left:"calc(50% - 9px)",transition:t.transitions.create("opacity")}})),wa=[{label:"Garage",value:"Garage"},{label:"Ride-Share",value:"Ride-Share"}];function ya(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,Sn.u6)(),l=o.handleChange,c=o.values,d=o.resetForm,u=o.setFieldValue,m=(0,w.Z)((function(e){return e.miscellaneousReducer})),h=(0,w.Z)((function(e){return e.partnerReducer}));return(0,r.useEffect)((function(){e.createPartner||d()}),[e.createPartner,d]),(0,r.useEffect)((function(){"completed"===m.getStatesAndDistrictsStatus&&s(m.states.map((function(e){return{label:e.name,value:e.alias}})))}),[m.getStatesAndDistrictsStatus,m.states]),(0,V.jsx)(Sn.l0,{autoComplete:"off",children:(0,V.jsxs)(W.ZP,{container:!0,sx:{p:2},spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:l,value:c.name,name:An.fields.name.name,label:An.fields.name.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:l,value:c.email,name:An.fields.email.name,label:An.fields.email.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Pn.Z,{onChange:l,value:c.phone,name:An.fields.phone.name,label:An.fields.phone.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)($n.Z,{onChange:l,value:c.category,name:An.fields.category.name,label:An.fields.category.label,data:wa})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)($n.Z,{onChange:l,value:c.state,name:An.fields.state.name,label:An.fields.state.label,data:a})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,md:6,justifyContent:"space-evenly",alignItems:"center",spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(z.Z,{endIcon:(0,V.jsx)(En.Z,{}),color:"primary","aria-label":"upload picture",component:"label",children:["upload logo",(0,V.jsx)("input",{hidden:!0,name:An.fields.logo.name,onChange:function(e){var t=e.target.files;t&&u(An.fields.logo.name,t[0])},accept:"image/*",type:"file"})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:c.logo&&(0,V.jsx)("img",{src:fe(c.logo),crossOrigin:"anonymous",width:"10%",alt:"logo"})})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(ie.Z,{type:"submit",variant:"contained",loading:"loading"===h.createPartnerStatus,fullWidth:!0,color:"primary",endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})})}var Ca=n.p+"static/media/partner2.afb3d17631d887be645e.jpg",Aa=n(21659);function Pa(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(""),p=(0,i.Z)(x,2),Z=p[0],g=p[1],b=(0,r.useState)(""),S=(0,i.Z)(b,2),C=S[0],A=S[1],P=(0,r.useState)("none"),k=(0,i.Z)(P,2),N=k[0],D=k[1],E=(0,w.Z)((function(e){return e.miscellaneousReducer})),I=(0,w.Z)((function(e){return e.partnerReducer})),T=(0,y.Z)(),q=(0,j.s0)();(0,r.useEffect)((function(){h(l)}),[l]),(0,r.useEffect)((function(){"idle"===E.getStatesAndDistrictsStatus&&T((0,Un.u)())}),[T,E.getStatesAndDistrictsStatus]),(0,r.useEffect)((function(){"idle"===I.getPartnersStatus&&T((0,He.rR)())}),[T,I.getPartnersStatus]),(0,r.useEffect)((function(){"completed"===I.getPartnersStatus&&c(I.partners.map((function(e){return{id:e.id,url:e.logo?fe(e.logo):Ca,title:e.name,width:"33.33%",partner:e}})))}),[T,I.getPartnersStatus,I.partners]),(0,r.useEffect)((function(){if("completed"===I.createPartnerStatus){var e=I.partner;e&&c((function(t){return[].concat((0,rn.Z)(t),[{id:e.id,url:e.logo?fe(e.logo):Ca,title:e.name,width:"33.33%"}])})),a(!1)}}),[I.createPartnerStatus,I.partner]),(0,r.useEffect)((function(){return function(){T((0,Aa.TK)()),T((0,ot.$R)()),T((0,ot.zQ)())}}),[T]);return(0,r.useEffect)((function(){if("none"==N)h(l);else if("state"==N){var e=l.filter((function(e){return e.partner.contact.state.includes(C)}));h(e)}else{var t=l.filter((function(e){return e.partner.categories[0].name.includes(C)}));h(t)}}),[N,C]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(f.Z,{mb:1,children:(0,V.jsx)(z.Z,{onClick:function(){a(!0)},variant:"outlined",color:"secondary",children:"Create Partner"})}),(0,V.jsxs)(f.Z,{sx:{minWidth:300,width:"100%",marginBottom:4},children:[(0,V.jsx)(se.Z,{style:{width:"38%"},placeholder:"Search Partner",value:Z,onChange:function(e){var t=l.filter((function(t){return t.title.includes(e.target.value)}));h(t),g(e.target.value)}}),(0,V.jsx)(se.Z,{style:{width:"30%",marginLeft:"5%"},placeholder:"Filter, e.g Garage or Abuja",value:C,onChange:function(e){var t=e.target.value;A(t)}}),(0,V.jsxs)(oe.Z,{style:{width:"23%",marginLeft:"1%"},placeholder:"Filter By",label:"Filter-By",value:N,onChange:function(e){var t=e.target.value;D(t)},children:[(0,V.jsx)(le.Z,{value:"none",children:"None"}),(0,V.jsx)(le.Z,{value:"category",children:"Category"}),(0,V.jsx)(le.Z,{value:"state",children:"State"})]})]}),(0,V.jsx)(f.Z,{sx:{display:"flex",flexWrap:"wrap",minWidth:300,width:"100%"},children:m.map((function(e){var t,n;console.log(e,"imageData");var i=(null===e||void 0===e||null===(t=e.partner)||void 0===t||null===(n=t.users[0])||void 0===n?void 0:n.active)||!1;return(0,V.jsxs)(Za,{focusRipple:!0,onClick:function(){return q("/partner/".concat(e.id),{state:e})},style:{width:e.width},children:[(0,V.jsx)(ga,{style:{backgroundImage:"url(".concat(e.url,")")}}),(0,V.jsx)(ba,{className:"MuiImageBackdrop-root"}),(0,V.jsxs)(ja,{children:[(0,V.jsx)("div",{style:{position:"absolute",top:20,right:20},children:(0,V.jsx)(z.Z,{disabled:!0,variant:"outlined",color:"secondary",children:i?"Active":"In-Active"})}),(0,V.jsxs)(v.Z,{component:"span",variant:"subtitle1",color:"inherit",sx:{position:"relative",p:4,pt:2,pb:function(e){return"calc(".concat(e.spacing(1)," + 6px)")}},children:[e.title,(0,V.jsx)(Sa,{className:"MuiImageMarked-root"})]})]})]},e.title)}))}),(0,V.jsx)(Ut,{size:"md",fullWidth:!0,show:n,Content:(0,V.jsx)(Sn.J9,{initialValues:An.initialValues,onSubmit:function(e,t){T((0,He.$o)(e)),t.resetForm()},validationSchema:An.schema[0],children:(0,V.jsx)(ya,{createPartner:n})}),onClose:function(){a(!1)}}),(0,V.jsx)(ze.Z,{show:"loading"===I.getPartnersStatus})]})}var ka=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,j.TH)(),u=$(),m=u.isSuperAdmin,h=u.isDriverAdmin;return(0,r.useEffect)((function(){m&&c(sr),h&&c(sr.filter((function(e){return"Vehicles"===e.name})))}),[m,h]),(0,r.useEffect)((function(){if(d.state){var e=d.state;a(e.driver)}}),[d.state]),(0,V.jsx)(G.Z,{direction:"column",spacing:5,divider:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(Se.Z,{sx:{p:3},children:(0,V.jsx)(wt.Provider,{value:{driver:n,setDriver:a},children:(0,V.jsx)(ut,{tabMenus:l})})})})};function Na(){var e,t,n=(0,r.useContext)(Bs).setDriver,a=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(),f=(0,i.Z)(x,2),p=f[0],v=f[1],Z=(0,r.useState)(),g=(0,i.Z)(Z,2),j=g[0],b=g[1],S=(0,r.useState)(),C=(0,i.Z)(S,2),A=C[0],P=C[1],k=(0,r.useState)([{field:"id",sort:"asc"}]),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,w.Z)((function(e){return e.rideShareReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){return function(){T((0,lt.dI)())}}),[T]),(0,r.useEffect)((function(){"idle"===I.getDriversStatus&&T((0,We.M3)())}),[I.getDriversStatus,T]),(0,r.useEffect)((function(){"loading"===I.getDriversStatus&&c(!0)}),[I.getDriversStatus,T]),(0,r.useEffect)((function(){"completed"===I.getDriversStatus&&(c(!1),h(I.drivers))}),[I.drivers,I.getDriversStatus]),(0,r.useEffect)((function(){"failed"===I.getDriversStatus&&(c(!1),I.getDriversError&&b({message:I.getDriversError}))}),[I.getDriversError,I.getDriversStatus]),(0,r.useEffect)((function(){"completed"===I.deleteDriverStatus&&(c(!1),P({message:I.deleteDriverSuccess}))}),[I.drivers,I.deleteDriverStatus,I.deleteDriverSuccess]),(0,r.useEffect)((function(){"failed"===I.deleteDriverStatus&&(c(!1),I.deleteDriverError&&b({message:I.deleteDriverError}))}),[I.deleteDriverError,I.deleteDriverStatus]),(0,r.useEffect)((function(){return function(){T((0,lt.dI)()),T((0,lt.OK)()),T((0,lt.CV)())}}),[T]),{rows:m,sortModel:D,setSortModel:E,loading:l,showDelete:n,setShowDelete:a,error:j,setError:b,success:A,setSuccess:P,handleDelete:function(){p&&T((0,We.sz)(p)),a(!1)},onDelete:function(e){v(e.id),a(!0)}}}(),s=(0,j.s0)();return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Drivers"}),(0,V.jsx)(G.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",divider:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(G.Z,{direction:"row",sx:{width:"100%"},children:(0,V.jsx)(R,{loading:a.loading,rows:a.rows,columns:Da({onDelete:a.onDelete,onView:function(e){n(e),s("/drivers/".concat(e.id),{state:{driver:e}})}}),showToolbar:!0,sortModel:a.sortModel,onSortModel:a.setSortModel,checkboxSelection:!0,disableSelectionOnClick:!0})})}),(0,V.jsx)(Ut,{fullWidth:!0,show:a.showDelete,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return a.setShowDelete(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:a.handleDelete,children:"Agree"})]}),onClose:function(){return a.setShowDelete(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==a.success,message:null===(e=a.success)||void 0===e?void 0:e.message,onClose:function(){return a.setSuccess(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==a.error,message:null===(t=a.error)||void 0===t?void 0:t.message,onClose:function(){return a.setError(void 0)}}),(0,V.jsx)(ze.Z,{show:a.loading})]})}var Da=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e?"".concat(e.row.firstName," ").concat(e.row.lastName):""}},{field:"enabled",headerName:"Status",headerAlign:"center",align:"center",type:"boolean",width:100,sortable:!0,renderCell:function(e){return e.row.enabled?(0,V.jsx)(b.Z,{label:"Active",size:"small",color:"success"}):(0,V.jsx)(b.Z,{label:"Inactive",size:"small",color:"warning"})}},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;!t||P()(t).format("LLL")},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;!t||P()(t).format("LLL")},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(Xn.Z,{sx:{color:"orangered"}}),onClick:function(){return e.onDelete(t.row)},label:"View",showInMenu:!1},0)]}}]},Ea=n(16205),Ia=n(31009),Ta=n(38996),qa=n(73974),La=n(76278),Va=n(77988),Fa=n(36949);var Ma=n(82977),Ra=(0,la.ZP)("div")((function(e){var t=e.theme;return(0,x.Z)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar)})),Ua=function(e){return{width:o.pG,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},Ba=function(e){return(0,wn.Z)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(8)," + 1px)")})},Oa=(0,la.ZP)(qa.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,x.Z)((0,x.Z)({width:o.pG,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&(0,x.Z)((0,x.Z)({},Ua(t)),{},{"& .MuiDrawer-paper":Ua(t)})),!n&&(0,x.Z)((0,x.Z)({},Ba(t)),{},{"& .MuiDrawer-paper":Ba(t)}))}));var Wa=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1];(0,r.useState)();var s=(0,r.useContext)(Bs),o=s.openSideNav,l=s.setOpenSideNav,c=$(),d=(0,j.s0)(),u=(0,j.TH)(),m=(0,Xe.Z)(),h=function(){var e=(0,w.Z)((function(e){return e.authenticationReducer})),t=(0,y.Z)(),n=(0,j.s0)();return(0,r.useEffect)((function(){"completed"===e.signOutStatus&&(sessionStorage.clear(),n("/")),t((0,Fa.ov)())}),[e.signOutStatus,t,n]),{handleLogout:function(){return t((0,Va.NH)())}}}();return(0,r.useEffect)((function(){c.isSuperAdmin&&a(Ma.Y.filter((function(e){return"all"===e.tag||"super"===e.tag||"drivers"===e.tag||"Estimates"===e.name||"Invoices"===e.name}))),c.isTechAdmin&&a(Ma.Y.filter((function(e){return"techs"===e.tag||"Invoices"===e.name}))),c.isDriverAdmin&&a(Ma.Y.filter((function(e){return"all"===e.tag||"drivers"===e.tag})))}),[c.isDriverAdmin,c.isSuperAdmin,c.isTechAdmin]),(0,V.jsxs)(Oa,{variant:"permanent",open:o,children:[(0,V.jsx)(Ra,{children:(0,V.jsx)(Z.Z,{onClick:function(){l(!1)},children:"rtl"===m.direction?(0,V.jsx)(Ta.Z,{}):(0,V.jsx)(Ia.Z,{})})}),(0,V.jsx)(J.Z,{}),(0,V.jsx)(Gt.Z,{children:n.map((function(e,t){return(0,V.jsx)(Jt.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,V.jsxs)(La.Z,{onClick:function(){d(e.path)},selected:e.path===u.pathname,sx:{minHeight:48,justifyContent:o?"initial":"center",px:2.5},children:[(0,V.jsx)(wr.Z,{sx:{minWidth:0,mr:o?3:"auto",justifyContent:"center"},children:(0,V.jsx)(e.Icon,{})}),(0,V.jsx)(Yt.Z,{primary:e.name,sx:{opacity:o?1:0}})]})},t)}))}),(0,V.jsx)(J.Z,{}),(0,V.jsx)(Gt.Z,{children:["Logout"].map((function(e){return(0,V.jsx)(Jt.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,V.jsxs)(La.Z,{onClick:h.handleLogout,sx:{minHeight:48,justifyContent:o?"initial":"center",px:2.5},children:[(0,V.jsx)(wr.Z,{sx:{minWidth:0,mr:o?3:"auto",justifyContent:"center"},children:(0,V.jsx)(Ea.Z,{})}),(0,V.jsx)(Yt.Z,{primary:e,sx:{opacity:o?1:0}})]})},e)}))})]})},za=(0,la.ZP)(Lt.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,x.Z)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:o.pG,width:"calc(100% - ".concat(o.pG,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),Ga=n(60092),Ja={fields:{checkList:{name:"checkList",label:"Check List*",error:{invalid:"Check List name is invalid",require:"Check List name is required"}},partners:{name:"partners",label:"Partner*",error:{invalid:"Partner is invalid",require:"Partner is required"}},description:{name:"description",label:"Description*",error:{invalid:"Description is invalid",require:"Description is required"}},sections:{name:"sections",label:"Section Title*",error:{invalid:"Section Title is invalid",require:"Section Title is required"}},questions:{name:"questions",label:"Question*",error:{invalid:"Question is invalid",require:"Question is required"}},answers:{name:"answers",label:"Answer*",error:{invalid:"Answer is invalid",require:"Answer is required"}}},initialValues:{checkList:"",partners:[],description:""},schema:yn.Ry().shape({checkList:yn.Z_().required().label("Check List name"),description:yn.Z_().required().label("Check List Description"),partners:yn.IX(yn.Z_()).required().label("Partners")})},Ha=Ja.fields;function Ya(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,Sn.u6)(),c=l.handleChange,d=l.values,u=l.resetForm,m=(0,r.useContext)(Xa),h=m.partners,x=m.showCreate,f=m.showEdit;return(0,r.useEffect)((function(){x&&f||u()}),[f,x,u]),(0,r.useEffect)((function(){if(h.length){var e=h.filter((function(e){return e.categories.some((function(e){return e.name===o.bX}))}));s(e.map((function(e){return{label:e.name,value:"".concat(e.id)}})))}}),[h]),(0,V.jsx)(Sn.l0,{children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(Pn.Z,{onChange:c,value:d.checkList,name:Ha.checkList.name,label:Ha.checkList.label})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)($n.Z,{onChange:c,value:d.partners,name:Ha.partners.name,label:Ha.partners.label,multiple:!0,fullWidth:!0,data:a})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(Pn.Z,{multiline:!0,rows:2,onChange:c,value:d.description,name:Ha.description.name,label:Ha.description.label,data:a})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(ie.Z,{type:"submit",loading:e.isSubmitting,fullWidth:!0,endIcon:(0,V.jsx)(Ni.Z,{}),variant:"contained",color:"secondary",size:"large",children:"Submit"})})]})})}var Qa="data:image/png;base64,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";var Ka=function(e){return(0,V.jsxs)(Kt.Z,{sx:{width:"100%"},children:[(0,V.jsxs)(oa.Z,{onClick:e.onNavigate,children:[(0,V.jsx)(Xt.Z,{component:"img",sx:{width:"30%"},image:e.imgUrl,alt:"check-list-".concat(e.index)}),(0,V.jsx)(_t.Z,{children:(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"h5",component:"div",children:e.title})})]}),(0,V.jsxs)($t.Z,{children:[(0,V.jsx)(Z.Z,{onClick:e.onEdit,size:"small",color:"primary",children:(0,V.jsx)(yi.Z,{})}),(0,V.jsx)(Z.Z,{onClick:e.onDelete,size:"small",color:"error",children:(0,V.jsx)(Xn.Z,{})})]})]})},Xa=(0,r.createContext)(null);var _a=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],p=m[1],v=(0,r.useState)(!1),Z=(0,i.Z)(v,2),g=Z[0],b=Z[1],S=(0,r.useState)([]),C=(0,i.Z)(S,2),A=C[0],P=C[1],k=(0,r.useState)([]),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,r.useState)(),M=(0,i.Z)(F,2),R=M[0],U=M[1],B=(0,r.useState)(),O=(0,i.Z)(B,2),G=O[0],J=O[1],H=(0,r.useState)(Ja.initialValues),Y=(0,i.Z)(H,2),Q=Y[0],K=Y[1],X=(0,y.Z)(),_=(0,w.Z)((function(e){return e.partnerReducer})),$=(0,w.Z)((function(e){return e.checkListReducer})),ee=(0,j.s0)();return(0,r.useEffect)((function(){"idle"===_.getPartnersStatus&&X((0,He.rR)())}),[X,_.getPartnersStatus]),(0,r.useEffect)((function(){"idle"===$.getCheckListsStatus&&X((0,vn.un)())}),[X,$.getCheckListsStatus]),(0,r.useEffect)((function(){"completed"===_.getPartnersStatus&&P(_.partners)}),[_.getPartnersStatus,_.partners]),(0,r.useEffect)((function(){"completed"===$.getCheckListsStatus&&E($.checkLists.map((function(e){return{id:e.id,url:Qa,title:e.name,width:"33.33%"}})))}),[$.getCheckListsStatus,$.checkLists]),(0,r.useEffect)((function(){if("completed"===$.createCheckListStatus){var e=$.checkLists;e.length&&E(e.map((function(e){return{id:e.id,url:Qa,title:e.name,width:"33.33%"}}))),a(!1),L({message:$.createCheckListSuccess}),X((0,st.CO)()),X((0,st.S4)())}}),[$.createCheckListStatus,$.checkLists,$.createCheckListSuccess,X]),(0,r.useEffect)((function(){if("completed"===$.updateCheckListStatus){var e=$.checkLists;e.length&&E(e.map((function(e){return{id:e.id,url:Qa,title:e.name,width:"33.33%"}}))),d(!1),L({message:$.updateCheckListSuccess}),X((0,st.uR)()),X((0,st.S4)())}}),[$.updateCheckListStatus,$.checkLists,$.updateCheckListSuccess,X]),(0,r.useEffect)((function(){"failed"===$.createCheckListStatus&&(a(!1),$.createCheckListError&&U({message:$.createCheckListError})),X((0,st.CO)()),X((0,st.S4)())}),[$.createCheckListStatus,$.createCheckListError,X]),(0,r.useEffect)((function(){"failed"===$.updateCheckListStatus&&(d(!1),$.updateCheckListError&&U({message:$.updateCheckListError})),X((0,st.CO)()),X((0,st.S4)())}),[$.updateCheckListStatus,$.updateCheckListError,X]),(0,r.useEffect)((function(){"failed"===$.deleteCheckListStatus&&(d(!1),$.deleteCheckListError&&U({message:$.deleteCheckListError})),X((0,st.CO)()),X((0,st.S4)())}),[$.deleteCheckListStatus,$.deleteCheckListError,X]),(0,r.useEffect)((function(){return function(){X((0,st.CO)()),X((0,st.S4)())}}),[X]),(0,V.jsxs)(Xa.Provider,{value:{showCreate:n,setShowCreate:a,showEdit:c,setShowEdit:d,showDelete:h,setShowDelete:p,showView:g,setShowView:b,partners:A,setPartners:P},children:[(0,V.jsx)(f.Z,{mb:3,children:(0,V.jsx)(z.Z,{onClick:function(){return a(!0)},variant:"outlined",color:"secondary",children:"Create CheckList"})}),(0,V.jsx)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:D.map((function(e){return(0,V.jsx)(W.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Ka,{onEdit:function(){return function(e){var t=$.checkLists.find((function(t){return t.id===e}));if(t){var n=t.partners.map((function(e){return"".concat(e.id)}));J(e),K((function(e){return(0,x.Z)((0,x.Z)({},e),{},{checkList:t.name?t.name:"",description:t.description?t.description:"",partners:n})})),d(!0)}}(e.id)},onDelete:function(){return t=e.id,J(t),void p(!0);var t},onNavigate:function(){return ee("/checkLists/".concat(e.id),{state:{checkLists:$.checkLists,checkListId:e.id}})},title:e.title,imgUrl:e.url,index:e.id})},e.id)}))}),(0,V.jsx)(Ut,{fullWidth:!0,size:"sm",show:n,Content:(0,V.jsx)(Sn.J9,{initialValues:Q,onSubmit:function(e){X((0,vn.mM)(e))},validationSchema:Ja.schema,children:(0,V.jsx)(Ya,{isSubmitting:"loading"===$.createCheckListStatus})}),onClose:function(){return a(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"sm",show:c,Content:(0,V.jsx)(Sn.J9,{initialValues:Q,onSubmit:function(e){X((0,vn._8)({data:e,id:G}))},validationSchema:Ja.schema,enableReinitialize:!0,children:(0,V.jsx)(Ya,{isSubmitting:"loading"===$.updateCheckListStatus})}),onClose:function(){return d(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==q,message:null===q||void 0===q?void 0:q.message,onClose:function(){return L(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==R,message:null===R||void 0===R?void 0:R.message,onClose:function(){return U(void 0)}}),(0,V.jsx)(Ut,{fullWidth:!0,show:h,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return p(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:function(){G&&X((0,vn.$C)(G)),p(!1)},children:"Agree"})]}),onClose:function(){return p(!1)}}),(0,V.jsx)(ze.Z,{show:"loading"===$.getCheckListsStatus}),(0,V.jsx)(ze.Z,{show:"loading"===$.deleteCheckListStatus})]})},$a=n(2199),es=n(54261),ts={fields:{sections:{name:"sections",label:"Section Title*",error:{invalid:"Section Title is invalid",require:"Section Title is required"}},questions:{name:"questions",label:"Question*",error:{invalid:"Question is invalid",require:"Question is required"}},answers:{name:"answers",label:"Answer*",error:{invalid:"Answer is invalid",require:"Answer is required"}}},initialValues:{sections:[{id:(0,es.Z)(),title:"",questions:[{id:(0,es.Z)(),answers:[{id:(0,es.Z)(),answer:"",weight:"",color:""}],media:!1,note:!1,question:""}]}]},schema:yn.Ry().shape({checkList:yn.Z_().required().label("Check List name"),partner:yn.Z_().required().label("Partner")})},ns=n(48656),is=ts.initialValues,rs=ts.fields;function as(e){var t=(0,Sn.u6)(),n=t.values,i=t.setFieldValue,a=t.handleChange,s=(0,r.useMemo)((function(){return 0===n.sections.length}),[n]);return(0,V.jsx)(Sn.l0,{children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:3},children:[(0,V.jsx)(Sn.F2,{name:"sections",render:function(e){return n.sections&&n.sections.map((function(t,s){return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(W.ZP,{item:!0,xs:8,children:(0,V.jsx)(se.Z,{size:"small",label:"Section ".concat(s+1),fullWidth:!0,name:"sections.".concat(s,".title"),value:n.sections[s].title,onChange:a})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)($a.Z,{fullWidth:!0,children:[(0,V.jsx)(z.Z,{onClick:function(){return e.remove(s)},variant:"contained",color:"error",sx:{fontSize:11},endIcon:(0,V.jsx)(Xn.Z,{}),children:"Remove Section"}),(0,V.jsx)(z.Z,{onClick:function(){return function(e){e.push(is.sections[0])}(e)},variant:"contained",color:"success",sx:{fontSize:11},endIcon:(0,V.jsx)(Tn.Z,{}),children:"Add Section"})]})}),t.questions&&t.questions.map((function(e,t){return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(W.ZP,{item:!0,xs:!0}),(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(se.Z,{size:"small",label:"Question ".concat(t+1),fullWidth:!0,value:n.sections[s].questions[t].question,name:"sections.".concat(s,".questions.").concat(t,".question"),onChange:a})}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,container:!0,justifyContent:"space-around",children:[(0,V.jsx)(ui.Z,{label:"Media",control:(0,V.jsx)(Di.Z,{size:"small",checked:n.sections[s].questions[t].media,name:"sections.".concat(s,".questions.").concat(t,".media"),onChange:a})}),(0,V.jsx)(ui.Z,{label:"Note",control:(0,V.jsx)(Di.Z,{size:"small",checked:n.sections[s].questions[t].note,name:"sections.".concat(s,".questions.").concat(t,".note"),onChange:a})})]}),(0,V.jsx)(W.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)($a.Z,{fullWidth:!0,children:[(0,V.jsx)(z.Z,{onClick:function(){return function(e,t){var r=(0,rn.Z)(n.sections);r[t].questions.splice(e,1),i(rs.sections.name,r)}(t,s)},variant:"contained",color:"error",sx:{fontSize:11},endIcon:(0,V.jsx)(Xn.Z,{}),children:"Remove Question"}),(0,V.jsx)(z.Z,{onClick:function(){return function(e,t){var r=(0,rn.Z)(n.sections);r[t].questions.push({id:(0,es.Z)(),answers:[{id:(0,es.Z)(),answer:"",weight:"",color:""}],media:!1,note:!1,question:""}),i(rs.sections.name,r)}(0,s)},variant:"contained",color:"success",sx:{fontSize:11},endIcon:(0,V.jsx)(Tn.Z,{}),children:"Add Question"})]})}),e.answers&&e.answers.map((function(e,o){return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(W.ZP,{item:!0,xs:2}),(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(se.Z,{size:"small",label:"Answer ".concat(o+1),fullWidth:!0,name:"sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".answer"),value:n.sections[s].questions[t].answers[o].answer,onChange:a})}),(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(se.Z,{size:"small",label:"Weight ".concat(o+1),fullWidth:!0,name:"sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".weight"),value:n.sections[s].questions[t].answers[o].weight,onChange:a})}),(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(ns.O,{size:"small",label:"Color ".concat(o+1),fullWidth:!0,format:"hex",name:"sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".color"),value:n.sections[s].questions[t].answers[o].color,onChange:function(e){i("sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".color"),e)}})}),(0,V.jsx)(W.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)($a.Z,{fullWidth:!0,children:[(0,V.jsx)(z.Z,{onClick:function(){return function(e,t,r){var a=(0,rn.Z)(n.sections);a[r].questions[t].answers.splice(e,1),i(rs.sections.name,a)}(o,t,s)},variant:"contained",color:"error",sx:{fontSize:11},endIcon:(0,V.jsx)(Xn.Z,{}),children:"Remove Answer"}),(0,V.jsx)(z.Z,{onClick:function(){return function(e,t,r){var a=(0,rn.Z)(n.sections);a[r].questions[t].answers.push({id:(0,es.Z)(),answer:"",weight:"",color:""}),i(rs.sections.name,a)}(0,t,s)},variant:"contained",color:"success",sx:{fontSize:11},endIcon:(0,V.jsx)(Tn.Z,{}),children:"Add Answer"})]})})]},o)}))]},t)})),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(J.Z,{orientation:"horizontal"})})]},s)}))}}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:s?(0,V.jsx)(z.Z,{onClick:function(){return i(rs.sections.name,is.sections)},type:"button",variant:"outlined",color:"success",size:"small",endIcon:(0,V.jsx)(Tn.Z,{}),children:"Add Section"}):(0,V.jsx)(ie.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",size:"small",endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"})})]})})}var ss=(0,r.createContext)(null),os=ts.initialValues;var ls=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],f=m[1],p=(0,r.useState)(),v=(0,i.Z)(p,2),Z=v[0],g=v[1],b=(0,r.useState)(),S=(0,i.Z)(b,2),C=S[0],A=S[1],P=(0,r.useState)(),k=(0,i.Z)(P,2),N=k[0],D=k[1],E=(0,r.useState)(os),I=(0,i.Z)(E,2),T=I[0],q=I[1],L=(0,w.Z)((function(e){return e.checkListReducer})),F=(0,y.Z)(),M=(0,j.TH)();return(0,r.useEffect)((function(){var e=M.state;e?(a(e.checkListId),d(e.checkLists),f(e.checkLists.find((function(t){return t.id==e.checkListId}))),F((0,vn.IY)(e.checkListId))):D({message:o.X3.internalError})}),[M.state,F]),(0,r.useEffect)((function(){if("completed"===L.getCheckListStatus&&L.checkList){var e=L.checkList;q((function(t){return(0,x.Z)((0,x.Z)({},t),{},{sections:JSON.parse(JSON.stringify(e.sections))})}))}}),[L.getCheckListStatus,L.checkList]),(0,r.useEffect)((function(){if("completed"===L.updateJobCheckListStatus){if(L.checkList){var e=L.checkList;q((function(t){return(0,x.Z)((0,x.Z)({},t),{},{sections:JSON.parse(JSON.stringify(e.sections))})}))}A({message:L.updateJobCheckListSuccess})}}),[L.updateJobCheckListStatus,L.checkList,L.updateJobCheckListSuccess]),(0,r.useEffect)((function(){"failed"===L.updateJobCheckListStatus&&L.updateJobCheckListError&&g({message:L.updateJobCheckListError})}),[L.updateJobCheckListStatus,L.updateJobCheckListError]),(0,r.useEffect)((function(){return function(){F((0,st.S4)()),F((0,st.a4)()),F((0,st.aS)()),q(os)}}),[F]),N?(0,V.jsx)(j.Fg,{to:{pathname:"/error"},state:{message:N.message}}):(0,V.jsxs)(ss.Provider,{value:{checkListId:n,setCheckListId:a,checkLists:c,setCheckLists:d},children:[h?(0,V.jsxs)(G.Z,{spacing:3,children:[(0,V.jsx)("h1",{children:h.name}),(0,V.jsx)(Sn.J9,{initialValues:T,onSubmit:function(e){if(void 0===n)return g({message:o.X3.internalError});var t=JSON.stringify(e);F((0,vn.uK)({id:n,data:t}))},enableReinitialize:!0,children:(0,V.jsx)(as,{isSubmitting:"loading"===L.updateJobCheckListStatus})})]}):(0,V.jsx)(ze.Z,{show:void 0===h}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==Z,message:null===Z||void 0===Z?void 0:Z.message,onClose:function(){return g(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==C,message:null===C||void 0===C?void 0:C.message,onClose:function(){return A(void 0)}})]})},cs=n(37762),ds=n(9585),us="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGNSURBVHgBjZJPTsJQEMZnpmhcaMIBBGGDLPEGcAMqupaeQDmBcAL1BODaEPQEcANZGcCFDXqABldA+8b3+gcq/RO+pE06M/m9730dBF/l/rzJiDfAWABkUzA/fzbyvX36qF7ng/kDCLyDiPhx2si3Sv2fLgI3I12C9kzPddA9AbALCWKGMSJUkvoooEbM0mKK0gDuIRrcE8QOoek9e0hmRHLY2q0LEB0UbPyblddKoGRJds3dskbOaHKdGwHDKHA2u8pdbL/DpmVm5Zfvqkx5uOEC9tiBJ9ScOgkaqZ4ANtYL5/XoOFMJz3qu2cA4g2X5Sxm4vlzYxcOTzJA0WxdOZrD6tWumUbSiZnyV+nO5C1T1/RSCUw6IxrYjCog4kCVrkyE6b9PLM3e3KICsyGkxshUA3Kbc0A/9dIyAt34pq/rMbC1RtCNO3GsMvgosDoZhkJxQAVdD5k2kdW2iF81YSCIoBRAL2YIy7579dIASxUHUoEZYAzdIV5ZGoMcBEiFKXqDcUpsqgzTUd9LsH7I1x80VnVYTAAAAAElFTkSuQmCC",ms=n(26284),hs=n(46935),xs=n(41385),fs=n(58066),ps=n(61146),vs=n(25498),Zs=n.n(vs);function gs(e){var t=e.job,n=e.computeScore,i=e.hidden,a=e.getQuestionAnswer;return(0,V.jsx)(f.Z,{id:"_report",sx:{mt:10,maxWidth:768},hidden:i,children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},direction:"column",children:[(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsxs)(Se.Z,{sx:{p:2},elevation:7,children:[(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:7,children:"Logo"}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:"Programme"}),(0,V.jsxs)(W.ZP,{item:!0,xs:7,children:[(0,V.jsxs)(v.Z,{variant:"body1",component:"div",gutterBottom:!0,children:[t.vehicle.modelYear," ",t.vehicle.make," ",t.vehicle.model]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["VIN: ",t.vehicle.vin]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["License Plate: ",t.vehicle.plateNumber]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["Mileage: ",t.mileageValue,"/",t.mileageUnit]})]}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{width:"100%",height:"100%",crossOrigin:"anonymous",alt:"",src:"".concat(X.Z.api.driverBaseURL,"/").concat(t.vehicle.imageUrl)})})})]}),(0,V.jsx)(Se.Z,{sx:{mt:4,p:2,bgcolor:"#FFEAAB",color:function(e){return"dark"===e.palette.mode?"#263238":"#000000"}},children:(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(W.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsx)(Tt.Z,{sx:{width:24,height:24},src:us})}),(0,V.jsx)(W.ZP,{item:!0,xs:6,alignSelf:"center",children:(0,V.jsx)(v.Z,{variant:"subtitle2",component:"p",children:t.checkList.description})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(v.Z,{variant:"h4",children:[n(t.checkList.sections),"%"]})})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:2}})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(W.ZP,{item:!0,xs:3,alignSelf:"center",children:(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{src:"".concat(X.Z.api.baseURL,"/").concat(t.partner.logo),crossOrigin:"anonymous",alt:"logo",width:"100%"})})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(Gt.Z,{children:[(0,V.jsx)(Jt.ZP,{disablePadding:!0,children:(0,V.jsxs)(La.Z,{children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(hs.Z,{})}),(0,V.jsx)(Yt.Z,{primary:P()(t.jobDate).format("LT")})]})}),(0,V.jsx)(Jt.ZP,{disablePadding:!0,children:(0,V.jsxs)(La.Z,{children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(xs.Z,{})}),(0,V.jsx)(Yt.Z,{primary:P()(t.jobDate).format("LL")})]})}),(0,V.jsx)(Jt.ZP,{disablePadding:!0,children:(0,V.jsxs)(La.Z,{children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(fs.Z,{})}),(0,V.jsx)(Yt.Z,{primary:t.partner.contact.address})]})})]})})]}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{my:2}})}),t.vehicle?(0,V.jsxs)(W.ZP,{item:!0,xs:12,container:!0,spacing:1,children:[(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{alt:"front",src:"".concat(X.Z.api.baseURL,"/").concat(t.frontImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Front"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{alt:"rear",src:"".concat(X.Z.api.baseURL,"/").concat(t.rearImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Rear"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{alt:"right",src:"".concat(X.Z.api.baseURL,"/").concat(t.rightSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Right"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{alt:"left",src:"".concat(X.Z.api.baseURL,"/").concat(t.leftSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Left"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{alt:"engine bay",src:"".concat(X.Z.api.baseURL,"/").concat(t.engineBayImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Engine Bay"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{children:(0,V.jsx)("img",{alt:"instrument cluster",src:"".concat(X.Z.api.baseURL,"/").concat(t.instrumentClusterImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Instrument Cluster"})]})]}):null]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:8,container:!0,spacing:.5,children:t.checkList.sections.map((function(e,t){return(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsxs)(Kt.Z,{sx:{height:"100%"},children:[(0,V.jsx)(ds.Z,{title:e.title}),e.questions.map((function(e,t){var n=a(e),i=n.color,s=n.answer;return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(_t.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)(G.Z,{children:[(0,V.jsx)(v.Z,{children:e.question}),e.note&&(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",sx:{color:"#F80000"},children:e.text}),(0,V.jsx)(G.Z,{direction:"row",children:e.images?e.images.filter((function(t){return t.questionId===e.id})).map((function(e,t){return(0,V.jsx)(f.Z,{sx:{cursor:"pointer"},children:(0,V.jsx)("img",{alt:e.title,src:"".concat(X.Z.api.baseURL,"/").concat(e.url),crossOrigin:"anonymous",width:"25%"})},t)})):null})]}),(0,V.jsx)(b.Z,{label:s,sx:{bgcolor:i,color:"white"}})]}),(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal"})]},t)}))]})},t)}))})]})})}var js=function(e){var t,n=0,i=[],r=(0,cs.Z)(e);try{for(r.s();!(t=r.n()).done;){var a,s=t.value.questions,o=(0,cs.Z)(s);try{for(o.s();!(a=o.n()).done;){var l,c=a.value.answers,d=(0,cs.Z)(c);try{for(d.s();!(l=d.n()).done;){var u=l.value;u.selected&&(n+=+u.weight,i.push(u))}}catch(m){d.e(m)}finally{d.f()}}}catch(m){o.e(m)}finally{o.f()}}}catch(m){r.e(m)}finally{r.f()}return(100*n/i.length).toFixed(2)},bs=function(e){var t=e.answers.filter((function(e){return e.selected}));return{color:t[0].color,answer:t[0].answer}};var Ss=function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(!1),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(),p=(0,i.Z)(x,2),Z=p[0],g=p[1],S=(0,r.useState)(),C=(0,i.Z)(S,2),A=C[0],k=C[1],N=(0,r.useState)(),D=(0,i.Z)(N,2),E=D[0],I=D[1],T=(0,w.Z)((function(e){return e.jobReducer})),q=(0,y.Z)(),L=(0,r.useRef)(null),F=(0,j.TH)(),M=$(),R=M.isSuperAdmin,U=M.isTechAdmin;(0,r.useEffect)((function(){if(F.state){var e=F.state.job.id;q((0,tn.nF)(e))}}),[q,F.state]),(0,r.useEffect)((function(){if("completed"===T.getJobStatus){var e=T.job;if(e&&(a(e),e.checkList)){var t=e.checkList;c(t.approvedByGarageAdmin)}}}),[q,T.getJobStatus,T.job]),(0,r.useEffect)((function(){"completed"===T.approveJobCheckListStatus&&I({message:T.approveJobCheckListSuccess})}),[T.approveJobCheckListStatus,T.approveJobCheckListSuccess]),(0,r.useEffect)((function(){"failed"===T.approveJobCheckListStatus&&T.approveJobCheckListError&&k({message:T.approveJobCheckListError})}),[T.approveJobCheckListStatus,T.approveJobCheckListError]),(0,r.useEffect)((function(){return function(){q((0,pn.C_)())}}),[q]);var B=(0,ps.useReactToPrint)({content:function(){return L.current}}),O=function(){var e=(0,te.Z)((0,ee.Z)().mark((function e(t){var n,i;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot.Z.get(t,{responseType:"blob"});case 2:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;g(e)},setTimeout((function(){return h(!0)}),500);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=(0,r.useCallback)((0,te.Z)((0,ee.Z)().mark((function e(){var t,i,r,a,s,o,l;return(0,ee.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.getElementById("_report"))){e.next=14;break}return t.style.display="block",i=P()().utc(!1),r="report",e.next=7,Zs()(t,{allowTaint:!0,useCORS:!0});case 7:a=e.sent,t.style.display="none",s=a.toDataURL("image/png",1),n&&n.createdAt&&(i=P()(n.createdAt).utc(!1),r="job_".concat(n.id,"_").concat(i.year()).concat(i.month()+1).concat(i.date()).concat(i.hours()).concat(i.minutes(),".png")),o=ve(s),l=new File([o],r,{type:"image/png"}),q((0,tn.LT)({file:l,jobId:null===n||void 0===n?void 0:n.id}));case 14:case"end":return e.stop()}}),e)}))),[q,n]);return(0,r.useEffect)((function(){var e=setTimeout((function(){n&&!n.reportFileUrl&&H()}),1e3);return function(){clearTimeout(e)}}),[n,H]),(0,V.jsxs)(r.Fragment,{children:[n?(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.ZP,{container:!0,mb:1,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,hidden:!R,children:(0,V.jsx)(z.Z,{onClick:function(){return B()},variant:"outlined",color:"error",endIcon:(0,V.jsx)(ms.Z,{}),children:"Print"})}),(0,V.jsx)(W.ZP,{item:!0,hidden:U&&n.checkList.approvedByGarageAdmin,children:(0,V.jsx)(ui.Z,{control:(0,V.jsx)(Di.Z,{checked:l,onChange:function(e,t){return function(e,t){c(t),q((0,tn.lr)({jobId:e,approved:t}))}(n.id,t)}}),label:"Approve"})})]}),(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:.5,md:.5},columns:{xs:4,sm:8,md:12},ref:L,children:[(0,V.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: portrait; }           "}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:4,children:(0,V.jsxs)(Se.Z,{sx:{p:2},elevation:7,children:[(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:7,children:"Logo"}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:"Programme"}),(0,V.jsxs)(W.ZP,{item:!0,xs:7,children:[(0,V.jsxs)(v.Z,{variant:"body1",component:"div",gutterBottom:!0,children:[n.vehicle.modelYear," ",n.vehicle.make," ",n.vehicle.model]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["VIN: ",n.vehicle.vin]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["License Plate: ",n.vehicle.plateNumber]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["Mileage: ",n.mileageValue,"/",n.mileageUnit]})]}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.driverBaseURL,"/").concat(n.vehicle.imageUrl))},children:(0,V.jsx)("img",{width:"100%",height:"100%",crossOrigin:"anonymous",alt:"",src:"".concat(X.Z.api.driverBaseURL,"/").concat(n.vehicle.imageUrl)})})})]}),(0,V.jsx)(Se.Z,{sx:{mt:4,p:2,bgcolor:"#FFEAAB",color:function(e){return"dark"===e.palette.mode?"#263238":"#000000"}},children:(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(W.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsx)(Tt.Z,{sx:{width:24,height:24},src:us})}),(0,V.jsx)(W.ZP,{item:!0,xs:6,alignSelf:"center",children:(0,V.jsx)(v.Z,{variant:"subtitle2",component:"p",children:n.checkList.description})}),(0,V.jsx)(W.ZP,{item:!0,children:(0,V.jsxs)(v.Z,{variant:"h4",children:[js(n.checkList.sections),"%"]})})]})}),(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{mt:4}}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(W.ZP,{item:!0,xs:!0,alignSelf:"center",children:(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.partner.logo))},children:(0,V.jsx)("img",{src:"".concat(X.Z.api.baseURL,"/").concat(n.partner.logo),crossOrigin:"anonymous",alt:"logo",width:"100%"})})}),(0,V.jsx)(W.ZP,{item:!0,xs:9,children:(0,V.jsxs)(Gt.Z,{children:[(0,V.jsx)(Jt.ZP,{disablePadding:!0,children:(0,V.jsxs)(La.Z,{children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(hs.Z,{})}),(0,V.jsx)(Yt.Z,{primary:P()(n.jobDate).format("LT")})]})}),(0,V.jsx)(Jt.ZP,{disablePadding:!0,children:(0,V.jsxs)(La.Z,{children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(xs.Z,{})}),(0,V.jsx)(Yt.Z,{primary:P()(n.jobDate).format("LL")})]})}),(0,V.jsx)(Jt.ZP,{disablePadding:!0,children:(0,V.jsxs)(La.Z,{children:[(0,V.jsx)(wr.Z,{children:(0,V.jsx)(fs.Z,{})}),(0,V.jsx)(Yt.Z,{primary:n.partner.contact.address})]})})]})})]}),(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal",sx:{mb:4}}),n.vehicle?(0,V.jsxs)(W.ZP,{item:!0,xs:12,container:!0,spacing:1,children:[(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.frontImageUrl))},children:(0,V.jsx)("img",{alt:"front",src:"".concat(X.Z.api.baseURL,"/").concat(n.frontImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Front"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.rearImageUrl))},children:(0,V.jsx)("img",{alt:"rear",src:"".concat(X.Z.api.baseURL,"/").concat(n.rearImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Rear"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.rightSideImageUrl))},children:(0,V.jsx)("img",{alt:"right",src:"".concat(X.Z.api.baseURL,"/").concat(n.rightSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Right"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.leftSideImageUrl))},children:(0,V.jsx)("img",{alt:"left",src:"".concat(X.Z.api.baseURL,"/").concat(n.leftSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Left"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.engineBayImageUrl))},children:(0,V.jsx)("img",{alt:"engine bay",src:"".concat(X.Z.api.baseURL,"/").concat(n.engineBayImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Engine Bay"})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[(0,V.jsx)(aa.Z,{onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(n.instrumentClusterImageUrl))},children:(0,V.jsx)("img",{alt:"instrument cluster",src:"".concat(X.Z.api.baseURL,"/").concat(n.instrumentClusterImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Instrument Cluster"})]})]}):null]})}),(0,V.jsx)(W.ZP,{item:!0,xs:12,md:8,container:!0,spacing:.5,children:n.checkList.sections.map((function(e,t){return(0,V.jsx)(W.ZP,{item:!0,xs:12,md:6,children:(0,V.jsxs)(Kt.Z,{sx:{height:"100%"},children:[(0,V.jsx)(ds.Z,{title:e.title}),e.questions.map((function(e,t){var n=bs(e),i=n.color,a=n.answer;return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(_t.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)(G.Z,{children:[(0,V.jsx)(v.Z,{children:e.question}),e.note&&(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",sx:{color:"#F80000"},children:e.text}),(0,V.jsx)(G.Z,{direction:"row",children:e.images?e.images.filter((function(t){return t.questionId===e.id})).map((function(e,t){return(0,V.jsx)(f.Z,{sx:{cursor:"pointer"},onClick:function(){return O("".concat(X.Z.api.baseURL,"/").concat(e.url))},children:(0,V.jsx)("img",{alt:e.title,src:"".concat(X.Z.api.baseURL,"/").concat(e.url),crossOrigin:"anonymous",width:"25%"})},t)})):null})]}),(0,V.jsx)(b.Z,{label:a,sx:{bgcolor:i,color:"white"}})]}),(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal"})]},t)}))]})},t)}))})]}),(0,V.jsx)(gs,{job:n,computeScore:js,getQuestionAnswer:bs,hidden:!0})]}):null,(0,V.jsx)(Ut,{show:m,title:"",size:"sm",fullWidth:!0,Content:(0,V.jsx)("img",{width:"100%",height:"100%",src:Z,alt:"Driver license",crossOrigin:"anonymous"}),onClose:function(){return h(!1)}}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==E,message:null===E||void 0===E?void 0:E.message,onClose:function(){return I(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==A,message:null===A||void 0===A?void 0:A.message,onClose:function(){return k(void 0)}}),(0,V.jsx)(ze.Z,{show:"loading"===T.approveJobCheckListStatus}),(0,V.jsx)(ze.Z,{show:"loading"===T.getJobStatus})]})},ws=(0,r.createContext)(null);var ys=function(){var e,t,n=(0,w.Z)((function(e){return e.estimateReducer})),a=(0,y.Z)(),s=(0,r.useState)([]),l=(0,i.Z)(s,2),c=(l[0],l[1]),d=tr(),u=$().isTechAdmin,m=(0,j.s0)();(0,r.useEffect)((function(){var e=d.estimates;c(e)}),[d.estimates]);var h=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",sortable:!0,type:"string"},{field:"status",headerName:"Status",headerAlign:"center",align:"center",type:"string",width:100,sortable:!0,renderCell:function(e){return e.row.status===o.GM.sent?(0,V.jsx)(b.Z,{label:o.GM.sent,size:"small",color:"info"}):e.row.status===o.GM.draft?(0,V.jsx)(b.Z,{label:o.GM.draft,size:"small",color:"warning"}):e.row.status===o.GM.invoiced?(0,V.jsx)(b.Z,{label:o.GM.invoiced,size:"small",color:"success"}):null}},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){var t=e.row.rideShareDriver,n=e.row.customer;return t?"".concat((null===t||void 0===t?void 0:t.firstName)||""," ").concat((null===t||void 0===t?void 0:t.lastName)||""):"".concat((null===n||void 0===n?void 0:n.firstName)||""," ").concat((null===n||void 0===n?void 0:n.lastName)||"")}},{field:"phone",headerName:"Phone",headerAlign:"center",align:"center",type:"string",width:100,sortable:!0,valueGetter:function(e){var t=e.row.rideShareDriver,n=e.row.customer;return"".concat(t?(null===t||void 0===t?void 0:t.phone)||"":(null===n||void 0===n?void 0:n.phone)||"")}},{field:"model",headerName:"Vehicle",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){var t=e.row.vehicle;return t?"".concat(null===t||void 0===t?void 0:t.modelYear," ").concat(null===t||void 0===t?void 0:t.make," ").concat(null===t||void 0===t?void 0:t.model," (").concat(t.plateNumber,")"):"-"}},{field:"grandTotal",headerName:"Grand Total",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"depositAmount",headerName:"Deposit Amount",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0,sortingOrder:["desc"]},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(e){var t=e.row;return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){a((0,$i.UD)()),m("/estimates/".concat(t.id),{state:{estimate:t}})},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{sx:{display:u?"block":"none"},icon:(0,V.jsx)(yi.Z,{sx:{color:"limegreen"}}),onClick:function(){return d.onEdit(t.id)},disabled:!u,label:"Edit",showInMenu:!1},1),(0,V.jsx)(k.u,{sx:{display:u?"block":"none"},icon:(0,V.jsx)(ne.Z,{sx:{color:"indianred"}}),onClick:function(){return d.onDelete(t.id)},label:"Delete",disabled:t.status===o.GM.invoiced,showInMenu:!1},2)]}}]}),[u,a,m,d]);return(0,r.useEffect)((function(){return function(){a((0,er.JA)()),a((0,er.HJ)()),a((0,er.Ys)()),a((0,er.B$)()),a((0,er.d9)())}}),[a]),(0,V.jsxs)(ws.Provider,{value:{driver:d.driver,setDriver:d.setDriver,estimates:d.estimates,setEstimates:d.setEstimates,showCreate:d.showCreate,setShowCreate:d.setShowCreate,showEdit:d.showEdit,setShowEdit:d.setShowEdit},children:[(0,V.jsxs)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:10,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Estimates"})}),(0,V.jsx)(W.ZP,{item:!0,hidden:!u,children:(0,V.jsx)(z.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){return d.setShowCreate(!0)},children:"Generate"})})]}),(0,V.jsx)(W.ZP,{container:!0,children:(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(R,{rows:d.estimates,columns:h,showToolbar:!0,loading:"loading"===n.getEstimatesStatus})})}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==d.success,message:null===(e=d.success)||void 0===e?void 0:e.message,onClose:function(){return d.setSuccess(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==d.error,message:null===(t=d.error)||void 0===t?void 0:t.message,onClose:function(){return d.setError(void 0)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"xl",show:d.showCreate,Content:(0,V.jsx)(Sn.J9,{initialValues:d.initialValues,validationSchema:Bi.schema,validateOnChange:!0,onSubmit:function(e,t){d.save?d.handleSaveEstimate(e,t):d.handleCreateEstimate(e,t)},children:(0,V.jsx)(_i,{showCreate:d.showCreate,isPopUp:!0,setLabourTotal:d.setLabourTotal,setPartTotal:d.setPartTotal,setGrandTotal:d.setGrandTotal,labourTotal:d.labourTotal,partTotal:d.partTotal,grandTotal:d.grandTotal,isSubmitting:"loading"===n.createEstimateStatus||"loading"===n.saveEstimateStatus,setSave:d.setSave})}),onClose:function(){return d.setShowCreate(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,size:"xl",show:d.showEdit,Content:(0,V.jsx)(Sn.J9,{initialValues:d.initialValues,validationSchema:Bi.schema,onSubmit:function(e,t){d.save&&d.handleUpdateEstimate(e,t),d.save||d.handleSendDraftEstimate(e,t)},enableReinitialize:!0,validateOnChange:!0,children:(0,V.jsx)(_i,{showEdit:d.showEdit,isPopUp:!0,setLabourTotal:d.setLabourTotal,setPartTotal:d.setPartTotal,setGrandTotal:d.setGrandTotal,labourTotal:d.labourTotal,partTotal:d.partTotal,grandTotal:d.grandTotal,isSubmitting:"loading"===n.updateEstimateStatus||"loading"===n.sendDraftEstimateStatus,setSave:d.setSave})}),onClose:function(){return d.setShowEdit(!1)}}),(0,V.jsx)(Ut,{fullWidth:!0,show:d.showDelete,Content:(0,V.jsx)(Qe.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(Ke.Z,{children:[(0,V.jsx)(z.Z,{onClick:function(){return d.setShowDelete(!1)},children:"Disagree"}),(0,V.jsx)(z.Z,{onClick:d.handleDelete,children:"Agree"})]}),onClose:function(){return d.setShowDelete(!1)}}),(0,V.jsx)(ze.Z,{show:"loading"===n.deleteEstimateStatus})]})},Cs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFJSURBVHgBjVLLbYNAEGUXy9c4DZAtgTMCRCpIOkgJoQNDB6EDH3NLOggChLgFV5ClA3KL+OYNAglbWDDSandm33vzYIcpC+E4zqHrulc6R1HkL2HYHFxVldjtdk9937soHcYrCZEAtXC/38swDMuBaJrmN2NMn6sRCJsPEdm2rYfzy0U3xnJmWdYPzgXWCQQJcD6pzt00TaODIEYRMRHPcRw/KxsCDj8454LTN6DTnbIx0JV+XMlBKqFw2EoEfsByKPxOydaOWHLoiFwo20OAU1DHnDLDMB7WGMDoY9ecq6r6SQmewV0jAjtMU13XuSql/NM07R65K4SQRVGcl0i2bdP7ebAZpGn6PozcOJtfKJKVExT9LMvk7O5IY0gTlSTJ42B3rorH9eD/iGOJ/Y1q49zSHoDkTVh2bQkdxNV8XjhYDRKAA+fW/T9Pe6qWL2unGwAAAABJRU5ErkJggg==",As=n(13962);var Ps=function(){var e,t,n,a,s,o,l=(0,r.useState)(),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(""),h=(0,i.Z)(m,2),x=h[0],f=h[1],p=(0,r.useState)([]),Z=(0,i.Z)(p,2),g=Z[0],b=Z[1],S=(0,r.useState)([]),w=(0,i.Z)(S,2),y=w[0],C=w[1],A=(0,r.useState)(),P=(0,i.Z)(A,2),k=P[0],N=P[1],D=(0,j.TH)();return(0,r.useEffect)((function(){if(D.state){var e=D.state;u(e.estimate)}}),[D]),(0,r.useEffect)((function(){if(d){var e=d.rideShareDriver,t=d.customer,n=d.parts,i=d.labours,r=e?"".concat(e.firstName," ").concat(e.lastName):"".concat(t.firstName," ").concat(t.lastName);f(dn().words(r)),N(t.billingInformation),b(n),C(i)}}),[d]),d?(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(W.ZP,{children:(0,V.jsx)(W.ZP,{children:(0,V.jsx)(As.Z,{onClick:function(){return window.history.back()},style:{position:"absolute",cursor:"pointer"}})})}),(0,V.jsxs)(v.Z,{mb:3,textAlign:"center",display:"block",variant:"subtitle1",children:["#",d.code]}),(0,V.jsxs)(W.ZP,{container:!0,my:3,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:"Billing Information"}),(0,V.jsxs)(G.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:x}),k?(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[(0,V.jsxs)(v.Z,{variant:"body2",gutterBottom:!0,children:[k.address," ",k.district," ",k.state]}),(0,V.jsx)(v.Z,{variant:"body2",gutterBottom:!0,children:k.phone})]}):(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:d.address})]})]}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)("img",{alt:"",width:"20%",crossOrigin:"anonymous",src:"".concat(X.Z.api.baseURL,"/").concat(null===d||void 0===d||null===(e=d.partner)||void 0===e?void 0:e.logo)})}),(0,V.jsxs)(W.ZP,{item:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:null===d||void 0===d?void 0:d.partner.name}),(0,V.jsxs)(G.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===d||void 0===d||null===(t=d.partner)||void 0===t?void 0:t.contact.address}),(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[null===d||void 0===d||null===(n=d.partner)||void 0===n||null===(a=n.contact)||void 0===a?void 0:a.district," ",null===d||void 0===d||null===(s=d.partner)||void 0===s||null===(o=s.contact)||void 0===o?void 0:o.state]}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===d||void 0===d?void 0:d.partner.phone}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===d||void 0===d?void 0:d.partner.email})]})]})]}),(0,V.jsx)(W.ZP,{container:!0,children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})})}),d.vehicle?(0,V.jsxs)(W.ZP,{container:!0,my:3,children:[(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Vehicle"}),(0,V.jsxs)(v.Z,{children:[null===d||void 0===d?void 0:d.vehicle.modelYear," ",null===d||void 0===d?void 0:d.vehicle.make," ",null===d||void 0===d?void 0:d.vehicle.model]})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Reg. No"}),(0,V.jsx)(v.Z,{children:null===d||void 0===d?void 0:d.vehicle.plateNumber})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Mileage"}),(0,V.jsxs)(v.Z,{children:[null===d||void 0===d?void 0:d.vehicle.mileageValue," ",null===d||void 0===d?void 0:d.vehicle.mileageUnit]})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"VIN"}),(0,V.jsx)(v.Z,{children:null===d||void 0===d?void 0:d.vehicle.vin})]})]}):(0,V.jsx)(W.ZP,{container:!0,my:3,children:(0,V.jsx)(v.Z,{gutterBottom:!0,children:"No Vehicle Info."})}),(0,V.jsx)(W.ZP,{container:!0,children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})})}),(0,V.jsxs)(W.ZP,{container:!0,my:3,sx:{pb:1.5},borderBottom:"3px solid",borderColor:function(e){return"dark"===e.palette.mode?"#676767":"#000000"},justifyContent:"center",alignItems:"center",columns:14,children:[(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(Tt.Z,{src:Cs,sx:{width:20,height:20}})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Item Description"}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Warranty"}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Unit Cost x Qty"}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Amount"})]}),(0,V.jsxs)(W.ZP,{container:!0,children:[g.map((function(e,t){var n=me(parseInt(e.amount));return(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(W.ZP,{item:!0,xs:2}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:e.name}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,children:[e.warranty.warranty," ",e.warranty.interval]}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,children:[me(+e.price)," x ",e.quantity.quantity," ",e.quantity.unit]}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:n})]},t)})),y.map((function(e,t){return(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(W.ZP,{item:!0,xs:2}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:e.title}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"-"}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,children:[me(+e.cost)," x 1"]}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:me(+e.cost)})]},t)}))]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsxs)(W.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["Subtotal: ",me(d.partsTotal+d.laboursTotal)]}),(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["VAT(7.5%):",me(parseFloat((null===d||void 0===d?void 0:d.tax)||0)+parseFloat((null===d||void 0===d?void 0:d.taxPart)||0))]})]})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["TOTAL: ",me(d.grandTotal)]})})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,fontStyle:"italic",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"},children:["Job Duration: ",d.jobDurationValue," ",d.jobDurationUnit]})})]})]}):(0,V.jsx)(W.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(ln.Z,{severity:"warning",variant:"outlined",children:(0,V.jsx)(v.Z,{children:"You do not have any estimate. Please contact support"})})})})},ks=n(79493),Ns=n(96191),Ds=n(86984),Es="".concat("http://18.222.133.239:6003","/invoices");function Is(e,t,n,i,r,a,s){return{id:e,parts:t.parts,labours:t.labours,tax:t.tax,addressType:t.addressType,address:t.address,depositAmount:t.depositAmount,additionalDeposit:t.additionalDeposit,jobDurationValue:t.jobDuration.count,jobDurationUnit:t.jobDuration.interval,partsTotal:Math.round(n),laboursTotal:Math.round(i),grandTotal:Math.round(r),refundable:Math.round(a),dueAmount:Math.round(s)}}var Ts=Bi.fields;function qs(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useState)(0),l=(0,i.Z)(o,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],f=m[1],p=(0,r.useState)(),g=(0,i.Z)(p,2),j=g[0],b=g[1],S=(0,r.useState)(!1),C=(0,i.Z)(S,2),A=C[0],P=C[1],k=(0,r.useState)(!1),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,w.Z)((function(e){return e.invoiceReducer})),T=(0,y.Z)(),q=(0,Sn.u6)(),L=q.values,F=q.handleChange,M=q.setFieldValue,R=q.resetForm,U=e.setGrandTotal,B=e.setPartTotal,O=e.setLabourTotal,z=e.showCreate,H=e.showEdit,Y=e.grandTotal,Q=e.labourTotal,K=e.partTotal,X=e.dueBalance,_=e.setDueBalance,$=e.setRefundable,ee=e.refundable,te=e.setSave;(0,r.useEffect)((function(){setTimeout((function(){if(console.log(Object.keys(L),"_lab, _part"),void 0!=L.invoice){var e,t,n=void 0===(null===L||void 0===L||null===(e=L.invoice)||void 0===e?void 0:e.tax)||0!==parseInt(L.invoice.tax);P(n);var i=void 0!==(null===L||void 0===L||null===(t=L.invoice)||void 0===t?void 0:t.taxPart)&&(parseInt(L.invoice.taxPart),!1);E(i),console.log(n,i,"_lab, _part")}else console.log("did not reach","_lab, _part")}),3e3)}),[e,L.email]),(0,r.useEffect)((function(){z&&H||(R(),$(0))}),[R,$,z,H,L.status]),(0,r.useEffect)((function(){for(var e=0,t=0;t<L.parts.length;t++)L.parts[t].amount&&(e+=parseInt(L.parts[t].amount));B(e)}),[B,L.parts]),(0,r.useEffect)((function(){for(var e=0,t=0;t<L.labours.length;t++)L.labours[t].cost&&(e+=parseInt(L.labours[t].cost));O(e)}),[O,L.labours]),(0,r.useEffect)((function(){var e=.075*Q;M("tax",me(e)),s(e)}),[Q,M]),(0,r.useEffect)((function(){var e=.075*K;M("taxPart",me(e)),d(e)}),[K,M]),(0,r.useEffect)((function(){var e=a+c+K+Q,t=parseInt(L.depositAmount),n=e-t;U(e),_(n),t>e?($(t-e),_(0)):$(0)}),[a,c,K,Q,U,_,Y,L.depositAmount,$]);var ne=(0,r.useCallback)((function(e){var t=e.target.value;f(setTimeout((function(){T((0,nn.xv)(t))}),2e3)),M("vin",t)}),[T,M]),re=(0,r.useCallback)((function(e,t){var n="parts.".concat(t,".quantity.quantity"),i="parts.".concat(t,".quantity.unit"),r="parts.".concat(t,".price"),a="parts.".concat(t,".amount"),s=n===e.target.name,o=r===e.target.name,l=i===e.target.name;if(s){var c=+L.parts[t].price*+e.target.value;M(n,e.target.value),M(a,"".concat(c))}if(o){var d=+L.parts[t].quantity.quantity*+e.target.value;M(r,e.target.value),M(a,"".concat(d))}l&&M(i,e.target.value)}),[M,L.parts]);(0,r.useEffect)((function(){return function(){clearTimeout(h),T((0,ct.i3)())}}),[h,T]);var ae=(0,r.useCallback)((function(){te&&te(!0)}),[te]),oe=(0,r.useCallback)((function(){te&&te(!1)}),[te]);return(0,r.useEffect)((function(){A||(M(Ts.tax.name,0),console.log("making labor 0","mainLog1")),D||(M(Ts.taxPart.name,0),console.log("making part 0","mainLog1"))}),[A,D]),(0,r.useEffect)((function(){"completed"!=I.saveInvoiceStatus&&"completed"!=I.sendInvoiceStatus||pe()}),[I.saveInvoiceStatus,I.sendInvoiceSuccess]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Sn.l0,{autoComplete:"off",autoCorrect:"off",children:(0,V.jsxs)(W.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Customer Information"}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{onChange:F,disabled:!0,label:Ts.firstName.label,value:L.firstName,name:Ts.firstName.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)(Pn.Z,{onChange:F,disabled:!0,label:Ts.lastName.label,value:L.lastName,name:Ts.lastName.name})}),(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(Pn.Z,{type:"tel",onChange:F,disabled:!0,label:Ts.phone.label,value:L.phone,name:Ts.phone.name})}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,xs:!0,spacing:.2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:3,children:(0,V.jsx)($n.Z,{data:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}],onChange:F,disabled:!0,value:L.addressType,name:Ts.addressType.name,label:Ts.addressType.label,fullWidth:!0})}),(0,V.jsx)(W.ZP,{item:!0,xs:9,children:(0,V.jsx)(Pn.Z,{onChange:F,disabled:!0,value:L.address,name:Ts.address.name,label:Ts.address.label})})]}),(0,V.jsx)(Yi,{disabled:!0,values:L,handleChange:F,handleChangeVIN:ne}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:Ts.parts.label}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(Sn.F2,{name:Ts.parts.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[L.parts.length>0&&L.parts.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:13,columns:14,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["name"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:F})}),"warranty"===e&&(0,V.jsx)(zi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:F,index:n,values:L})),"quantity"===e&&(0,V.jsx)(Gi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:function(e){return re(e,n)},index:n,values:L})),"price"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:function(e){return re(e,n)},type:"number",inputProps:{min:"0"}})}),"amount"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:F,type:"number",disabled:!0})})]},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",warranty:{warranty:"",interval:""},quantity:{quantity:"0",unit:""},price:"0",amount:"0"})},children:(0,V.jsx)(Tn.Z,{})})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(W.ZP,{item:!0,xs:8}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[D&&(0,V.jsx)(se.Z,{name:Ts.taxPart.name,value:L.taxPart,label:"".concat(Ts.taxPart.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),"Sub Total: \u20a6",me(Math.round(K))]})]})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:Ts.labours.label}),(0,V.jsx)(J.Z,{orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(Sn.F2,{name:Ts.labours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[L.labours.length>0&&L.labours.map((function(t,n){return(0,V.jsxs)(W.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["title"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:8,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:F})}),"cost"===e&&(0,V.jsx)(W.ZP,{item:!0,xs:4,children:(0,V.jsx)(se.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:F,type:"number",inputProps:{min:"0"}})})]},"".concat(e))})),(0,V.jsx)(W.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(In.Z,{})})})]},n)})),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({title:"",cost:"0"})},children:(0,V.jsx)(Tn.Z,{})})})]})}})}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(W.ZP,{item:!0,xs:6}),(0,V.jsxs)(W.ZP,{item:!0,xs:4,children:[A&&(0,V.jsx)(se.Z,{name:Ts.tax.name,value:L.tax,label:"".concat(Ts.tax.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),(0,V.jsxs)(v.Z,{children:[" Sub Total: \u20a6",me(Math.round(Q))]})]}),(0,V.jsx)(W.ZP,{item:!0,style:{},children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{children:"Apply Tax"}),(0,V.jsx)(Oi.Z,{checked:A,onClick:function(){return P(!A)}})]})})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Job Information"}),(0,V.jsx)(J.Z,{flexItem:!0,orientation:"horizontal"})]}),(0,V.jsx)(W.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Grand Total: \u20a6",me(Math.round(Y))]})}),(0,V.jsx)(W.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Due Balance: \u20a6",me(Math.round(X))]})}),(0,V.jsx)(W.ZP,{item:!0,xs:2,container:!0,justifyContent:"space-around",alignItems:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Refundable: \u20a6",me(ee)]})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,container:!0,justifyContent:"space-around",alignItems:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Deposited Amount: \u20a6",me(+L.depositAmount)]})}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,container:!0,spacing:.5,children:[(0,V.jsx)(W.ZP,{item:!0,xs:6,children:(0,V.jsx)(Pn.Z,{onChange:F,value:L.jobDuration.count,name:"jobDuration.count",label:Ts.jobDuration.label,type:"number",inputProps:{min:"1"}})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)($n.Z,{data:[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],onChange:F,value:L.jobDuration.interval,name:"jobDuration.interval",label:"Interval",fullWidth:!0})})]}),(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(J.Z,{sx:{mb:3},flexItem:!0,orientation:"horizontal"})}),(0,V.jsx)(W.ZP,{item:!0,xs:6,children:(0,V.jsxs)(G.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(ie.Z,{onClick:ae,sx:{ml:2},type:"submit",variant:"contained",color:"info",loading:"loading"===I.saveInvoiceStatus,endIcon:(0,V.jsx)(kn.Z,{}),children:"Save"}),(0,V.jsx)(ie.Z,{onClick:oe,sx:{ml:2},type:"submit",variant:"contained",color:"success",loading:"loading"===I.sendInvoiceStatus,endIcon:(0,V.jsx)(Ni.Z,{}),children:"Send"})]})}),(0,V.jsx)(W.ZP,{item:!0,xs:!0})]})}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==j,message:null===j||void 0===j?void 0:j.message,onClose:function(){return b(void 0)}})]})}var Ls=(0,r.memo)(qs),Vs=function(e){var t=e.onClose,n=e.show,i=e.authUrl,a=(0,r.useRef)(null);return(0,V.jsx)(Ut,{fullWidth:!0,size:"xs",show:n,contentHeight:800,Content:i.length?(0,V.jsx)("iframe",{ref:a,src:i,style:{border:"none"},title:"Online Payment",width:"100%",height:"100%"}):(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,V.jsx)(Jn.Z,{color:"inherit"})}),onClose:t})},Fs=n(56474);var Ms=function(){var e,t,n=(0,w.Z)((function(e){return e.invoiceReducer})),a=(0,w.Z)((function(e){return e.transactionReducer})),s=(0,y.Z)(),l=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(Bi.initialValues),u=(0,i.Z)(d,2),m=u[0],h=u[1],f=(0,r.useState)(0),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(0),j=(0,i.Z)(g,2),b=j[0],S=j[1],C=(0,r.useState)(0),A=(0,i.Z)(C,2),P=A[0],k=A[1],N=(0,r.useState)(0),D=(0,i.Z)(N,2),E=D[0],I=D[1],T=(0,r.useState)(0),q=(0,i.Z)(T,2),L=q[0],V=q[1],F=(0,r.useState)(),M=(0,i.Z)(F,2),R=M[0],U=M[1],B=(0,r.useState)(),O=(0,i.Z)(B,2),W=O[0],z=O[1],G=(0,r.useState)(!1),J=(0,i.Z)(G,2),H=J[0],Y=J[1],Q=(0,r.useState)(!1),K=(0,i.Z)(Q,2),X=K[0],_=K[1],$=(0,r.useState)(),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],ie=(0,r.useState)(),re=(0,i.Z)(ie,2),ae=re[0],se=re[1],oe=(0,r.useState)(!1),le=(0,i.Z)(oe,2),ce=le[0],de=le[1],ue=(0,w.Z)((function(e){return e.invoiceReducer})),me=(0,y.Z)(),he=(0,r.useCallback)((function(){me((0,Ns.yZ)()),me((0,er.HJ)()),me((0,er.Ys)())}),[me]);(0,r.useEffect)((function(){me((0,ks.wV)())}),[me]),(0,r.useEffect)((function(){if("completed"===ue.getInvoicesStatus){for(var e=ue.invoices.map((function(e){return(0,x.Z)({},e)})),t=[],n=0;n<e.length;n++){var i=e[n].draftInvoice;if(i){var r=i.parts.length?i.parts.map((function(e){return JSON.parse(e)})):[],s=i.labours.length?i.labours.map((function(e){return JSON.parse(e)})):[],o=(0,x.Z)((0,x.Z)({},i),{},{parts:r,labours:s,estimate:e[n].estimate,transactions:e[n].transactions});o.id=e[n].id,t.push(o)}else t.push(e[n])}a(t)}}),[me,ue.getInvoicesStatus,ue.invoices]),(0,r.useEffect)((function(){"failed"===ue.getInvoicesStatus&&z({message:ue.getInvoicesError})}),[me,he,ue.getInvoicesError,ue.getInvoicesStatus]),(0,r.useEffect)((function(){"completed"===ue.saveInvoiceStatus&&(U({message:ue.saveInvoiceSuccess}),me((0,ks.wV)()),he())}),[me,he,ue.saveInvoiceStatus,ue.saveInvoiceSuccess]),(0,r.useEffect)((function(){"failed"===ue.saveInvoiceStatus&&z({message:ue.saveInvoiceError})}),[me,he,ue.saveInvoiceError,ue.saveInvoiceStatus]),(0,r.useEffect)((function(){"completed"===ue.sendInvoiceStatus&&(U({message:ue.sendInvoiceSuccess}),me((0,ks.wV)()),he())}),[me,he,ue.sendInvoiceStatus,ue.sendInvoiceSuccess]),(0,r.useEffect)((function(){"failed"===ue.sendInvoiceStatus&&z({message:ue.sendInvoiceError})}),[me,he,ue.sendInvoiceError,ue.sendInvoiceStatus]),(0,r.useEffect)((function(){return function(){me((0,Ns.yZ)()),me((0,er.HJ)()),me((0,er.Ys)()),de(!1),se(void 0),ne(void 0),U(void 0),z(void 0),V(0),k(0),S(0),I(0)}}),[me]);var xe=(0,r.useCallback)((function(e){me((0,ks.wV)());var t=n.find((function(t){return t.id===e}));if(t&&t.estimate){var i=t.estimate.rideShareDriver,r=t.estimate.customer,a=t.estimate.vehicle,s=i?i.firstName:r.firstName,o=i?i.lastName:r.lastName,l=i?i.phone:r.phone,d=a&&a.make?a.make:"",u=a&&a.model?a.model:"",m=a&&a.plateNumber?a.plateNumber:"",f=a&&a.vin?a.vin:"",p=a&&a.modelYear?a.modelYear:"",v=t.estimate.address?t.estimate.address:"",g=t.estimate.addressType?t.estimate.addressType:"",j={count:a&&a.mileageValue?a.mileageValue:"",unit:a&&a.mileageUnit?a.mileageUnit:""};if(t.edited&&t.draftInvoice){var b=t.draftInvoice,w=b.parts.map((function(e){return JSON.parse(e)})),y=b.labours.map((function(e){return JSON.parse(e)})),C={count:"".concat(b.jobDurationValue),interval:b.jobDurationUnit},A="".concat(b.depositAmount),P="".concat(b.tax),N=b.status;h((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:s,lastName:o,phone:l,make:d,model:u,plateNumber:m,vin:f,modelYear:p,address:v,addressType:g,jobDuration:C,depositAmount:A,tax:P,mileage:j,parts:w,labours:y,status:N,invoice:t})})),k(b.grandTotal),S(b.partsTotal),Z(b.laboursTotal),I(b.dueAmount),V(b.refundable),se(t.id)}if(t.edited&&!t.draftInvoice){var D=t.parts,E=t.labours,T={count:"".concat(t.jobDurationValue),interval:t.jobDurationUnit},q="".concat(t.depositAmount),L="".concat(t.tax),F=t.estimate.status;h((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:s,lastName:o,phone:l,make:d,model:u,plateNumber:m,vin:f,modelYear:p,address:v,addressType:g,jobDuration:T,depositAmount:q,tax:L,mileage:j,parts:D,labours:E,status:F,invoice:t})})),k(t.grandTotal),S(t.partsTotal),Z(t.laboursTotal),I(t.dueAmount),V(t.refundable),se(t.id)}if(!t.edited){var M=t.estimate,R=M.parts,U=M.labours,B={count:"".concat(M.jobDurationValue),interval:M.jobDurationUnit},O="".concat(t.depositAmount),W="".concat(M.tax),z=M.status;h((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:s,lastName:o,phone:l,make:d,model:u,plateNumber:m,vin:f,modelYear:p,address:v,addressType:g,jobDuration:B,depositAmount:O,tax:W,mileage:j,parts:R,labours:U,status:z,invoice:t})})),k(M.grandTotal),S(M.partsTotal),Z(M.laboursTotal),I(t.dueAmount),V(t.refundable),se(t.id)}c(t),ne(te),Y(!0)}}),[me,te,n]);return{invoices:n,error:W,setError:z,onEdit:xe,showEdit:H,setShowEdit:Y,initialValues:m,labourTotal:v,grandTotal:P,partTotal:b,setSuccess:U,success:R,setLabourTotal:Z,setPartTotal:S,setGrandTotal:k,dueBalance:E,setDueBalance:I,refundable:L,setRefundable:V,showRefund:X,setShowRefund:_,save:ce,setSave:de,handleInitiateRefund:function(){me((0,Ds.B)({callbackUrl:Es,amount:L,invoiceId:ae}))},handleSaveInvoice:function(e){var t=e.parts,n=e.labours;if(!t.length)return z({message:"Parts Items Cannot not be empty!"});if(!n.length)return z({message:"Labour Items Cannot not be empty!"});var i=Is(ae,e,b,v,P,L,E);de(!1),me((0,ks.$p)(i))},handleSendInvoice:function(e){var t=e.parts,n=e.labours;if(!t.length)return z({message:"Parts Items Cannot not be empty!"});if(!n.length)return z({message:"Labour Items Cannot not be empty!"});var i=Is(ae,e,b,v,P,L,E);me((0,ks.zJ)(i))},handleCloseEdit:function(){Y(!1),de(!1),se(void 0),ne(void 0),U(void 0),z(void 0),V(0),k(0),S(0),I(0),h(Bi.initialValues),me((0,ks.wV)())},invoice:l}}(),c=(0,j.s0)(),d=$().isTechAdmin,u=function(){var e=(0,j.TH)();return(0,r.useMemo)((function(){return new URLSearchParams(e.search)}),[e.search])}();(0,r.useEffect)((function(){var e=u.get("reference"),t=u.get("pay_canceled");e&&localStorage.setItem(o.H3.referenceNumber,e),t&&localStorage.setItem(o.H3.payCancelled,t)}),[u]);var m=(0,r.useCallback)((function(){s((0,Fs.lQ)()),s((0,Fs.Mn)()),s((0,Fs.XB)(!1))}),[s]),h=(0,r.useCallback)((function(e){e.key===o.H3.referenceNumber&&e.newValue&&a.invoiceId&&s((0,Ds._)({reference:e.newValue,invoiceId:a.invoiceId})),e.key===o.H3.payCancelled&&e.newValue&&m()}),[s,m,a.invoiceId]);(0,r.useEffect)((function(){return window.addEventListener("storage",h),function(){window.removeEventListener("storage",h)}}),[h]),(0,r.useEffect)((function(){"completed"===a.verifyRefundCustomerStatus&&(localStorage.removeItem(o.H3.referenceNumber),localStorage.removeItem(o.H3.payCancelled),m(),s((0,ks.wV)()))}),[s,m,a.authorizationUrl,a.verifyRefundCustomerStatus]);var f=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){var t=e.row.estimate.customer;return"".concat((null===t||void 0===t?void 0:t.firstName)||""," ").concat((null===t||void 0===t?void 0:t.lastName)||"")}},{field:"status",headerName:"Status",headerAlign:"center",align:"center",sortable:!0,type:"string",renderCell:function(e){return e.row.status===o.Ux.paid?(0,V.jsx)(b.Z,{label:o.Ux.paid,size:"small",color:"success"}):e.row.status===o.Ux.deposit?(0,V.jsx)(b.Z,{label:o.Ux.deposit,size:"small",color:"warning"}):e.row.status===o.Ux.overDue?(0,V.jsx)(b.Z,{label:o.Ux.overDue,size:"small",color:"error"}):null}},{field:"updateStatus",headerName:"Update Status",headerAlign:"center",align:"center",sortable:!0,type:"string",width:180,renderCell:function(e){return e.row.updateStatus===o.Ux.update.sent?(0,V.jsx)(b.Z,{label:o.Ux.update.sent,size:"small",color:"success"}):e.row.updateStatus===o.Ux.update.draft?(0,V.jsx)(b.Z,{label:o.Ux.update.draft,size:"small",color:"info"}):e.row.updateStatus===o.Ux.update.refund?(0,V.jsx)(b.Z,{label:o.Ux.update.refund,size:"small",color:"error"}):null}},{field:"phone",headerName:"Phone",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0,valueGetter:function(e){var t=e.row.estimate.customer;return"".concat((null===t||void 0===t?void 0:t.phone)||"")}},{field:"model",headerName:"Vehicle",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){var t=e.row.estimate.vehicle;return"".concat(t.modelYear," ").concat(t.make," ").concat(t.model," (").concat(t.plateNumber,")")}},{field:"grandTotal",headerName:"Grand Total",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"depositAmount",headerName:"Deposit Amount",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"dueAmount",headerName:"Due Amount",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0,valueFormatter:function(e){var t=e.value;return t?-1===Math.sign(t)?0:t:0}},{field:"refundable",headerName:"Due Refund",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(e){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){s((0,ks.wV)());var t=e.row,n=t.estimate;c("/invoices/".concat(t.id),{state:{invoice:t,estimate:n}})},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(yi.Z,{sx:{display:d?"block":"none",color:"limegreen"}}),disabled:!d,onClick:function(){var t=e.row;l.onEdit(t.id)},label:"Edit",showInMenu:!1},2),(0,V.jsx)(k.u,{icon:(0,V.jsx)(ne.Z,{sx:{color:"indianred"}}),onClick:function(){},label:"Delete",showInMenu:!1},2)]}}]}),[s,l,d,c]);return(0,r.useEffect)((function(){return function(){s((0,Ns.v7)()),s((0,Ns.Zp)())}}),[s]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(W.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:10,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Invoices"})})}),(0,V.jsx)(W.ZP,{container:!0,children:(0,V.jsx)(W.ZP,{item:!0,xs:12,children:(0,V.jsx)(R,{rows:l.invoices,columns:f,showToolbar:!0,loading:"loading"===n.getInvoicesStatus})})}),(0,V.jsx)(ce.Z,{alertType:"success",show:void 0!==l.success,message:null===(e=l.success)||void 0===e?void 0:e.message,onClose:function(){return l.setSuccess(void 0)}}),(0,V.jsx)(ce.Z,{alertType:"error",show:void 0!==l.error,message:null===(t=l.error)||void 0===t?void 0:t.message,onClose:function(){return l.setError(void 0)}}),(0,V.jsx)(Ut,{fullWidth:!0,fullScreen:!0,show:l.showEdit,Content:(0,V.jsx)(Sn.J9,{initialValues:l.initialValues,validationSchema:Bi.schema,onSubmit:function(e){l.save&&l.handleSaveInvoice(e),l.save||l.handleSendInvoice(e)},validateOnChange:!0,enableReinitialize:!0,children:(0,V.jsx)(Ls,{showEdit:l.showEdit,setLabourTotal:l.setLabourTotal,setPartTotal:l.setPartTotal,setGrandTotal:l.setGrandTotal,labourTotal:l.labourTotal,partTotal:l.partTotal,grandTotal:l.grandTotal,dueBalance:l.dueBalance,setDueBalance:l.setDueBalance,refundable:l.refundable,setRefundable:l.setRefundable,showRefund:l.showRefund,setShowRefund:l.setShowRefund,onInitiateRefund:l.handleInitiateRefund,setSave:l.setSave,invoice:l.invoice})}),onClose:function(){return l.handleCloseEdit()}}),(0,V.jsx)(Vs,{show:a.openTransactionPopup,authUrl:a.authorizationUrl,onClose:function(){s((0,Fs.ID)("")),s((0,Fs.lQ)()),s((0,Fs.Mn)()),s((0,Fs.XB)(!1))}}),(0,V.jsx)(ze.Z,{show:"loading"===a.initRefundCustomerStatus}),(0,V.jsx)(ze.Z,{show:"loading"===a.verifyRefundCustomerStatus})]})};var Rs=function(){var e,t,n,a,s,l,c=(0,r.useState)(),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),x=(0,i.Z)(h,2),p=x[0],Z=x[1],g=(0,r.useState)(""),b=(0,i.Z)(g,2),S=b[0],w=b[1],y=(0,r.useState)([]),C=(0,i.Z)(y,2),A=C[0],P=C[1],k=(0,r.useState)([]),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,j.TH)();(0,r.useEffect)((function(){if(F.state){var e=F.state;Z(e.invoice),m(e.estimate)}}),[F]),(0,r.useEffect)((function(){if(u&&p){var e,t,n=u.rideShareDriver,i=u.customer,r=n?"".concat(n.firstName," ").concat(n.lastName):"".concat(i.firstName," ").concat(i.lastName);p.edited&&o.Ux.update.draft||p.edited&&p.updateStatus===o.Ux.update.sent?(e=p.parts.length?p.parts:[],t=p.labours.length?p.labours:[]):(e=u.parts.length?u.parts:[],t=u.labours.length?u.labours:[]),P(e),E(t),w(dn().words(r)),L(i.billingInformation)}}),[u,p]);var M=(0,r.useMemo)((function(){return p&&u?(p.edited?p.laboursTotal:u.laboursTotal)+(p&&p.edited?p.partsTotal:u.partsTotal):0}),[u,p]),R=(0,r.useMemo)((function(){return p&&u?p.edited?p.grandTotal:u.grandTotal:0}),[u,p]);return u&&p?(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(W.ZP,{children:(0,V.jsx)(W.ZP,{children:(0,V.jsx)(As.Z,{onClick:function(){return window.history.back()},style:{position:"absolute",cursor:"pointer"}})})}),(0,V.jsxs)(v.Z,{mb:3,textAlign:"center",display:"block",variant:"subtitle1",children:["#",p.code]}),(0,V.jsxs)(W.ZP,{container:!0,my:3,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:"Billing Information"}),(0,V.jsxs)(G.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:S}),q?(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[(0,V.jsxs)(v.Z,{variant:"body2",gutterBottom:!0,children:[q.address," ",q.district," ",q.state]}),(0,V.jsx)(v.Z,{variant:"body2",gutterBottom:!0,children:q.phone})]}):(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:u.address})]})]}),(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)("img",{alt:"",width:"20%",crossOrigin:"anonymous",src:"".concat(X.Z.api.baseURL,"/").concat(null===u||void 0===u||null===(e=u.partner)||void 0===e?void 0:e.logo)})}),(0,V.jsxs)(W.ZP,{item:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:null===u||void 0===u?void 0:u.partner.name}),(0,V.jsxs)(G.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===u||void 0===u||null===(t=u.partner)||void 0===t?void 0:t.contact.address}),(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[null===u||void 0===u||null===(n=u.partner)||void 0===n||null===(a=n.contact)||void 0===a?void 0:a.district," ",null===u||void 0===u||null===(s=u.partner)||void 0===s||null===(l=s.contact)||void 0===l?void 0:l.state]}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===u||void 0===u?void 0:u.partner.phone}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===u||void 0===u?void 0:u.partner.email})]})]})]}),(0,V.jsx)(W.ZP,{container:!0,children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})})}),(0,V.jsxs)(W.ZP,{container:!0,my:3,children:[(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Vehicle"}),(0,V.jsxs)(v.Z,{children:[null===u||void 0===u?void 0:u.vehicle.modelYear," ",null===u||void 0===u?void 0:u.vehicle.make," ",null===u||void 0===u?void 0:u.vehicle.model]})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Reg. No"}),(0,V.jsx)(v.Z,{children:null===u||void 0===u?void 0:u.vehicle.plateNumber})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Mileage"}),(0,V.jsxs)(v.Z,{children:[null===u||void 0===u?void 0:u.vehicle.mileageValue," ",null===u||void 0===u?void 0:u.vehicle.mileageUnit]})]}),(0,V.jsxs)(W.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"VIN"}),(0,V.jsx)(v.Z,{children:null===u||void 0===u?void 0:u.vehicle.vin})]})]}),(0,V.jsx)(W.ZP,{container:!0,children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(J.Z,{orientation:"horizontal",flexItem:!0})})}),(0,V.jsxs)(W.ZP,{container:!0,my:3,sx:{pb:1.5},borderBottom:"3px solid",borderColor:function(e){return"dark"===e.palette.mode?"#676767":"#000000"},justifyContent:"center",alignItems:"center",columns:14,children:[(0,V.jsx)(W.ZP,{item:!0,xs:2,children:(0,V.jsx)(Tt.Z,{src:Cs,sx:{width:20,height:20}})}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Item Description"}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Warranty"}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Unit Cost x Qty"}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"Amount"})]}),(0,V.jsxs)(W.ZP,{container:!0,children:[A.length?A.map((function(e,t){var n=me(parseInt(e.amount));return(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(W.ZP,{item:!0,xs:2}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:e.name}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,children:[e.warranty.warranty," ",e.warranty.interval]}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,children:[me(+e.price)," x ",e.quantity.quantity,"$",e.quantity.unit]}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:n})]},t)})):null,D.length?D.map((function(e,t){return(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(W.ZP,{item:!0,xs:2}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:e.title}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:"-"}),(0,V.jsxs)(W.ZP,{item:!0,xs:3,children:[me(+e.cost)," x 1"]}),(0,V.jsx)(W.ZP,{item:!0,xs:3,children:me(+e.cost)})]},t)})):null]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsxs)(W.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["Subtotal: ",me(M)]}),(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["VAT(7.5%): ",me(parseFloat((null===u||void 0===u?void 0:u.tax)||0)+parseFloat((null===u||void 0===u?void 0:u.taxPart)||0))]})]})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["TOTAL: ",me(R)]})})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",mt:1,mb:2,children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,fontStyle:"italic",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"},children:["Job Duration: ",u.jobDurationValue," ",u.jobDurationUnit,"(s)"]})})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,children:(0,V.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"}},children:[(0,V.jsx)(v.Z,{children:"Paid"}),(0,V.jsx)(v.Z,{sx:{ml:5}}),(0,V.jsxs)(v.Z,{children:["\u20a6",me(p.depositAmount)]})]})})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,children:(0,V.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"}},children:[(0,V.jsx)(v.Z,{children:"Balance Due"}),(0,V.jsx)(v.Z,{sx:{mr:7}}),(0,V.jsxs)(v.Z,{children:["\u20a6",-1===Math.sign(p.dueAmount)?"0.00":me(p.dueAmount)]})]})})]}),(0,V.jsxs)(W.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(W.ZP,{item:!0,xs:10}),(0,V.jsx)(W.ZP,{item:!0,flexGrow:1,children:(0,V.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"}},children:[(0,V.jsx)(v.Z,{children:"Refund Due"}),(0,V.jsx)(v.Z,{sx:{mr:7}}),(0,V.jsxs)(v.Z,{children:["\u20a6",me(p.refundable)]})]})})]})]}):(0,V.jsx)(W.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(W.ZP,{item:!0,xs:!0,children:(0,V.jsx)(ln.Z,{severity:"warning",variant:"outlined",children:(0,V.jsx)(v.Z,{children:"You do not have any estimate. Please contact support"})})})})};var Us=(0,Ga.Z)((function(){var e=(0,r.useContext)(Bs),t=e.setOpenSideNav,n=e.openSideNav,i=(0,w.Z)((function(e){return e.appointmentReducer}));return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(f.Z,{sx:{display:"flex"},children:[(0,V.jsx)(za,{position:"fixed",open:n,children:(0,V.jsxs)(p.Z,{children:[(0,V.jsx)(Z.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){t(!0)},edge:"start",sx:(0,x.Z)({marginRight:5},n&&{display:"none"}),children:(0,V.jsx)(g.Z,{})}),(0,V.jsx)(v.Z,{variant:"h6",noWrap:!0,component:"div",children:"Auto HYVE"})]})}),(0,V.jsx)(Wa,{}),(0,V.jsxs)(f.Z,{component:"main",sx:{flexGrow:1,p:3},children:[(0,V.jsx)(Ra,{}),(0,V.jsxs)(j.Z5,{children:[(0,V.jsx)(j.AW,{path:"/dashboard",element:(0,V.jsx)(mr,{})}),(0,V.jsx)(j.AW,{path:"/appointments",element:(0,V.jsx)(B,{})}),(0,V.jsx)(j.AW,{path:"/appointments/:id",element:(0,V.jsx)(va,{})}),(0,V.jsx)(j.AW,{path:"/customers",element:(0,V.jsx)(be,{})}),(0,V.jsx)(j.AW,{path:"/customers/:id",element:(0,V.jsx)(xt,{})}),(0,V.jsx)(j.AW,{path:"/transactions",element:(0,V.jsx)(hr,{})}),(0,V.jsx)(j.AW,{path:"/transactions/:id",element:(0,V.jsx)(ta,{})}),(0,V.jsx)(j.AW,{path:"/vehicles",element:(0,V.jsx)(O,{})}),(0,V.jsx)(j.AW,{path:"/vehicles/:id",element:(0,V.jsx)(ia,{})}),(0,V.jsx)(j.AW,{path:"/partners",element:(0,V.jsx)(Pa,{})}),(0,V.jsx)(j.AW,{path:"/partner/:id",element:(0,V.jsx)(ur,{})}),(0,V.jsx)(j.AW,{path:"/partner/dashboard",element:(0,V.jsx)(r.Fragment,{})}),(0,V.jsx)(j.AW,{path:"/technicians",element:(0,V.jsx)(Ri,{})}),(0,V.jsx)(j.AW,{path:"/technician/:id",element:(0,V.jsx)(Fi,{})}),(0,V.jsx)(j.AW,{path:"/drivers",element:(0,V.jsx)(Na,{})}),(0,V.jsx)(j.AW,{path:"/drivers/:id",element:(0,V.jsx)(ka,{})}),(0,V.jsx)(j.AW,{path:"/garage",element:(0,V.jsx)(ur,{})}),(0,V.jsx)(j.AW,{path:"/ride-share",element:(0,V.jsx)(ur,{})}),(0,V.jsx)(j.AW,{path:"/checkLists",element:(0,V.jsx)(_a,{})}),(0,V.jsx)(j.AW,{path:"/checkLists/:id",element:(0,V.jsx)(ls,{})}),(0,V.jsx)(j.AW,{path:"/estimates",element:(0,V.jsx)(ys,{})}),(0,V.jsx)(j.AW,{path:"/estimates/:id",element:(0,V.jsx)(Ps,{})}),(0,V.jsx)(j.AW,{path:"/invoices",element:(0,V.jsx)(Ms,{})}),(0,V.jsx)(j.AW,{path:"/invoices/:id",element:(0,V.jsx)(Rs,{})}),(0,V.jsx)(j.AW,{path:"/job-check-list-report/:id",element:(0,V.jsx)(Ss,{})})]})]})]}),(0,V.jsx)(ze.Z,{show:"loading"===i.updateAppointmentStatus})]})})),Bs=(0,r.createContext)(null);function Os(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],d=o[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),x=m[0],f=m[1],p=(0,r.useState)(!1),v=(0,i.Z)(p,2),Z=v[0],g=v[1],j=(0,r.useState)(!1),b=(0,i.Z)(j,2),S=b[0],w=b[1],y=(0,r.useState)(0),C=(0,i.Z)(y,2),A=C[0],P=C[1],k=(0,r.useState)(!1),N=(0,i.Z)(k,2),D=N[0],E=N[1],I=(0,r.useState)(!1),T=(0,i.Z)(I,2),q=T[0],L=T[1],F=(0,r.useState)(null),M=(0,i.Z)(F,2),R=M[0],U=M[1],B=(0,r.useState)(null),O=(0,i.Z)(B,2),W=O[0],z=O[1],G=(0,r.useState)(null),J=(0,i.Z)(G,2),H=J[0],Y=J[1],Q=(0,r.useState)([]),K=(0,i.Z)(Q,2),X=K[0],_=K[1],$=(0,r.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1];return(0,V.jsx)(h.Provider,{value:c,children:(0,V.jsx)(Bs.Provider,{value:{openSideNav:n,setOpenSideNav:a,isSignedIn:l,setIsSignedIn:d,showBooking:x,setShowBooking:f,showBookingBtn:Z,setShowBookingBtn:g,checkedSlot:S,setCheckedSlot:w,planTab:A,setPlanTab:P,mobileDate:D,setMobileDate:E,showTime:q,setShowTime:L,customer:R,setCustomer:U,vehicle:H,setVehicle:Y,vehicles:X,setVehicles:_,showVehicles:te,setShowVehicles:ne,driver:W,setDriver:z},children:(0,V.jsx)(Us,{})})})}},60092:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(1413),r=n(15671),a=n(43144),s=n(60136),o=n(29388),l=n(72791),c=n(16871),d=n(80184);function u(e){return function(t){(0,s.Z)(l,t);var n=(0,o.Z)(l);function l(){var e;(0,r.Z)(this,l);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).state={hasError:!1,errorMessage:""},e}return(0,a.Z)(l,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t.componentStack),this.setState({hasError:!0,errorMessage:e.message})}},{key:"render",value:function(){return this.state.hasError?(0,d.jsx)(c.Fg,{to:"/error",state:(0,i.Z)({},this.state)}):(0,d.jsx)(e,{})}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errorMessage:e.message}}}]),l}(l.Component)}},9911:function(e,t,n){"use strict";var i=n(59434).I0;t.Z=i},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);
//# sourceMappingURL=960.df932645.chunk.js.map