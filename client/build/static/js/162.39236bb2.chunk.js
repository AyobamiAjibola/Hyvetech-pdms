(self.webpackChunkclient=self.webpackChunkclient||[]).push([[162],{96569:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(72791),r=n(54440),a=n(94070),s=n(1413),o=n(55931),l=n(80184),c=(0,i.forwardRef)((function(e,t){return(0,l.jsx)(o.Z,(0,s.Z)({direction:"left",ref:t},e))}));function d(e){var t=e.duration,n=void 0===t?3e3:t;return(0,l.jsx)(r.Z,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.show,autoHideDuration:n,onClose:e.onClose,TransitionComponent:c,children:(0,l.jsx)(a.Z,{onClose:e.onClose,variant:"filled",severity:e.alertType,sx:{width:"100%"},children:e.message})},e.message)}},80226:function(e,t,n){"use strict";var i=n(1413),r=(n(72791),n(47071)),a=n(80184);var s={color:"red"};t.Z=function(e){return e.hasError?(0,a.jsx)(r.Z,{sx:(0,i.Z)((0,i.Z)({},s),e.helperStyle),children:e.message}):null}},63694:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});n(72791);var i=n(26864),r=n(79012),a=n(68096),s=n(30829),o=n(54535),l=n(23786),c=n(80226),d=n(80184),u={PaperProps:{style:{maxHeight:224,width:250}}};function m(e){var t=(0,i.u6)(),n=t.errors,m=t.touched;return(0,d.jsxs)(r.Z,{sx:e.inputGroupStyle,children:[(0,d.jsxs)(a.Z,{fullWidth:e.fullWidth,error:n[e.name]&&m[e.name],children:[(0,d.jsx)(s.Z,{id:e.name,children:e.label}),(0,d.jsxs)(o.Z,{disabled:e.disabled,sx:e.textInputStyle,size:e.size,labelId:e.name,multiple:e.multiple,id:e.name,value:e.value,name:e.name,label:e.label,onChange:e.onChange,MenuProps:u,children:[(0,d.jsx)(l.Z,{value:"",children:"..."}),e.data.map((function(t,n){return(0,d.jsx)(l.Z,{onClick:function(){e.onClick&&e.onClick(t)},value:t.value,children:t.label},n)}))]})]}),(0,d.jsx)(c.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&m[e.name]})]})}},27802:function(e,t,n){"use strict";var i=n(1413),r=(n(72791),n(79012)),a=n(48550),s=n(26864),o=n(80226),l=n(80184);t.Z=function(e){var t=(0,s.u6)(),n=t.errors,c=t.touched;return(0,l.jsxs)(r.Z,{sx:e.inputGroupStyle,children:[(0,l.jsx)(a.Z,(0,i.Z)({size:e.size,placeholder:(null===e||void 0===e?void 0:e.placeholder)||void 0,onBlur:e.onBlur,sx:e.textInputStyle,fullWidth:e.fullWidth,error:n[e.name]&&c[e.name]},e)),(0,l.jsx)(o.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&c[e.name]})]})}},81601:function(e,t,n){"use strict";n.r(t),n.d(t,{AppContext:function(){return Is},default:function(){return Ts}});var i=n(70885),r=n(72791),a=n(38689),s=n(3975),o=n(48491),l=n(26003),c=new a.$U;s.Z.subscribe((function(){var e,t=s.Z.getState().authenticationReducer,n=JSON.parse(sessionStorage.getItem(o.H3.permissions));null!==n?(e=n,c.update(d(e))):(e=t.permissions).length&&c.update(d(e))}));var d=function(e){var t=new a.z4(a.$U),n=t.can,i=t.rules;return e.forEach((function(e){var t=e.action,i=e.subject;n(t,i)})),i},u=(0,r.createContext)(c),m=(0,l.M4)(u.Consumer),h=u,x=n(1413),f=n(64554),p=n(34663),v=n(20890),Z=n(13400),g=n(98008),j=n(16871),b=n(81918),S=n(3710),w=n(49565),y=n(9911),A=n(72355),C=n(72426),P=n.n(C),k=n(94515),D=n(57482),N=n(3525),E=n(70039),I=n(12565),T=n(29961),q=n(81333),L=n(38930),V=n(80184);var M=function(){var e=(0,T.l)(),t=e.current.state;return(0,V.jsx)(q.Z,{color:"primary",variant:"outlined",shape:"rounded",page:t.pagination.page+1,count:t.pagination.pageCount,renderItem:function(e){return(0,V.jsx)(L.Z,(0,x.Z)((0,x.Z)({},e),{},{disableRipple:!0}))},onChange:function(t,n){return e.current.setPage(n-1)}})};function F(){return(0,V.jsx)(I.n,{children:(0,V.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:(0,V.jsx)(D.Z,{})})})}var U=function(e){return(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(N._,(0,x.Z)((0,x.Z)({},e),{},{loading:e.loading,pagination:!0,autoHeight:!0,pageSize:5,rowsPerPageOptions:[5],components:{Pagination:M,LoadingOverlay:F,Toolbar:e.showToolbar?E.n:null},rows:e.rows,columns:e.columns,sortModel:e.sortModel,onSortModelChange:function(t){e.sortModel&&e.onSortModel&&e.onSortModel(t)},disableSelectionOnClick:!0,disableColumnFilter:!0,disableColumnSelector:!0,componentsProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}}}))})};var B=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"planCategory",headerName:"Plans Category",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"modeOfService",headerName:"Mode Of Service",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"status",headerName:"Status",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"Pending"===t?(0,V.jsx)(b.Z,{label:t,color:"warning",size:"small"}):"In-progress"===t?(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"}):"Complete"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"info",size:"small"})}},{field:"appointmentDate",headerName:"Appointment Date",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).format("LLL")}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},R=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,j.s0)(),o=(0,w.Z)((function(e){return e.appointmentReducer})),l=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===o.getAppointmentsStatus&&l((0,A.Xi)())}),[o.getAppointmentsStatus,l]),(0,r.useEffect)((function(){"completed"===o.getAppointmentsStatus&&a(o.appointments)}),[o.appointments,o.getAppointmentsStatus,l]),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Appointments"}),(0,V.jsx)(f.Z,{children:(0,V.jsx)(U,{rows:n,columns:B({onView:function(e){s("/appointments/".concat(e.id))}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0})})]})};var O=function(){return(0,V.jsx)("div",{children:(0,V.jsx)("h1",{children:"Vehicles"})})},W=n(53767),z=n(94721),G=n(65927),J=n(75864);var H=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e?"".concat(e.row.firstName," ").concat(e.row.lastName):""}},{field:"enabled",headerName:"Status",headerAlign:"center",align:"center",type:"boolean",width:100,sortable:!0,renderCell:function(e){return e.row.enabled?(0,V.jsx)(b.Z,{label:"Active",size:"small",color:"success"}):(0,V.jsx)(b.Z,{label:"Inactive",size:"small",color:"warning"})}},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},Y=function(){var e=(0,r.useContext)(Is).setCustomer,t=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)([{field:"id",sort:"asc"}]),f=(0,i.Z)(x,2),p=f[0],v=f[1],Z=(0,w.Z)((function(e){return e.customerReducer})),g=(0,y.Z)();return(0,r.useEffect)((function(){return function(){g((0,J.n)())}}),[g]),(0,r.useEffect)((function(){"idle"===Z.getCustomersStatus&&g((0,G.QH)())}),[Z.getCustomersStatus,g]),(0,r.useEffect)((function(){"loading"===Z.getCustomersStatus&&c(!0)}),[Z.getCustomersStatus,g]),(0,r.useEffect)((function(){"completed"===Z.getCustomersStatus&&(c(!1),h(Z.customers))}),[Z.customers,Z.getCustomersStatus]),(0,r.useEffect)((function(){"failed"===Z.getCustomersStatus&&c(!0)}),[Z.getCustomersStatus]),{rows:m,sortModel:p,setSortModel:v,loading:l,handleDelete:function(){a(!1)},showDelete:n,setShowDelete:a}}(),n=(0,j.s0)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Customers"}),(0,V.jsx)(W.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",divider:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(W.Z,{direction:"row",sx:{width:"100%"},children:(0,V.jsx)(U,{loading:t.loading,rows:t.rows,columns:H({onDelete:function(){t.setShowDelete(!0)},onView:function(t){e(t),n("/customers/".concat(t.id),{state:{customer:t}})}}),showToolbar:!0,sortModel:t.sortModel,onSortModel:t.setSortModel,checkboxSelection:!0,disableSelectionOnClick:!0})})})]})},Q=n(61889),K=n(10703),X=n(72032);var _=function(e){var t,n,i,r,a,s,o,l=P()(null===(t=e.data)||void 0===t?void 0:t.timestamp).fromNow(!1);return(0,V.jsxs)(f.Z,{sx:{bgcolor:e.bgColor,boxShadow:5,borderRadius:3,p:2,minWidth:300},children:[(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"}},children:"".concat(null===(n=e.data)||void 0===n?void 0:n.name).concat(null!==(i=e.data)&&void 0!==i&&i.y&&(null===(r=e.data)||void 0===r?void 0:r.y)>1?"(s)":"")}),(0,V.jsx)(f.Z,{sx:{color:"text.primary",fontSize:34,fontWeight:"medium"},children:null===(a=e.data)||void 0===a?void 0:a.y}),null!==(s=e.data)&&void 0!==s&&s.y?(0,V.jsx)(f.Z,{component:X.Z,sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},fontSize:16,verticalAlign:"sub"}}):null,(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},display:"inline",fontWeight:"medium",mx:.5},children:null!==(o=e.data)&&void 0!==o&&o.y?"today, ".concat(l):null}),(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},display:"inline",fontSize:12}})]})},$=n(80007),ee=n(13771),te=n(78546),ne=n(16656),ie=n(4934),re=n(37596),ae=n(50427),se=n(95643),oe=n(29718),le=n(12003),ce=n.n(le),de=n(75193),ue=n.n(de),me=n(41900),he=n.n(me);function xe(e){var t=(0,r.useRef)(null),n={chart:{plotBackgroundColor:void 0,plotBorderWidth:void 0,plotShadow:!1,type:"pie",width:400},title:{text:e.title},caption:{text:e.caption},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:e.series,credits:{enabled:!1}};return(0,V.jsx)(f.Z,{component:"div",sx:{width:"100%",minWidth:400},children:(0,V.jsx)(ce(),(0,x.Z)({highcharts:oe,options:n,ref:t},e))})}function fe(e){var t,n,i,a=(0,r.useRef)(null),s={chart:{type:"column",width:1660},title:{text:e.title},caption:{text:e.caption},xAxis:{categories:e.categories},yAxis:{min:0,allowDecimals:!1,title:{text:e.yAxisText},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:(null===(t=oe.defaultOptions.title)||void 0===t?void 0:t.style)&&(null===(n=oe.defaultOptions.title)||void 0===n?void 0:n.style.color)||"gray",textOutline:"none"}}},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:(null===(i=oe.defaultOptions.legend)||void 0===i?void 0:i.backgroundColor)||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal"}},series:e.series,credits:{enabled:!1}};return(0,V.jsx)(f.Z,{component:"div",sx:{boxShadow:5,width:"100%",minWidth:1660},children:(0,V.jsx)(ce(),(0,x.Z)({highcharts:oe,options:s,ref:a},e))})}ue()(oe),he()(oe),ue()(oe),he()(oe);var pe=n(64349),ve=n(48621);function Ze(e){return new Intl.NumberFormat("en-GB",{minimumFractionDigits:2}).format(e)}function ge(e){for(var t=[],n=0;n<=e;n++)t.push(n);return t}function je(e){return"object"===typeof e?URL.createObjectURL(e):"".concat(ve.Z.api.baseURL,"/").concat(e)}function be(){window.location.reload()}function Se(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return new Blob([i],{type:n})}var we=n(13796),ye=n(67010),Ae=n(10181);function Ce(e){return(0,V.jsxs)(f.Z,{sx:{bgcolor:e.bgColor,boxShadow:5,borderRadius:3,p:2,minWidth:300},children:[(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"}},children:e.title}),(0,V.jsx)(f.Z,{sx:{color:"text.primary",fontSize:34,fontWeight:"medium"},children:e.data}),(0,V.jsx)(f.Z,{sx:{color:function(e){return"dark"===e.palette.mode?"#ffffff":"#000000"},display:"inline",fontSize:12}})]})}var Pe=n(77520);var ke=function(){var e,t,n,a,s,l,c,d,u,m,h,x,f=(0,r.useState)(),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,w.Z)((function(e){return e.dashboardReducer})),j=(0,w.Z)((function(e){return e.customerReducer})),b=(0,w.Z)((function(e){return e.rideShareReducer})),S=(0,w.Z)((function(e){return e.technicianReducer})),A=(0,w.Z)((function(e){return e.partnerReducer})),C=(0,y.Z)();(0,r.useEffect)((function(){"idle"===g.getAnalyticsStatus&&C((0,pe.w)())}),[g.getAnalyticsStatus,C]),(0,r.useEffect)((function(){C((0,G.QH)()),C((0,we.M3)()),C((0,Ae.tG)()),C((0,Pe.rR)())}),[C]),(0,r.useEffect)((function(){"completed"===g.getAnalyticsStatus&&g.analytics&&Z(function(e){var t=e.monthlyData.appointments.data.map((function(e){return e.y})),n={name:e.monthlyData.appointments.name,data:t,stack:"A"},i=e.monthlyData.customers.data.map((function(e){return e.y})),r={name:e.monthlyData.customers.name,data:i,stack:"A"},a=e.monthlyData.vehicles.data.map((function(e){return e.y})),s={name:e.monthlyData.vehicles.name,data:a,stack:"B"},o=e.monthlyData.transactions.data.map((function(e){return e.y}));return[n,r,s,{name:e.monthlyData.transactions.name,data:o,stack:"B"}]}(g.analytics))}),[g.analytics,g.stackedMonthlyData,g.getAnalyticsStatus]);var k=(0,r.useMemo)((function(){return j.customers.length}),[j.customers]),D=(0,r.useMemo)((function(){return b.drivers.length}),[b.drivers]),N=(0,r.useMemo)((function(){return S.technicians.length}),[S.technicians]),E=(0,r.useMemo)((function(){return A.partners.length}),[A.partners]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",sx:{p:1},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,direction:"column",children:(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:!0,spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Ce,{title:"Total Partners",data:E,bgColor:$.Z[600]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Ce,{data:k,title:"Total Customers",bgColor:ee.Z[600]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Ce,{title:"Total Drivers",data:D,bgColor:te.Z[600]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Ce,{title:"Total Technicians",data:N,bgColor:ne.Z[600]})})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,direction:"column",children:(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:!0,spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(_,{data:null===(e=g.analytics)||void 0===e?void 0:e.dailyData.appointments.data[0],bgColor:ie.Z[600]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(_,{data:null===(t=g.analytics)||void 0===t?void 0:t.dailyData.customers.data[0],bgColor:re.Z[600]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(_,{data:null===(n=g.analytics)||void 0===n?void 0:n.dailyData.vehicles.data[0],bgColor:ae.Z[600]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(_,{data:null===(a=g.analytics)||void 0===a?void 0:a.dailyData.transactions.data[0],bgColor:se.Z[600]})})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,direction:"column",children:(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:!0,spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(K.Z,{children:(0,V.jsx)(xe,{title:"Customers, ".concat(P()().format("MMM YYYY"),"."),series:null===(s=g.analytics)||void 0===s||null===(l=s.monthlyData)||void 0===l?void 0:l.customers})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(K.Z,{children:(0,V.jsx)(xe,{title:"Appointments, ".concat(P()().format("MMM YYYY"),"."),series:null===(c=g.analytics)||void 0===c||null===(d=c.monthlyData)||void 0===d?void 0:d.appointments})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(K.Z,{children:(0,V.jsx)(xe,{title:"Vehicles, ".concat(P()().format("MMM YYYY"),"."),series:null===(u=g.analytics)||void 0===u||null===(m=u.monthlyData)||void 0===m?void 0:m.vehicles})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(K.Z,{children:(0,V.jsx)(xe,{title:"Transactions, ".concat(P()().format("MMM YYYY"),"."),series:null===(h=g.analytics)||void 0===h||null===(x=h.monthlyData)||void 0===x?void 0:x.transactions})})})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(fe,{title:"",categories:o.gg,yAxisText:"Monthly Appointments, Customers, DriverVehicles and Transactions",series:v})})]}),(0,V.jsx)(ye.Z,{show:"loading"===g.getAnalyticsStatus}),(0,V.jsx)(ye.Z,{show:"loading"===j.getCustomersStatus}),(0,V.jsx)(ye.Z,{show:"loading"===b.getDriversStatus}),(0,V.jsx)(ye.Z,{show:"loading"===S.getTechniciansStatus})]})},De=n(27140),Ne=n.n(De),Ee=n(51757);function Ie(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(null),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,w.Z)((function(e){return e.userReducer})),j=(0,y.Z)(),b=(0,r.useMemo)((function(){return sessionStorage.getItem(ve.Z.auth.admin)}),[]);return(0,r.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem(o.H3.permissions));if(null===e)throw new Error("You are not authorized to access this resource");e.forEach((function(e){"manage"===e.action&&"all"===e.subject&&a(!0),"manage"===e.action&&"technician"===e.subject&&d(!0),"manage"===e.action&&"driver"===e.subject&&x(!0)}))}),[]),(0,r.useEffect)((function(){if(!b)throw new Error("You are not authorized to access this resource");var e=Ne().decode(b);j((0,Ee._)(e.userId))}),[j,b]),(0,r.useEffect)((function(){"completed"===g.getUserStatus&&Z(g.user)}),[g.getUserStatus,g.user]),{isSuperAdmin:n,isTechAdmin:c,isDriverAdmin:h,user:v}}var Te=n(51691),qe=n(97123),Le=n(24518),Ve=n(13967),Me=n(39124),Fe=n(43896),Ue=n(55931);function Be(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var Re=n(45987),Oe=["children","value","index"];function We(e){var t=e.children,n=e.value,i=e.index,r=(0,Re.Z)(e,Oe);return(0,V.jsx)("div",(0,x.Z)((0,x.Z)({role:"tabpanel",hidden:n!==i,id:"full-width-tabpanel-".concat(i),"aria-labelledby":"full-width-tab-".concat(i)},r),{},{children:n===i&&t}))}var ze=n(15834),Ge=n(57842),Je=n(84022),He=n(63829),Ye=n(45898);function Qe(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useRef)(null),l=(0,Ve.Z)(),c=(0,y.Z)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(Me.Z,{centered:!0,value:a,onChange:function(e,t){s(t),c((0,ze.ij)()),c((0,ze.Qj)()),c((0,ze.$S)()),c((0,Ge.CO)()),c((0,Ge.UF)()),c((0,Ge.uR)()),c((0,Ge.NW)()),c((0,Ge.S4)()),c((0,Ge.a4)()),c((0,Ge.aS)()),c((0,J.n)()),c((0,Je.zQ)()),c((0,Je.$R)()),c((0,Je.F$)()),c((0,Je.L3)()),c((0,Je.Pn)()),c((0,Je.Nh)()),c((0,Je._v)()),c((0,Je.EF)()),c((0,Je.gP)()),c((0,Je.Ok)()),c((0,Je.yr)()),c((0,Je.Iu)()),c((0,He.dI)()),c((0,He.CV)()),c((0,He.OK)()),c((0,Ye.t8)()),c((0,Ye.uI)()),c((0,Ye.i3)())},"aria-label":"icon label tabs example",children:e.tabMenus.map((function(e,t){return(0,V.jsx)(Fe.Z,(0,x.Z)({label:e.name},Be(t)),t)}))}),e.tabMenus.map((function(e,t){return(0,V.jsx)(Ue.Z,{direction:"right",in:a===t,container:o.current,children:(0,V.jsx)("div",{children:(0,V.jsx)(We,{value:a,index:t,dir:l.direction,children:(0,V.jsx)(f.Z,{sx:{pt:6},children:(0,V.jsx)(e.Element,{})})})})},t)}))]})}var Ke=function(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useRef)(null),l=(0,Ve.Z)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(Me.Z,{centered:!0,value:a,onChange:function(e,t){s(t)},"aria-label":"icon label tabs example",children:e.tabMenus.map((function(e,t){return(0,V.jsx)(Fe.Z,(0,x.Z)({label:e.name},Be(t)),t)}))}),e.tabMenus.map((function(e,t){return(0,V.jsx)(Ue.Z,{direction:"right",in:a===t,container:o.current,children:(0,V.jsx)("div",{children:(0,V.jsx)(We,{value:a,index:t,dir:l.direction,children:(0,V.jsx)(f.Z,{sx:{pt:6},children:(0,V.jsx)(e.Element,{})})})})},t)}))]})},Xe=(0,r.createContext)(null);var _e=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,j.TH)();return(0,r.useEffect)((function(){if(s.state){var e=s.state;a(e.customer)}}),[s.state]),(0,V.jsx)(W.Z,{direction:"column",spacing:5,divider:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(K.Z,{sx:{p:3},children:(0,V.jsx)(Xe.Provider,{value:{customer:n,setCustomer:a},children:(0,V.jsx)(Ke,{tabMenus:Qi})})})})};var $e=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"planCategory",headerName:"Plans Category",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"modeOfService",headerName:"Mode Of Service",headerAlign:"center",width:170,align:"center",type:"number",sortable:!0},{field:"status",headerName:"Status",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"Pending"===t?(0,V.jsx)(b.Z,{label:t,color:"warning",size:"small"}):"In-progress"===t?(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"}):"Complete"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"info",size:"small"})}},{field:"appointmentDate",headerName:"Appointment Date",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:170,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},et=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(Xe).customer,o=(0,w.Z)((function(e){return e.customerReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,G.f)(s.id))}),[l,s]),(0,r.useEffect)((function(){"completed"===o.getCustomerAppointmentsStatus&&a(o.appointments)}),[o.getCustomerAppointmentsStatus,o.appointments]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(U,{rows:n,columns:$e({onView:function(e){c("/appointments/".concat(e.id))}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getCustomerAppointmentsStatus})})};var tt=function(){return(0,V.jsx)(v.Z,{children:"Quotes"})};var nt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"reference",headerName:"Reference",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"amount",headerName:"Amount",headerAlign:"center",align:"center",type:"number",sortable:!0},{field:"purpose",headerName:"Purpose",headerAlign:"center",width:200,align:"center",type:"string",sortable:!0},{field:"status",headerName:"PaymentStatus",headerAlign:"center",align:"center",width:150,type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"success"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):t===o.X3.txn_init?(0,V.jsx)(b.Z,{label:"pending",color:"warning",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"})}},{field:"serviceStatus",headerName:"Service Status",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"paidAt",headerName:"Paid At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return e.value?P()(e.value).utc(!0).format("LLL"):"-"}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},it=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(Xe).customer,o=(0,w.Z)((function(e){return e.customerReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,G.XZ)(s.id))}),[l,s]),(0,r.useEffect)((function(){"completed"===o.getCustomerTransactionsStatus&&a(o.transactions)}),[o.getCustomerTransactionsStatus,o.transactions]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(W.Z,{direction:"row",spacing:2,children:(0,V.jsx)(U,{rows:n,columns:nt({onView:function(e){c("/transactions/".concat(e.id),{state:{transaction:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getCustomerTransactionsStatus})})})};var rt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"plateNumber",headerName:"Plate Number",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"make",headerName:"Make",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"model",headerName:"Model",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"modelYear",headerName:"Year",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"isBooked",headerName:"Booked",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){return e.row.isBooked?(0,V.jsx)(b.Z,{label:"Yes",color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:"No",color:"error",size:"small"})}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},at=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(Xe).customer,o=(0,w.Z)((function(e){return e.customerReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,G.ur)(s.id))}),[s,l]),(0,r.useEffect)((function(){"completed"===o.getCustomerVehiclesStatus&&a(o.vehicles)}),[o.getCustomerVehiclesStatus,o.vehicles]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(W.Z,{direction:"row",spacing:2,children:(0,V.jsx)(U,{rows:n,columns:rt({onView:function(e){c("/vehicles/".concat(e.id),{state:{vehicle:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getCustomerVehiclesStatus})})})};var st=function(){return(0,V.jsx)(v.Z,{children:"Quotes"})},ot=(0,r.createContext)(null);var lt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"reference",headerName:"Reference",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"amount",headerName:"Amount",headerAlign:"center",align:"center",type:"number",sortable:!0},{field:"purpose",headerName:"Purpose",headerAlign:"center",width:200,align:"center",type:"string",sortable:!0},{field:"status",headerName:"PaymentStatus",headerAlign:"center",align:"center",width:150,type:"string",sortable:!0,renderCell:function(e){var t=e.row.status;return"success"===t?(0,V.jsx)(b.Z,{label:t,color:"success",size:"small"}):t===o.X3.txn_init?(0,V.jsx)(b.Z,{label:"pending",color:"warning",size:"small"}):(0,V.jsx)(b.Z,{label:t,color:"error",size:"small"})}},{field:"serviceStatus",headerName:"Service Status",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"paidAt",headerName:"Paid At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return e.value?P()(e.value).utc(!0).format("LLL"):"-"}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:200,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},ct=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(ot).driver,o=(0,w.Z)((function(e){return e.rideShareReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,we.e_)(s.id))}),[l,s]),(0,r.useEffect)((function(){"completed"===o.getDriverTransactionsStatus&&a(o.transactions)}),[o.getDriverTransactionsStatus,o.transactions]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(W.Z,{direction:"row",spacing:2,children:(0,V.jsx)(U,{rows:n,columns:lt({onView:function(e){c("/transactions/".concat(e.id),{state:{transaction:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getDriverTransactionsStatus})})})};var dt=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"plateNumber",headerName:"Plate Number",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"make",headerName:"Make",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"model",headerName:"Model",headerAlign:"center",width:160,align:"center",type:"string",sortable:!0},{field:"modelYear",headerName:"Year",headerAlign:"center",align:"center",type:"string",sortable:!0},{field:"isBooked",headerName:"Booked",headerAlign:"center",align:"center",type:"string",sortable:!0,renderCell:function(e){return e.row.isBooked?(0,V.jsx)(b.Z,{label:"Yes",color:"success",size:"small"}):(0,V.jsx)(b.Z,{label:"No",color:"error",size:"small"})}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",align:"center",type:"dateTime",sortable:!0,width:160,valueFormatter:function(e){return P()(e.value).utc(!0).format("LLL")}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0)]}}]},ut=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useContext)(ot).driver,o=(0,w.Z)((function(e){return e.rideShareReducer})),l=(0,y.Z)(),c=(0,j.s0)();return(0,r.useEffect)((function(){s&&l((0,we.TR)(s.id))}),[s,l]),(0,r.useEffect)((function(){"completed"===o.getDriverVehiclesStatus&&a(o.vehicles)}),[o.getDriverVehiclesStatus,o.vehicles]),(0,V.jsx)(f.Z,{children:(0,V.jsx)(W.Z,{direction:"row",spacing:2,children:(0,V.jsx)(U,{rows:n,columns:dt({onView:function(e){c("/vehicles/".concat(e.id),{state:{vehicle:e}})}}),checkboxSelection:!0,disableSelectionOnClick:!0,showToolbar:!0,loading:"loading"===o.getDriverVehiclesStatus})})})},mt=n(74165),ht=n(15861),xt=n(39281),ft=n(79836),pt=n(53382),vt=n(35855),Zt=n(53994),gt=n(93044),jt=n(5574),bt=n(84395),St=n(65661),wt=n(39157),yt=(0,r.forwardRef)((function(e,t){return(0,V.jsx)(Ue.Z,(0,x.Z)({direction:"up",ref:t},e))})),At=n(29823);var Ct=function(e){var t=(0,r.useRef)(null);return(0,V.jsx)("div",{children:(0,V.jsxs)(jt.Z,{open:e.show,TransitionComponent:yt,keepMounted:!0,onClose:e.onClose,"aria-describedby":"app-modal",maxWidth:e.size,fullWidth:e.fullWidth,fullScreen:e.fullScreen,scroll:"paper",children:[(0,V.jsx)(bt.Z,{sx:{position:"relative"},children:(0,V.jsx)(p.Z,{children:(0,V.jsx)(Z.Z,{edge:"start",color:"inherit",onClick:e.onClose,"aria-label":"close",children:(0,V.jsx)(At.Z,{})})})}),(0,V.jsx)(St.Z,{children:e.title}),(0,V.jsx)(wt.Z,{ref:t,sx:{height:e.contentHeight},children:e.Content}),e.ActionComponent&&e.ActionComponent]})})},Pt=n(24408),kt=n(41181);var Dt=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(null),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(null),p=(0,i.Z)(x,2),v=p[0],Z=p[1],g=(0,w.Z)((function(e){return e.rideShareReducer})),j=(0,w.Z)((function(e){return e.customerReducer}));(0,r.useEffect)((function(){h(g.driver),Z(j.customer)}),[j.customer,g.driver]);var b=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t){var n,i;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ve.Z.api.driverBaseURL,"/").concat(t),e.next=3,kt.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;c(e)},setTimeout((function(){return a(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(xt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:(0,V.jsx)(ft.Z,{sx:{maxWidth:500},"aria-label":"simple table",children:m?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"First Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:m.firstName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Last Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:m.lastName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Phone Number"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:m.phone})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (front)"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:m.frontLicenseImageUrl&&(0,V.jsx)(gt.Z,{onClick:function(){return b(m.frontLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:m.frontLicenseImageUrl,children:(0,V.jsx)(Pt.Z,{})})})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (rear)"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:m.rearLicenseImageUrl&&(0,V.jsx)(gt.Z,{onClick:function(){return b(m.rearLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:m.rearLicenseImageUrl,children:(0,V.jsx)(Pt.Z,{})})})]})]}):v?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"First Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.firstName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Last Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.lastName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Phone Number"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.phone})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (front)"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.frontLicenseImageUrl&&(0,V.jsx)(gt.Z,{onClick:function(){return b(v.frontLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:v.frontLicenseImageUrl,children:(0,V.jsx)(Pt.Z,{})})})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (rear)"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.rearLicenseImageUrl&&(0,V.jsx)(gt.Z,{onClick:function(){return b(v.rearLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:v.rearLicenseImageUrl,children:(0,V.jsx)(Pt.Z,{})})})]})]}):(0,V.jsx)(pt.Z,{children:(0,V.jsx)(vt.Z,{children:(0,V.jsx)(Zt.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(D.Z,{})})})})})})}),(0,V.jsx)(Ct,{fullScreen:!0,show:n,title:"Driver license",size:"xl",Content:(0,V.jsx)("img",{width:"50%",src:l,alt:"Driver license",crossOrigin:"anonymous"}),onClose:function(){return a(!1)}})]})};var Nt=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useContext)(ot).driver,u=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t){var n,i;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ve.Z.api.driverBaseURL,"/").concat(t),e.next=3,kt.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;c(e)},setTimeout((function(){return a(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(xt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:(0,V.jsx)(ft.Z,{sx:{maxWidth:500},"aria-label":"simple table",children:d?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"First Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:d.firstName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Last Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:d.lastName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Phone Number"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:d.phone})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (front)"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:d.frontLicenseImageUrl&&(0,V.jsx)(gt.Z,{onClick:function(){return u(d.frontLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:d.frontLicenseImageUrl,children:(0,V.jsx)(Pt.Z,{})})})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Driver License (rear)"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:d.rearLicenseImageUrl&&(0,V.jsx)(gt.Z,{onClick:function(){return u(d.rearLicenseImageUrl)},sx:{cursor:"pointer"},variant:"square",src:d.rearLicenseImageUrl,children:(0,V.jsx)(Pt.Z,{})})})]})]}):(0,V.jsx)(pt.Z,{children:(0,V.jsx)(vt.Z,{children:(0,V.jsx)(Zt.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(D.Z,{})})})})})})}),(0,V.jsx)(Ct,{fullScreen:!0,show:n,title:"Driver license",size:"xl",Content:(0,V.jsx)("img",{width:"50%",src:l,alt:"Driver license",crossOrigin:"anonymous"}),onClose:function(){return a(!1)}})]})},Et=n(90493),It=n(15021),Tt=n(20653),qt=n(49900),Lt=n(56355),Vt=n(57621),Mt=n(42169),Ft=n(39504),Ut=n(72363),Bt=n.p+"static/media/car1.b6158c8b8916b3751e82.jpg",Rt=n(30399),Ot=n(46813),Wt=n(42982),zt=n(763),Gt=n.n(zt),Jt=n(5712),Ht=n(48550),Yt=n(94070),Qt=n(59908),Kt=n.n(Qt);function Xt(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],f=m[1],p=(0,r.useState)(!1),v=(0,i.Z)(p,2),Z=v[0],g=v[1],b=(0,r.useState)(!1),S=(0,i.Z)(b,2),A=S[0],C=S[1],P=(0,r.useState)(),k=(0,i.Z)(P,2),D=k[0],N=k[1],E=(0,r.useState)(),I=(0,i.Z)(E,2),T=I[0],q=I[1],L=(0,r.useState)(null),V=(0,i.Z)(L,2),M=V[0],F=V[1],U=(0,r.useState)(null),B=(0,i.Z)(U,2),R=B[0],O=B[1],W=(0,r.useState)(0),z=(0,i.Z)(W,2),G=z[0],J=z[1],H=(0,r.useState)(!1),Y=(0,i.Z)(H,2),Q=Y[0],K=Y[1],X=(0,r.useState)({active:!1,confirmPassword:"",email:"",firstName:"",lastName:"",password:"",phone:""}),_=(0,i.Z)(X,2),$=_[0],ee=_[1],te=Ie(),ne=(0,j.UO)(),ie=(0,w.Z)((function(e){return e.technicianReducer})),re=(0,y.Z)();(0,r.useEffect)((function(){"idle"===ie.getTechniciansStatus&&(ne.id?re((0,Ae.ug)(+ne.id)):re((0,Ae.tG)()))}),[re,ne.id,ie.getTechniciansStatus]),(0,r.useEffect)((function(){"loading"===ie.createTechnicianStatus&&K("loading"===ie.createTechnicianStatus)}),[re,ie.createTechnicianStatus]),(0,r.useEffect)((function(){"completed"===ie.createTechnicianStatus&&(a(!1),K(!1),q({message:ie.createTechnicianSuccess}),re((0,Ae.tG)()))}),[re,ie.createTechnicianStatus,ie.createTechnicianSuccess]),(0,r.useEffect)((function(){"failed"===ie.createTechnicianStatus&&(a(!1),K(!1),ie.createTechnicianError&&N({message:ie.createTechnicianError}))}),[re,ie.createTechnicianError,ie.createTechnicianStatus]),(0,r.useEffect)((function(){"loading"===ie.updateTechnicianStatus&&K("loading"===ie.updateTechnicianStatus)}),[re,ie.updateTechnicianStatus]),(0,r.useEffect)((function(){"completed"===ie.updateTechnicianStatus&&(d(!1),K(!1),q({message:ie.updateTechnicianSuccess}),re((0,Ae.tG)()))}),[re,ie.updateTechnicianStatus,ie.updateTechnicianSuccess]),(0,r.useEffect)((function(){"failed"===ie.updateTechnicianStatus&&(d(!1),K(!1),ie.updateTechnicianError&&N({message:ie.updateTechnicianError}))}),[re,ie.updateTechnicianError,ie.updateTechnicianStatus]),(0,r.useEffect)((function(){"loading"===ie.deleteTechnicianStatus&&K("loading"===ie.deleteTechnicianStatus)}),[re,ie.deleteTechnicianStatus]),(0,r.useEffect)((function(){"completed"===ie.deleteTechnicianStatus&&(f(!1),K(!1),q({message:ie.deleteTechnicianSuccess}),re((0,Ae.tG)()))}),[re,ie.deleteTechnicianStatus,ie.deleteTechnicianSuccess]),(0,r.useEffect)((function(){"failed"===ie.deleteTechnicianStatus&&(f(!1),K(!1),ie.deleteTechnicianError&&N({message:ie.deleteTechnicianError}))}),[re,ie.deleteTechnicianError,ie.deleteTechnicianStatus]);return{showCreate:n,setShowCreate:a,showEdit:c,setShowEdit:d,showDelete:h,setShowDelete:f,error:D,setError:N,success:T,setSuccess:q,showView:Z,setShowView:g,detail:M,setDetail:F,showViewJob:A,setShowViewJob:C,job:R,setJob:O,initialValues:$,setInitialValues:ee,techId:G,setTechId:J,loading:Q,handleDelete:function(){M?re((0,Ae.tc)(M.id)):N({message:o.X3.internalError}),f(!1)},handleView:function(e){F(e),g(!0)},handleEdit:function(e){var t=(0,x.Z)((0,x.Z)({},e),{},{id:"".concat(G)});re((0,Ae.wl)(t))},handleCreate:function(e){var t=(0,x.Z)((0,x.Z)({},e),{},{role:ve.Z.roles[5]});if(te.isTechAdmin&&te.user)return t.partnerId="".concat(te.user.partner.id),void re((0,Ae.qK)(t));if(ne.id)return t.partnerId=ne.id,void re((0,Ae.qK)(t));throw new Error("An error occurred. Contact support")}}}var _t=n(96569),$t=n(17100),en=(0,r.createContext)(null);var tn=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],p=m[1],g=(0,r.useState)([]),b=(0,i.Z)(g,2),S=b[0],A=b[1],C=(0,r.useState)(),P=(0,i.Z)(C,2),k=P[0],N=P[1],E=(0,r.useContext)(en),I=E.driverSub,T=E.vehicle,q=E.setViewSub,L=(0,j.s0)();Xt();var M=(0,j.UO)(),F=Ie(),U=(0,r.useMemo)((function(){return F.isTechAdmin&&F.user?F.user.partner.id:M.id?+M.id:void 0}),[F.isTechAdmin,F.user,M.id]),B=(0,w.Z)((function(e){return e.jobReducer})),R=(0,w.Z)((function(e){return e.technicianReducer})),O=(0,w.Z)((function(e){return e.checkListReducer})),W=(0,y.Z)();(0,r.useEffect)((function(){if("completed"===O.getCheckListsStatus&&U){var e=O.checkLists;(e=e.filter((function(e){return e.partners.find((function(e){return e.id===U}))}))).length&&A(e)}}),[O.getCheckListsStatus,O.checkLists,U]),(0,r.useEffect)((function(){"completed"===R.getTechniciansStatus&&a(R.technicians.filter((function(e){return!e.hasJob&&e.active})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})))}),[R.getTechniciansStatus,R.technicians]),(0,r.useEffect)((function(){"completed"===B.driverAssignJobStatus&&T&&(p({message:B.driverAssignJobSuccess}),W((0,Rt.XB)(U)),W((0,Ae.tG)()),W((0,Ot.IN)(T.id)),q(!1))}),[W,B.driverAssignJobStatus,B.driverAssignJobSuccess,U,q,T]),(0,r.useEffect)((function(){"failed"===B.driverAssignJobStatus&&B.driverAssignJobError&&d({message:B.driverAssignJobError})}),[B.driverAssignJobError,B.driverAssignJobStatus]);var z=(0,r.useMemo)((function(){if(I){var e=I.maxDriveIn,t=(0,Wt.Z)(I.jobs);t.length+=e-t.length;for(var n=I.jobs.length>0?I.jobs.length:0;n<t.length;n++)t[n]={};return t}return[]}),[I]),G=(0,r.useMemo)((function(){return!I||I.vehicles.every((function(e){return e.onInspection||e.onMaintenance}))}),[I]),J=(0,r.useCallback)((function(e){return L("/job-check-list-report/".concat(e.id),{state:{job:e}})}),[L]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(xt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:I?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Plan Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:Kt().words(I.planType)})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Plan"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:I.paymentPlan})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Amount"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:Ze(+I.amount)})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Status"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:I.transaction.status})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Mode Of Service"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:I.modeOfService})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Drive-in Count"}),(0,V.jsxs)(Zt.Z,{colSpan:4,align:"right",children:[I.driveInCount,"/",I.maxDriveIn]})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Mobile Count"}),(0,V.jsxs)(Zt.Z,{colSpan:4,align:"right",children:[I.mobileCount,"/",I.maxMobile]})]})]}):(0,V.jsx)(pt.Z,{children:(0,V.jsx)(vt.Z,{children:(0,V.jsx)(Zt.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(D.Z,{})})})})})}),(0,V.jsx)(v.Z,{variant:"h6",component:"div",display:"block",sx:{mt:2},gutterBottom:!0,children:"Inspections"}),(0,V.jsxs)(Q.ZP,{container:!0,direction:"column",spacing:1,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:!0,hidden:G,children:(0,V.jsx)(Jt.Z,{disabled:G,options:S,getOptionLabel:function(e){return e.name},onChange:function(e,t){t&&N(t.id)},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Check List"}))}})}),z.map((function(e,t){return(0,V.jsxs)(r.Fragment,{children:[Gt().isEmpty(e)&&(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Jt.Z,{disabled:G,options:n,onChange:function(e,t){t&&function(e){if(!S.length)return d({message:"You do not have a check list for inspection."});if(void 0===k)return d({message:"You must select one check list for this inspection"});var t={partnerId:U,techId:+e,subscriptionId:null===I||void 0===I?void 0:I.id,checkListId:k,jobId:void 0,client:"Driver"};W((0,Rt.ay)(t))}(t.value)},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Assign To"}))}})}),!Gt().isEmpty(e)&&(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(Yt.Z,{severity:o.jf.complete===e.status?"success":"info",action:o.jf.complete===e.status&&(0,V.jsx)(Z.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return J(e)},children:(0,V.jsx)($t.Z,{fontSize:"inherit"})}),children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:e.name}),(0,V.jsxs)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:["status: ",e.status]})]})})]},t)}))]}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==h,message:null===h||void 0===h?void 0:h.message,onClose:function(){return p(void 0)}})]})};function nn(e){var t=(0,r.useState)(!1),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useContext)(en),h=m.setDriverSub,x=m.vehicle,p=m.setVehicle,g=m.viewSub,b=m.setViewSub,S=(0,j.UO)(),A=(0,w.Z)((function(e){return e.vehicleReducer})),C=(0,w.Z)((function(e){return e.jobReducer})),k=(0,y.Z)(),D=(0,j.TH)();(0,r.useEffect)((function(){var e=S.id;"idle"===C.getJobsStatus&&k((0,Rt.XB)(+e))}),[k,C.getJobsStatus,S.id]),(0,r.useEffect)((function(){A.getDriverVehicleSubscriptionStatus}),[A.driverSubscriptions,A.getDriverVehicleSubscriptionStatus]),(0,r.useEffect)((function(){if(D.state){var e=D.state;e.vehicle&&(p(e.vehicle),k((0,Ot.IN)(e.vehicle.id)))}x&&k((0,Ot.IN)(x.id))}),[k,D.state,e.isCustomer,e.isDriver,p,x]);var N=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t){var n,i;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ve.Z.api.driverBaseURL,"/").concat(t),e.next=3,kt.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;u(e)},setTimeout((function(){return s(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[x?(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,V.jsxs)(Vt.Z,{children:[(0,V.jsx)(Mt.Z,{component:"img",alt:"green iguana",height:"140",image:Bt}),(0,V.jsx)(Ft.Z,{children:(0,V.jsxs)(v.Z,{variant:"h5",component:"div",children:[x.modelYear," ",x.make," ",x.model]})}),(0,V.jsx)(Ut.Z,{children:(0,V.jsx)(Le.Z,{variant:"contained",color:"secondary",size:"small",children:"Book Inspection"})})]})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,sm:9,md:9,children:[(0,V.jsx)(Vt.Z,{children:(0,V.jsxs)(Ft.Z,{children:[(0,V.jsxs)(W.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Make"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.make})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model Year"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.modelYear})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.engineCylinders})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Ownership"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.isOwner?"Owner":"-"})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Date Added"}),(0,V.jsx)(v.Z,{variant:"caption",children:P()(x.createdAt).format("LL")})]})]}),(0,V.jsx)(z.Z,{sx:{my:2}}),(0,V.jsxs)(W.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.model})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.engineModel})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"VIN"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.vin})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.type})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Plate Number"}),(0,V.jsx)(v.Z,{variant:"caption",children:x.plateNumber})]})]}),(0,V.jsx)(z.Z,{sx:{my:2}}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:"Vehicle Papers"}),(0,V.jsxs)(W.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Vehicle Inspection"}),x.vehicleInspectionFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return N(x.vehicleInspectionFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.vehicleInspectionFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Motor Receipt"}),x.motorReceiptFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return N(x.motorReceiptFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.motorReceiptFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Proof Of Ownership"}),x.proofOfOwnershipFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return N(x.proofOfOwnershipFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.proofOfOwnershipFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Road Worthiness"}),x.roadWorthinessFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return N(x.roadWorthinessFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.roadWorthinessFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Registration Number"}),x.registrationNumberFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return N(x.registrationNumberFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.registrationNumberFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Third Party Insurance"}),x.thirdPartyInsuranceFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return N(x.thirdPartyInsuranceFileUrl)},sx:{cursor:"pointer"},variant:"square",src:x.thirdPartyInsuranceFileUrl,children:(0,V.jsx)(Pt.Z,{})})]})]})]})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:{xs:2,md:2},children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Estimates"}),(0,V.jsx)(W.Z,{children:(0,V.jsx)(Vt.Z,{children:(0,V.jsx)(Ft.Z,{})})})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Subscriptions"}),(0,V.jsx)(W.Z,{children:(0,V.jsx)(Vt.Z,{children:(0,V.jsx)(Ft.Z,{children:(0,V.jsx)(Et.Z,{children:A.driverSubscriptions.length?A.driverSubscriptions.filter((function(e){return e.status!==o.lD.cancel})).map((function(e,t){return(0,V.jsxs)(It.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){h(e),b(!0)}(e)},edge:"end","aria-label":"view",children:(0,V.jsx)(Lt.U9w,{})}),children:[(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(gt.Z,{children:(0,V.jsx)(Lt.RPl,{})})}),(0,V.jsx)(qt.Z,{primary:"".concat(e.planType),secondary:"(".concat(e.status,") ").concat(e.planCategory," ").concat(e.paymentPlan)})]},t)})):(0,V.jsx)(It.ZP,{children:(0,V.jsx)(qt.Z,{primary:"No Subscriptions"})})})})})})]})]})]})]}):(0,V.jsx)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{children:"No Data"})})}),(0,V.jsx)(Ct,{show:a,title:"Vehicle paper",fullScreen:!0,Content:(0,V.jsx)("img",{width:"50%",src:d,alt:"Vehicle paper",crossOrigin:"anonymous"}),onClose:function(){return s(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"xs",show:g,Content:(0,V.jsx)(tn,{}),onClose:function(){return b(!1)}})]})}var rn=n(20155),an=n(96241);function sn(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],p=m[1],g=(0,r.useState)([]),b=(0,i.Z)(g,2),S=b[0],A=b[1],C=(0,r.useState)(),P=(0,i.Z)(C,2),k=P[0],N=P[1],E=(0,r.useContext)(en),I=E.customerSub,T=E.vehicle,q=E.setViewSub,L=(0,j.s0)();Xt();var M=(0,j.UO)(),F=Ie(),U=(0,r.useMemo)((function(){return F.isTechAdmin&&F.user?F.user.partner.id:M.id?+M.id:void 0}),[F.isTechAdmin,F.user,M.id]),B=(0,w.Z)((function(e){return e.jobReducer})),R=(0,w.Z)((function(e){return e.technicianReducer})),O=(0,w.Z)((function(e){return e.checkListReducer})),W=(0,y.Z)();(0,r.useEffect)((function(){if("completed"===O.getCheckListsStatus&&U){var e=O.checkLists;(e=e.filter((function(e){return e.partners.find((function(e){return e.id===U}))}))).length&&A(e)}}),[O.getCheckListsStatus,O.checkLists,U]),(0,r.useEffect)((function(){"completed"===R.getTechniciansStatus&&a(R.technicians.filter((function(e){return!e.hasJob&&e.active})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})))}),[R.getTechniciansStatus,R.technicians]),(0,r.useEffect)((function(){"completed"===B.driverAssignJobStatus&&T&&(p({message:B.driverAssignJobSuccess}),W((0,Rt.XB)(U)),W((0,Ae.tG)()),W((0,Ot.IN)(T.id)),q(!1))}),[W,B.driverAssignJobStatus,B.driverAssignJobSuccess,U,q,T]),(0,r.useEffect)((function(){"failed"===B.driverAssignJobStatus&&B.driverAssignJobError&&d({message:B.driverAssignJobError})}),[B.driverAssignJobError,B.driverAssignJobStatus]);var z=(0,r.useMemo)((function(){if(I){var e=I.maxDriveIn,t=(0,Wt.Z)(I.jobs);t.length+=e-t.length;for(var n=I.jobs.length>0?I.jobs.length:0;n<t.length;n++)t[n]={};return t}return[]}),[I]),G=(0,r.useMemo)((function(){return!I||I.vehicles.every((function(e){return e.onInspection||e.onMaintenance}))}),[I]),J=(0,r.useCallback)((function(e){return L("/job-check-list-report/".concat(e.id),{state:{job:e}})}),[L]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(xt.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},component:f.Z,children:I?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Plan Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:Kt().words(I.planType)})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Plan"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:I.paymentPlan})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Amount"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:Ze(+I.amount)})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Status"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:I.transaction.status})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Mode Of Service"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:I.modeOfService})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Drive-in Count"}),(0,V.jsxs)(Zt.Z,{colSpan:4,align:"right",children:[I.driveInCount,"/",I.maxDriveIn]})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Mobile Count"}),(0,V.jsxs)(Zt.Z,{colSpan:4,align:"right",children:[I.mobileCount,"/",I.maxMobile]})]})]}):(0,V.jsx)(pt.Z,{children:(0,V.jsx)(vt.Z,{children:(0,V.jsx)(Zt.Z,{children:(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(D.Z,{})})})})})}),(0,V.jsx)(v.Z,{variant:"h6",component:"div",display:"block",sx:{mt:2},gutterBottom:!0,children:"Inspections"}),(0,V.jsxs)(Q.ZP,{container:!0,direction:"column",spacing:1,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:!0,hidden:G,children:(0,V.jsx)(Jt.Z,{disabled:G,options:S,getOptionLabel:function(e){return e.name},onChange:function(e,t){t&&N(t.id)},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Check List"}))}})}),z.map((function(e,t){return(0,V.jsxs)(r.Fragment,{children:[Gt().isEmpty(e)&&(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Jt.Z,{disabled:G,options:n,onChange:function(e,t){t&&function(e){if(!S.length)return d({message:"You do not have a check list for inspection."});if(void 0===k)return d({message:"You must select one check list for this inspection"});var t={partnerId:U,techId:+e,subscriptionId:null===I||void 0===I?void 0:I.id,checkListId:k};W((0,Rt.ay)(t))}(t.value)},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Assign To"}))}})}),!Gt().isEmpty(e)&&(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(Yt.Z,{severity:o.jf.complete===e.status?"success":"info",action:o.jf.complete===e.status&&(0,V.jsx)(Z.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return J(e)},children:(0,V.jsx)($t.Z,{fontSize:"inherit"})}),children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:e.name}),(0,V.jsxs)(v.Z,{gutterBottom:!0,variant:"caption",component:"div",children:["status: ",e.status]})]})})]},t)}))]}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==h,message:null===h||void 0===h?void 0:h.message,onClose:function(){return p(void 0)}})]})}function on(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,j.UO)(),m=(0,w.Z)((function(e){return e.vehicleReducer})),h=(0,w.Z)((function(e){return e.jobReducer})),x=(0,y.Z)(),p=(0,r.useContext)(en),g=p.setCustomerSub,b=p.vehicle,S=p.setVehicle,A=p.setViewSub,C=p.viewSub,k=(0,j.TH)();(0,r.useEffect)((function(){var e=u.id;"idle"===h.getJobsStatus&&x((0,Rt.XB)(+e))}),[x,h.getJobsStatus,u.id]),(0,r.useEffect)((function(){m.getCustomerVehicleSubscriptionStatus}),[m.customerSubscriptions,m.getCustomerVehicleSubscriptionStatus]),(0,r.useEffect)((function(){if(k.state){var e=k.state;e.vehicle&&(S(e.vehicle),x((0,Ot.$u)(e.vehicle.id)))}b&&x((0,Ot.$u)(b.id))}),[x,k.state,S,b]);var D=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t){var n,i;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ve.Z.api.driverBaseURL,"/").concat(t),e.next=3,kt.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;d(e)},setTimeout((function(){return a(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[b?(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,V.jsxs)(Vt.Z,{children:[(0,V.jsx)(Mt.Z,{component:"img",alt:"green iguana",height:"140",image:Bt}),(0,V.jsx)(Ft.Z,{children:(0,V.jsxs)(v.Z,{variant:"h5",component:"div",children:[b.modelYear," ",b.make," ",b.model]})}),(0,V.jsx)(Ut.Z,{children:(0,V.jsx)(Le.Z,{variant:"contained",color:"secondary",size:"small",children:"Book Inspection"})})]})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,sm:9,md:9,children:[(0,V.jsx)(Vt.Z,{children:(0,V.jsxs)(Ft.Z,{children:[(0,V.jsxs)(W.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Make"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.make})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model Year"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.modelYear})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.engineCylinders})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Ownership"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.isOwner?"Owner":"-"})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Date Added"}),(0,V.jsx)(v.Z,{variant:"caption",children:P()(b.createdAt).format("LL")})]})]}),(0,V.jsx)(z.Z,{sx:{my:2}}),(0,V.jsxs)(W.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.model})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.engineModel})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"VIN"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.vin})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.type})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Plate Number"}),(0,V.jsx)(v.Z,{variant:"caption",children:b.plateNumber})]})]}),(0,V.jsx)(z.Z,{sx:{my:2}}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:"Vehicle Papers"}),(0,V.jsxs)(W.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Vehicle Inspection"}),b.vehicleInspectionFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return D(b.vehicleInspectionFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.vehicleInspectionFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Motor Receipt"}),b.motorReceiptFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return D(b.motorReceiptFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.motorReceiptFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Proof Of Ownership"}),b.proofOfOwnershipFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return D(b.proofOfOwnershipFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.proofOfOwnershipFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Road Worthiness"}),b.roadWorthinessFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return D(b.roadWorthinessFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.roadWorthinessFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Registration Number"}),b.registrationNumberFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return D(b.registrationNumberFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.registrationNumberFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Third Party Insurance"}),b.thirdPartyInsuranceFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return D(b.thirdPartyInsuranceFileUrl)},sx:{cursor:"pointer"},variant:"square",src:b.thirdPartyInsuranceFileUrl,children:(0,V.jsx)(Pt.Z,{})})]})]})]})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:{xs:2,md:2},children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Estimates"}),(0,V.jsx)(W.Z,{children:(0,V.jsx)(Vt.Z,{children:(0,V.jsx)(Ft.Z,{})})})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:6,children:[(0,V.jsx)(v.Z,{sx:{my:1},children:"Subscriptions"}),(0,V.jsx)(W.Z,{children:(0,V.jsx)(Vt.Z,{children:(0,V.jsx)(Ft.Z,{children:(0,V.jsx)(Et.Z,{children:m.customerSubscriptions.length?m.customerSubscriptions.filter((function(e){return e.status!==o.lD.cancel})).map((function(e,t){return(0,V.jsxs)(It.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){g(e),A(!0)}(e)},edge:"end","aria-label":"view",children:(0,V.jsx)(Lt.U9w,{})}),children:[(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(gt.Z,{children:(0,V.jsx)(Lt.RPl,{})})}),(0,V.jsx)(qt.Z,{primary:"".concat(e.planType),secondary:"(".concat(e.status,") ").concat(e.planCategory," ").concat(e.paymentPlan)})]},t)})):(0,V.jsx)(It.ZP,{children:(0,V.jsx)(qt.Z,{primary:"No Subscriptions"})})})})})})]})]})]})]}):(0,V.jsx)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{children:"No Data"})})}),(0,V.jsx)(Ct,{show:n,title:"Vehicle paper",fullScreen:!0,Content:(0,V.jsx)("img",{width:"50%",src:c,alt:"Vehicle paper",crossOrigin:"anonymous"}),onClose:function(){return a(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"xs",show:C,Content:(0,V.jsx)(sn,{}),onClose:function(){return A(!1)}})]})}var ln,cn,dn=n(26864),un=n(4942),mn=n(76863),hn={name:{name:"name",label:"Company Full Name*",error:{invalid:"Invalid Company Full Name.",required:"Company Full Name is required"}},phone:{name:"phone",label:"Contact Number*",error:{invalid:"Phone number is invalid",required:"Phone is required"}},email:{name:"email",label:"Email*",error:{invalid:"Email is invalid",required:"Email is required"}},category:{name:"category",label:"Category*",error:{invalid:"Category is invalid",required:"Category is required"}},workshopAddress:{name:"workshopAddress",label:"Workshop Address*",error:{invalid:"Workshop Address is invalid",required:"Workshop Address is required"}},district:{name:"district",label:"District*",error:{invalid:"District is invalid",required:"Please choose district."}},state:{name:"state",label:"State*",error:{invalid:"State is invalid",required:"Please choose state."}},yearOfIncorporation:{name:"yearOfIncorporation",label:"Year Of Incorporation*",error:{invalid:"Year Of Incorporation is invalid",required:"Please provide Year Of Incorporation."}},cac:{name:"cac",label:"CAC*",error:{invalid:"CAC is invalid",required:"Please provide cac."}},vatNumber:{name:"vatNumber",label:"VAT Number",error:{invalid:"VAT Number is invalid",required:"Please provide VAT Number."}},nameOfDirector:{name:"nameOfDirector",label:"Name of Director*",error:{invalid:"Name of Director is invalid",required:"Please provide Name of Director."}},nameOfManager:{name:"nameOfManager",label:"Name of Manager*",error:{invalid:"Name of Manager is invalid",required:"Please provide Name of Manager."}},totalStaff:{name:"totalStaff",label:"Total Staff*",error:{invalid:"Total Staff is invalid",required:"Total Staff is required"}},totalTechnicians:{name:"totalTechnicians",label:"Total Technicians*",error:{invalid:"Total Technicians is invalid",required:"Total Technicians is required"}},logo:{name:"logo",label:"Company Logo*",error:{invalid:"Company Logo is invalid",required:"Company Logo is required"}},googleMap:{name:"googleMap",label:"Google map link*",error:{invalid:"Google map link is invalid",required:"Google map link is required"}},brands:{name:"brands",label:"Brands*",error:{invalid:"Brands is invalid",required:"Brands is required"}},images:{name:"images",label:"Images",error:{invalid:"Images is invalid",required:"Images is required"}},workingHours:{name:"workingHours",label:"Working Hours*",error:{invalid:"Working Hours is invalid",required:"Working Hours is required"}},bankName:{name:"bankName",label:"Bank Name*",error:{invalid:"Bank Name is invalid",required:"Bank Name is required"}},accountName:{name:"accountName",label:"Account Name*",error:{invalid:"Account Name is invalid",required:"Account Name is required"}},accountNumber:{name:"accountNumber",label:"Account Number*",error:{invalid:"Account Number is invalid",required:"Account Number is required"}}},xn={fields:hn,initialValues:{name:"",phone:"",email:"",category:"",state:"",logo:""},schema:[mn.Ry().shape({name:mn.Z_().required(hn.name.error.required).label(hn.name.label),phone:mn.Z_().max(11).required(hn.phone.error.required).label(hn.phone.label),email:mn.Z_().email().required(hn.email.error.required).label(hn.email.label),category:mn.Z_().required(hn.category.error.required).label(hn.category.label),state:mn.Z_().required(hn.state.error.required).label(hn.state.label),logo:mn.nK().nullable().label(hn.logo.label)}),mn.Ry().shape((ln={},(0,un.Z)(ln,hn.name.name,mn.Z_().required(hn.name.error.required).label(hn.name.label)),(0,un.Z)(ln,hn.nameOfDirector.name,mn.Z_().required(hn.nameOfDirector.error.required).label(hn.nameOfDirector.label)),(0,un.Z)(ln,hn.nameOfManager.name,mn.Z_().required(hn.nameOfManager.error.required).label(hn.nameOfManager.label)),(0,un.Z)(ln,hn.cac.name,mn.Z_().required(hn.cac.error.required).label(hn.cac.label)),(0,un.Z)(ln,hn.vatNumber.name,mn.Z_().nullable().label(hn.vatNumber.label)),(0,un.Z)(ln,hn.workshopAddress.name,mn.Z_().required().label(hn.workshopAddress.label)),ln)),mn.Ry().shape((cn={},(0,un.Z)(cn,hn.accountName.name,mn.Z_().required(hn.accountName.error.required).label(hn.accountName.label)),(0,un.Z)(cn,hn.accountNumber.name,mn.Z_().length(10,hn.accountNumber.error.invalid).required(hn.accountNumber.error.required).label(hn.accountNumber.label)),(0,un.Z)(cn,hn.bankName.name,mn.Z_().required(hn.bankName.error.required).label(hn.bankName.label)),(0,un.Z)(cn,hn.googleMap.name,mn.Z_().required(hn.googleMap.error.required).label(hn.googleMap.label)),(0,un.Z)(cn,hn.logo.name,mn.Z_().required(hn.logo.error.required).label(hn.logo.label)),(0,un.Z)(cn,hn.phone.name,mn.Z_().required(hn.phone.error.required).label(hn.phone.label)),(0,un.Z)(cn,hn.totalStaff.name,mn.Z_().required(hn.totalStaff.error.required).label(hn.totalStaff.label)),(0,un.Z)(cn,hn.totalTechnicians.name,mn.Z_().required(hn.totalTechnicians.error.required).label(hn.totalTechnicians.label)),(0,un.Z)(cn,"brands",mn.IX().of(mn.Ry().shape({name:mn.Z_().nullable(),description:mn.Z_().nullable()})).nullable()),(0,un.Z)(cn,"workingHours",mn.IX().of(mn.Ry().shape({days:mn.IX().of(mn.Z_()),from:mn.hT().nullable(),to:mn.hT().nullable()}).nullable())),cn))]},fn=n(27802),pn=n(39709),vn=n(95683),Zn=xn.fields;var gn=function(e){var t=(0,dn.u6)(),n=t.handleChange,i=t.values;return(0,V.jsx)(dn.l0,{autoComplete:"off",children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.name,name:Zn.name.name,label:Zn.name.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.nameOfDirector,name:Zn.nameOfDirector.name,label:Zn.nameOfDirector.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.nameOfManager,name:Zn.nameOfManager.name,label:Zn.nameOfManager.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.cac,name:Zn.cac.name,label:Zn.cac.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.vatNumber,name:Zn.vatNumber.name,label:Zn.vatNumber.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.workshopAddress,name:Zn.workshopAddress.name,label:Zn.workshopAddress.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(pn.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",size:"large",endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})})},jn=n(43245),bn=n(65370),Sn=n(68087),wn=n(87520),yn=n(36571),An=n(34837),Cn=n(79012),Pn=n(80226);function kn(e){var t=(0,dn.u6)(),n=t.errors,i=t.touched,r=t.setFieldValue;return(0,V.jsx)(yn._,{dateAdapter:wn.Z,children:(0,V.jsxs)(Cn.Z,{sx:e.inputGroupStyle,children:[(0,V.jsx)(An.d,{onChange:function(t){r(e.name,t)},value:e.value,renderInput:function(t){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},t),e))}}),(0,V.jsx)(Pn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})})}var Dn=n(81278),Nn=xn.fields;var En=function(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,dn.u6)(),c=l.values,d=l.handleChange,u=l.setFieldValue,m=l.errors,h=l.touched,f=(0,w.Z)((function(e){return e.miscellaneousReducer})),p=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===f.getBanksStatus&&p((0,Dn.p)())}),[p,f.getBanksStatus]),(0,r.useEffect)((function(){"completed"===f.getBanksStatus&&s(f.banks.filter((function(e){return e.active&&"Nigeria"===e.country})).map((function(e){return{label:e.name,value:e.code}})))}),[f.banks,f.getBanksStatus]),(0,V.jsx)(dn.l0,{children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,justifyContent:"space-evenly",alignItems:"center",spacing:2,mb:3,children:[(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(Le.Z,{endIcon:(0,V.jsx)(jn.Z,{}),color:"primary","aria-label":"upload picture",component:"label",children:["upload logo",(0,V.jsx)("input",{hidden:!0,name:Nn.logo.name,onChange:function(e){var t=e.target.files;t&&u(Nn.logo.name,t[0])},accept:"image/*",type:"file"})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:c.logo&&(0,V.jsx)("img",{src:je(c.logo),crossOrigin:"anonymous",width:"10%",alt:"logo"})})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(fn.Z,{onChange:d,value:c.phone,name:Nn.phone.name,label:Nn.phone.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(fn.Z,{onChange:d,value:c.totalStaff,name:Nn.totalStaff.name,label:Nn.totalStaff.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(fn.Z,{onChange:d,value:c.totalTechnicians,name:Nn.totalTechnicians.name,label:Nn.totalTechnicians.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(fn.Z,{onChange:d,value:c.googleMap,name:Nn.googleMap.name,label:Nn.googleMap.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{variant:"h6",children:"Bank Account"})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Jt.Z,{options:a,value:{label:c.bankName,value:c.bankName},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){t&&u(Nn.bankName.name,t.label)},renderInput:function(e){return(0,V.jsx)(fn.Z,(0,x.Z)((0,x.Z)({},e),{},{name:Nn.bankName.name,label:Nn.bankName.label,onChange:d,value:c.bankName}))}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(fn.Z,{onChange:d,value:c.accountName,name:Nn.accountName.name,label:Nn.accountName.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(fn.Z,{onChange:d,value:c.accountNumber,name:Nn.accountNumber.name,label:Nn.accountNumber.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{variant:"h6",children:"Brands"})}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:Nn.brands.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.brands.length>0&&c.brands.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)(Q.ZP,{item:!0,xs:"name"===e?4:8,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"brands.".concat(n,".").concat(e),label:e,value:t[e],onChange:d,error:void 0!==m.brands&&void 0!==h.brands})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",description:""})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{variant:"h6",children:"Working Hours"})}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:Nn.workingHours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.workingHours.length>0&&c.workingHours.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:"days"===e?(0,V.jsx)(Q.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(Jt.Z,{multiple:!0,options:o.z1,value:t.days,onChange:function(t,i){u("workingHours.".concat(n,".").concat(e),i)},onInputChange:function(t,i){u("workingHours.".concat(n,".").concat(e),i)},renderInput:function(t){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},t),{},{name:"workingHours.".concat(n,".").concat(e)}))}})}):(0,V.jsx)(Q.ZP,{item:!0,xs:3,sx:{mb:2},children:(0,V.jsx)(kn,{fullWidth:!0,variant:"outlined",name:"workingHours.".concat(n,".").concat(e),label:e,value:t[e]})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({days:[],from:new Date,to:new Date})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(pn.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",size:"large",endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})})},In=xn.schema;var Tn=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)({cac:"",name:"",nameOfDirector:"",nameOfManager:"",vatNumber:"",workshopAddress:""}),m=(0,i.Z)(u,2),h=m[0],p=m[1],Z=(0,r.useState)({accountName:"",accountNumber:"",bankName:"",googleMap:"",logo:"",phone:"",totalStaff:"",totalTechnicians:"",brands:[{name:"",description:""}],workingHours:[{days:[],from:new Date,to:new Date}]}),g=(0,i.Z)(Z,2),j=g[0],b=g[1],S=(0,r.useContext)(er).partner,A=(0,w.Z)((function(e){return e.partnerReducer})),C=(0,y.Z)();return(0,r.useEffect)((function(){if(S){p((function(e){return(0,x.Z)((0,x.Z)({},e),{},{cac:S.cac?S.cac:"",name:S.name?S.name:"",nameOfDirector:S.nameOfDirector?S.nameOfDirector:"",nameOfManager:S.nameOfManager?S.nameOfManager:"",vatNumber:S.vatNumber?S.vatNumber:"",workshopAddress:S.contact.address?S.contact.address:""})}));var e=S.workingHours,t=S.brands;b((function(n){return(0,x.Z)((0,x.Z)({},n),{},{logo:S.logo?S.logo:"",accountName:S.accountName?S.accountName:"",googleMap:S.googleMap?S.googleMap:"",accountNumber:S.accountNumber?S.accountNumber:"",bankName:S.bankName?S.bankName:"",phone:S.phone?S.phone:"",totalStaff:S.totalStaff?"".concat(S.totalStaff):"",totalTechnicians:S.totalTechnicians?"".concat(S.totalTechnicians):"",workingHours:e||[{days:[],from:new Date,to:new Date}],brands:t||[{name:"",description:""}]})}))}}),[S]),(0,r.useEffect)((function(){"completed"===A.createPartnerKycStatus&&a({message:A.createPartnerKycSuccess})}),[A.createPartnerKycSuccess,A.createPartnerKycStatus]),(0,r.useEffect)((function(){"failed"===A.createPartnerKycStatus&&A.createPartnerKycError&&d({message:A.createPartnerKycError})}),[A.createPartnerKycError,A.createPartnerKycStatus]),(0,r.useEffect)((function(){"completed"===A.createPartnerSettingsStatus&&a({message:A.createPartnerSettingsSuccess})}),[A.createPartnerSettingsSuccess,A.createPartnerSettingsStatus]),(0,r.useEffect)((function(){"failed"===A.createPartnerSettingsStatus&&A.createPartnerSettingsError&&d({message:A.createPartnerSettingsError})}),[A.createPartnerSettingsError,A.createPartnerSettingsStatus]),(0,r.useEffect)((function(){return function(){C((0,Je._v)()),C((0,Je.EF)())}}),[C]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(W.Z,{spacing:5,divider:(0,V.jsx)(z.Z,{orientation:"horizontal"}),children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"h6",children:"KYC"}),(0,V.jsx)(f.Z,{sx:{my:1}}),(0,V.jsx)(dn.J9,{onSubmit:function(e){if(!S)throw new Error(o.X3.internalError);C((0,Pe.U)({partnerId:S.id,data:e}))},initialValues:h,validationSchema:In[1],enableReinitialize:!0,children:(0,V.jsx)(gn,{isSubmitting:"loading"===A.createPartnerKycStatus})})]}),(0,V.jsx)(f.Z,{children:(0,V.jsx)(dn.J9,{onSubmit:function(e){if(!S)throw new Error(o.X3.internalError);C((0,Pe.ZP)({partnerId:S.id,data:e}))},initialValues:j,validationSchema:In[2],enableReinitialize:!0,children:(0,V.jsx)(En,{isSubmitting:"loading"===A.createPartnerKycStatus})})})]}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==n,message:null===n||void 0===n?void 0:n.message,onClose:function(){return a(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}})]})},qn=n(11304),Ln=n(13239);function Vn(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useRef)(null),l=(0,Ve.Z)();return(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(Me.Z,{centered:!0,value:a,onChange:function(e,t){s(t)},"aria-label":"icon label tabs example",children:e.tabMenus.map((function(e,t){return(0,V.jsx)(Fe.Z,(0,x.Z)({disabled:e.disableTab,label:e.name},Be(t)),t)}))}),e.tabMenus.map((function(t,n){return(0,V.jsx)(Ue.Z,{direction:e.slideDirection,in:a===n,container:o.current,children:(0,V.jsx)("div",{children:(0,V.jsx)(We,{value:a,index:n,dir:l.direction,children:(0,V.jsx)(f.Z,{sx:{pt:6},children:(0,V.jsx)(t.Element,{})})})})},n)}))]})}var Mn=(0,qn.D)({matchFrom:"any",stringify:function(e){return"".concat(e.query)}}),Fn=(0,r.createContext)(null);var Un=function(){var e=r.useState(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=r.useState(""),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],p=(0,r.useState)(null),v=(0,i.Z)(p,2),Z=v[0],g=v[1],b=(0,w.Z)((function(e){return e.partnerReducer})),S=(0,w.Z)((function(e){return e.rideShareReducer})),A=(0,y.Z)(),C=(0,j.UO)(),P=Ie(),k=(0,r.useMemo)((function(){return P.isTechAdmin&&P.user?P.user.partner.id:C.id?+C.id:void 0}),[P.isTechAdmin,P.user,C.id]);return(0,r.useEffect)((function(){"idle"===b.getDriversFilterDataStatus&&k&&A((0,Pe.RJ)(+k))}),[A,k,b.getDriversFilterDataStatus]),(0,r.useEffect)((function(){"completed"===b.getDriversFilterDataStatus&&h(b.driversFilterData)}),[b.driversFilterData,b.getDriversFilterDataStatus]),(0,r.useEffect)((function(){"completed"===S.getDriverStatus&&g(S.driver)}),[S.driver,S.getDriverStatus]),(0,r.useEffect)((function(){return function(){g(null),A((0,Je.Nh)())}}),[A]),(0,V.jsxs)(Fn.Provider,{value:{driver:Z,setDriver:g},children:[(0,V.jsxs)(W.Z,{direction:"column",spacing:5,children:[(0,V.jsx)(Q.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Jt.Z,{filterOptions:Mn,inputValue:l,value:n,loading:"loading"===b.getDriversFilterDataStatus,getOptionLabel:function(e){return e.fullName},isOptionEqualToValue:function(e,t){return e.fullName===t.fullName},onChange:function(e,t){var n;a(t),(n=null===t||void 0===t?void 0:t.id)&&A((0,we.pQ)(n))},onInputChange:function(e,t,n){c(t),"clear"===n&&(g(null),be())},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{label:"Search driver by First name, last name, car plate number.",InputProps:(0,x.Z)((0,x.Z)({},e.InputProps),{},{endAdornment:(0,V.jsxs)(r.Fragment,{children:["loading"===b.getDriversFilterDataStatus?(0,V.jsx)(Ln.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},options:m})})}),(0,V.jsxs)(f.Z,{hidden:null===Z,children:[(0,V.jsx)(z.Z,{orientation:"horizontal"}),(0,V.jsx)(K.Z,{sx:{p:3},children:(0,V.jsx)(Vn,{slideDirection:"left",tabMenus:_i})})]})]}),(0,V.jsx)(ye.Z,{show:"loading"===S.getDriverStatus})]})},Bn=n(5397),Rn={fields:{name:{name:"name",label:"Payment Plans Name*",error:{invalid:"Invalid Payment Plans.",required:"Payment Plans name is required"}},discount:{name:"discount",label:"Discount (%)",error:{invalid:"Discount is invalid",required:"Phone is required"}},plan:{name:"plan",label:"Select Plans*",error:{invalid:"Plan is invalid",required:"Plans is required"}},coverage:{name:"coverage",label:"Coverage",error:{invalid:"Coverage is invalid",required:"Coverage is required"}},description:{name:"description",label:"Description",error:{invalid:"Description is invalid",required:"Description is required."}},parameter:{name:"parameter",label:"Parameters",error:{invalid:"Parameters is invalid",required:"Parameters is required"}},pricing:{name:"pricing",label:"Pricing*",error:{invalid:"Pricing is invalid",required:"Pricing is required"}}},initialValues:{name:"",discount:"",plan:"",coverage:"",description:[{value:""}],parameter:[{name:"",unit:"",value:""}],pricing:[{interval:"",amount:""}]},schema:mn.Ry().shape({name:mn.Z_().required().label("Payment Plans Name"),discount:mn.Z_().nullable().label("Discount"),plan:mn.Z_().required().label("Plans Name"),coverage:mn.Z_().required().label("Coverage"),description:mn.IX().of(mn.Ry()).nullable().label("Payment Plans Description"),parameter:mn.IX().of(mn.Ry()).nullable().label("Payment Plans Coverage"),pricing:mn.IX().of(mn.Ry()).required().label("Payment Plans Pricing")})},On=n(63694),Wn=n(23786),zn=n(47071),Gn=n(63466),Jn=["None","Litre"],Hn=[{label:"Annually",value:"annually"},{label:"Biannually",value:"biannually"},{label:"Quarterly",value:"quarterly"},{label:"Monthly",value:"monthly"},{label:"Weekly",value:"weekly"},{label:"Daily",value:"daily"},{label:"Hourly",value:"hourly"}];function Yn(){var e,t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,dn.u6)(),l=o.handleChange,c=o.values,d=o.errors,u=o.touched,m=(0,w.Z)((function(e){return e.partnerReducer}));return(0,r.useEffect)((function(){s(m.plans.map((function(e){return{label:e.label.replaceAll("_"," "),value:e.label}})))}),[m.plans]),(0,V.jsxs)(dn.l0,{autoComplete:"off",children:[(0,V.jsxs)(Q.ZP,{spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},container:!0,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:l,value:c.name,name:Rn.fields.name.name,label:Rn.fields.name.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(On.Z,{onChange:l,value:c.plan,name:Rn.fields.plan.name,label:Rn.fields.plan.label,data:a})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:l,value:c.discount,name:Rn.fields.discount.name,label:Rn.fields.discount.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(On.Z,{onChange:l,value:c.coverage,name:Rn.fields.coverage.name,label:Rn.fields.coverage.label,data:[{label:"NationWide",value:"NATION_WIDE"}]})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"subtitle1",display:"block",children:"Pricing Models"})]}),(0,V.jsxs)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:[(0,V.jsx)(dn.F2,{name:Rn.fields.pricing.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.pricing.length>0&&c.pricing.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:"interval"===e?(0,V.jsx)(Q.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{select:!0,fullWidth:!0,variant:"outlined",name:"pricing.".concat(n,".").concat(e),label:e,onChange:l,value:t.interval,children:Hn.map((function(e,t){return(0,V.jsx)(Wn.Z,{value:e.value,children:e.label},t)}))})}):(0,V.jsx)(Q.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"pricing.".concat(n,".").concat(e),label:e,onChange:l})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({interval:"",amount:""})},children:(0,V.jsx)(Sn.Z,{})})})]})}}),(null===d||void 0===d?void 0:d.pricing)&&(null===u||void 0===u?void 0:u.pricing)&&(0,V.jsx)(zn.Z,{children:null===d||void 0===d||null===(e=d.pricing)||void 0===e?void 0:e.toString()})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"subtitle1",display:"block",children:"Description(s)"})]}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:Rn.fields.description.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.description.length>0&&c.description.map((function(t,n){return(0,V.jsx)(Q.ZP,{item:!0,xs:11,children:Object.keys(t).map((function(t){return(0,V.jsx)(Cn.Z,{sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"description.".concat(n,".").concat(t),label:Rn.fields.description.label,onChange:l,InputProps:{endAdornment:(0,V.jsx)(Gn.Z,{position:"end",children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})}})},"".concat(t))}))},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({value:""})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",display:"block",children:"Parameter(s)"})]}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:Rn.fields.parameter.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[c.parameter.length>0&&c.parameter.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:"unit"===e?(0,V.jsx)(Q.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{select:!0,fullWidth:!0,variant:"outlined",name:"parameter.".concat(n,".").concat(e),label:e,onChange:l,value:t.unit,children:Jn.map((function(e,t){return(0,V.jsx)(Wn.Z,{value:e,children:e},t)}))})}):(0,V.jsx)(Q.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parameter.".concat(n,".").concat(e),label:e,onChange:l})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",unit:"",value:""})},children:(0,V.jsx)(Sn.Z,{})})})]})}})})]}),(0,V.jsx)(Q.ZP,{item:!0,mt:1,sx:{mx:"auto"},children:(0,V.jsx)(pn.Z,{loading:"loading"===m.addPaymentPlanStatus,fullWidth:!0,variant:"contained",type:"submit",endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})}var Qn=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"name",headerName:"Name",headerAlign:"left",width:220,align:"left",type:"string",sortable:!0},{field:"plan",headerName:"Plan",headerAlign:"center",width:300,align:"center",type:"string",sortable:!0,valueGetter:function(e){var t=e.row.plan;return t?t.label.replaceAll("_"," "):""}},{field:"coverage",headerName:"Coverage",headerAlign:"center",width:180,align:"center",type:"string",sortable:!0,valueGetter:function(e){var t=e.row.coverage;return t?t.replaceAll("_"," "):""}},{field:"createdAt",headerName:"Created At",headerAlign:"center",width:180,align:"center",type:"string",sortable:!0,valueFormatter:function(e){var t=e.value;return t?P()(t).utc(!0).format("LL"):""}},{field:"updatedAt",headerName:"Modified At",headerAlign:"center",width:180,align:"center",type:"string",sortable:!0,valueFormatter:function(e){var t=e.value;return t?P()(t).utc(!0).format("LL"):""}},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(Bn.Z,{sx:{color:"red"}}),onClick:function(){return e.onDelete(t.row)},label:"Delete",showInMenu:!1},1)]}}]},Kn=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(),b=(0,i.Z)(g,2),S=b[0],A=b[1],C=(0,r.useState)(),k=(0,i.Z)(C,2),D=k[0],N=k[1],E=(0,j.UO)(),I=(0,w.Z)((function(e){return e.partnerReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"completed"===I.addPaymentPlanStatus&&a(!1)}),[I.addPaymentPlanStatus]),(0,r.useEffect)((function(){"completed"===I.deletePaymentPlanStatus&&A({message:I.deletePaymentPlanSuccess})}),[I.deletePaymentPlanStatus,I.deletePaymentPlanSuccess]),(0,r.useEffect)((function(){"failed"===I.deletePaymentPlanStatus&&I.deletePaymentPlanError&&Z({message:I.deletePaymentPlanError})}),[I.deletePaymentPlanStatus,I.deletePaymentPlanError]),(0,r.useEffect)((function(){return function(){T((0,Je.gP)())}}),[T]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",mb:1,children:[(0,V.jsx)(Q.ZP,{item:!0}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(Le.Z,{onClick:function(){a(!0)},size:"small",variant:"contained",color:"success",children:"Add"})})]}),(0,V.jsx)(U,{loading:"loading"===I.getPaymentPlansStatus,showToolbar:!0,rows:I.paymentPlans,columns:Qn({onView:function(e){d(!0),N(e)},onDelete:function(e){x(!0),N(e)}})})]}),(0,V.jsx)(Ct,{fullWidth:!0,size:"md",show:n,Content:(0,V.jsx)(dn.J9,{initialValues:Rn.initialValues,validationSchema:Rn.schema,onSubmit:function(e,t){var n={name:e.name,discount:e.discount,plan:e.plan,coverage:e.coverage,descriptions:e.description,parameters:e.parameter,pricing:e.pricing};if(e.pricing.forEach((function(e){if(!e.interval.length||!e.amount.length)return Z({message:"Pricing is required."})})),void 0===E.id)throw Error("Partner ID is required");T((0,Pe.QR)({paymentPlan:n,partnerId:E.id})),t.resetForm()},children:(0,V.jsx)(Yn,{})}),onClose:function(){a(!1)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==(null===v||void 0===v?void 0:v.message),message:null===v||void 0===v?void 0:v.message,onClose:function(){return Z(void 0)}}),(0,V.jsx)(Ct,{show:c,Content:D?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Payment Plan Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:Kt().words(D.name).replaceAll("_"," ")})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Label"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:D.label})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Coverage"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:D.coverage})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"On Promo"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:D.hasPromo?"Yes":"No"})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Date Added"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:P()(D.createdAt).format("LLL")})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Date Modified"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:P()(D.updatedAt).format("LLL")})]})]}):null,onClose:function(){return d(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,show:h,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return x(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:function(){D&&(T((0,Pe.YL)(D.id)),x(!1))},children:"Agree"})]}),onClose:function(){return x(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==S,message:null===S||void 0===S?void 0:S.message,onClose:function(){return A(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==v,message:null===v||void 0===v?void 0:v.message,onClose:function(){return Z(void 0)}})]})},Xn={fields:{programme:{name:"programme",label:"Choose Programme*",error:{invalid:"Programme is invalid",required:"Programme is required"}},serviceMode:{name:"serviceMode",label:"Choose Service Mode*",error:{invalid:"Service Mode is invalid",required:"Service Mode is required"}},label:{name:"label",label:"Plans Name*",error:{invalid:"Invalid name.",required:"Partner name is required"}},minVehicles:{name:"minVehicles",label:"Min Vehicle(s)*",error:{invalid:"Min Vehicle(s) is invalid",required:"Min Vehicle(s) is required"}},maxVehicles:{name:"maxVehicles",label:"Max Vehicle(s)*",error:{invalid:"Max Vehicle(s) is invalid",required:"Max Vehicle(s) is required"}},validity:{name:"validity",label:"Interval*",error:{invalid:"Payment Interval is invalid",required:"Payment Interval is required"}},mobile:{name:"mobile",label:"No of Mobile Service*",error:{invalid:"Mobile Service is invalid.",required:"Mobile Service is required."}},driveIn:{name:"driveIn",label:"No of Drive-in Service*",error:{invalid:"Drive-in Service is invalid",required:"Drive-in Service is required."}}},initialValues:{programme:"Inspection",serviceMode:"Mobile",label:"",minVehicles:"0",maxVehicles:"0",validity:"",mobile:"0",driveIn:"0"},schema:mn.Ry().shape({programme:mn.Z_().required().label("Programme"),serviceMode:mn.Z_().required().label("Service Mode"),label:mn.Z_().required().label("Plans Name"),minVehicles:mn.Z_().required().label("Minimum Vehicle"),maxVehicles:mn.Z_().required().label("Maximum  Vehicle"),validity:mn.Z_().required().label("Plans Validity"),mobile:mn.Z_().required().label("No of Mobile Service"),driveIn:mn.Z_().required().label("No of Drive-in Service")})},_n=n(68096),$n=n(17133),ei=n(88970),ti=n(85523),ni=n(61419);var ii=function(e){var t=(0,dn.u6)(),n=t.errors,i=t.touched;return(0,V.jsxs)(_n.Z,{error:n[e.name]&&i[e.name],children:[(0,V.jsx)($n.Z,{id:"row-radio-buttons-group-label",children:e.label}),(0,V.jsx)(ei.Z,(0,x.Z)((0,x.Z)({"aria-labelledby":"row-radio-buttons-group-label",row:e.row},e),{},{children:e.buttons.map((function(e,t){return(0,V.jsx)(ti.Z,{value:e.value,control:(0,V.jsx)(ni.Z,{}),label:e.label},t)}))})),(0,V.jsx)(Pn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})};function ri(){var e=(0,dn.u6)(),t=e.handleChange,n=e.values,i=e.setFieldValue;(0,r.useEffect)((function(){"Mobile"!==n.serviceMode&&"Drive-in"!==n.serviceMode&&"Hybrid"!==n.serviceMode||(i("mobile","0"),i("driveIn","0"))}),[i,n.serviceMode]);var a=(0,w.Z)((function(e){return e.partnerReducer})),s=(0,r.useMemo)((function(){return parseInt(n.driveIn)+parseInt(n.mobile)}),[n.driveIn,n.mobile]);return(0,V.jsx)(dn.l0,{children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",sx:{p:1},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(ii,{row:!0,name:Xn.fields.programme.name,label:Xn.fields.programme.label,value:n.programme,buttons:[{label:"Inspection",value:"Inspection"},{label:"Maintenance",value:"Maintenance"}],onChange:t})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(ii,{row:!0,name:Xn.fields.serviceMode.name,label:Xn.fields.serviceMode.label,value:n.serviceMode,buttons:[{label:"Mobile",value:"Mobile"},{label:"Drive-in",value:"Drive-in"},{label:"Hybrid",value:"Hybrid"}],onChange:t})}),(0,V.jsx)(Q.ZP,{item:!0,xs:6,children:(0,V.jsx)(fn.Z,{fullWidth:!0,onChange:t,value:n.label,name:Xn.fields.label.name,label:Xn.fields.label.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.minVehicles,name:Xn.fields.minVehicles.name,label:Xn.fields.minVehicles.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.maxVehicles,name:Xn.fields.maxVehicles.name,label:Xn.fields.maxVehicles.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0",max:"12"},onChange:t,value:n.validity,name:Xn.fields.validity.name,label:"".concat(Xn.fields.validity.label," (month)")})}),(0,V.jsx)(Q.ZP,{hidden:"Mobile"===n.serviceMode,item:!0,xs:3,children:(0,V.jsx)(fn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.driveIn,name:Xn.fields.driveIn.name,label:Xn.fields.driveIn.label})}),(0,V.jsx)(Q.ZP,{hidden:"Drive-in"===n.serviceMode,item:!0,xs:3,children:(0,V.jsx)(fn.Z,{fullWidth:!0,type:"number",inputProps:{min:"0"},onChange:t,value:n.mobile,name:Xn.fields.mobile.name,label:Xn.fields.mobile.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsxs)(v.Z,{children:["Total ","Maintenance"===n.programme?"Services":"Inspections",": ",s]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,mt:1,sx:{mx:"auto"},children:(0,V.jsx)(pn.Z,{loading:"loading"===a.addPlanStatus,type:"submit",variant:"contained",color:"info",fullWidth:!0,endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})})}var ai=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"label",headerName:"Name",headerAlign:"left",width:300,align:"left",type:"string",sortable:!0,valueFormatter:function(e){return e.value?e.value.replaceAll("_"," "):""}},{field:"validity",headerName:"Interval",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"serviceMode",headerName:"Service Mode",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"maxVehicles",headerName:"Maximum Vehicles",headerAlign:"center",width:170,align:"center",type:"string",sortable:!0},{field:"minVehicles",headerName:"Minimum Vehicles",headerAlign:"center",width:170,align:"center",type:"string",sortable:!0},{field:"inspections",headerName:"Inspections",headerAlign:"center",width:150,align:"center",type:"string",sortable:!0},{field:"actions",type:"actions",align:"center",headerAlign:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(Bn.Z,{sx:{color:"red"}}),onClick:function(){return e.onDelete(t.row)},label:"Delete",showInMenu:!1},1)]}}]},si=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(),b=(0,i.Z)(g,2),S=b[0],A=b[1],C=(0,r.useState)(),k=(0,i.Z)(C,2),D=k[0],N=k[1],E=(0,j.UO)(),I=(0,w.Z)((function(e){return e.partnerReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"completed"===I.addPlanStatus&&a(!1)}),[I.addPlanStatus]),(0,r.useEffect)((function(){"completed"===I.deletePlanStatus&&A({message:I.deletePlanSuccess})}),[I.deletePlanStatus,I.deletePlanSuccess]),(0,r.useEffect)((function(){"failed"===I.deletePlanStatus&&I.deletePlanError&&N({message:I.deletePlanError})}),[I.deletePlanError,I.deletePlanStatus]),(0,r.useEffect)((function(){return function(){T((0,Je.Ok)())}}),[T]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",mb:1,children:[(0,V.jsx)(Q.ZP,{item:!0}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(Le.Z,{onClick:function(){a(!0)},size:"small",variant:"contained",color:"success",children:"Add"})})]}),(0,V.jsx)(U,{loading:"loading"===I.getPlansStatus,showToolbar:!0,rows:I.plans,columns:ai({onView:function(e){d(!0),Z(e)},onDelete:function(e){x(!0),Z(e)}})})]}),(0,V.jsx)(Ct,{fullWidth:!0,size:"md",show:n,Content:(0,V.jsx)(dn.J9,{validationSchema:Xn.schema,initialValues:Xn.initialValues,onSubmit:function(e,t){var n={label:e.label,minVehicles:+e.minVehicles,maxVehicles:+e.maxVehicles,validity:"".concat(e.validity," months"),mobile:+e.mobile,driveIn:+e.driveIn,inspections:parseInt(e.driveIn)+parseInt(e.mobile),programme:e.programme,serviceMode:e.serviceMode};if(void 0===E.id)throw Error("Partner ID is required");T((0,Pe.o$)({plan:n,partnerId:E.id})),t.resetForm()},children:(0,V.jsx)(ri,{})}),onClose:function(){a(!1)}}),(0,V.jsx)(Ct,{show:c,Content:v?(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Plan Name"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:Kt().words(v.label).replaceAll("_"," ")})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Validity"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.validity})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Inspections"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.inspections})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Min/Max Vehicles"}),(0,V.jsxs)(Zt.Z,{colSpan:4,align:"right",children:[v.minVehicles,"/",v.maxVehicles]})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Total Drive-in"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.driveIn})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Total Mobile"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:v.mobile})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Date Added"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:P()(v.createdAt).format("LLL")})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{colSpan:4,component:"th",scope:"row",children:"Date Modified"}),(0,V.jsx)(Zt.Z,{colSpan:4,align:"right",children:P()(v.updatedAt).format("LLL")})]})]}):null,onClose:function(){return d(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,show:h,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return x(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:function(){v&&(T((0,Pe.iP)(v.id)),x(!1))},children:"Agree"})]}),onClose:function(){return x(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==S,message:null===S||void 0===S?void 0:S.message,onClose:function(){return A(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==D,message:null===D||void 0===D?void 0:D.message,onClose:function(){return N(void 0)}})]})},oi={cac:{name:"cac",label:"CAC",error:{invalid:"CAC is invalid",required:"CAC is required"}},phone:{name:"phone",label:"Phone Number",error:{invalid:"Phone Number is invalid",required:"Phone Number is required"}},totalStaff:{name:"totalStaff",label:"Total Staff",error:{invalid:"Total Staff is invalid",required:"Total Staff is required"}},yearOfIncorporation:{name:"yearOfIncorporation",label:"Year of Incorporation",error:{invalid:"Year of Incorporation is invalid",required:"Year of Incorporation is required"}},brands:{name:"brands",label:"Brands",error:{invalid:"Brands is invalid",required:"Brands is required"}},images:{name:"images",label:"Images",error:{invalid:"Images is invalid",required:"Images is required"}},workingHours:{name:"workingHours",label:"Working Hours",error:{invalid:"Working Hours is invalid",required:"Working Hours is required"}}},li={initialValues:{cac:"",phone:"",totalStaff:"",yearOfIncorporation:new Date,brands:[{name:"",description:"",image:""}],images:[{value:""}],workingHours:[{from:new Date,to:new Date}]},schema:mn.Ry().shape({cac:mn.Z_().nullable().label(oi.cac.label),phone:mn.Z_().nullable().label(oi.phone.label),totalStaff:mn.Z_().nullable().label(oi.totalStaff.label),yearOfIncorporation:mn.Z_().nullable().label(oi.yearOfIncorporation.label),brands:mn.IX().of(mn.Ry()).nullable().label(oi.brands.label),images:mn.IX().of(mn.Ry()).nullable().label(oi.images.label),workingHours:mn.IX().of(mn.Ry()).nullable().label(oi.workingHours.label)}),fields:oi},ci=n(73540);function di(e){var t=(0,dn.u6)(),n=t.errors,i=t.touched,r=t.setFieldValue,a=t.setFieldTouched,s=function(t){a(e.name,0===t.target.value.length)};return(0,V.jsx)(yn._,{dateAdapter:wn.Z,children:(0,V.jsxs)(Cn.Z,{sx:e.inputGroupStyle,children:[(0,V.jsx)(ci.$,{views:e.views,onChange:function(t){r(e.name,t)},value:e.value,date:e.value,rawValue:e.value,renderInput:function(t){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)((0,x.Z)({},t),e),{},{onBlur:s}))}}),(0,V.jsx)(Pn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})})}var ui=function(){var e=(0,dn.u6)(),t=e.handleChange,n=e.values;return(0,V.jsx)(dn.l0,{children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(fn.Z,{onChange:t,value:n.totalStaff,name:li.fields.totalStaff.name,label:li.fields.totalStaff.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(fn.Z,{onChange:t,value:n.cac,name:li.fields.cac.name,label:li.fields.cac.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(di,{views:["year"],value:n.yearOfIncorporation,name:li.fields.yearOfIncorporation.name,label:li.fields.yearOfIncorporation.label})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"h6",display:"block",children:"Brands"})]}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:li.fields.brands.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[n.brands.length>0&&n.brands.map((function(n,i){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(n).map((function(e){return(0,V.jsx)(r.Fragment,{children:"image"===e?(0,V.jsx)(Q.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",type:"file",inputProps:{accept:".png, .jpg, .jpeg"},name:"parameter.".concat(i,".").concat(e),onChange:t,value:n.image})}):(0,V.jsx)(Q.ZP,{item:!0,xs:4,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"brand.".concat(i,".").concat(e),label:e,onChange:t})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(i)},children:(0,V.jsx)(bn.Z,{})})})]},i)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",description:"",image:""})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"h6",display:"block",children:"Working Hours"})]}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:li.fields.workingHours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[n.workingHours.length>0&&n.workingHours.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)(Q.ZP,{item:!0,xs:6,sx:{mb:2},children:(0,V.jsx)(di,{fullWidth:!0,variant:"outlined",name:"workingHour.".concat(n,".").concat(e),label:e,value:t[e],views:["day"]})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({from:new Date,to:new Date})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(v.Z,{variant:"h6",display:"block",children:"Images"})]}),(0,V.jsx)(Q.ZP,{container:!0,item:!0,xs:12,spacing:2,children:(0,V.jsx)(dn.F2,{name:li.fields.images.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[n.images.length>0&&n.images.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,children:[Object.keys(t).map((function(e){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)(Q.ZP,{item:!0,xs:11,sx:{mb:2},children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"image.".concat(n,".").concat(e),value:t[e],type:"file",inputProps:{accept:".png, .jpg, .jpeg"}})})},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({value:""})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(pn.Z,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",size:"large",endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})})};var mi,hi,xi=function(){return(0,V.jsx)(f.Z,{children:(0,V.jsx)(dn.J9,{validationSchema:li.schema,initialValues:li.initialValues,onSubmit:function(){},children:(0,V.jsx)(ui,{})})})},fi=n(38820),pi=n(97893),vi=n(43992),Zi=n(26784),gi={firstName:{name:"firstName",label:"First Name*",error:{invalid:"Invalid First Name.",required:"First Name is required"}},lastName:{name:"lastName",label:"Last Name*",error:{invalid:"Invalid Last Name",required:"Last Name is required"}},email:{name:"email",label:"Email*",error:{invalid:"Invalid email.",required:"Email is required"}},phone:{name:"phone",label:"Phone",error:{invalid:"Invalid Phone Number",required:"Phone Number is required"}},password:{name:"password",label:"Password*",error:{invalid:"Password must contain 8 to 20 characters,\n         and at least One, uppercase letter, lowercase letter, \n         special case character e.g @!&, and number",required:"Password is required"}},confirmPassword:{name:"confirmPassword",label:"Confirm Password*",error:{invalid:"Passwords do not match",required:"Confirm Password is required"}},active:{name:"active",label:"Active*",error:{invalid:"Active is invalid",required:"Active is required"}}},ji={fields:gi,initialValues:{confirmPassword:"",email:"",firstName:"",lastName:"",password:"",phone:"",active:!1},schema:[mn.Ry().shape((mi={},(0,un.Z)(mi,gi.firstName.name,mn.Z_().max(80,gi.firstName.error.invalid).label(gi.firstName.label).required(gi.firstName.error.required)),(0,un.Z)(mi,gi.lastName.name,mn.Z_().max(80,gi.lastName.error.invalid).label(gi.lastName.label).required(gi.lastName.error.required)),(0,un.Z)(mi,gi.email.name,mn.Z_().email(gi.email.error.invalid).required(gi.email.error.required).label(gi.email.label)),(0,un.Z)(mi,gi.phone.name,mn.Z_().max(11,gi.phone.error.invalid).required(gi.phone.error.required).label(gi.phone.label)),(0,un.Z)(mi,gi.password.name,mn.Z_().required(gi.password.error.required).matches(new RegExp(o.mS),gi.password.error.invalid).label(gi.password.label)),(0,un.Z)(mi,gi.confirmPassword.name,mn.Z_().oneOf([mn.iH(gi.password.name),null],gi.confirmPassword.error.invalid).label(gi.confirmPassword.label).required(gi.confirmPassword.error.required)),(0,un.Z)(mi,gi.active.name,mn.O7().oneOf([!0],gi.active.error.required).required(gi.active.error.required)),mi)),mn.Ry().shape((hi={},(0,un.Z)(hi,gi.firstName.name,mn.Z_().max(80,gi.firstName.error.invalid).label(gi.firstName.label).required(gi.firstName.error.required)),(0,un.Z)(hi,gi.lastName.name,mn.Z_().max(80,gi.lastName.error.invalid).label(gi.lastName.label).required(gi.lastName.error.required)),(0,un.Z)(hi,gi.email.name,mn.Z_().email(gi.email.error.invalid).required(gi.email.error.required).label(gi.email.label)),(0,un.Z)(hi,gi.phone.name,mn.Z_().max(11,gi.phone.error.invalid).required(gi.phone.error.required).label(gi.phone.label)),(0,un.Z)(hi,gi.active.name,mn.O7().oneOf([!0],gi.active.error.required).required(gi.active.error.required)),hi))]},bi=n(148),Si=n(89891);var wi=function(e){var t=(0,dn.u6)(),n=t.errors,i=t.touched;return(0,V.jsxs)(Cn.Z,{children:[(0,V.jsx)(ti.Z,{control:(0,V.jsx)(Si.Z,{checked:e.value,onChange:e.onChange,name:e.name,onBlur:e.onBlur,size:e.size}),label:e.label}),(0,V.jsx)(Pn.Z,{helperStyle:e.helperStyle,message:n[e.name],hasError:n[e.name]&&i[e.name]})]})},yi=ji.fields;var Ai=function(e){var t=(0,dn.u6)(),n=t.handleChange,i=t.values,a=t.resetForm,s=(0,r.useContext)(Ni),o=s.showCreate,l=s.showEdit;return(0,r.useEffect)((function(){o&&l||a()}),[a,o,l]),(0,V.jsx)(dn.l0,{children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(wi,{onChange:n,value:i.active,name:yi.active.name,label:yi.active.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.firstName,name:yi.firstName.name,label:yi.firstName.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.lastName,name:yi.lastName.name,label:yi.lastName.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.email,name:yi.email.name,label:yi.email.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.phone,name:yi.phone.name,label:yi.phone.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.password,name:yi.password.name,label:yi.password.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:n,value:i.confirmPassword,name:yi.confirmPassword.name,label:yi.confirmPassword.label})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{orientation:"horizontal",sx:{my:1}}),(0,V.jsx)(pn.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",endIcon:(0,V.jsx)(bi.Z,{}),children:"Submit"})]})]})})},Ci=n(20068),Pi=n(26827),ki=n(5092),Di=function(e){var t=e.setShow,n=(0,r.useState)(!1),a=(0,i.Z)(n,2),s=a[0],l=a[1],c=(0,r.useState)(!1),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),p=(0,i.Z)(h,2),Z=p[0],g=p[1],A=(0,r.useState)(),C=(0,i.Z)(A,2),N=C[0],E=C[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,r.useState)([]),F=(0,i.Z)(M,2),B=F[0],R=F[1],O=Ie(),G=(0,r.useContext)(Ni),J=G.detail,H=G.setShowViewJob,Y=G.showViewJob,X=G.job,_=G.setJob,$=(0,j.UO)(),ee=(0,j.s0)(),te=(0,w.Z)((function(e){return e.jobReducer})),ne=(0,w.Z)((function(e){return e.technicianReducer})),ie=(0,y.Z)();(0,r.useEffect)((function(){"idle"===ne.getTechniciansStatus&&($.id?ie((0,Ae.ug)(+$.id)):ie((0,Ae.tG)()))}),[ie,$.id,ne.getTechniciansStatus]),(0,r.useEffect)((function(){"completed"===ne.getTechniciansStatus&&R(ne.technicians.filter((function(e){return!e.hasJob&&e.active})).map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:"".concat(e.id)}})))}),[ne.getTechniciansStatus,ne.technicians]),(0,r.useEffect)((function(){var e;return"completed"===te.cancelJobStatus&&(E({message:te.cancelJobSuccess}),$.id?ie((0,Ae.ug)(+$.id)):ie((0,Ae.tG)()),e=setTimeout((function(){t&&t(!1)}),2e3)),function(){clearTimeout(e)}}),[ie,te.cancelJobStatus,te.cancelJobSuccess,$.id,t]),(0,r.useEffect)((function(){"failed"===te.cancelJobStatus&&te.cancelJobError&&L({message:te.cancelJobError})}),[te.cancelJobError,te.cancelJobStatus]),(0,r.useEffect)((function(){var e;return"completed"===te.reassignJobStatus&&(E({message:te.reassignJobSuccess}),$.id?ie((0,Ae.ug)(+$.id)):ie((0,Ae.tG)()),e=setTimeout((function(){t&&t(!1)}),2e3)),function(){clearTimeout(e)}}),[ie,te.reassignJobStatus,te.reassignJobSuccess,$.id,t]),(0,r.useEffect)((function(){"failed"===te.reassignJobStatus&&te.reassignJobError&&L({message:te.reassignJobError})}),[te.reassignJobError,te.reassignJobStatus]);var re=(0,r.useMemo)((function(){var e=0,t=0,n=0;return J&&(e=J.jobs.filter((function(e){return e.status===o.jf.pending})).length,t=J.jobs.filter((function(e){return e.status===o.jf.complete})).length,n=J.jobs.filter((function(e){return e.status===o.jf.inProgress})).length),{pending:e,complete:t,inProgress:n}}),[J]),ae=(0,r.useCallback)((function(e){_(e),H(!0)}),[_,H]),se=(0,r.useCallback)((function(e){g(e.id),_(e),l(!0)}),[_]),oe=(0,r.useCallback)((function(e){_(e),m(!0)}),[_]),le=(0,r.useCallback)((function(e){return ee("/job-check-list-report/".concat(e.id),{state:{job:e}})}),[ee]),ce=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"type",headerName:"Type",headerAlign:"center",align:"center",sortable:!0,type:"string",width:180},{field:"status",headerName:"Status",headerAlign:"center",align:"center",sortable:!0,type:"string",width:150,renderCell:function(e){var t=e.value;return t===o.jf.pending?(0,V.jsx)(b.Z,{label:t,color:"warning"}):t===o.jf.inProgress?(0,V.jsx)(b.Z,{label:t,color:"error"}):t===o.jf.complete?(0,V.jsx)(b.Z,{label:t,color:"success"}):""}},{field:"jobDate",headerName:"Completed Date",headerAlign:"center",align:"center",sortable:!0,type:"dateTime",width:200,valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"}},{field:"createdAt",headerName:"Created At",headerAlign:"center",align:"center",sortable:!0,type:"dateTime",width:200,valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):""}},{field:"actions",type:"actions",headerAlign:"center",align:"center",width:200,getActions:function(e){var t=e.row;return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(Ci.Z,{title:"view job",children:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}})}),onClick:function(){return ae(e.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{hidden:!O.isTechAdmin,icon:(0,V.jsx)(Ci.Z,{title:"view report",children:(0,V.jsx)(Pi.Z,{sx:{color:"limegreen"}})}),onClick:function(){return le(e.row)},label:"Edit",showInMenu:!1,sx:{display:t.status===o.jf.complete?"block":"none"}},1),(0,V.jsx)(k.u,{sx:{display:t.status===o.jf.complete?"none":"block"},icon:(0,V.jsx)(Ci.Z,{title:"reassign job",children:(0,V.jsx)(ki.Z,{sx:{color:"yellowgreen"}})}),onClick:function(){return oe(t)},label:"View",showInMenu:!1},2),(0,V.jsx)(k.u,{sx:{display:t.status===o.jf.complete?"none":"block"},icon:(0,V.jsx)(Ci.Z,{title:"cancel job",children:(0,V.jsx)(pi.Z,{sx:{color:"orangered"}})}),onClick:function(){return se(t)},label:"View",showInMenu:!1},3)]}}]}),[O.isTechAdmin,ae,le,se,oe]);return(0,V.jsxs)(r.Fragment,{children:[J?(0,V.jsxs)(W.Z,{spacing:4,divider:(0,V.jsx)(z.Z,{orientation:"horizontal"}),children:[(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Vt.Z,{children:(0,V.jsxs)(Ft.Z,{sx:{textAlign:"center"},children:[(0,V.jsx)(v.Z,{variant:"body1",children:"Jobs Pending"}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:re.pending})]})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Vt.Z,{children:(0,V.jsxs)(Ft.Z,{sx:{textAlign:"center"},children:[(0,V.jsx)(v.Z,{variant:"body1",children:"Jobs In-Progress"}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:re.inProgress})]})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(Vt.Z,{children:(0,V.jsxs)(Ft.Z,{sx:{textAlign:"center"},children:[(0,V.jsx)(v.Z,{variant:"body1",children:"Jobs Completed"}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:re.complete})]})})})]}),(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:12,md:4,children:[(0,V.jsx)(v.Z,{variant:"h5",children:"Personal Information"}),(0,V.jsx)(xt.Z,{component:K.Z,children:(0,V.jsx)(ft.Z,{children:(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"First Name"}),(0,V.jsx)(Zt.Z,{component:"td",children:J.firstName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Last Name"}),(0,V.jsx)(Zt.Z,{component:"td",children:J.lastName})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Email"}),(0,V.jsx)(Zt.Z,{component:"td",children:J.email})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Phone Number"}),(0,V.jsx)(Zt.Z,{component:"td",children:J.phone})]})]})})})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,md:8,children:[(0,V.jsx)(v.Z,{variant:"h5",children:"Jobs"}),(0,V.jsx)(U,{rows:J.jobs,columns:ce})]})]})]}):(0,V.jsx)(f.Z,{sx:{width:"100%"},children:(0,V.jsx)(D.Z,{})}),(0,V.jsx)(Ct,{fullWidth:!0,show:Y,Content:X?(0,V.jsx)(xt.Z,{component:K.Z,children:(0,V.jsx)(ft.Z,{children:(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Name"}),(0,V.jsx)(Zt.Z,{component:"td",children:X.name})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Type"}),(0,V.jsx)(Zt.Z,{component:"td",children:X.type})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Status"}),(0,V.jsx)(Zt.Z,{component:"td",children:X.status})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Date"}),(0,V.jsx)(Zt.Z,{component:"td",children:X.jobDate?P()(X.jobDate).format("LLL"):"-"})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Client"}),(0,V.jsx)(Zt.Z,{component:"td",children:X.vehicleOwner})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",children:"Vehicle Info"}),(0,V.jsxs)(Zt.Z,{component:"td",children:[X.vehicle.make," ",X.vehicle.model," (",X.vehicle.plateNumber,")"]})]})]})})}):null,onClose:function(){return H(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,show:s,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return l(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:function(){Z&&X&&(l(!1),ie((0,Rt.hV)({partnerId:X.partnerId,data:{jobId:Z,client:"Driver"}})))},children:"Agree"})]}),onClose:function(){return l(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"sm",show:u,Content:(0,V.jsx)(f.Z,{sx:{p:1},children:(0,V.jsx)(Jt.Z,{options:B,onChange:function(e,t){t&&function(e){if(X&&$.id){var t=X.rideShareDriverSubscriptionId?X.rideShareDriverSubscriptionId:X.customerSubscriptionId,n=X.rideShareDriverSubscriptionId?"Driver":"Customer",i={partnerId:+$.id,techId:+e,subscriptionId:t,checkListId:X.checkList.id,jobId:X.id,client:n};ie((0,Rt.r$)(i))}m(!1)}(t.value)},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,label:"Reassign To"}))}})}),onClose:function(){return m(!1)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==q,message:null===q||void 0===q?void 0:q.message,onClose:function(){return L(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==N,message:null===N||void 0===N?void 0:N.message,onClose:function(){return E(void 0)}}),(0,V.jsx)(ye.Z,{show:"loading"===te.cancelJobStatus}),(0,V.jsx)(ye.Z,{show:"loading"===te.reassignJobStatus})]})},Ni=(0,r.createContext)(null);var Ei=function(){var e,t,n=Xt(),i=(0,w.Z)((function(e){return e.technicianReducer})),a=(0,y.Z)();(0,r.useEffect)((function(){return function(){a((0,Zi.mm)()),a((0,Zi.RZ)()),a((0,Zi.et)()),a((0,Zi.HR)()),n.setInitialValues({active:!1,confirmPassword:"",email:"",firstName:"",lastName:"",password:"",phone:""}),n.setJob(null),n.setDetail(null),n.setShowEdit(!1),n.setShowView(!1),n.setShowViewJob(!1),n.setShowCreate(!1),n.setShowDelete(!1),n.setError(void 0),n.setSuccess(void 0)}}),[a]);var s=(0,r.useMemo)((function(){return i.technicians}),[i.technicians]),l=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e?"".concat(e.row.firstName," ").concat(e.row.lastName):""}},{field:"active",headerName:"Active",headerAlign:"center",align:"center",type:"boolean",width:100,sortable:!0},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;return t&&P()(t).format("LLL")},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(e){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return n.handleView(e.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(fi.Z,{sx:{color:"limegreen"}}),onClick:function(){var t=e.row;n.setShowEdit(!0),n.setTechId(t.id),n.setInitialValues((function(e){return(0,x.Z)((0,x.Z)({},e),{},{active:t.active,firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone})}))},label:"Edit",showInMenu:!1},1),(0,V.jsx)(k.u,{icon:(0,V.jsx)(pi.Z,{sx:{color:"indianred"}}),onClick:function(){n.setShowDelete(!0),n.setDetail(e.row)},label:"Delete",showInMenu:!1},2)]}}]}),[n]);return(0,V.jsxs)(Ni.Provider,{value:{showCreate:n.showCreate,setShowCreate:n.setShowCreate,showEdit:n.showEdit,setShowEdit:n.setShowEdit,showDelete:n.showDelete,setShowDelete:n.setShowDelete,showView:n.showView,setShowView:n.setShowView,detail:n.detail,setDetail:n.setDetail,showViewJob:n.showViewJob,setShowViewJob:n.setShowViewJob,job:n.job,setJob:n.setJob},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Technicians"})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(m,{I:"manage",a:"technician",children:(0,V.jsx)(Le.Z,{onClick:function(){return n.setShowCreate(!0)},variant:"outlined",color:"success",endIcon:(0,V.jsx)(vi.Z,{}),children:"Create"})})})]}),(0,V.jsx)(W.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",divider:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(W.Z,{direction:"row",sx:{width:"100%"},children:(0,V.jsx)(U,{loading:"loading"===i.getTechniciansStatus,rows:s,columns:l,showToolbar:!0})})})]}),(0,V.jsx)(Ct,{fullWidth:!0,size:"md",show:n.showCreate,Content:(0,V.jsx)(dn.J9,{onSubmit:n.handleCreate,initialValues:ji.initialValues,validationSchema:ji.schema[0],children:(0,V.jsx)(Ai,{isSubmitting:n.loading})}),onClose:function(){return n.setShowCreate(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"md",show:n.showEdit,Content:(0,V.jsx)(dn.J9,{onSubmit:n.handleEdit,initialValues:n.initialValues,validationSchema:ji.schema[1],enableReinitialize:!0,children:(0,V.jsx)(Ai,{isSubmitting:n.loading})}),onClose:function(){return n.setShowEdit(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,fullScreen:!0,show:n.showView,Content:(0,V.jsx)(Di,{setShow:n.setShowView}),onClose:function(){return n.setShowView(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,show:n.showDelete,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return n.setShowDelete(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:n.handleDelete,children:"Agree"})]}),onClose:function(){return n.setShowDelete(!1)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==n.error,message:null===(e=n.error)||void 0===e?void 0:e.message,onClose:function(){return n.setError(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==n.success,message:null===(t=n.success)||void 0===t?void 0:t.message,onClose:function(){return n.setSuccess(void 0)}})]})},Ii={firstName:{name:"firstName",label:"First Name",error:{invalid:"First Name is invalid",required:"First Name is required"}},lastName:{name:"lastName",label:"Last Name",error:{invalid:"Last Name is invalid",required:"Last Name is required"}},phone:{name:"phone",label:"Phone Number",error:{invalid:"Phone Number is invalid",required:"Phone Number is required"}},email:{name:"email",label:"Email Address",error:{invalid:"Email Address is invalid",required:"Email Address is required"}},state:{name:"state",label:"State",error:{invalid:"State is invalid",required:"State is required"}},parts:{name:"parts",label:"Parts",error:{invalid:"Part is invalid",required:"Part is required"}},labours:{name:"labours",label:"Labour",error:{invalid:"Labour is invalid",required:"Labour is required"}},tax:{name:"tax",label:"Tax",error:{invalid:"Tax is invalid",required:"Tax is required"}},taxPart:{name:"tax",label:"Tax",error:{invalid:"Tax is invalid",required:"Tax is required"}},discount:{name:"discount",label:"Discount (%)",error:{invalid:"Discount is invalid",required:"Discount is required"}},address:{name:"address",label:"Address",error:{invalid:"Address is invalid",required:"Address is required"}},addressType:{name:"addressType",label:"Type",error:{invalid:"Address Type is invalid",required:"Address Type is required"}},vin:{name:"vin",label:"VIN",error:{invalid:"VIN is invalid",required:"VIN is required"}},make:{name:"make",label:"Make",error:{invalid:"Make is invalid",required:"Make is required"}},model:{name:"model",label:"Model",error:{invalid:"Model is invalid",required:"Model is required"}},modelYear:{name:"modelYear",label:"Model Year",error:{invalid:"Model Year is invalid",required:"Model Year is required"}},mileageValue:{name:"mileage",label:"Mileage Value",error:{invalid:"Mileage Value is invalid",required:"Mileage Value is required"}},mileageUnit:{name:"mileage",label:"Mileage Unit",error:{invalid:"Mileage Unit is invalid",required:"Mileage Unit is required"}},partsTotal:{name:"mileage",label:"Parts Total",error:{invalid:"Parts Total is invalid",required:"Parts Total is required"}},laboursTotal:{name:"mileage",label:"Labours Total",error:{invalid:"Labours Total is invalid",required:"Labours Total is required"}},grandTotal:{name:"mileage",label:"Grand Total",error:{invalid:"Grand Total is invalid",required:"Grand Total is required"}},plateNumber:{name:"plateNumber",label:"Plate Number",error:{invalid:"Plate Number is invalid",required:"Plate Number is required"}},depositAmount:{name:"depositAmount",label:"Deposit Amount",error:{invalid:"Deposit Amount is invalid",required:"Deposit Amount is required"}},paidAmount:{name:"paidAmount",label:"Paid Amount",error:{invalid:"Paid Amount is invalid",required:"Paid Amount is required"}},additionalDeposit:{name:"additionalDeposit",label:"Additional Amount",error:{invalid:"Additional Amount is invalid",required:"Additional Amount is required"}},jobDuration:{name:"jobDuration",label:"Job Duration",error:{invalid:"Job Duration is invalid",required:"Job Duration is required"}},jobDurationValue:{name:"mileage",label:"Job Duration Value",error:{invalid:"Job Duration Value is invalid",required:"Job Duration Value is required"}},jobDurationUnit:{name:"mileage",label:"Job Duration Unit",error:{invalid:"Job Duration Unit is invalid",required:"Job Duration Unit is required"}}},Ti={fields:Ii,initialValues:{mileage:{count:"",unit:""},plateNumber:"",depositAmount:"0",additionalDeposit:"0",paidAmount:"0",jobDuration:{count:"0",interval:""},firstName:"",lastName:"",make:"",model:"",modelYear:"",phone:"",vin:"",address:"",addressType:"",parts:[{name:"",warranty:{warranty:"",interval:""},quantity:{quantity:"0",unit:""},price:"0",amount:"0"}],labours:[{title:"",cost:"0"}],tax:"0",taxPart:"0"},schema:mn.Ry().shape({firstName:mn.Z_().nullable().label(Ii.firstName.label),lastName:mn.Z_().nullable().label(Ii.lastName.label),address:mn.Z_().nullable().label(Ii.address.label),addressType:mn.Z_().nullable().label(Ii.addressType.label),phone:mn.Z_().nullable().label(Ii.phone.label),vin:mn.Z_().nullable().label(Ii.vin.label),make:mn.Z_().nullable().label(Ii.make.label),model:mn.Z_().nullable().label(Ii.model.label),modelYear:mn.Z_().nullable().label(Ii.modelYear.label),plateNumber:mn.Z_().nullable().label(Ii.plateNumber.label),tax:mn.Z_().optional().nullable().label(Ii.tax.label),taxPart:mn.Z_().optional().nullable().label(Ii.taxPart.label),depositAmount:mn.Z_().nullable().label(Ii.depositAmount.label),additionalDeposit:mn.Z_().nullable().label(Ii.additionalDeposit.label)})},qi=n(94454),Li=n(22935);var Vi=function(e){var t=e.index,n=e.warranty,i=e.handleChange,a=e.values;return(0,V.jsx)(r.Fragment,{children:Object.keys(n).map((function(e,n){return(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,container:!0,children:["warranty"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",label:e,type:"number",inputProps:{min:"0"},onChange:i,name:"parts.".concat(t,".warranty.warranty"),value:a.parts[t].warranty.warranty})}),"interval"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(On.Z,{data:[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],fullWidth:!0,label:e,onChange:i,name:"parts.".concat(t,".warranty.interval"),value:a.parts[t].warranty.interval})})]},n)}))})};var Mi=function(e){var t=e.index,n=e.quantity,i=e.handleChange,a=e.values;return(0,V.jsx)(r.Fragment,{children:Object.keys(n).map((function(e,n){return(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,container:!0,spacing:.2,children:["quantity"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",label:e,type:"number",inputProps:{min:"0"},name:"parts.".concat(t,".quantity.quantity"),value:a.parts[t].quantity.quantity,onChange:i})}),"unit"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(On.Z,{data:[{label:"pcs",value:"pcs"},{label:"pair",value:"pair"},{label:"litres",value:"litres"},{label:"set",value:"set"},{label:"kg",value:"kg"},{label:"hrs",value:"hrs"},{label:"kit",value:"kit"}],fullWidth:!0,label:e,name:"parts.".concat(t,".quantity.unit"),value:a.parts[t].quantity.unit,onChange:i})})]},n)}))})},Fi=Ti.fields;function Ui(e){var t=(0,w.Z)((function(e){return e.vehicleReducer}));return console.log(e.vinOptions,"props.vinOptions"),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Vehicle Information"}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(Jt.Z,{options:e.vinOptions||[],onChange:function(t,n){e.handleChangeVIN({target:{value:n}})},value:e.values.vin,disabled:e.disabled,renderInput:function(n){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},n),{},{label:Fi.vin.label,name:Fi.vin.name,onChange:function(t){e.handleChangeVIN(t)},InputProps:(0,x.Z)((0,x.Z)({},n.InputProps),{},{endAdornment:(0,V.jsx)(Gn.Z,{position:"end",sx:{position:"absolute",left:"90%"},children:"loading"===t.getVehicleVINStatus&&(0,V.jsx)(Ln.Z,{size:25})})})}))}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(fn.Z,{onChange:e.handleChange,disabled:e.disabled,label:Fi.modelYear.label,value:e.values.modelYear,name:Fi.modelYear.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(fn.Z,{onChange:e.handleChange,disabled:e.disabled,label:Fi.make.label,value:e.values.make,name:Fi.make.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(fn.Z,{onChange:e.handleChange,disabled:e.disabled,value:e.values.model,name:Fi.model.name,label:Fi.model.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(fn.Z,{onChange:e.handleChange,disabled:e.disabled,value:e.values.plateNumber,name:Fi.plateNumber.name,label:Fi.plateNumber.label})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,container:!0,spacing:.5,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:8,children:(0,V.jsx)(fn.Z,{onChange:e.handleChange,disabled:e.disabled,value:e.values.mileage.count,name:"mileage.count",label:Fi.mileageValue.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(On.Z,{data:[{label:"miles",value:"miles"},{label:"km",value:"km"}],onChange:e.handleChange,disabled:e.disabled,value:e.values.mileage.unit,name:"mileage.unit",label:"Unit",fullWidth:!0})})]})]})}var Bi=(0,r.memo)(Ui),Ri=Ti.fields,Oi=(0,qn.D)({matchFrom:"any",stringify:function(e){return"".concat(e.query)}});function Wi(e){var t,n,a=(0,r.useState)(0),s=(0,i.Z)(a,2),l=s[0],c=s[1],d=(0,r.useState)(0),u=(0,i.Z)(d,2),m=u[0],h=u[1],f=(0,r.useState)(),p=(0,i.Z)(f,2),g=p[0],b=p[1],S=(0,r.useState)(),A=(0,i.Z)(S,2),C=A[0],P=A[1],k=r.useState(null),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=r.useState(""),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,r.useState)([]),F=(0,i.Z)(M,2),U=F[0],B=F[1],R=(0,r.useState)([]),O=(0,i.Z)(R,2),W=O[0],J=O[1],H=(0,r.useState)([]),Y=(0,i.Z)(H,2),K=Y[0],X=Y[1],_=(0,w.Z)((function(e){return e.vehicleReducer})),$=(0,w.Z)((function(e){return e.estimateReducer})),ee=(0,w.Z)((function(e){return e.partnerReducer})),te=(0,w.Z)((function(e){return e.customerReducer})),ne=(0,y.Z)(),ie=(0,dn.u6)(),re=ie.values,ae=ie.handleChange,se=ie.setFieldValue,oe=ie.setFieldTouched,le=ie.resetForm,ce=(0,r.useState)(void 0===(null===re||void 0===re||null===(t=re.estimate)||void 0===t?void 0:t.tax)||0!==parseInt(re.estimate.tax)),de=(0,i.Z)(ce,2),ue=de[0],me=de[1],he=(0,r.useState)(void 0!==(null===re||void 0===re||null===(n=re.estimate)||void 0===n?void 0:n.taxPart)&&(parseInt(re.estimate.taxPart),!1)),xe=(0,i.Z)(he,2),fe=xe[0],pe=xe[1];(0,r.useEffect)((function(){setTimeout((function(){if(void 0!=re.estimate){var e,t,n=void 0===(null===re||void 0===re||null===(e=re.estimate)||void 0===e?void 0:e.tax)||0!==parseInt(re.estimate.tax);me(n);var i=void 0!==(null===re||void 0===re||null===(t=re.estimate)||void 0===t?void 0:t.taxPart)&&(parseInt(re.estimate.taxPart),!1);pe(i),console.log(n,i,"_lab, _part")}else console.log("did not reach","_lab, _part")}),3e3)}),[null===e||void 0===e?void 0:e.isPopUp,e,te.getCustomerStatus]);var ve=e.setGrandTotal,ge=e.setPartTotal,je=e.setLabourTotal,Se=e.showCreate,we=e.showEdit,ye=e.grandTotal,Ae=e.labourTotal,Ce=e.partTotal,ke=Ie().isTechAdmin,De=(0,j.UO)(),Ne=Ie(),Ee=(0,r.useMemo)((function(){return Ne.isTechAdmin&&Ne.user?Ne.user.partner.id:De.id?+De.id:void 0}),[Ne.isTechAdmin,Ne.user,De.id]);(0,r.useEffect)((function(){Ee&&(ne((0,Pe.gI)(+Ee)),ne((0,Pe.mx)(Ee)))}),[ne,Ee]),(0,r.useEffect)((function(){"completed"===ee.getOwnersFilterDataStatus&&B(ee.ownersFilterData)}),[ee.ownersFilterData,ee.getOwnersFilterDataStatus]),(0,r.useEffect)((function(){Se&&we||le()}),[le,Se,we]),(0,r.useEffect)((function(){for(var e=0,t=0;t<re.parts.length;t++)re.parts[t].amount&&(e+=parseInt(re.parts[t].amount));ge(e)}),[ge,re.parts]),(0,r.useEffect)((function(){for(var e=0,t=0;t<re.labours.length;t++)re.labours[t].cost&&(e+=parseInt(re.labours[t].cost));je(e)}),[je,re.labours]),(0,r.useEffect)((function(){if(fe){var e=.075*Ce;se("taxPart",Ze(e)),h(e)}else h(0)}),[Ce,se,fe]),(0,r.useEffect)((function(){if(ue){var e=.075*Ae;se("tax",Ze(e)),c(e)}else c(0)}),[Ae,se,ue]),(0,r.useEffect)((function(){var e=0;ue||(e=m+Ce+Ae,console.log(m+Ce+Ae)),fe||(e=l+Ce+Ae,console.log(l+Ce+Ae)),fe&&ue?(e=l+m+Ce+Ae,console.log(l+m+Ce+Ae)):fe||ue||(e=Ce+Ae,console.log(Ce+Ae)),ve(e),console.log(e)}),[l,Ce,m,Ae,ve,ue,fe]),(0,r.useEffect)((function(){"completed"===_.getVehicleVINStatus&&_.vehicleVINDetails.forEach((function(e){var t=(0,x.Z)({},e);"engineCylinders"===e.label&&(t.value="".concat(e.value," cylinders")),se(t.label,t.value),oe(t.label,!1)}))}),[_.getVehicleVINStatus,_.vehicleVINDetails,se,oe]),(0,r.useEffect)((function(){"failed"===_.getVehicleVINStatus&&_.getVehicleVINError&&P({message:_.getVehicleVINError})}),[_.getVehicleVINError,_.getVehicleVINStatus]);var Te=(0,r.useCallback)((function(e){var t=e.target.value;b(setTimeout((function(){ne((0,Ot.xv)(t))}),2e3)),se("vin",t)}),[ne,se]),qe=(0,r.useCallback)((function(e,t){var n="parts.".concat(t,".quantity.quantity"),i="parts.".concat(t,".quantity.unit"),r="parts.".concat(t,".price"),a="parts.".concat(t,".amount"),s=n===e.target.name,o=r===e.target.name,l=i===e.target.name;if(s){var c=+re.parts[t].price*+e.target.value;se(n,e.target.value),se(a,"".concat(c))}if(o){var d=+re.parts[t].quantity.quantity*+e.target.value;se(r,e.target.value),se(a,"".concat(d))}l&&se(i,e.target.value)}),[se,re.parts]),Le=(0,r.useMemo)((function(){return"loading"===$.sendDraftEstimateStatus||"loading"===$.createEstimateStatus}),[$.createEstimateStatus,$.sendDraftEstimateStatus]),Ve=(0,r.useMemo)((function(){return"loading"===$.updateEstimateStatus||"loading"===$.saveEstimateStatus}),[$.saveEstimateStatus,$.updateEstimateStatus]);(0,r.useEffect)((function(){"completed"!=$.saveEstimateStatus&&"completed"!=$.updateEstimateStatus&&"completed"!=$.createEstimateStatus&&"completed"!=$.sendDraftEstimateStatus||be()}),[$.saveEstimateStatus,$.updateEstimateStatus,$.createEstimateStatus,$.sendDraftEstimateStatus]),(0,r.useEffect)((function(){return function(){clearTimeout(g),ne((0,Ye.i3)())}}),[g,ne]);return(0,r.useEffect)((function(){if("completed"===te.getCustomerStatus){var e,t=te.customer;console.log(t,"_customer"),se(Ri.firstName.name,t.firstName),se(Ri.lastName.name,t.lastName),se(Ri.phone.name,t.phone),se(Ri.email.name,t.email),se(Ri.state.name,(null===(e=t.contacts[0])||void 0===e?void 0:e.state)||"");var n=t.vehicles.map((function(e){return(null===e||void 0===e?void 0:e.vin)||""}));J(n)}}),[N,te.getCustomerStatus]),(0,r.useEffect)((function(){ue||(se(Ri.tax.name,0),console.log("making labor 0","mainLog1")),fe||(se(Ri.taxPart.name,0),console.log("making part 0","mainLog1"))}),[ue,fe]),(0,r.useEffect)((function(){var e=o.PO.map((function(e){return{label:e.name,value:e.name}}));X(e)}),[]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(dn.l0,{autoComplete:"off",autoCorrect:"off",children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[ke&&((null===e||void 0===e?void 0:e.isPopUp)||!1)&&(0,V.jsxs)(Q.ZP,{style:{width:"100%"},children:[(0,V.jsx)("div",{style:{marginTop:10,paddingTop:15,paddingBottom:15,width:"100%"}}),(0,V.jsx)(Q.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Jt.Z,{filterOptions:Oi,inputValue:q,value:N,loading:"loading"===ee.getDriversFilterDataStatus,getOptionLabel:function(e){return e.fullName},isOptionEqualToValue:function(e,t){return e.fullName===t.fullName},onChange:function(e,t){var n;E(t),(n=null===t||void 0===t?void 0:t.id)&&ne((0,G.ki)(n))},onInputChange:function(e,t,n){L(t),"clear"===n&&be()},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{label:"Search customer by First name, last name, car plate number.",InputProps:(0,x.Z)((0,x.Z)({},e.InputProps),{},{endAdornment:(0,V.jsxs)(r.Fragment,{children:["loading"===ee.getDriversFilterDataStatus?(0,V.jsx)(Ln.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},options:U})})}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Customer Information"}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(fn.Z,{onChange:ae,label:Ri.email.label,value:re.email,name:Ri.email.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"completed"===te.getCustomerStatus?(0,V.jsx)(fn.Z,{onChange:ae,label:Ri.state.label,value:re.state,name:Ri.state.name}):(0,V.jsx)(On.Z,{onChange:function(e){console.log(e)},value:re.state,name:Ri.state.name,label:Ri.state.label,data:K,fullWidth:!0})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{onChange:ae,label:Ri.firstName.label,value:re.firstName,name:Ri.firstName.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{onChange:ae,label:Ri.lastName.label,value:re.lastName,name:Ri.lastName.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(fn.Z,{type:"tel",onChange:function(e){console.log(e,"logger");var t=function(e){if(e.length>5){var t=e,n=!1,i="phone number invalid, but fixed";return"+"==e[0]&&(t=e.substring(1),n=!0),"2"==t[0]&&"3"==t[1]&&"4"==t[2]&&(t="0"+t.substring(3),n=!0),"0"==t[0]&&"7"!=t[1]&&"8"!=t[1]&&"9"!=t[1]&&(i="Not a Nigerian Number",n=!0),t.length>11&&(i="Phone number invalid",n=!0),{error:n,message:i,phone:t=(t=t.trim()).replaceAll(" ","")}}return{error:!1,message:"",phone:e}}(e.target.value);t.error&&P({message:(null===t||void 0===t?void 0:t.message)||""}),ae({target:{name:e.target.name,value:t.phone}})},label:Ri.phone.label,value:re.phone,name:Ri.phone.name,placeholder:"Phone e.g 080..."})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:!0,spacing:.2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(On.Z,{data:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}],onChange:ae,value:re.addressType,name:Ri.addressType.name,label:Ri.addressType.label,fullWidth:!0})}),(0,V.jsx)(Q.ZP,{item:!0,xs:9,children:(0,V.jsx)(fn.Z,{onChange:ae,value:re.address,name:Ri.address.name,label:Ri.address.label})})]}),(0,V.jsx)(Bi,{vinOptions:W,values:re,handleChange:ae,handleChangeVIN:Te}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:Ri.parts.label}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(dn.F2,{name:Ri.parts.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[re.parts.length>0&&re.parts.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:13,columns:14,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["name"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:ae})}),"warranty"===e&&(0,V.jsx)(Vi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:ae,index:n,values:re})),"quantity"===e&&(0,V.jsx)(Mi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:function(e){return qe(e,n)},index:n,values:re})),"price"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:function(e){return qe(e,n)},type:"number",inputProps:{min:"0"}})}),"amount"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:ae,type:"number",disabled:!0})})]},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",warranty:{warranty:"",interval:""},quantity:{quantity:"0",unit:""},price:"0",amount:"0"})},children:(0,V.jsx)(Sn.Z,{})})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:8}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[fe&&(0,V.jsx)(Ht.Z,{name:Ri.taxPart.name,value:re.taxPart,label:"".concat(Ri.taxPart.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),"Sub Total: \u20a6",Ze(Math.round(Ce))]})]})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:Ri.labours.label}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(dn.F2,{name:Ri.labours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[re.labours.length>0&&re.labours.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["title"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:8,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:ae})}),"cost"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:ae,type:"number",inputProps:{min:"0"}})})]},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({title:"",cost:"0"})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:6}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[ue&&(0,V.jsx)(Ht.Z,{name:Ri.tax.name,value:re.tax,label:"".concat(Ri.tax.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),(0,V.jsxs)(v.Z,{children:[" Sub Total: \u20a6",Ze(Math.round(Ae))]})]}),(0,V.jsx)(Q.ZP,{item:!0,style:{},children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{children:"Apply Tax"}),(0,V.jsx)(qi.Z,{checked:ue,onClick:function(){return me(!ue)}})]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Job Information"}),(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)(v.Z,{variant:"h6",children:["Grand Total: \u20a6",Ze(Math.round(ye))]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(fn.Z,{onChange:ae,value:re.depositAmount,name:Ri.depositAmount.name,label:Ri.depositAmount.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,container:!0,spacing:.5,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:8,children:(0,V.jsx)(fn.Z,{onChange:ae,value:re.jobDuration.count,name:"jobDuration.count",label:Ri.jobDuration.label,type:"number",inputProps:{min:"0"}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(On.Z,{data:[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],onChange:ae,value:re.jobDuration.interval,name:"jobDuration.interval",label:"Interval",fullWidth:!0})})]}),parseInt(re.depositAmount)>0&&parseInt(re.depositAmount)<=ye&&(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(z.Z,{sx:{mb:3},flexItem:!0,orientation:"horizontal"}),(0,V.jsx)(pn.Z,{type:"submit",loading:Ve,disabled:Ve||re.status===o.GM.sent||re.status===o.GM.invoiced,variant:"contained",color:"secondary",endIcon:(0,V.jsx)(vn.Z,{}),onClick:function(){e.setSave(!0)},children:"Save"}),(0,V.jsx)(pn.Z,{sx:{ml:2},type:"submit",loading:Le,disabled:re.status===o.GM.invoiced,onClick:function(){e.setSave(!1)},variant:"contained",color:"success",endIcon:re.status===o.GM.sent?(0,V.jsx)(Li.Z,{}):(0,V.jsx)(bi.Z,{}),children:re.status===o.GM.sent?"Save & Send":"Send"})]})]})}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==C,message:null===C||void 0===C?void 0:C.message,onClose:function(){return P(void 0)}})]})}var zi=(0,r.memo)(Wi),Gi=n(15203),Ji=n(95174);function Hi(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(Ti.initialValues),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(0),u=(0,i.Z)(d,2),m=u[0],h=u[1],f=(0,r.useState)(0),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(0),b=(0,i.Z)(g,2),S=b[0],A=b[1],C=(0,r.useState)(),P=(0,i.Z)(C,2),k=P[0],D=P[1],N=(0,r.useState)(),E=(0,i.Z)(N,2),I=E[0],T=E[1],q=(0,r.useState)([]),L=(0,i.Z)(q,2),V=L[0],M=L[1],F=(0,r.useState)(!1),U=(0,i.Z)(F,2),B=U[0],R=U[1],O=(0,r.useState)(!1),W=(0,i.Z)(O,2),z=W[0],J=W[1],H=(0,r.useState)(!1),Y=(0,i.Z)(H,2),Q=Y[0],K=Y[1],X=(0,r.useState)(!1),_=(0,i.Z)(X,2),$=_[0],ee=_[1],te=(0,r.useState)(),ne=(0,i.Z)(te,2),ie=ne[0],re=ne[1],ae=(0,r.useState)(),se=(0,i.Z)(ae,2),oe=se[0],le=se[1],ce=(0,r.useState)(!1),de=(0,i.Z)(ce,2),ue=de[0],me=de[1],he=(0,w.Z)((function(e){return e.estimateReducer})),xe=(0,y.Z)(),fe=(0,j.UO)(),pe=(0,r.useCallback)((function(){xe((0,Ji.JA)()),xe((0,Ji.HJ)()),xe((0,Ji.Ys)()),xe((0,Ji.B$)()),me(!1)}),[xe]);(0,r.useEffect)((function(){var e=Ne().decode(sessionStorage.getItem(ve.Z.auth.admin));fe.id&&le(+fe.id),e.partnerId&&le(e.partnerId)}),[fe]),(0,r.useEffect)((function(){"idle"===he.getEstimatesStatus&&xe((0,Gi.UD)())}),[xe,he.getEstimatesStatus]),(0,r.useEffect)((function(){"failed"===he.getEstimatesStatus&&he.getEstimatesError&&T({message:he.getEstimatesError})}),[he.getEstimatesError,he.getEstimatesStatus]),(0,r.useEffect)((function(){"completed"===he.getEstimatesStatus&&M(he.estimates)}),[he.estimates,he.getEstimatesStatus]),(0,r.useEffect)((function(){"failed"===he.createEstimateStatus&&(he.createEstimateError&&T({message:he.createEstimateError}),pe())}),[he.createEstimateError,he.createEstimateStatus,pe]),(0,r.useEffect)((function(){"completed"===he.createEstimateStatus&&(D({message:he.createEstimateSuccess}),pe())}),[he.createEstimateStatus,he.createEstimateSuccess,pe]),(0,r.useEffect)((function(){"failed"===he.saveEstimateStatus&&(he.saveEstimateError&&T({message:he.saveEstimateError}),pe())}),[he.saveEstimateError,he.saveEstimateStatus,pe]),(0,r.useEffect)((function(){"completed"===he.saveEstimateStatus&&(D({message:he.saveEstimateSuccess}),pe(),xe((0,Gi.UD)()),be())}),[xe,he.saveEstimateStatus,he.saveEstimateSuccess,pe]),(0,r.useEffect)((function(){"failed"===he.updateEstimateStatus&&(he.updateEstimateError&&T({message:he.updateEstimateError}),pe())}),[he.updateEstimateError,he.updateEstimateStatus,pe]),(0,r.useEffect)((function(){"completed"===he.updateEstimateStatus&&(D({message:he.updateEstimateSuccess}),pe(),xe((0,Gi.UD)()))}),[xe,he.updateEstimateStatus,he.updateEstimateSuccess,pe]),(0,r.useEffect)((function(){"failed"===he.deleteEstimateStatus&&(T({message:he.deleteEstimateError}),pe())}),[he.deleteEstimateError,he.deleteEstimateStatus,pe]),(0,r.useEffect)((function(){"completed"===he.deleteEstimateStatus&&(D({message:he.deleteEstimateSuccess}),pe(),xe((0,Gi.UD)()))}),[xe,he.deleteEstimateStatus,he.deleteEstimateSuccess,pe]),(0,r.useEffect)((function(){"failed"===he.sendDraftEstimateStatus&&(he.sendDraftEstimateError&&T({message:he.sendDraftEstimateError}),pe())}),[he.sendDraftEstimateError,he.sendDraftEstimateStatus,pe]),(0,r.useEffect)((function(){"completed"===he.sendDraftEstimateStatus&&(D({message:he.sendDraftEstimateSuccess}),pe(),xe((0,Gi.UD)()))}),[xe,he.sendDraftEstimateStatus,he.sendDraftEstimateSuccess,pe]);var Ze=(0,r.useCallback)((function(e){xe((0,Gi.UD)());var t=V.find((function(t){return t.id===e}));if(t){var n=t.rideShareDriver,i=t.customer,r=t.vehicle;xe((0,G.ki)(null===i||void 0===i?void 0:i.id));var a=t.parts,s=t.labours;c((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:n?n.firstName:i.firstName,lastName:n?n.lastName:i.lastName,email:n?n.email:i.email,phone:n?n.phone:i.phone,make:r&&r.make?r.make:"",model:r&&r.model?r.model:"",plateNumber:r&&r.plateNumber?r.plateNumber:"",vin:r&&r.vin?r.vin:"",modelYear:r&&r.modelYear?r.modelYear:"",address:t.address?t.address:"",addressType:t.addressType?t.addressType:"",jobDuration:{count:"".concat(t.jobDurationValue),interval:t.jobDurationUnit},depositAmount:"".concat(t.depositAmount),tax:"".concat(t.tax),mileage:{count:r&&r.mileageValue?r.mileageValue:"",unit:r&&r.mileageUnit?r.mileageUnit:""},parts:a,labours:s,status:t.status,estimate:t})})),A(t.grandTotal),Z(t.partsTotal),h(t.laboursTotal),re(e),J(!0)}else T({message:"An Error Occurred. Please try again or contact support"})}),[xe,V]),ge=(0,r.useCallback)((function(e){re(e),ee(!0)}),[]),je=(0,r.useCallback)((function(){ie&&xe((0,Gi.pL)(ie)),ee(!1)}),[xe,ie]);return{setLabourTotal:h,setPartTotal:Z,setGrandTotal:A,success:k,setSuccess:D,error:I,setError:T,estimates:V,setEstimates:M,showCreate:B,setShowCreate:R,showEdit:z,setShowEdit:J,driver:n,setDriver:a,initialValues:l,setInitialValues:c,estimateId:ie,partTotal:v,labourTotal:m,grandTotal:S,showView:Q,setShowView:K,save:ue,setSave:me,onEdit:Ze,handleCreateEstimate:function(e,t){var n=e.depositAmount;if("null"===n||!n)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must not be empty.");if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");if(Math.round(parseInt(n))>Math.round(S))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit  must be less than or equal to Grand Total ".concat(Math.round(S)));var i={id:oe,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};console.log(Object.keys(i),"realsentdata"),xe((0,Gi.D9)(i))},handleSaveEstimate:function(e,t){var n=e.depositAmount;if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");var i={id:oe,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};console.log(Object.keys(i),"realsentdata"),xe((0,Gi.hR)(i))},handleUpdateEstimate:function(e,t){var n=e.depositAmount;if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");var i={id:ie,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};xe((0,Gi.Nl)(i))},handleSendDraftEstimate:function(e,t){var n=e.depositAmount;if("null"===n||!n)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must not be empty.");if(-1===Math.sign(+n))return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit amount must be a positive number greater than 0");var i=Math.round(parseInt(n)),r=Math.round(S);if(i>r)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit  must be less than or equal to Grand Total ".concat(Math.round(S)));if(i>r)return null===t||void 0===t?void 0:t.setFieldError("depositAmount","Deposit  must be less than or equal to Grand Total ".concat(Math.round(S)));var a={id:ie,parts:e.parts,labours:e.labours,tax:e.tax,taxPart:e.taxPart,addressType:e.addressType,address:e.address,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,phone:e.phone,depositAmount:e.depositAmount,jobDurationValue:e.jobDuration.count,jobDurationUnit:e.jobDuration.interval,vin:e.vin,make:e.make,model:e.model,plateNumber:e.plateNumber,modelYear:e.modelYear,mileageValue:e.mileage.count,mileageUnit:e.mileage.unit,partsTotal:Math.round(v),laboursTotal:Math.round(m),grandTotal:Math.round(S)};xe((0,Gi.uQ)(a))},onView:function(e){re(e),K(!0)},showDelete:$,setShowDelete:ee,onDelete:ge,handleDelete:je}}var Yi=(0,qn.D)({matchFrom:"any",stringify:function(e){return"".concat(e.query)}});var Qi=[{name:"Vehicles",Element:at},{name:"Appointments",Element:et},{name:"Transactions",Element:it},{name:"Quotes",Element:tt}],Ki=[{name:"Profile",Element:Nt},{name:"Vehicles",Element:ut},{name:"Transactions",Element:ct},{name:"Estimates",Element:st}],Xi=[{tag:o.Qw,name:"Plans",Element:si},{tag:o.Qw,name:"Payment Plans",Element:Kn},{tag:o.Qw,name:"Settings",Element:xi},{tag:o.bX,name:"Auto Hyve",Element:function(){var e=r.useState(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=r.useState(""),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)([]),m=(0,i.Z)(u,2),h=m[0],p=m[1],v=(0,r.useState)(),Z=(0,i.Z)(v,2),g=Z[0],b=Z[1],S=(0,r.useState)($i),A=(0,i.Z)(S,2),C=A[0],P=A[1];console.log(h);var k=(0,j.UO)(),D=Ie(),N=(0,r.useContext)(er).partner,E=(0,w.Z)((function(e){return e.partnerReducer})),I=(0,w.Z)((function(e){return e.customerReducer})),T=(0,y.Z)(),q=(0,r.useMemo)((function(){return D.isTechAdmin&&D.user?D.user.partner.id:k.id?+k.id:void 0}),[D.isTechAdmin,D.user,k.id]);return(0,r.useEffect)((function(){if(N){var e=Gt().pick(N,Object.keys(o.Dw)),t=Object.values(e).some((function(e){return null===e})),n=(0,Wt.Z)(C);if(t){var i=n.find((function(e){return"estimate"===e.tag}));if(i){var r=n.indexOf(i);n[r].disableTab=!0,n[r].name="Create Estimate (Disabled)",P(n)}}}}),[N,C]),(0,r.useEffect)((function(){q&&(T((0,Pe.gI)(+q)),T((0,Pe.mx)(q)))}),[T,q]),(0,r.useEffect)((function(){"completed"===E.getOwnersFilterDataStatus&&p(E.ownersFilterData)}),[E.ownersFilterData,E.getOwnersFilterDataStatus]),(0,r.useEffect)((function(){"completed"===I.getCustomerStatus&&I.customer&&b(I.customer)}),[I.customer,I.getCustomerStatus]),(0,r.useEffect)((function(){return function(){b(void 0),T((0,Je.Iu)()),T((0,J.n)())}}),[T]),(0,V.jsxs)(Xe.Provider,{value:{customer:g,setCustomer:b},children:[(0,V.jsxs)(W.Z,{direction:"column",spacing:5,children:[(0,V.jsx)(Q.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Jt.Z,{filterOptions:Yi,inputValue:c,value:n,loading:"loading"===E.getDriversFilterDataStatus,getOptionLabel:function(e){return e.fullName},isOptionEqualToValue:function(e,t){return e.fullName===t.fullName},onChange:function(e,t){var n;a(t),(n=null===t||void 0===t?void 0:t.id)&&T((0,G.ki)(n))},onInputChange:function(e,t,n){d(t),"clear"===n&&(b(void 0),be())},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{label:"Search customer by First name, last name, car plate number.",InputProps:(0,x.Z)((0,x.Z)({},e.InputProps),{},{endAdornment:(0,V.jsxs)(r.Fragment,{children:["loading"===E.getDriversFilterDataStatus?(0,V.jsx)(Ln.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},options:h})})}),(0,V.jsxs)(f.Z,{hidden:void 0===g,children:[(0,V.jsx)(z.Z,{orientation:"horizontal"}),(0,V.jsx)(K.Z,{sx:{p:3},children:(0,V.jsx)(Vn,{slideDirection:"left",tabMenus:C})})]})]}),(0,V.jsx)(ye.Z,{show:"loading"===I.getCustomerStatus})]})}},{tag:o.bX,name:"Ride Share Hyve",Element:Un},{tag:o.bX,name:"Garage Profile & Settings",Element:Tn},{tag:o.bX,name:"Technician Management",Element:Ei}],_i=[{tag:"driver",name:"Customer Profile",Element:Dt},{tag:"driver",name:"Vehicles",Element:function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(!1),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(null),p=(0,i.Z)(x,2),v=p[0],g=p[1],j=(0,r.useState)(null),b=(0,i.Z)(j,2),S=b[0],A=b[1],C=(0,r.useState)([]),P=(0,i.Z)(C,2),k=P[0],N=P[1],E=(0,w.Z)((function(e){return e.rideShareReducer})),I=(0,w.Z)((function(e){return e.checkListReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===I.getCheckListsStatus&&T((0,an.un)())}),[T,I.getCheckListsStatus]),(0,r.useEffect)((function(){E.driver&&N(E.driver.vehicles)}),[E.driver]),(0,r.useEffect)((function(){return function(){h(!1),g(null),T((0,rn.nW)()),T((0,rn.Gl)())}}),[T,g,h]),(0,V.jsxs)(en.Provider,{value:{viewSub:m,setViewSub:h,driverSub:v,setDriverSub:g,customerSub:S,setCustomerSub:A,vehicle:n,setVehicle:a},children:[(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(f.Z,{sx:{width:500},children:(0,V.jsx)(Et.Z,{dense:!0,children:k.length?k.map((function(e,t){return(0,V.jsxs)(It.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){a(e),c(!0)}(e)},edge:"end","aria-label":"delete",children:(0,V.jsx)(Lt.U9w,{})}),children:[(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(gt.Z,{children:(0,V.jsx)(Lt.OI4,{})})}),(0,V.jsx)(qt.Z,{primary:e.make,secondary:"".concat(e.modelYear," ").concat(e.model," (").concat(e.plateNumber,")")})]},t)})):(0,V.jsx)(It.ZP,{children:(0,V.jsx)(qt.Z,{primary:"No data",secondary:"Driver have not added a vehicle yet."})})})})}),(0,V.jsx)(Ct,{fullWidth:!0,fullScreen:!0,show:l,Content:n?(0,V.jsx)(nn,{}):(0,V.jsx)(D.Z,{}),onClose:function(){return c(!1)}})]})}}],$i=[{tag:"profile",name:"Customer Profile",Element:Dt},{tag:"vehicles",name:"Vehicles",Element:function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(!1),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(null),p=(0,i.Z)(x,2),v=p[0],g=p[1],j=(0,r.useState)(null),b=(0,i.Z)(j,2),S=b[0],A=b[1],C=(0,r.useState)([]),P=(0,i.Z)(C,2),k=P[0],N=P[1],E=(0,w.Z)((function(e){return e.customerReducer})),I=(0,w.Z)((function(e){return e.checkListReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===I.getCheckListsStatus&&T((0,an.un)())}),[T,I.getCheckListsStatus]),(0,r.useEffect)((function(){E.customer&&N(E.customer.vehicles)}),[E.customer]),(0,r.useEffect)((function(){return function(){h(!1),g(null),T((0,rn.nW)()),T((0,rn.Gl)())}}),[T,g,h]),(0,V.jsxs)(en.Provider,{value:{viewSub:m,setViewSub:h,driverSub:v,setDriverSub:g,customerSub:S,setCustomerSub:A,vehicle:n,setVehicle:a},children:[(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(f.Z,{sx:{width:500},children:(0,V.jsx)(Et.Z,{dense:!0,children:k.length?k.map((function(e,t){return(0,V.jsxs)(It.ZP,{secondaryAction:(0,V.jsx)(Z.Z,{onClick:function(){return function(e){a(e),c(!0)}(e)},edge:"end","aria-label":"delete",children:(0,V.jsx)(Lt.U9w,{})}),children:[(0,V.jsx)(Tt.Z,{children:(0,V.jsx)(gt.Z,{children:(0,V.jsx)(Lt.OI4,{})})}),(0,V.jsx)(qt.Z,{primary:e.make,secondary:"".concat(e.modelYear," ").concat(e.model," (").concat(e.plateNumber,")")})]},t)})):(0,V.jsx)(It.ZP,{children:(0,V.jsx)(qt.Z,{primary:"No data",secondary:"Customer have not added a vehicle yet."})})})})}),(0,V.jsx)(Ct,{fullWidth:!0,fullScreen:!0,show:l,Content:n?(0,V.jsx)(on,{}):(0,V.jsx)(D.Z,{}),onClose:function(){return c(!1)}})]})}},{tag:"estimate",name:"Create Estimate",Element:function(){var e,t,n=(0,w.Z)((function(e){return e.estimateReducer})),i=(0,y.Z)(),a=(0,r.useContext)(Xe).customer,s=Hi();return(0,r.useEffect)((function(){a&&s.setInitialValues((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:a.firstName?a.firstName:"",lastName:a.lastName?a.lastName:"",phone:a.phone?a.phone:"",address:"",addressType:""})}))}),[a]),(0,r.useEffect)((function(){i((0,Ji.JA)()),i((0,Ji.HJ)()),s.setSave(!1)}),[i,s]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(f.Z,{sx:{minWidth:"100%"},children:(0,V.jsx)(dn.J9,{onSubmit:function(e,t){s.save?s.handleSaveEstimate(e,t):s.handleCreateEstimate(e,t)},initialValues:s.initialValues,validationSchema:Ti.schema,enableReinitialize:!0,children:(0,V.jsx)(zi,{isSubmitting:"loading"===n.createEstimateStatus||"loading"===n.saveEstimateStatus,setGrandTotal:s.setGrandTotal,setPartTotal:s.setPartTotal,setLabourTotal:s.setLabourTotal,grandTotal:s.grandTotal,labourTotal:s.labourTotal,partTotal:s.partTotal,setSave:s.setSave})})})}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==s.success,message:null===(e=s.success)||void 0===e?void 0:e.message,onClose:function(){return s.setSuccess(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==s.error,message:null===(t=s.error)||void 0===t?void 0:t.message,onClose:function(){return s.setError(void 0)}})]})}}],er=(0,r.createContext)(null);var tr=function(){var e,t=(0,r.useState)(""),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(""),c=(0,i.Z)(l,2),d=c[0],u=c[1],h=(0,r.useState)(null),x=(0,i.Z)(h,2),f=x[0],p=x[1],v=(0,r.useState)([]),Z=(0,i.Z)(v,2),g=Z[0],b=Z[1],S=(0,r.useState)(!1),A=(0,i.Z)(S,2),C=A[0],P=A[1],k=(0,r.useState)(),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,r.useState)(),F=(0,i.Z)(M,2),U=F[0],B=F[1],R=(0,r.useState)(),O=(0,i.Z)(R,2),G=O[0],J=O[1],H=(0,j.UO)(),Y=(0,j.s0)(),X=Ie(),_=(0,r.useMemo)((function(){return X.isTechAdmin&&X.user?X.user.partnerId:H.id?+H.id:void 0}),[X.isTechAdmin,X.user,H.id]),$=(0,w.Z)((function(e){return e.partnerReducer})),ee=(0,y.Z)();return(0,r.useEffect)((function(){"idle"===$.getPartnerStatus&&_&&ee((0,Pe.mx)(_))}),[ee,_,$.getPartnerStatus]),(0,r.useEffect)((function(){if("completed"===$.getPartnerStatus&&$.partner){var e=$.partner;e.categories.forEach((function(e){e.name===o.Qw&&b(Xi.filter((function(e){return e.tag===o.Qw}))),e.name===o.bX&&b(Xi.filter((function(e){return e.tag===o.bX})))})),p(e)}}),[$.getPartnerStatus,$.partner]),(0,r.useEffect)((function(){"idle"===$.getPlansStatus&&_&&ee((0,Pe.E4)(_))}),[ee,_,$.getPlansStatus]),(0,r.useEffect)((function(){"idle"===$.getPaymentPlansStatus&&_&&ee((0,Pe.o7)(_))}),[ee,_,$.getPaymentPlansStatus]),(0,r.useEffect)((function(){"completed"===$.deletePartnerStatus&&(L({message:$.deletePartnerSuccess}),J(setTimeout((function(){return Y(-1)}),1e3)))}),[Y,$.deletePartnerStatus,$.deletePartnerSuccess]),(0,r.useEffect)((function(){"failed"===$.deletePartnerStatus&&$.deletePartnerError&&B({message:$.deletePartnerError})}),[$.deletePartnerStatus,$.deletePartnerError]),(0,r.useEffect)((function(){return function(){ee((0,Je.F$)()),ee((0,Je.Pn)()),ee((0,Je.L3)()),ee((0,Je.yr)()),ee((0,Ji.JA)()),ee((0,Je.a9)()),clearTimeout(G)}}),[G,ee]),(0,r.useEffect)((function(){"completed"===$.togglePartnerStatus&&(L({message:$.togglePartnerSuccess}),J(setTimeout((function(){return be()}),1e3)))}),[Y,$.togglePartnerStatus,$.togglePartnerSuccess]),(0,r.useEffect)((function(){"failed"===$.togglePartnerStatus&&$.togglePartnerError&&B({message:$.togglePartnerError})}),[$.togglePartnerStatus,$.togglePartnerError]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:9,children:(0,V.jsx)("h1",{children:null===f||void 0===f?void 0:f.name})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(m,{I:"manage",a:"all",children:(0,V.jsx)(pn.Z,{onClick:function(){return function(e){E(e),P(!0)}(_)},endIcon:(0,V.jsx)(Bn.Z,{}),variant:"outlined",color:"error",size:"small",children:"Delete"})})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(m,{I:"manage",a:"all",children:(0,V.jsx)(pn.Z,{onClick:function(){return function(e){e&&ee((0,Pe.aw)(e))}(_)},variant:"outlined",color:"info",size:"small",children:(1==(null===f||void 0===f||null===(e=f.users[0])||void 0===e?void 0:e.active)?"Disable Partner":"Enable Partner")||""})})})]}),(0,V.jsx)(er.Provider,{value:{programme:a,setProgramme:s,modeOfService:d,setModeOfService:u,partner:f,setPartner:p,showDelete:C,setShowDelete:P},children:(0,V.jsx)(W.Z,{direction:"column",spacing:5,divider:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(K.Z,{sx:{p:3},children:(0,V.jsx)(Qe,{tabMenus:g})})})}),(0,V.jsx)(Ct,{fullWidth:!0,show:C,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return P(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:function(){N&&ee((0,Pe.Dr)(N)),P(!1)},children:"Agree"})]}),onClose:function(){return P(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==q,message:null===q||void 0===q?void 0:q.message,onClose:function(){return L(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==U,message:null===U||void 0===U?void 0:U.message,onClose:function(){return B(void 0)}})]})};var nr=function(){var e=Ie().isSuperAdmin;return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(m,{I:"manage",a:"all",children:e&&(0,V.jsx)(ke,{})}),(0,V.jsx)(m,{I:"manage",an:"technician",children:!e&&(0,V.jsx)(tr,{})})]})};var ir=function(){return(0,V.jsx)(r.Fragment,{children:(0,V.jsx)("h1",{children:"Transactions"})})},rr="appointmentPage_title__EIyvw",ar="appointmentPage_subtitle__uhG+Q";var sr=function(e){return(0,V.jsx)("div",{children:(0,V.jsxs)(jt.Z,{fullScreen:e.fullScreen,maxWidth:e.size,fullWidth:e.fullWidth,open:e.open,onClose:e.onClose,TransitionComponent:yt,children:[(0,V.jsx)(bt.Z,{sx:{position:"relative"},children:(0,V.jsx)(p.Z,{children:(0,V.jsx)(Z.Z,{edge:"start",color:"inherit",onClick:e.onClose,"aria-label":"close",children:(0,V.jsx)(At.Z,{})})})}),(0,V.jsx)(wt.Z,{children:e.Content})]})})},or=n(58795),lr=n(46472);function cr(){var e=(0,w.Z)((function(e){return e.timeSlotReducer})),t=(0,y.Z)();(0,r.useEffect)((function(){"idle"===e.getTimeSlotsStatus&&t((0,or.Ke)())}),[e.getTimeSlotsStatus,t]),(0,r.useEffect)((function(){var n=P()();if("completed"===e.getTimeSlotsStatus){var i=n.format("YYYY-MM-DD"),r=n.toISOString();t((0,or.Fi)({shortDate:i,fullDate:r}));var a=(0,Wt.Z)(e.slots);return a=a.map((function(e){return{id:e.id,available:e.available,label:e.label,time:e.time}})),t((0,or.eH)({date:i,slots:a,now:!0})),function(){t((0,lr.A)())}}}),[e.getTimeSlotsStatus,t])}var dr,ur,mr,hr=n(57064),xr=n(1588),fr={vehicleFault:{name:"vehicleFault",label:"Describe Vehicle Fault",error:{invalid:"Vehicle fault is invalid",required:"Please enter your vehicle fault"}},location:{name:"location",label:"Enter your location",error:{invalid:"Service location is invalid",required:"Please enter your service location."}},vehicle:{name:"vehicle",label:"Select Vehicle",error:{invalid:"Vehicle is invalid",required:"Vehicle is required"}}},pr={fields:fr,initialValues:(dr={},(0,un.Z)(dr,fr.vehicleFault.name,""),(0,un.Z)(dr,fr.location.name,""),(0,un.Z)(dr,fr.vehicle.name,""),dr),schema:[mn.Ry().shape((ur={},(0,un.Z)(ur,fr.vehicleFault.name,mn.Z_().required(fr.vehicleFault.error.required).label(fr.vehicleFault.label)),(0,un.Z)(ur,fr.location.name,mn.Z_().required(fr.location.error.required).label(fr.location.label)),ur)),mn.Ry().shape((mr={},(0,un.Z)(mr,fr.vehicleFault.name,mn.Z_().required(fr.vehicleFault.error.required).label(fr.vehicleFault.label)),(0,un.Z)(mr,fr.location.name,mn.Z_().required(fr.location.error.required).label(fr.location.label)),(0,un.Z)(mr,fr.vehicle.name,mn.Z_().required(fr.vehicle.error.required).label(fr.vehicle.label)),mr))]},vr=(0,qn.D)();var Zr=function(){var e=(0,dn.u6)(),t=e.values,n=e.setFieldValue,i=e.handleBlur,r=e.errors,a=e.touched,s=(0,w.Z)((function(e){return e.customerReducer}));return(0,V.jsx)(Jt.Z,{onChange:function(e,t,i){return"clear"===i?n(pr.fields.location.name,""):"string"===typeof t?n(pr.fields.location.name,t):t.inputValue?n(pr.fields.location.name,t.inputValue):void 0},onBlur:i,value:t.location,fullWidth:!0,className:"locationTextField",freeSolo:!0,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},filterOptions:function(e,t){var n=vr(e,t),i=t.inputValue,r=e.some((function(e){return i===e.title}));return""===i||r||n.push({inputValue:i,title:'Add "'.concat(i,'"')}),n},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{name:pr.fields.location.name,label:pr.fields.location.label,fullWidth:!0,error:void 0!==r.location&&void 0!==a.location,helperText:r.location&&a.location&&r.location}))},options:s.contacts.filter((function(e){return e.address})).map((function(e){return e.label})),isOptionEqualToValue:function(e,t){return e.label===t.label}})};function gr(){var e=(0,r.useContext)(Is),t=e.planTab,n=e.setPlanTab,i=e.showTime,a=e.setShowTime,s=e.checkedSlot,o=e.setCheckedSlot,l=e.mobileDate,c=e.setMobileDate,d=e.showBookingBtn,u=e.setShowBookingBtn;return(0,V.jsxs)(f.Z,{sx:{width:"100%"},children:[(0,V.jsxs)(Me.Z,{value:t,onChange:function(e,t){n(t),d&&u(!d),l&&c(!l),s&&o(!s),i&&a(!i)},children:[(0,V.jsx)(Fe.Z,(0,x.Z)({label:"Mobile"},Be(t))),(0,V.jsx)(Fe.Z,(0,x.Z)({label:"Drive-in"},Be(t)))]}),(0,V.jsx)(We,{value:t,index:0,children:(0,V.jsx)(It.ZP,{alignItems:"flex-start",sx:{p:0,my:2},children:(0,V.jsx)(Zr,{})})}),(0,V.jsx)(We,{value:t,index:1,children:(0,V.jsxs)(It.ZP,{alignItems:"flex-start",sx:{p:0,my:2},children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(gt.Z,{sx:{bgcolor:ae.Z[300]},children:(0,V.jsx)(xr.Z,{})})}),(0,V.jsx)(qt.Z,{primary:ve.Z.office.primary,secondary:ve.Z.office.secondary})]})})]})}var jr=function(e){var t=e.planCategory;return(0,V.jsx)(Et.Z,{children:function(e){switch(e){case o.YM:return(0,V.jsx)(It.ZP,{alignItems:"flex-start",sx:{p:0},children:(0,V.jsx)(Zr,{})});case o.dg:return(0,V.jsxs)(It.ZP,{alignItems:"flex-start",sx:{p:0},children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(gt.Z,{sx:{bgcolor:ae.Z[300]},children:(0,V.jsx)(xr.Z,{})})}),(0,V.jsx)(qt.Z,{primary:ve.Z.office.primary,secondary:ve.Z.office.secondary})]});case o.eW:return(0,V.jsx)(gr,{})}}(t)})},br=n(11452),Sr=new Date,wr=Sr.getUTCFullYear(),yr=Sr.getUTCMonth(),Ar=Sr.getUTCDate();var Cr=function(e){var t=e.setDate,n=e.date,a=e.maxDate,s=void 0===a?new Date(wr+1,11,31):a,o=e.minDate,l=void 0===o?new Date(wr,yr,Ar):o,c=(0,r.useState)(),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),p=(0,i.Z)(h,2),Z=p[0],g=p[1];(0,r.useEffect)((function(){g(l),m(s)}),[]);var j=(0,w.Z)((function(e){return e.timeSlotReducer})),b=(0,r.useContext)(Is),S=b.setShowBookingBtn,A=b.showBookingBtn,C=b.checkedSlot,k=b.setCheckedSlot,D=(0,y.Z)(),N=function(e){A&&S(!A),C&&k(!C),e=P()(e);var t=P()(j.fullDate);if(e.format("LL")===t.format("LL")){var n=e.format("YYYY-MM-DD");D((0,or.eH)({date:n,slots:ve.Z.slots,now:!0}))}else{var i=e.format("YYYY-MM-DD");D((0,or.eH)({date:i,slots:ve.Z.slots}))}};return(0,V.jsx)(yn._,{dateAdapter:wn.Z,children:(0,V.jsxs)(f.Z,{sx:{"& .PrivatePickersSlideTransition-root":{minHeight:180,maxHeight:180,height:"100%"},"& .MuiYearPicker-root":{minHeight:180,maxHeight:180,height:"100%"},'& .PrivatePickersSlideTransition-root [role="row"]':{margin:0}},children:[(0,V.jsx)(v.Z,{textAlign:"center",variant:"subtitle2",display:"block",gutterBottom:!0,sx:{mb:1,fontSize:function(e){return e.spacing(1.5)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},children:"Select Date"}),(0,V.jsx)(br.w,{displayStaticWrapperAs:"desktop",openTo:"day",value:n,onChange:function(e){A&&S(!A),C&&k(!C),t(e)},onYearChange:N,onMonthChange:N,onAccept:N,renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)({},e))},disablePast:!0,minDate:Z,maxDate:u,date:n,openPicker:!1,rawValue:n})]})})},Pr=new Date,kr=Pr.getUTCFullYear(),Dr=Pr.getUTCMonth(),Nr=Pr.getUTCDate();var Er=function(e){var t=e.date,n=e.setDate,a=e.minDate,s=void 0===a?new Date(kr,Dr,Nr):a,o=e.maxDate,l=void 0===o?new Date(kr+1,11,31):o,c=(0,r.useState)(),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),p=(0,i.Z)(h,2),Z=p[0],g=p[1],j=(0,r.useState)(new Date),b=(0,i.Z)(j,2),S=b[0],w=b[1],y=(0,r.useContext)(Is),A=y.setMobileDate,C=y.showTime,k=y.setShowTime;(0,r.useEffect)((function(){g(s),m(l)}),[]),(0,r.useEffect)((function(){var e=P()(S),i=P()(t),r=P()({year:e.year(),month:e.month(),date:e.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()});n(r.toDate())}),[S,n]);var D=function(e){w(e),k(!0)};return(0,V.jsx)(yn._,{dateAdapter:wn.Z,children:(0,V.jsxs)(f.Z,{sx:{mb:2,"& .PrivatePickersSlideTransition-root":{minHeight:180,maxHeight:180,height:"100%"},"& .MuiYearPicker-root":{minHeight:180,maxHeight:180,height:"100%"},'& .PrivatePickersSlideTransition-root [role="row"]':{margin:0}},children:[(0,V.jsx)(v.Z,{textAlign:"center",variant:"subtitle2",display:"block",gutterBottom:!0,sx:{mb:1,fontSize:function(e){return e.spacing(1)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},children:"Select Preferred Date"}),(0,V.jsx)(br.w,{displayStaticWrapperAs:"desktop",openTo:"day",renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0,sx:{alignSelf:"center"}}))},value:S,showToolbar:!1,maxDate:u,minDate:Z,onChange:D,onAccept:D,disablePast:!0,rawValue:t,date:t,openPicker:!1,disableHighlightToday:!0,componentsProps:{actionBar:{actions:[]}}}),C&&(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(v.Z,{sx:{mt:2,mb:1,fontSize:function(e){return e.spacing(1)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},textAlign:"center",variant:"subtitle2",display:"block",children:"Select Preferred Time"}),(0,V.jsx)(An.d,{renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{fullWidth:!0}))},value:t,onChange:function(e){var t=P()(S),i=P()(e),r=P()({year:t.year(),month:t.month(),date:t.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()});n(r.toDate())},ampm:!0,onClose:function(){return A(!0)},date:t,rawValue:t})]})]})})};var Ir=function(){var e=(0,dn.u6)(),t=e.values,n=e.setFieldValue,i=e.handleBlur,a=e.errors,s=e.touched,o=(0,r.useContext)(Is).vehicles;return 0===o.length?null:(0,V.jsx)(Jt.Z,{onChange:function(e,t,i){return"clear"===i?n(pr.fields.vehicle.name,""):"string"===typeof t?n(pr.fields.vehicle.name,t):t.inputValue?n(pr.fields.vehicle.name,t.inputValue):void 0},onBlur:i,value:t.vehicle,fullWidth:!0,freeSolo:!0,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.title},filterOptions:function(e,t){var n=vr(e,t),i=t.inputValue,r=e.some((function(e){return i===e.title}));return""===i||r||n.push({inputValue:i,title:'Add "'.concat(i,'"')}),n},renderInput:function(e){return(0,V.jsx)(Ht.Z,(0,x.Z)((0,x.Z)({},e),{},{name:pr.fields.vehicle.name,label:pr.fields.vehicle.label,fullWidth:!0,error:void 0!==a.vehicle&&void 0!==s.vehicle,helperText:a.vehicle&&s.vehicle&&a.vehicle}))},options:o.filter((function(e){return!e.isBooked})).map((function(e){return"(".concat(e.modelYear,") ").concat(e.make," ").concat(e.model)})),isOptionEqualToValue:function(e,t){return e.label===t.label}})};function Tr(e){return(0,V.jsxs)("div",{children:[e.video&&(0,V.jsxs)("video",{controls:!0,src:e.video,height:80,width:140,style:{borderRadius:"10px",cursor:"pointer",marginRight:"10px"},children:[(0,V.jsx)("track",{default:!0,kind:"captions",srcLang:"en",src:""}),"Sorry, your browser does not support embedded videos."]}),e.image&&(0,V.jsx)("img",{src:e.image,className:"imageContainer",style:{borderRadius:"10px",cursor:"pointer"},alt:"complaint"})]})}var qr=function(e){var t=e.planCategory,n=e.date,i=e.setDate,a=e.height,s=e.width,l=e.image,c=(0,r.useContext)(Is).planTab,d=(0,dn.u6)(),u=d.handleBlur,m=d.handleChange,h=d.errors,x=d.touched,p=d.values,v=d.setErrors;return(0,r.useEffect)((function(){v({})}),[c,v]),(0,V.jsxs)(Q.ZP,{container:!0,rowSpacing:{xs:2,sm:4,md:6},columnSpacing:{xs:2,sm:4,md:6},sx:{mb:3},children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:12,md:6,className:"topOne",children:[(0,V.jsx)(Ir,{}),"Mobile"===t&&(0,V.jsx)(f.Z,{sx:{mt:3}}),(0,V.jsx)(jr,{planCategory:t}),"Mobile"===t&&(0,V.jsx)(f.Z,{sx:{mt:3}}),"Drive-in"===t&&(0,V.jsx)(f.Z,{sx:{mt:3}}),(0,V.jsx)(Ht.Z,{label:pr.fields.vehicleFault.label,value:p.vehicleFault,name:pr.fields.vehicleFault.name,onChange:m,onBlur:u,multiline:!0,fullWidth:!0,className:"vehicleFaultTextField",rows:1,error:void 0!==h.vehicleFault&&void 0!==x.vehicleFault,helperText:h.vehicleFault&&x.vehicleFault&&h.vehicleFault}),(0,V.jsx)(f.Z,{className:"uploadGridImageVideoContainer",children:(0,V.jsxs)(f.Z,{children:[(0,V.jsx)("div",{className:"upload-image-wrapper",children:l&&(0,V.jsx)(Tr,{height:a,width:s,image:l})}),(0,V.jsx)("label",{htmlFor:"actual-btn",className:l?"hideContainer":"upload-image-container",children:(0,V.jsx)(Lt.Dmm,{className:"single-icon"})})]})})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:t===o.eW&&0===c||t===o.YM?(0,V.jsx)(Er,{date:n,setDate:i}):(0,V.jsx)(Cr,{date:n,setDate:i})})]})},Lr="data:image/png;base64,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",Vr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAEy0lEQVR4nO2ZXWwUVRTHf3d2u6W0ldJqaAuIfFiKpVSElialodqCQFuisFBRkAChhBCeJBp5mhiJRB6JIUggSAIkto0JtWCEh0bQB4gaxWwMRCIx8eOBFrXbbZedOT60209oO7OlQ+L9Pc2cuffc/zl7Zu6ZWdBoNBqNRqPRaDSa/yHKq4Ur19blKWV9AYhSsvrS5023vNBheLEogKGsIDAbmGOjgp7p8GphUQTixwqSvdLhWQIeF3QCvBbgNToBXgvwGr+TwVXVwX3Au8CZyy2NbwPySFQ5R1VWBw8bUIfIoUsXmj4a60SnFXAAyAH2V1UHj5mm6XkFmaZpVFUHjyl4S2CGKHXAyXxHnWBVdfAwsL9/spwoKy6sN03THm3uqtoN+ZaodUpYBMwH8oG03ssdCkI2ElKoH0DOX25puj2aT9M0ja+v3/hYUDv7NAkfXrrQ+M5YY3LaCquV1cGjArsH2E4uL16460FJqK2tndxlJ+8R2AYUOlzrW+CTWDjteGvrqa6hF03TNK5e/+k4sGOA+fjllsbdOLg1fQ5FcftWqGVu3nPZwNJe0+I7v/81a9sbdc2tra0CUFFR4Z9XsHRvTPyNwHpgmtN1gFxgjRGIbp+TVxBZ8nzB96FQSKAn+CvXb5xQqO3xwQo5sby4cHdcw1hx+zI0vBKE01NT1Y72LqZjcxakbOCEgF8omh2lZF43c7ItMtIsstJ6iuZuh8G9Dh+//Onn2q0AP/4aIBobJu1KzLZffyrN90d7WE6ieHPAtYdW4aiBOJ0wcO7QJCjFRRFKgKy4LTPdZlNZmNWLI0wKjO3H6YoqLn6XwqdXJ9MeHlSkd5Ximghr4gZBTpUXF+50Ezwk/jr8oGcCAD4DtlSEWV8aJjnJ3W7ZfV/R+E0qZ79KxXpQeMLp5SULt7sNHsbne4CqqgmeR6iJG7LSLQ4E/6Hg6eg4uIcbdwJ80DSFtn/7d12luJiRomobGhqsRHwnvI9XVW+YjVAeP5+eaXGkvm3cggconBXlyK42cjNjfTYRSv6O+nIT9Z1QApYsqU9CGWeAKdDzyx/c2k5mmuuKfChZ6RYHt9wjM73Pd5Ydi52pqKhw1M0OJaEETM1u24tIKYDfJ7y3+R7ZGQlV5IjkTLUwX2vH16+63Jf6ZH0iPh33AXFWrdqaKr5YA73d3KayTl5aNKxfGXey0m0iUYPQb0kAKHihIH/u0Zs3b9534891BdhJkT30NjjZGRabV4TdunLMlhUdTOuvtJyIFRi2C42VRG6BvkbkldJOkv0T92I4KSCsWxbpOxdlbHPry1UCKtfW5dHb2yf7hcoJKP2hrCzqJNCbdIUUvbh643w3flwlQClrXfy4dH436Snj/9QfjSdShGV53X3nfp/UjDD8obi7BZQsih8umOnq2TMuLJjRv7b0vGY7xl0CRC2IH87L8S4Bz+b2N0ZKke/Gx6BW+OWaV4ssMTaCGq252AdMBthc3kGKR39rRLrh3JX4NxU6FLw/0ngRZRs+u/nL5qaf47ZBgVq20YxSM52IGCDAa9IEDo04Qgm2rfYCz8RNg28BQ3U+EmmPFTIoxkEVYPj8K8Wy1iMyaWJFTQy2SMSXlPSZ1zo0Go1Go9FoNBqNRqPRaDQajXf8B8XydueffF9IAAAAAElFTkSuQmCC";function Mr(e){var t=e.handleChange,n=e.slot,i=(0,w.Z)((function(e){return e.timeSlotReducer})),a=(0,r.useContext)(Is).checkedSlot;return(0,V.jsx)("div",{className:"radio-container",children:i.slots.map((function(e,i){return(0,V.jsxs)("div",{className:"radio-btn",children:[(0,V.jsx)("input",{disabled:!1===e.available,type:"radio",value:e.time,name:"time",id:"".concat(e.time),onChange:t,checked:a&&e.time===n}),(0,V.jsx)(Le.Z,{disabled:!e.available,className:e.available?"time-btn":"disabled time-btn",children:(0,V.jsxs)("label",{htmlFor:e.time,children:["Morning"===e.label&&(0,V.jsx)("img",{src:Lr,alt:"slot",className:"slot-img"}),"Late Morning"===e.label&&(0,V.jsx)("img",{src:Lr,alt:"slot",className:"slot-img"}),"Afternoon"===e.label&&(0,V.jsx)("img",{src:Vr,alt:"slot",className:"slot-img"}),"Late Afternoon"===e.label&&(0,V.jsx)("img",{src:Vr,alt:"slot",className:"slot-img"}),(0,V.jsx)("div",{children:(0,V.jsx)("span",{className:"time-slot-btn-title",children:e.time})})]})})]},i)}))})}var Fr=(0,r.memo)(Mr);var Ur=function(e){var t=e.slot,n=e.handleSelectSlot,i=e.planCategory,a=(0,r.useContext)(Is).planTab;return(0,V.jsx)(Q.ZP,{container:!0,rowSpacing:{xs:2,sm:4,md:6},columnSpacing:{xs:2,sm:4,md:6},sx:{mb:3},children:(0!==a||i===o.dg)&&(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{variant:"subtitle2",textAlign:"center",gutterBottom:!0,sx:{fontSize:function(e){return e.spacing(1.5)},color:function(e){return"dark"===e.palette.mode?"#FFFFFF":"#383838"}},children:"Select available slot"}),(0,V.jsx)(Fr,{slot:t,handleChange:n})]})})},Br=n(16856);var Rr=function(){var e=(0,r.useContext)(Is),t=e.showBookingBtn,n=e.mobileDate;return(0,V.jsxs)(Q.ZP,{container:!0,rowSpacing:{xs:2,sm:4,md:6},columnSpacing:{xs:2,sm:4,md:6},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,alignSelf:"center",children:(0,V.jsx)(r.Fragment,{})}),(t||n)&&(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(Le.Z,{startIcon:(0,V.jsx)(Br.etD,{}),className:"submit-book-btn",fullWidth:!0,variant:"contained",type:"submit",children:"Book appointment"})})]})};function Or(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(""),m=(0,i.Z)(u,2),h=m[0],x=m[1],f=(0,r.useState)(""),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useRef)(),j=(0,r.useRef)();(0,r.useEffect)((function(){var e=localStorage.getItem(o.H3.bookingData);if(e){var t=JSON.parse(e);t.vehicleFaultImg&&a("".concat(ve.Z.api.customerBaseURL,"/").concat(t.vehicleFaultImg)),t.vehicleFaultVideo&&d("".concat(ve.Z.api.customerBaseURL,"/").concat(t.vehicleFaultVideo))}}),[]);return{handleUploadVideo:function(e){var t=e.target.files;if(null!==t&&void 0!==t&&t.length){var n=t[0];Z(n);var i=URL.createObjectURL(n);d(i)}},handleUploadImage:function(e){var t=e.target.files;if(null!==t&&void 0!==t&&t.length){var n=t[0];x(n);var i=URL.createObjectURL(n);a(i)}},image:n,video:c,imageSrc:h,videoSrc:v,resetVideo:function(){void 0!==g.current&&(g.current.value=""),d("")},resetImage:function(){void 0!==j.current&&(j.current.value=""),a("")},imageRef:j,videoRef:g,setVideoSrc:Z,setImageSrc:x,height:50,width:50}}var Wr={location:"",vehicleFault:"",vehicle:""};function zr(e){var t=(0,r.useState)(new Date),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(""),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(o.dg),h=(0,i.Z)(m,2),f=h[0],p=h[1],v=(0,r.useState)(Wr),Z=(0,i.Z)(v,2),g=Z[0],j=Z[1],b=(0,r.useContext)(Is),S=b.setShowBookingBtn,w=b.showBookingBtn,C=b.setCheckedSlot,k=b.planTab,D=b.showBooking,N=b.setShowBooking,E=b.setMobileDate,I=b.setShowTime,T=b.setPlanTab,q=b.vehicles,L=b.customer,M=Or(),F=M.image,U=M.height,B=M.width,R=(0,y.Z)();(0,r.useEffect)((function(){e.planCategory&&(e.planCategory===o.dg&&j((function(e){return(0,x.Z)((0,x.Z)({},e),{},{location:o.N9})})),p(e.planCategory))}),[e.planCategory]),(0,r.useEffect)((function(){return function(){S(!1),C(!1),I(!1),E(!1),T(0),localStorage.removeItem(o.H3.bookingData)}}),[C,E,T,S,I]);var O=(0,r.useCallback)((function(e){w||S(!0),C(e.target.checked),u(e.target.value)}),[C,S,w]);return(0,V.jsx)(K.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},className:"bookingFormContainer",children:(0,V.jsx)(dn.J9,{initialValues:g,validationSchema:pr.schema[1],onSubmit:function(t,n){if(f===o.YM&&!t.location.length)return n.setFieldError(pr.fields.location.name,pr.fields.location.error.required);if(f===o.eW&&0===k&&!t.location.length)return n.setFieldError(pr.fields.location.name,pr.fields.location.error.required);var i=t.location,r=d;f===o.dg&&(i=ve.Z.office.secondary),f===o.eW&&1===k&&(i=ve.Z.office.secondary),(f===o.YM||f===o.eW&&0===k)&&(r=P()(a.toISOString()).format("LT")),(f===o.dg||f===o.eW&&1===k)&&D&&N(!D);var s=q.find((function(e){return"(".concat(e.modelYear,") ").concat(e.make," ").concat(e.model)===t.vehicle}));if(s&&L){var l={planCategory:f,appointmentDate:a.toISOString(),vehicleFault:t.vehicleFault,vehicleId:s.id,customerId:L.id,location:i,reference:e.paymentReference,subscriptionName:e.subscriptionName,amount:e.amount,timeSlot:r};R((0,A.gz)(l))}N(!1),S(!1)},enableReinitialize:!0,children:(0,V.jsxs)(dn.l0,{children:[(0,V.jsxs)(W.Z,{sx:{my:2},children:[(0,V.jsx)("h5",{className:"time-header-schedule",children:"Schedule An Inspection"}),(0,V.jsx)(qr,{date:a,setDate:s,planCategory:f,height:U,width:B,image:F}),(0,V.jsx)(Ur,{slot:d,handleSelectSlot:O,planCategory:f}),(0,V.jsx)(Rr,{})]}),(0,V.jsx)("div",{className:"bottomDiv"})]})})})}var Gr=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useContext)(Is),m=u.showBooking,h=u.setShowBooking,x=u.customer,p=u.setVehicles,v=u.setShowVehicles,Z=(0,w.Z)((function(e){return e.customerReducer})),g=(0,w.Z)((function(e){return e.appointmentReducer})),b=(0,y.Z)();cr();var S=(0,j.TH)();(0,r.useEffect)((function(){var e=S.state;a(e.transaction)}),[S.state]),(0,r.useEffect)((function(){"completed"===g.createAppointmentStatus&&x&&(d({message:"Successfully scheduled appointment"}),b((0,G.XZ)(x.id)))}),[b,x,g.createAppointmentStatus]),(0,r.useEffect)((function(){if("completed"===Z.getCustomerTransactionsStatus){var e=Z.transactions.find((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}));e&&a(e)}}),[Z.getCustomerTransactionsStatus,Z.transactions,null===n||void 0===n?void 0:n.id]),(0,r.useEffect)((function(){x&&b((0,G.ur)(x.id))}),[x,b]),(0,r.useEffect)((function(){"completed"===Z.getCustomerVehiclesStatus&&p(Z.vehicles)}),[Z.getCustomerVehiclesStatus,Z.vehicles,p]);var A=(0,r.useMemo)((function(){var e,t,i,r;switch(null===n||void 0===n?void 0:n.purpose){case null===n||void 0===n||null===(e=n.purpose.match(o.dg))||void 0===e?void 0:e.input:var a=null===n||void 0===n?void 0:n.purpose.match(o.dg);a&&(r=a[0]);break;case null===n||void 0===n||null===(t=n.purpose.match(o.YM))||void 0===t?void 0:t.input:var s=null===n||void 0===n?void 0:n.purpose.match(o.YM);s&&(r=s[0]);break;case null===n||void 0===n||null===(i=n.purpose.match(o.eW))||void 0===i?void 0:i.input:var l=null===n||void 0===n?void 0:n.purpose.match(o.eW);l&&(r=l[0])}return r}),[n]),C=(0,r.useMemo)((function(){var e,t,i,r,a;switch(null===n||void 0===n?void 0:n.purpose){case null===n||void 0===n||null===(e=n.purpose.match(o.ZX))||void 0===e?void 0:e.input:var s=null===n||void 0===n?void 0:n.purpose.match(o.ZX);s&&(a=s[0]);break;case null===n||void 0===n||null===(t=n.purpose.match(o.wv))||void 0===t?void 0:t.input:var l=null===n||void 0===n?void 0:n.purpose.match(o.wv);l&&(a=l[0]);break;case null===n||void 0===n||null===(i=n.purpose.match(o.Zw))||void 0===i?void 0:i.input:var c=null===n||void 0===n?void 0:n.purpose.match(o.Zw);c&&(a=c[0]);break;case null===n||void 0===n||null===(r=n.purpose.match(o.uz))||void 0===r?void 0:r.input:var d=null===n||void 0===n?void 0:n.purpose.match(o.uz);d&&(a=d[0])}return a}),[n]),k=(0,r.useMemo)((function(){var e=!0;return"success"===(null===n||void 0===n?void 0:n.status)&&"unprocessed"===(null===n||void 0===n?void 0:n.serviceStatus)&&(e=!1),"success"!==(null===n||void 0===n?void 0:n.status)&&"unprocessed"===(null===n||void 0===n?void 0:n.serviceStatus)&&(e=!1),e}),[n]);return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:9,children:(0,V.jsxs)(f.Z,{mb:2,children:[(0,V.jsx)("span",{className:rr,children:"Transaction"})," -"," ",(0,V.jsxs)("span",{className:ar,children:[null===n||void 0===n?void 0:n.serviceStatus," on ",P()(null===n||void 0===n?void 0:n.createdAt).format("LLL"),", for ",null===n||void 0===n?void 0:n.purpose]})]})}),!k&&(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsxs)(Le.Z,{size:"small",onClick:function(){h(!0),v(!0)},fullWidth:!0,variant:"outlined",color:"primary",sx:{textTransform:"capitalize"},children:["Schedule ",null===n||void 0===n?void 0:n.purpose]})})]}),(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(xt.Z,{component:K.Z,children:(0,V.jsx)(ft.Z,{children:(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Channel"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.channel})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Card Number"}),(0,V.jsxs)(Zt.Z,{align:"left",children:["************",null===n||void 0===n?void 0:n.last4]})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Bank"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.bank})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Card Type"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.cardType})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Card Expiry"}),(0,V.jsxs)(Zt.Z,{align:"left",children:[null===n||void 0===n?void 0:n.expMonth,"/",null===n||void 0===n?void 0:n.expYear]})]})]})})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(xt.Z,{component:K.Z,children:(0,V.jsx)(ft.Z,{children:(0,V.jsxs)(pt.Z,{children:[(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Amount"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.amount})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Currency"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.currency})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Reference"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.reference})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Plan Code"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.planCode})]}),(0,V.jsxs)(vt.Z,{children:[(0,V.jsx)(Zt.Z,{component:"th",scope:"row",children:"Status"}),(0,V.jsx)(Zt.Z,{align:"left",children:null===n||void 0===n?void 0:n.status})]})]})})})})]})]}),(0,V.jsx)(sr,{fullScreen:!0,open:m,Content:(0,V.jsx)(zr,{planCategory:A,subscriptionName:C,amount:null===n||void 0===n?void 0:n.amount,paymentReference:null===n||void 0===n?void 0:n.reference}),onClose:function(){v(!1),h(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==c,message:null===c||void 0===c?void 0:c.message,onClose:function(){return d(void 0)}})]})},Jr=n(9976);var Hr=function(e){var t=(0,r.useState)(),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useState)(!1),l=(0,i.Z)(o,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],x=m[1],p=(0,y.Z)(),Z=(0,j.TH)();(0,r.useEffect)((function(){if(Z.state){var t=Z.state;t.vehicle&&s(t.vehicle)}e.vehicle&&s(e.vehicle)}),[p,Z.state,e.vehicle]);var g=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t){var n,i;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ve.Z.api.driverBaseURL,"/").concat(t),e.next=3,kt.Z.get(t,{responseType:"blob"});case 3:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;x(e)},setTimeout((function(){return d(!0)}),500);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(r.Fragment,{children:[a?(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,V.jsxs)(Vt.Z,{children:[(0,V.jsx)(Mt.Z,{component:"img",alt:"green iguana",height:"140",image:Bt}),(0,V.jsx)(Ft.Z,{children:(0,V.jsxs)(v.Z,{variant:"h5",component:"div",children:[a.modelYear," ",a.make," ",a.model]})}),(0,V.jsx)(Ut.Z,{children:(0,V.jsx)(Le.Z,{variant:"contained",color:"secondary",size:"small",children:"Book Inspection"})})]})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,sm:9,md:9,children:[(0,V.jsx)(Vt.Z,{children:(0,V.jsxs)(Ft.Z,{children:[(0,V.jsxs)(W.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Make"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.make})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model Year"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.modelYear})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.engineCylinders})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Ownership"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.isOwner?"Owner":"-"})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Date Added"}),(0,V.jsx)(v.Z,{variant:"caption",children:P()(a.createdAt).format("LL")})]})]}),(0,V.jsx)(z.Z,{sx:{my:2}}),(0,V.jsxs)(W.Z,{direction:"row",spacing:{xs:11,sm:11,md:16},children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.model})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Engine Model"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.engineModel})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"VIN"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.vin})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Vehicle Type"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.type})]}),(0,V.jsxs)(f.Z,{children:[(0,V.jsx)(v.Z,{variant:"subtitle2",children:"Plate Number"}),(0,V.jsx)(v.Z,{variant:"caption",children:a.plateNumber})]})]}),(0,V.jsx)(z.Z,{sx:{my:2}}),(0,V.jsx)(v.Z,{variant:"subtitle1",children:"Vehicle Papers"}),(0,V.jsxs)(W.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Vehicle Inspection"}),a.vehicleInspectionFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.vehicleInspectionFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.vehicleInspectionFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Motor Receipt"}),a.motorReceiptFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.motorReceiptFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.motorReceiptFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Proof Of Ownership"}),a.proofOfOwnershipFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.proofOfOwnershipFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.proofOfOwnershipFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Road Worthiness"}),a.roadWorthinessFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.roadWorthinessFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.roadWorthinessFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Registration Number"}),a.registrationNumberFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.registrationNumberFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.registrationNumberFileUrl,children:(0,V.jsx)(Pt.Z,{})})]}),(0,V.jsxs)(f.Z,{sx:{minWidth:160},children:[(0,V.jsx)(v.Z,{variant:"caption",children:"Third Party Insurance"}),a.thirdPartyInsuranceFileUrl&&(0,V.jsx)(gt.Z,{style:{minWidth:"100%"},onClick:function(){return g(a.thirdPartyInsuranceFileUrl)},sx:{cursor:"pointer"},variant:"square",src:a.thirdPartyInsuranceFileUrl,children:(0,V.jsx)(Pt.Z,{})})]})]})]})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:{xs:2,md:2},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:6,children:(0,V.jsx)(v.Z,{sx:{my:1},children:"Estimates"})}),(0,V.jsx)(Q.ZP,{item:!0,xs:6,children:(0,V.jsx)(v.Z,{sx:{my:1},children:"Subscriptions"})})]})]})]}):(0,V.jsx)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:2,sm:8,md:12},children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(v.Z,{children:"No Data"})})}),(0,V.jsx)(Ct,{show:c,title:"Vehicle paper",size:"sm",Content:(0,V.jsx)(Jr.BB,{file:h,children:ge(10).map((function(e,t){return(0,V.jsx)(Jr.T3,{pageNumber:e},t)}))}),onClose:function(){return d(!1)}})]})},Yr=n(33402),Qr=n(95080),Kr=n(30829),Xr=n(54535),_r=n(66647),$r=n(47630),ea=n(32923),ta=n(72456),na=n(76106),ia="data:image/jpeg;base64,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",ra={location:"",vehicleFault:""};function aa(e){var t=(0,r.useState)(new Date),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,r.useState)(""),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(o.dg),h=(0,i.Z)(m,2),f=h[0],p=h[1],v=(0,r.useState)(),Z=(0,i.Z)(v,2),g=Z[0],j=Z[1],b=(0,r.useState)(ra),S=(0,i.Z)(b,2),C=S[0],k=S[1],D=(0,r.useState)(""),N=(0,i.Z)(D,2),E=N[0],I=N[1],T=(0,r.useContext)(Is),q=T.setShowBookingBtn,L=T.showBookingBtn,M=T.setCheckedSlot,F=T.planTab,U=T.showBooking,B=T.setShowBooking,R=T.setMobileDate,O=T.setShowTime,z=T.setPlanTab,G=Or(),J=G.image,H=G.height,Y=G.width,Q=(0,y.Z)(),X=(0,w.Z)((function(e){return e.timeSlotReducer}));(0,r.useEffect)((function(){if(e.appointment){var t=e.appointment,n="";t.planCategory===o.eW&&(t.serviceLocation!==o.N9?(n=t.serviceLocation,I(n)):n=o.N9),t.planCategory===o.dg&&(n=o.N9),t.planCategory===o.YM&&(n=t.serviceLocation,I(n)),p(t.planCategory),j(t),k({location:n,vehicleFault:t.vehicleFault.description?t.vehicleFault.description:""})}}),[e.appointment]),(0,r.useEffect)((function(){f===o.eW&&1===F&&k((function(e){return(0,x.Z)((0,x.Z)({},e),{},{location:o.N9})})),f===o.eW&&0===F&&k((function(e){return(0,x.Z)((0,x.Z)({},e),{},{location:E})})),s(new Date)}),[E,f,F]),(0,r.useEffect)((function(){return function(){q(!1),M(!1),O(!1),R(!1),z(0),localStorage.removeItem(o.H3.bookingData)}}),[M,R,z,q,O]);var _=(0,r.useCallback)((function(e){L||q(!0),M(e.target.checked),u(e.target.value)}),[M,q,L]);return(0,V.jsx)(K.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},className:"bookingFormContainer",children:(0,V.jsx)(dn.J9,{initialValues:C,validationSchema:pr.schema[0],onSubmit:function(e,t){if(f===o.YM&&!e.location.length)return t.setFieldError(pr.fields.location.name,pr.fields.location.error.required);if(f===o.eW&&0===F&&!e.location.length)return t.setFieldError(pr.fields.location.name,pr.fields.location.error.required);var n=e.location,i=d;if(f===o.dg&&(n=ve.Z.office.secondary),f===o.eW&&1===F&&(n=ve.Z.office.secondary),(f===o.YM||f===o.eW&&0===F)&&(i=P()(a.toISOString()).format("LT")),f===o.dg||f===o.eW&&1===F){var r,s=null===(r=X.timeSlot)||void 0===r?void 0:r.date,l=d;U&&B(!U),localStorage.setItem(o.H3.timeSlot,JSON.stringify({date:s,time:l}))}var c=null===g||void 0===g?void 0:g.id,u={planCategory:f,customerId:null===g||void 0===g?void 0:g.customerId,time:a.toISOString(),vehicleFault:e.vehicleFault,location:n,timeSlot:i};Q((0,A.zZ)({id:c,data:u})),B(!1),q(!1)},enableReinitialize:!0,children:(0,V.jsxs)(dn.l0,{children:[(0,V.jsxs)(W.Z,{sx:{my:2},children:[(0,V.jsx)("h5",{className:"time-header-schedule",children:"Schedule An Inspection"}),(0,V.jsx)(qr,{date:a,setDate:s,planCategory:f,height:H,width:Y,image:J}),(0,V.jsx)(Ur,{slot:d,handleSelectSlot:_,planCategory:f}),(0,V.jsx)(Rr,{})]}),(0,V.jsx)("div",{className:"bottomDiv"})]})})})}var sa=(0,$r.ZP)(K.Z)((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",textAlign:"center",color:t.palette.text.secondary,height:80,width:250,flexGrow:1}})),oa=(0,$r.ZP)("img")({margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%",borderRadius:10}),la=function(){var e,t,n,a,s,l,c,d,u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],x=m[1],p=(0,r.useState)([]),g=(0,i.Z)(p,2),S=g[0],C=g[1],k=(0,r.useState)(),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,r.useState)(),F=(0,i.Z)(M,2),U=F[0],B=F[1],R=(0,r.useState)(""),O=(0,i.Z)(R,2),G=O[0],J=O[1],H=(0,r.useState)(!1),Y=(0,i.Z)(H,2),X=Y[0],_=Y[1],$=(0,r.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],ie=(0,r.useState)(),re=(0,i.Z)(ie,2),ae=re[0],se=re[1],oe=(0,r.useState)(),le=(0,i.Z)(oe,2),ce=le[0],de=le[1],ue=(0,r.useState)(""),me=(0,i.Z)(ue,2),he=me[0],xe=me[1],fe=(0,r.useState)(),pe=(0,i.Z)(fe,2),je=pe[0],be=pe[1],Se=(0,r.useState)(!1),we=(0,i.Z)(Se,2),ye=we[0],Ae=we[1],Ce=(0,r.useState)(""),Pe=(0,i.Z)(Ce,2),ke=Pe[0],De=Pe[1],Ne=(0,r.useRef)(null),Ee=(0,r.useRef)(null),Ie=(0,r.useRef)(null),Ve=(0,j.TH)(),Me=(0,j.UO)();cr();var Fe=(0,r.useContext)(Is),Ue=Fe.showBooking,Be=Fe.setShowBooking,Re=(0,w.Z)((function(e){return e.appointmentReducer})),Oe=(0,y.Z)();(0,r.useEffect)((function(){Oe((0,A._$)(+Me.id))}),[Ve.state,Oe,Me.id]),(0,r.useEffect)((function(){"completed"===Re.getAppointmentStatus&&x(Re.appointment)}),[Re.getAppointmentStatus,Re.appointment]),(0,r.useEffect)((function(){"completed"===Re.updateAppointmentStatus&&(C([]),x(Re.appointment))}),[Re.appointment,Re.updateAppointmentStatus]);var We=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t,n){var i,r,a,s;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n="".concat(ve.Z.api.baseURL,"/").concat(n),i=n.split("/docs/")[1].trim(),e.next=5,(0,kt.Z)({url:n,method:"GET",responseType:"blob"});case 5:r=e.sent,a=window.URL.createObjectURL(new Blob([r.data])),(s=document.createElement("a")).href=a,s.setAttribute("download",i),document.body.appendChild(s),s.click();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ze=function(e){var t=e.target.files;if(null!==t&&void 0!==t&&t.length){var n=e.target.name,i=t[0],r=(0,Wt.Z)(S);if(r.length){var a=r.find((function(e){return e.title===n}));if(a){var s=r.indexOf(a);r[s].img=ia,C(r)}else C((function(e){return[].concat((0,Wt.Z)(e),[{img:ia,title:i.name,showDeleteIcon:!0}])}))}else C([{img:ia,title:i.name,showDeleteIcon:!0}]);n===o.Qy&&E(i),n===o.UK&&L(i),n===o.Rf&&B(i)}},Ge=function(e){Ne.current&&(Ne.current.value=""),Ee.current&&(Ee.current.value=""),Ie.current&&(Ie.current.value="");var t,n=(0,Wt.Z)(S);if(e){if(t=n.find((function(t){return t.title===e}))){var i=n.indexOf(t);n.splice(i,1)}C(n)}},Je=function(){N&&(xe(N.name),se(N)),q&&(xe(q.name),se(q)),U&&(xe(U.name),se(U)),be(setTimeout((function(){_(!0)}),100))},He=function(){return Ae(!1)};return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(f.Z,{children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",marginBottom:2,children:[(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:rr,children:"Appointment"})," -"," ",(0,V.jsxs)("span",{className:ar,children:[null===h||void 0===h||null===(e=h.customer)||void 0===e?void 0:e.firstName," ",null===h||void 0===h||null===(t=h.customer)||void 0===t?void 0:t.lastName," | ",null===h||void 0===h||null===(n=h.customer)||void 0===n?void 0:n.email," |"," ",null===h||void 0===h||null===(a=h.customer)||void 0===a?void 0:a.phone]})]})}),(0,V.jsx)(Q.ZP,{item:!0,children:S.length||G.length&&G!==(null===h||void 0===h?void 0:h.status)?(0,V.jsx)(Le.Z,{onClick:function(){var e={};h&&(e.appointmentId=h.id,N&&(e.inventory=N),q&&(e.report=q),U&&(e.estimate=U),G.length&&(e.status=G)),Oe((0,A.b4)(e))},variant:"outlined",children:"Update"}):null})]}),(0,V.jsx)(f.Z,{sx:{flexGrow:1},children:h?(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsx)(K.Z,{elevation:5,sx:{p:2,backgroundColor:function(e){return"dark"===e.palette.mode?"#1A2027":"#fff"}},children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(Qr.Z,{children:(0,V.jsx)(oa,{alt:"complex",src:Bt})})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,sm:!0,container:!0,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsxs)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"div",children:[null===(s=h.vehicle)||void 0===s?void 0:s.modelYear," ",null===(l=h.vehicle)||void 0===l?void 0:l.model," (",null===(c=h.vehicle)||void 0===c?void 0:c.plateNumber,")"]})})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsx)(v.Z,{variant:"subtitle1",component:"div",children:(null===(d=h.vehicle)||void 0===d?void 0:d.isBooked)&&(0,V.jsx)(b.Z,{size:"small",label:"Booked",color:"success"})})})]})]})})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,md:8,children:[(0,V.jsxs)(W.Z,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:2},justifyContent:"center",alignItems:"center",children:[(0,V.jsxs)(sa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Programme"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.programme})]}),(0,V.jsxs)(sa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Service Mode"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.modeOfService})]}),(0,V.jsxs)(sa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Status"}),(0,V.jsx)(v.Z,{variant:"caption",children:G.length?G:h.status})]}),(0,V.jsxs)(sa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Service Cost"}),(0,V.jsxs)(v.Z,{variant:"caption",children:["\u20a6",Ze(+h.serviceCost)]})]})]}),(0,V.jsx)(f.Z,{sx:{my:{xs:1,sm:2,md:2}}}),(0,V.jsxs)(W.Z,{direction:{xs:"column",sm:"row"},spacing:{xs:1,sm:2,md:2},justifyContent:"center",alignItems:"center",children:[(0,V.jsxs)(sa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Date & Time"}),(0,V.jsxs)(v.Z,{variant:"caption",children:[P()(h.appointmentDate).format("LLL"),(0,V.jsx)("br",{}),h.timeSlot]})]}),(0,V.jsxs)(sa,{elevation:5,children:[(0,V.jsx)(v.Z,{children:"Service Location"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.serviceLocation})]}),(0,V.jsx)(sa,{elevation:5,children:(0,V.jsxs)(Q.ZP,{container:!0,children:[h.vehicleFault.imagePath&&(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(gt.Z,{onClick:function(){return function(e){e="".concat(ve.Z.api.customerBaseURL,"/").concat(e),de(e),ne(!0)}(h.vehicleFault.imagePath)},sx:{cursor:"pointer"},variant:"square",src:h.vehicleFault.imagePath,children:(0,V.jsx)(ea.Z,{})})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{children:"Complaint"}),(0,V.jsx)(v.Z,{variant:"caption",children:h.vehicleFault.description})]})]})})]}),(0,V.jsx)(z.Z,{orientation:"horizontal",sx:{my:{xs:2,sm:4,md:6}}}),(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(Le.Z,{disabled:h.status===o.lD.cancel||h.status===o.lD.complete,onClick:function(){Ue||Be(!0)},size:"small",variant:"outlined",color:"info",children:"Reschedule"}),(0,V.jsx)(Le.Z,{disabled:h.status===o.lD.cancel||h.status===o.lD.complete,onClick:function(){De("By cancelling this appointments, you will not be able to undo this action. \n      Are you sure you want to cancel?."),Ae(!0)},size:"small",sx:{ml:1},variant:"outlined",color:"error",children:"Cancel"})]}),(0,V.jsx)(Q.ZP,{item:!0,container:!0,xs:!0,justifyContent:"space-between",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsxs)(W.Z,{direction:"row",spacing:1,children:[(0,V.jsxs)(_n.Z,{size:"small",sx:{maxWidth:100,width:"100%"},children:[(0,V.jsx)(Kr.Z,{id:"demo-select-small",children:"Status"}),(0,V.jsxs)(Xr.Z,{labelId:"demo-select-small",id:"demo-select-small",value:G,label:"Status",onChange:function(e){return J(e.target.value)},children:[(0,V.jsx)(Wn.Z,{value:"",children:(0,V.jsx)("em",{children:"..."})}),(0,V.jsx)(Wn.Z,{value:"Pending",children:"Pending"}),(0,V.jsx)(Wn.Z,{value:"In-Progress",children:"In-Progress"}),(0,V.jsx)(Wn.Z,{value:"Complete",children:"Complete"})]})]}),h.inventoryFile?(0,V.jsx)(Le.Z,{variant:"outlined",onClick:function(e){return We(e,null===h||void 0===h?void 0:h.inventoryFile)},startIcon:(0,V.jsx)(ta.Z,{}),children:o.Qy}):(0,V.jsxs)(Le.Z,{variant:"outlined",startIcon:(0,V.jsx)(na.Z,{}),component:"label",children:[o.Qy,(0,V.jsx)("input",{hidden:!0,onClick:function(){return Ge()},onChange:ze,name:o.Qy,ref:Ne,accept:"application/pdf",type:"file"})]}),h.reportFile?(0,V.jsx)(Le.Z,{variant:"outlined",onClick:function(e){return We(e,null===h||void 0===h?void 0:h.reportFile)},startIcon:(0,V.jsx)(ta.Z,{}),children:o.UK}):(0,V.jsxs)(Le.Z,{variant:"outlined",startIcon:(0,V.jsx)(na.Z,{}),component:"label",children:[o.UK,(0,V.jsx)("input",{name:o.UK,onClick:function(){return Ge()},onChange:ze,ref:Ee,hidden:!0,accept:"application/pdf",type:"file"})]}),h.estimateFile?(0,V.jsx)(Le.Z,{variant:"outlined",onClick:function(e){return We(e,null===h||void 0===h?void 0:h.estimateFile)},startIcon:(0,V.jsx)(ta.Z,{}),children:o.Rf}):(0,V.jsxs)(Le.Z,{variant:"outlined",startIcon:(0,V.jsx)(na.Z,{}),component:"label",children:[o.Rf,(0,V.jsx)("input",{name:o.Rf,onClick:function(){return Ge()},onChange:ze,ref:Ie,hidden:!0,accept:"application/pdf",type:"file"})]})]})})})]}),(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:!0}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(W.Z,{direction:"row",spacing:1,sx:{mt:{xs:2,md:3}},children:S.length>0?(0,V.jsx)(r.Fragment,{children:S.map((function(e,t){return(0,V.jsxs)(Vt.Z,{sx:{minWidth:150,maxHeight:250},children:[(0,V.jsx)(_r.Z,{children:(0,V.jsx)(Mt.Z,{onClick:Je,component:"img",height:"140",image:e.img,alt:"green iguana"})}),(0,V.jsx)(Ut.Z,{children:e.showDeleteIcon&&(0,V.jsx)(Z.Z,{onClick:function(){return Ge(e.title)},sx:{color:"red"},"aria-label":"info about ".concat(e.title),children:(0,V.jsx)(Bn.Z,{})})})]},t)}))}):null})})]})]})]}):(0,V.jsx)(Yr.Z,{variant:"rectangular",children:(0,V.jsx)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12}})})})]}),(0,V.jsx)(Ct,{show:X,title:he,size:"md",Content:(0,V.jsx)(Jr.BB,{file:ae,children:ge(10).map((function(e,t){return(0,V.jsx)(Jr.T3,{pageNumber:e},t)}))}),onClose:function(){clearTimeout(je),_(!1)}}),(0,V.jsx)(Ct,{show:te,title:"Complaint",size:"sm",Content:(0,V.jsx)("img",{width:"100%",src:ce,alt:"complaint"}),onClose:function(){return ne(!1)}}),(0,V.jsx)(Ct,{show:ye,title:"Cancel Appointment",size:"sm",Content:(0,V.jsx)(Te.Z,{children:ke}),onClose:He,ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:He,children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:function(){var e={id:null===h||void 0===h?void 0:h.id,customerId:null===h||void 0===h?void 0:h.customerId};Oe((0,A.Pg)(e)),Ae(!1)},children:"Agree"})]})}),(0,V.jsx)(sr,{fullScreen:!0,open:Ue,Content:(0,V.jsx)(aa,{appointment:h}),onClose:function(){return Be(!1)}})]})},ca=(0,$r.ZP)(Qr.Z)((function(e){var t,n=e.theme;return t={position:"relative",height:200},(0,un.Z)(t,n.breakpoints.down("sm"),{width:"100% !important",height:100}),(0,un.Z)(t,"&:hover, &.Mui-focusVisible",{zIndex:1,"& .MuiImageBackdrop-root":{opacity:.15},"& .MuiImageMarked-root":{opacity:0},"& .MuiTypography-root":{border:"4px solid currentColor"}}),t})),da=(0,$r.ZP)("span")({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"}),ua=(0,$r.ZP)("span")((function(e){return{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.theme.palette.common.white}})),ma=(0,$r.ZP)("span")((function(e){var t=e.theme;return{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:t.palette.common.black,opacity:.4,transition:t.transitions.create("opacity")}})),ha=(0,$r.ZP)("span")((function(e){var t=e.theme;return{height:3,width:18,backgroundColor:t.palette.common.white,position:"absolute",bottom:-2,left:"calc(50% - 9px)",transition:t.transitions.create("opacity")}})),xa=[{label:"Garage",value:"Garage"},{label:"Ride-Share",value:"Ride-Share"}];function fa(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,dn.u6)(),l=o.handleChange,c=o.values,d=o.resetForm,u=o.setFieldValue,m=(0,w.Z)((function(e){return e.miscellaneousReducer})),h=(0,w.Z)((function(e){return e.partnerReducer}));return(0,r.useEffect)((function(){e.createPartner||d()}),[e.createPartner,d]),(0,r.useEffect)((function(){"completed"===m.getStatesAndDistrictsStatus&&s(m.states.map((function(e){return{label:e.name,value:e.alias}})))}),[m.getStatesAndDistrictsStatus,m.states]),(0,V.jsx)(dn.l0,{autoComplete:"off",children:(0,V.jsxs)(Q.ZP,{container:!0,sx:{p:2},spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:l,value:c.name,name:xn.fields.name.name,label:xn.fields.name.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:l,value:c.email,name:xn.fields.email.name,label:xn.fields.email.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(fn.Z,{onChange:l,value:c.phone,name:xn.fields.phone.name,label:xn.fields.phone.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(On.Z,{onChange:l,value:c.category,name:xn.fields.category.name,label:xn.fields.category.label,data:xa})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsx)(On.Z,{onChange:l,value:c.state,name:xn.fields.state.name,label:xn.fields.state.label,data:a})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,md:6,justifyContent:"space-evenly",alignItems:"center",spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(Le.Z,{endIcon:(0,V.jsx)(jn.Z,{}),color:"primary","aria-label":"upload picture",component:"label",children:["upload logo",(0,V.jsx)("input",{hidden:!0,name:xn.fields.logo.name,onChange:function(e){var t=e.target.files;t&&u(xn.fields.logo.name,t[0])},accept:"image/*",type:"file"})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:c.logo&&(0,V.jsx)("img",{src:je(c.logo),crossOrigin:"anonymous",width:"10%",alt:"logo"})})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(pn.Z,{type:"submit",variant:"contained",loading:"loading"===h.createPartnerStatus,fullWidth:!0,color:"primary",endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})})}var pa=n.p+"static/media/partner2.afb3d17631d887be645e.jpg",va=n(21659);function Za(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(""),p=(0,i.Z)(x,2),Z=p[0],g=p[1],b=(0,r.useState)(""),S=(0,i.Z)(b,2),A=S[0],C=S[1],P=(0,r.useState)("none"),k=(0,i.Z)(P,2),D=k[0],N=k[1],E=(0,w.Z)((function(e){return e.miscellaneousReducer})),I=(0,w.Z)((function(e){return e.partnerReducer})),T=(0,y.Z)(),q=(0,j.s0)();(0,r.useEffect)((function(){h(l)}),[l]),(0,r.useEffect)((function(){"idle"===E.getStatesAndDistrictsStatus&&T((0,Dn.u)())}),[T,E.getStatesAndDistrictsStatus]),(0,r.useEffect)((function(){"idle"===I.getPartnersStatus&&T((0,Pe.rR)())}),[T,I.getPartnersStatus]),(0,r.useEffect)((function(){"completed"===I.getPartnersStatus&&c(I.partners.map((function(e){return{id:e.id,url:e.logo?je(e.logo):pa,title:e.name,width:"33.33%",partner:e}})))}),[T,I.getPartnersStatus,I.partners]),(0,r.useEffect)((function(){if("completed"===I.createPartnerStatus){var e=I.partner;e&&c((function(t){return[].concat((0,Wt.Z)(t),[{id:e.id,url:e.logo?je(e.logo):pa,title:e.name,width:"33.33%"}])})),a(!1)}}),[I.createPartnerStatus,I.partner]),(0,r.useEffect)((function(){return function(){T((0,va.TK)()),T((0,Je.$R)()),T((0,Je.zQ)())}}),[T]);return(0,r.useEffect)((function(){if("none"==D)h(l);else if("state"==D){var e=l.filter((function(e){return e.partner.contact.state.includes(A)}));h(e)}else{var t=l.filter((function(e){return e.partner.categories[0].name.includes(A)}));h(t)}}),[D,A]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(f.Z,{mb:1,children:(0,V.jsx)(Le.Z,{onClick:function(){a(!0)},variant:"outlined",color:"secondary",children:"Create Partner"})}),(0,V.jsxs)(f.Z,{sx:{minWidth:300,width:"100%",marginBottom:4},children:[(0,V.jsx)(Ht.Z,{style:{width:"38%"},placeholder:"Search Partner",value:Z,onChange:function(e){var t=l.filter((function(t){return t.title.includes(e.target.value)}));h(t),g(e.target.value)}}),(0,V.jsx)(Ht.Z,{style:{width:"30%",marginLeft:"5%"},placeholder:"Filter, e.g Garage or Abuja",value:A,onChange:function(e){var t=e.target.value;C(t)}}),(0,V.jsxs)(Xr.Z,{style:{width:"23%",marginLeft:"1%"},placeholder:"Filter By",label:"Filter-By",value:D,onChange:function(e){var t=e.target.value;N(t)},children:[(0,V.jsx)(Wn.Z,{value:"none",children:"None"}),(0,V.jsx)(Wn.Z,{value:"category",children:"Category"}),(0,V.jsx)(Wn.Z,{value:"state",children:"State"})]})]}),(0,V.jsx)(f.Z,{sx:{display:"flex",flexWrap:"wrap",minWidth:300,width:"100%"},children:m.map((function(e){var t,n;console.log(e,"imageData");var i=(null===e||void 0===e||null===(t=e.partner)||void 0===t||null===(n=t.users[0])||void 0===n?void 0:n.active)||!1;return(0,V.jsxs)(ca,{focusRipple:!0,onClick:function(){return q("/partner/".concat(e.id),{state:e})},style:{width:e.width},children:[(0,V.jsx)(da,{style:{backgroundImage:"url(".concat(e.url,")")}}),(0,V.jsx)(ma,{className:"MuiImageBackdrop-root"}),(0,V.jsxs)(ua,{children:[(0,V.jsx)("div",{style:{position:"absolute",top:20,right:20},children:(0,V.jsx)(Le.Z,{disabled:!0,variant:"outlined",color:"secondary",children:i?"Active":"In-Active"})}),(0,V.jsxs)(v.Z,{component:"span",variant:"subtitle1",color:"inherit",sx:{position:"relative",p:4,pt:2,pb:function(e){return"calc(".concat(e.spacing(1)," + 6px)")}},children:[e.title,(0,V.jsx)(ha,{className:"MuiImageMarked-root"})]})]})]},e.title)}))}),(0,V.jsx)(Ct,{size:"md",fullWidth:!0,show:n,Content:(0,V.jsx)(dn.J9,{initialValues:xn.initialValues,onSubmit:function(e,t){T((0,Pe.$o)(e)),t.resetForm()},validationSchema:xn.schema[0],children:(0,V.jsx)(fa,{createPartner:n})}),onClose:function(){a(!1)}}),(0,V.jsx)(ye.Z,{show:"loading"===I.getPartnersStatus})]})}var ga=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,j.TH)(),u=Ie(),m=u.isSuperAdmin,h=u.isDriverAdmin;return(0,r.useEffect)((function(){m&&c(Ki),h&&c(Ki.filter((function(e){return"Vehicles"===e.name})))}),[m,h]),(0,r.useEffect)((function(){if(d.state){var e=d.state;a(e.driver)}}),[d.state]),(0,V.jsx)(W.Z,{direction:"column",spacing:5,divider:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(K.Z,{sx:{p:3},children:(0,V.jsx)(ot.Provider,{value:{driver:n,setDriver:a},children:(0,V.jsx)(Ke,{tabMenus:l})})})})};function ja(){var e,t,n=(0,r.useContext)(Is).setDriver,a=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)([]),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(),f=(0,i.Z)(x,2),p=f[0],v=f[1],Z=(0,r.useState)(),g=(0,i.Z)(Z,2),j=g[0],b=g[1],S=(0,r.useState)(),A=(0,i.Z)(S,2),C=A[0],P=A[1],k=(0,r.useState)([{field:"id",sort:"asc"}]),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,w.Z)((function(e){return e.rideShareReducer})),T=(0,y.Z)();return(0,r.useEffect)((function(){return function(){T((0,He.dI)())}}),[T]),(0,r.useEffect)((function(){"idle"===I.getDriversStatus&&T((0,we.M3)())}),[I.getDriversStatus,T]),(0,r.useEffect)((function(){"loading"===I.getDriversStatus&&c(!0)}),[I.getDriversStatus,T]),(0,r.useEffect)((function(){"completed"===I.getDriversStatus&&(c(!1),h(I.drivers))}),[I.drivers,I.getDriversStatus]),(0,r.useEffect)((function(){"failed"===I.getDriversStatus&&(c(!1),I.getDriversError&&b({message:I.getDriversError}))}),[I.getDriversError,I.getDriversStatus]),(0,r.useEffect)((function(){"completed"===I.deleteDriverStatus&&(c(!1),P({message:I.deleteDriverSuccess}))}),[I.drivers,I.deleteDriverStatus,I.deleteDriverSuccess]),(0,r.useEffect)((function(){"failed"===I.deleteDriverStatus&&(c(!1),I.deleteDriverError&&b({message:I.deleteDriverError}))}),[I.deleteDriverError,I.deleteDriverStatus]),(0,r.useEffect)((function(){return function(){T((0,He.dI)()),T((0,He.OK)()),T((0,He.CV)())}}),[T]),{rows:m,sortModel:N,setSortModel:E,loading:l,showDelete:n,setShowDelete:a,error:j,setError:b,success:C,setSuccess:P,handleDelete:function(){p&&T((0,we.sz)(p)),a(!1)},onDelete:function(e){v(e.id),a(!0)}}}(),s=(0,j.s0)();return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Drivers"}),(0,V.jsx)(W.Z,{direction:"column",spacing:5,justifyContent:"center",alignItems:"center",divider:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0}),children:(0,V.jsx)(W.Z,{direction:"row",sx:{width:"100%"},children:(0,V.jsx)(U,{loading:a.loading,rows:a.rows,columns:ba({onDelete:a.onDelete,onView:function(e){n(e),s("/drivers/".concat(e.id),{state:{driver:e}})}}),showToolbar:!0,sortModel:a.sortModel,onSortModel:a.setSortModel,checkboxSelection:!0,disableSelectionOnClick:!0})})}),(0,V.jsx)(Ct,{fullWidth:!0,show:a.showDelete,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return a.setShowDelete(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:a.handleDelete,children:"Agree"})]}),onClose:function(){return a.setShowDelete(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==a.success,message:null===(e=a.success)||void 0===e?void 0:e.message,onClose:function(){return a.setSuccess(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==a.error,message:null===(t=a.error)||void 0===t?void 0:t.message,onClose:function(){return a.setError(void 0)}}),(0,V.jsx)(ye.Z,{show:a.loading})]})}var ba=function(e){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){return e?"".concat(e.row.firstName," ").concat(e.row.lastName):""}},{field:"enabled",headerName:"Status",headerAlign:"center",align:"center",type:"boolean",width:100,sortable:!0,renderCell:function(e){return e.row.enabled?(0,V.jsx)(b.Z,{label:"Active",size:"small",color:"success"}):(0,V.jsx)(b.Z,{label:"Inactive",size:"small",color:"warning"})}},{field:"email",headerName:"Email",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){return e?e.value:""}},{field:"phone",headerName:"Phone Number",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;!t||P()(t).format("LLL")},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueGetter:function(e){var t=e.value;!t||P()(t).format("LLL")},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(t){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){return e.onView(t.row)},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(Bn.Z,{sx:{color:"orangered"}}),onClick:function(){return e.onDelete(t.row)},label:"View",showInMenu:!1},0)]}}]},Sa=n(16205),wa=n(31009),ya=n(38996),Aa=n(73974),Ca=n(76278),Pa=n(77988),ka=n(36949);var Da=n(82977),Na=(0,$r.ZP)("div")((function(e){var t=e.theme;return(0,x.Z)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar)})),Ea=function(e){return{width:o.pG,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},Ia=function(e){return(0,un.Z)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(8)," + 1px)")})},Ta=(0,$r.ZP)(Aa.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,x.Z)((0,x.Z)({width:o.pG,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&(0,x.Z)((0,x.Z)({},Ea(t)),{},{"& .MuiDrawer-paper":Ea(t)})),!n&&(0,x.Z)((0,x.Z)({},Ia(t)),{},{"& .MuiDrawer-paper":Ia(t)}))}));var qa=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1];(0,r.useState)();var s=(0,r.useContext)(Is),o=s.openSideNav,l=s.setOpenSideNav,c=Ie(),d=(0,j.s0)(),u=(0,j.TH)(),m=(0,Ve.Z)(),h=function(){var e=(0,w.Z)((function(e){return e.authenticationReducer})),t=(0,y.Z)(),n=(0,j.s0)();return(0,r.useEffect)((function(){"completed"===e.signOutStatus&&(sessionStorage.clear(),n("/")),t((0,ka.ov)())}),[e.signOutStatus,t,n]),{handleLogout:function(){return t((0,Pa.NH)())}}}();return(0,r.useEffect)((function(){c.isSuperAdmin&&a(Da.Y.filter((function(e){return"all"===e.tag||"super"===e.tag||"drivers"===e.tag||"Estimates"===e.name||"Invoices"===e.name}))),c.isTechAdmin&&a(Da.Y.filter((function(e){return"techs"===e.tag||"Invoices"===e.name}))),c.isDriverAdmin&&a(Da.Y.filter((function(e){return"all"===e.tag||"drivers"===e.tag})))}),[c.isDriverAdmin,c.isSuperAdmin,c.isTechAdmin]),(0,V.jsxs)(Ta,{variant:"permanent",open:o,children:[(0,V.jsx)(Na,{children:(0,V.jsx)(Z.Z,{onClick:function(){l(!1)},children:"rtl"===m.direction?(0,V.jsx)(ya.Z,{}):(0,V.jsx)(wa.Z,{})})}),(0,V.jsx)(z.Z,{}),(0,V.jsx)(Et.Z,{children:n.map((function(e,t){return(0,V.jsx)(It.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,V.jsxs)(Ca.Z,{onClick:function(){d(e.path)},selected:e.path===u.pathname,sx:{minHeight:48,justifyContent:o?"initial":"center",px:2.5},children:[(0,V.jsx)(hr.Z,{sx:{minWidth:0,mr:o?3:"auto",justifyContent:"center"},children:(0,V.jsx)(e.Icon,{})}),(0,V.jsx)(qt.Z,{primary:e.name,sx:{opacity:o?1:0}})]})},t)}))}),(0,V.jsx)(z.Z,{}),(0,V.jsx)(Et.Z,{children:["Logout"].map((function(e){return(0,V.jsx)(It.ZP,{disablePadding:!0,sx:{display:"block"},children:(0,V.jsxs)(Ca.Z,{onClick:h.handleLogout,sx:{minHeight:48,justifyContent:o?"initial":"center",px:2.5},children:[(0,V.jsx)(hr.Z,{sx:{minWidth:0,mr:o?3:"auto",justifyContent:"center"},children:(0,V.jsx)(Sa.Z,{})}),(0,V.jsx)(qt.Z,{primary:e,sx:{opacity:o?1:0}})]})},e)}))})]})},La=(0,$r.ZP)(bt.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,x.Z)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:o.pG,width:"calc(100% - ".concat(o.pG,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),Va=n(60092),Ma={fields:{checkList:{name:"checkList",label:"Check List*",error:{invalid:"Check List name is invalid",require:"Check List name is required"}},partners:{name:"partners",label:"Partner*",error:{invalid:"Partner is invalid",require:"Partner is required"}},description:{name:"description",label:"Description*",error:{invalid:"Description is invalid",require:"Description is required"}},sections:{name:"sections",label:"Section Title*",error:{invalid:"Section Title is invalid",require:"Section Title is required"}},questions:{name:"questions",label:"Question*",error:{invalid:"Question is invalid",require:"Question is required"}},answers:{name:"answers",label:"Answer*",error:{invalid:"Answer is invalid",require:"Answer is required"}}},initialValues:{checkList:"",partners:[],description:""},schema:mn.Ry().shape({checkList:mn.Z_().required().label("Check List name"),description:mn.Z_().required().label("Check List Description"),partners:mn.IX(mn.Z_()).required().label("Partners")})},Fa=Ma.fields;function Ua(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),a=n[0],s=n[1],l=(0,dn.u6)(),c=l.handleChange,d=l.values,u=l.resetForm,m=(0,r.useContext)(Oa),h=m.partners,x=m.showCreate,f=m.showEdit;return(0,r.useEffect)((function(){x&&f||u()}),[f,x,u]),(0,r.useEffect)((function(){if(h.length){var e=h.filter((function(e){return e.categories.some((function(e){return e.name===o.bX}))}));s(e.map((function(e){return{label:e.name,value:"".concat(e.id)}})))}}),[h]),(0,V.jsx)(dn.l0,{children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(fn.Z,{onChange:c,value:d.checkList,name:Fa.checkList.name,label:Fa.checkList.label})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(On.Z,{onChange:c,value:d.partners,name:Fa.partners.name,label:Fa.partners.label,multiple:!0,fullWidth:!0,data:a})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(fn.Z,{multiline:!0,rows:2,onChange:c,value:d.description,name:Fa.description.name,label:Fa.description.label,data:a})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(pn.Z,{type:"submit",loading:e.isSubmitting,fullWidth:!0,endIcon:(0,V.jsx)(bi.Z,{}),variant:"contained",color:"secondary",size:"large",children:"Submit"})})]})})}var Ba="data:image/png;base64,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";var Ra=function(e){return(0,V.jsxs)(Vt.Z,{sx:{width:"100%"},children:[(0,V.jsxs)(_r.Z,{onClick:e.onNavigate,children:[(0,V.jsx)(Mt.Z,{component:"img",sx:{width:"30%"},image:e.imgUrl,alt:"check-list-".concat(e.index)}),(0,V.jsx)(Ft.Z,{children:(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"h5",component:"div",children:e.title})})]}),(0,V.jsxs)(Ut.Z,{children:[(0,V.jsx)(Z.Z,{onClick:e.onEdit,size:"small",color:"primary",children:(0,V.jsx)(fi.Z,{})}),(0,V.jsx)(Z.Z,{onClick:e.onDelete,size:"small",color:"error",children:(0,V.jsx)(Bn.Z,{})})]})]})},Oa=(0,r.createContext)(null);var Wa=function(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),h=m[0],p=m[1],v=(0,r.useState)(!1),Z=(0,i.Z)(v,2),g=Z[0],b=Z[1],S=(0,r.useState)([]),A=(0,i.Z)(S,2),C=A[0],P=A[1],k=(0,r.useState)([]),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,r.useState)(),F=(0,i.Z)(M,2),U=F[0],B=F[1],R=(0,r.useState)(),O=(0,i.Z)(R,2),W=O[0],z=O[1],G=(0,r.useState)(Ma.initialValues),J=(0,i.Z)(G,2),H=J[0],Y=J[1],K=(0,y.Z)(),X=(0,w.Z)((function(e){return e.partnerReducer})),_=(0,w.Z)((function(e){return e.checkListReducer})),$=(0,j.s0)();return(0,r.useEffect)((function(){"idle"===X.getPartnersStatus&&K((0,Pe.rR)())}),[K,X.getPartnersStatus]),(0,r.useEffect)((function(){"idle"===_.getCheckListsStatus&&K((0,an.un)())}),[K,_.getCheckListsStatus]),(0,r.useEffect)((function(){"completed"===X.getPartnersStatus&&P(X.partners)}),[X.getPartnersStatus,X.partners]),(0,r.useEffect)((function(){"completed"===_.getCheckListsStatus&&E(_.checkLists.map((function(e){return{id:e.id,url:Ba,title:e.name,width:"33.33%"}})))}),[_.getCheckListsStatus,_.checkLists]),(0,r.useEffect)((function(){if("completed"===_.createCheckListStatus){var e=_.checkLists;e.length&&E(e.map((function(e){return{id:e.id,url:Ba,title:e.name,width:"33.33%"}}))),a(!1),L({message:_.createCheckListSuccess}),K((0,Ge.CO)()),K((0,Ge.S4)())}}),[_.createCheckListStatus,_.checkLists,_.createCheckListSuccess,K]),(0,r.useEffect)((function(){if("completed"===_.updateCheckListStatus){var e=_.checkLists;e.length&&E(e.map((function(e){return{id:e.id,url:Ba,title:e.name,width:"33.33%"}}))),d(!1),L({message:_.updateCheckListSuccess}),K((0,Ge.uR)()),K((0,Ge.S4)())}}),[_.updateCheckListStatus,_.checkLists,_.updateCheckListSuccess,K]),(0,r.useEffect)((function(){"failed"===_.createCheckListStatus&&(a(!1),_.createCheckListError&&B({message:_.createCheckListError})),K((0,Ge.CO)()),K((0,Ge.S4)())}),[_.createCheckListStatus,_.createCheckListError,K]),(0,r.useEffect)((function(){"failed"===_.updateCheckListStatus&&(d(!1),_.updateCheckListError&&B({message:_.updateCheckListError})),K((0,Ge.CO)()),K((0,Ge.S4)())}),[_.updateCheckListStatus,_.updateCheckListError,K]),(0,r.useEffect)((function(){"failed"===_.deleteCheckListStatus&&(d(!1),_.deleteCheckListError&&B({message:_.deleteCheckListError})),K((0,Ge.CO)()),K((0,Ge.S4)())}),[_.deleteCheckListStatus,_.deleteCheckListError,K]),(0,r.useEffect)((function(){return function(){K((0,Ge.CO)()),K((0,Ge.S4)())}}),[K]),(0,V.jsxs)(Oa.Provider,{value:{showCreate:n,setShowCreate:a,showEdit:c,setShowEdit:d,showDelete:h,setShowDelete:p,showView:g,setShowView:b,partners:C,setPartners:P},children:[(0,V.jsx)(f.Z,{mb:3,children:(0,V.jsx)(Le.Z,{onClick:function(){return a(!0)},variant:"outlined",color:"secondary",children:"Create CheckList"})}),(0,V.jsx)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:N.map((function(e){return(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:3,children:(0,V.jsx)(Ra,{onEdit:function(){return function(e){var t=_.checkLists.find((function(t){return t.id===e}));if(t){var n=t.partners.map((function(e){return"".concat(e.id)}));z(e),Y((function(e){return(0,x.Z)((0,x.Z)({},e),{},{checkList:t.name?t.name:"",description:t.description?t.description:"",partners:n})})),d(!0)}}(e.id)},onDelete:function(){return t=e.id,z(t),void p(!0);var t},onNavigate:function(){return $("/checkLists/".concat(e.id),{state:{checkLists:_.checkLists,checkListId:e.id}})},title:e.title,imgUrl:e.url,index:e.id})},e.id)}))}),(0,V.jsx)(Ct,{fullWidth:!0,size:"sm",show:n,Content:(0,V.jsx)(dn.J9,{initialValues:H,onSubmit:function(e){K((0,an.mM)(e))},validationSchema:Ma.schema,children:(0,V.jsx)(Ua,{isSubmitting:"loading"===_.createCheckListStatus})}),onClose:function(){return a(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"sm",show:c,Content:(0,V.jsx)(dn.J9,{initialValues:H,onSubmit:function(e){K((0,an._8)({data:e,id:W}))},validationSchema:Ma.schema,enableReinitialize:!0,children:(0,V.jsx)(Ua,{isSubmitting:"loading"===_.updateCheckListStatus})}),onClose:function(){return d(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==q,message:null===q||void 0===q?void 0:q.message,onClose:function(){return L(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==U,message:null===U||void 0===U?void 0:U.message,onClose:function(){return B(void 0)}}),(0,V.jsx)(Ct,{fullWidth:!0,show:h,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return p(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:function(){W&&K((0,an.$C)(W)),p(!1)},children:"Agree"})]}),onClose:function(){return p(!1)}}),(0,V.jsx)(ye.Z,{show:"loading"===_.getCheckListsStatus}),(0,V.jsx)(ye.Z,{show:"loading"===_.deleteCheckListStatus})]})},za=n(2199),Ga=n(54261),Ja={fields:{sections:{name:"sections",label:"Section Title*",error:{invalid:"Section Title is invalid",require:"Section Title is required"}},questions:{name:"questions",label:"Question*",error:{invalid:"Question is invalid",require:"Question is required"}},answers:{name:"answers",label:"Answer*",error:{invalid:"Answer is invalid",require:"Answer is required"}}},initialValues:{sections:[{id:(0,Ga.Z)(),title:"",questions:[{id:(0,Ga.Z)(),answers:[{id:(0,Ga.Z)(),answer:"",weight:"",color:""}],media:!1,note:!1,question:""}]}]},schema:mn.Ry().shape({checkList:mn.Z_().required().label("Check List name"),partner:mn.Z_().required().label("Partner")})},Ha=n(48656),Ya=Ja.initialValues,Qa=Ja.fields;function Ka(e){var t=(0,dn.u6)(),n=t.values,i=t.setFieldValue,a=t.handleChange,s=(0,r.useMemo)((function(){return 0===n.sections.length}),[n]);return(0,V.jsx)(dn.l0,{children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:3},children:[(0,V.jsx)(dn.F2,{name:"sections",render:function(e){return n.sections&&n.sections.map((function(t,s){return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Q.ZP,{item:!0,xs:8,children:(0,V.jsx)(Ht.Z,{size:"small",label:"Section ".concat(s+1),fullWidth:!0,name:"sections.".concat(s,".title"),value:n.sections[s].title,onChange:a})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)(za.Z,{fullWidth:!0,children:[(0,V.jsx)(Le.Z,{onClick:function(){return e.remove(s)},variant:"contained",color:"error",sx:{fontSize:11},endIcon:(0,V.jsx)(Bn.Z,{}),children:"Remove Section"}),(0,V.jsx)(Le.Z,{onClick:function(){return function(e){e.push(Ya.sections[0])}(e)},variant:"contained",color:"success",sx:{fontSize:11},endIcon:(0,V.jsx)(Sn.Z,{}),children:"Add Section"})]})}),t.questions&&t.questions.map((function(e,t){return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Q.ZP,{item:!0,xs:!0}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(Ht.Z,{size:"small",label:"Question ".concat(t+1),fullWidth:!0,value:n.sections[s].questions[t].question,name:"sections.".concat(s,".questions.").concat(t,".question"),onChange:a})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,container:!0,justifyContent:"space-around",children:[(0,V.jsx)(ti.Z,{label:"Media",control:(0,V.jsx)(Si.Z,{size:"small",checked:n.sections[s].questions[t].media,name:"sections.".concat(s,".questions.").concat(t,".media"),onChange:a})}),(0,V.jsx)(ti.Z,{label:"Note",control:(0,V.jsx)(Si.Z,{size:"small",checked:n.sections[s].questions[t].note,name:"sections.".concat(s,".questions.").concat(t,".note"),onChange:a})})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)(za.Z,{fullWidth:!0,children:[(0,V.jsx)(Le.Z,{onClick:function(){return function(e,t){var r=(0,Wt.Z)(n.sections);r[t].questions.splice(e,1),i(Qa.sections.name,r)}(t,s)},variant:"contained",color:"error",sx:{fontSize:11},endIcon:(0,V.jsx)(Bn.Z,{}),children:"Remove Question"}),(0,V.jsx)(Le.Z,{onClick:function(){return function(e,t){var r=(0,Wt.Z)(n.sections);r[t].questions.push({id:(0,Ga.Z)(),answers:[{id:(0,Ga.Z)(),answer:"",weight:"",color:""}],media:!1,note:!1,question:""}),i(Qa.sections.name,r)}(0,s)},variant:"contained",color:"success",sx:{fontSize:11},endIcon:(0,V.jsx)(Sn.Z,{}),children:"Add Question"})]})}),e.answers&&e.answers.map((function(e,o){return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ht.Z,{size:"small",label:"Answer ".concat(o+1),fullWidth:!0,name:"sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".answer"),value:n.sections[s].questions[t].answers[o].answer,onChange:a})}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ht.Z,{size:"small",label:"Weight ".concat(o+1),fullWidth:!0,name:"sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".weight"),value:n.sections[s].questions[t].answers[o].weight,onChange:a})}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ha.O,{size:"small",label:"Color ".concat(o+1),fullWidth:!0,format:"hex",name:"sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".color"),value:n.sections[s].questions[t].answers[o].color,onChange:function(e){i("sections.".concat(s,".questions.").concat(t,".answers.").concat(o,".color"),e)}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:4,alignSelf:"center",children:(0,V.jsxs)(za.Z,{fullWidth:!0,children:[(0,V.jsx)(Le.Z,{onClick:function(){return function(e,t,r){var a=(0,Wt.Z)(n.sections);a[r].questions[t].answers.splice(e,1),i(Qa.sections.name,a)}(o,t,s)},variant:"contained",color:"error",sx:{fontSize:11},endIcon:(0,V.jsx)(Bn.Z,{}),children:"Remove Answer"}),(0,V.jsx)(Le.Z,{onClick:function(){return function(e,t,r){var a=(0,Wt.Z)(n.sections);a[r].questions[t].answers.push({id:(0,Ga.Z)(),answer:"",weight:"",color:""}),i(Qa.sections.name,a)}(0,t,s)},variant:"contained",color:"success",sx:{fontSize:11},endIcon:(0,V.jsx)(Sn.Z,{}),children:"Add Answer"})]})})]},o)}))]},t)})),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(z.Z,{orientation:"horizontal"})})]},s)}))}}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:s?(0,V.jsx)(Le.Z,{onClick:function(){return i(Qa.sections.name,Ya.sections)},type:"button",variant:"outlined",color:"success",size:"small",endIcon:(0,V.jsx)(Sn.Z,{}),children:"Add Section"}):(0,V.jsx)(pn.Z,{loading:e.isSubmitting,type:"submit",variant:"contained",color:"secondary",size:"small",endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"})})]})})}var Xa=(0,r.createContext)(null),_a=Ja.initialValues;var $a=function(){var e=(0,r.useState)(),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)([]),l=(0,i.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],f=m[1],p=(0,r.useState)(),v=(0,i.Z)(p,2),Z=v[0],g=v[1],b=(0,r.useState)(),S=(0,i.Z)(b,2),A=S[0],C=S[1],P=(0,r.useState)(),k=(0,i.Z)(P,2),D=k[0],N=k[1],E=(0,r.useState)(_a),I=(0,i.Z)(E,2),T=I[0],q=I[1],L=(0,w.Z)((function(e){return e.checkListReducer})),M=(0,y.Z)(),F=(0,j.TH)();return(0,r.useEffect)((function(){var e=F.state;e?(a(e.checkListId),d(e.checkLists),f(e.checkLists.find((function(t){return t.id==e.checkListId}))),M((0,an.IY)(e.checkListId))):N({message:o.X3.internalError})}),[F.state,M]),(0,r.useEffect)((function(){if("completed"===L.getCheckListStatus&&L.checkList){var e=L.checkList;q((function(t){return(0,x.Z)((0,x.Z)({},t),{},{sections:JSON.parse(JSON.stringify(e.sections))})}))}}),[L.getCheckListStatus,L.checkList]),(0,r.useEffect)((function(){if("completed"===L.updateJobCheckListStatus){if(L.checkList){var e=L.checkList;q((function(t){return(0,x.Z)((0,x.Z)({},t),{},{sections:JSON.parse(JSON.stringify(e.sections))})}))}C({message:L.updateJobCheckListSuccess})}}),[L.updateJobCheckListStatus,L.checkList,L.updateJobCheckListSuccess]),(0,r.useEffect)((function(){"failed"===L.updateJobCheckListStatus&&L.updateJobCheckListError&&g({message:L.updateJobCheckListError})}),[L.updateJobCheckListStatus,L.updateJobCheckListError]),(0,r.useEffect)((function(){return function(){M((0,Ge.S4)()),M((0,Ge.a4)()),M((0,Ge.aS)()),q(_a)}}),[M]),D?(0,V.jsx)(j.Fg,{to:{pathname:"/error"},state:{message:D.message}}):(0,V.jsxs)(Xa.Provider,{value:{checkListId:n,setCheckListId:a,checkLists:c,setCheckLists:d},children:[h?(0,V.jsxs)(W.Z,{spacing:3,children:[(0,V.jsx)("h1",{children:h.name}),(0,V.jsx)(dn.J9,{initialValues:T,onSubmit:function(e){if(void 0===n)return g({message:o.X3.internalError});var t=JSON.stringify(e);M((0,an.uK)({id:n,data:t}))},enableReinitialize:!0,children:(0,V.jsx)(Ka,{isSubmitting:"loading"===L.updateJobCheckListStatus})})]}):(0,V.jsx)(ye.Z,{show:void 0===h}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==Z,message:null===Z||void 0===Z?void 0:Z.message,onClose:function(){return g(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==A,message:null===A||void 0===A?void 0:A.message,onClose:function(){return C(void 0)}})]})},es=n(37762),ts=n(9585),ns="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGNSURBVHgBjZJPTsJQEMZnpmhcaMIBBGGDLPEGcAMqupaeQDmBcAL1BODaEPQEcANZGcCFDXqABldA+8b3+gcq/RO+pE06M/m9730dBF/l/rzJiDfAWABkUzA/fzbyvX36qF7ng/kDCLyDiPhx2si3Sv2fLgI3I12C9kzPddA9AbALCWKGMSJUkvoooEbM0mKK0gDuIRrcE8QOoek9e0hmRHLY2q0LEB0UbPyblddKoGRJds3dskbOaHKdGwHDKHA2u8pdbL/DpmVm5Zfvqkx5uOEC9tiBJ9ScOgkaqZ4ANtYL5/XoOFMJz3qu2cA4g2X5Sxm4vlzYxcOTzJA0WxdOZrD6tWumUbSiZnyV+nO5C1T1/RSCUw6IxrYjCog4kCVrkyE6b9PLM3e3KICsyGkxshUA3Kbc0A/9dIyAt34pq/rMbC1RtCNO3GsMvgosDoZhkJxQAVdD5k2kdW2iF81YSCIoBRAL2YIy7579dIASxUHUoEZYAzdIV5ZGoMcBEiFKXqDcUpsqgzTUd9LsH7I1x80VnVYTAAAAAElFTkSuQmCC",is=n(26284),rs=n(46935),as=n(41385),ss=n(58066),os=n(61146),ls=n(25498),cs=n.n(ls);function ds(e){var t=e.job,n=e.computeScore,i=e.hidden,a=e.getQuestionAnswer;return(0,V.jsx)(f.Z,{id:"_report",sx:{mt:10,maxWidth:768},hidden:i,children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},direction:"column",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsxs)(K.Z,{sx:{p:2},elevation:7,children:[(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:7,children:"Logo"}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:"Programme"}),(0,V.jsxs)(Q.ZP,{item:!0,xs:7,children:[(0,V.jsxs)(v.Z,{variant:"body1",component:"div",gutterBottom:!0,children:[t.vehicle.modelYear," ",t.vehicle.make," ",t.vehicle.model]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["VIN: ",t.vehicle.vin]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["License Plate: ",t.vehicle.plateNumber]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["Mileage: ",t.mileageValue,"/",t.mileageUnit]})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{width:"100%",height:"100%",crossOrigin:"anonymous",alt:"",src:"".concat(ve.Z.api.driverBaseURL,"/").concat(t.vehicle.imageUrl)})})})]}),(0,V.jsx)(K.Z,{sx:{mt:4,p:2,bgcolor:"#FFEAAB",color:function(e){return"dark"===e.palette.mode?"#263238":"#000000"}},children:(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsx)(gt.Z,{sx:{width:24,height:24},src:ns})}),(0,V.jsx)(Q.ZP,{item:!0,xs:6,alignSelf:"center",children:(0,V.jsx)(v.Z,{variant:"subtitle2",component:"p",children:t.checkList.description})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(v.Z,{variant:"h4",children:[n(t.checkList.sections),"%"]})})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:2}})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:3,alignSelf:"center",children:(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{src:"".concat(ve.Z.api.baseURL,"/").concat(t.partner.logo),crossOrigin:"anonymous",alt:"logo",width:"100%"})})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.ZP,{disablePadding:!0,children:(0,V.jsxs)(Ca.Z,{children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(rs.Z,{})}),(0,V.jsx)(qt.Z,{primary:P()(t.jobDate).format("LT")})]})}),(0,V.jsx)(It.ZP,{disablePadding:!0,children:(0,V.jsxs)(Ca.Z,{children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(as.Z,{})}),(0,V.jsx)(qt.Z,{primary:P()(t.jobDate).format("LL")})]})}),(0,V.jsx)(It.ZP,{disablePadding:!0,children:(0,V.jsxs)(Ca.Z,{children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(ss.Z,{})}),(0,V.jsx)(qt.Z,{primary:t.partner.contact.address})]})})]})})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{my:2}})}),t.vehicle?(0,V.jsxs)(Q.ZP,{item:!0,xs:12,container:!0,spacing:1,children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{alt:"front",src:"".concat(ve.Z.api.baseURL,"/").concat(t.frontImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Front"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{alt:"rear",src:"".concat(ve.Z.api.baseURL,"/").concat(t.rearImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Rear"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{alt:"right",src:"".concat(ve.Z.api.baseURL,"/").concat(t.rightSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Right"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{alt:"left",src:"".concat(ve.Z.api.baseURL,"/").concat(t.leftSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Left"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{alt:"engine bay",src:"".concat(ve.Z.api.baseURL,"/").concat(t.engineBayImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Engine Bay"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{children:(0,V.jsx)("img",{alt:"instrument cluster",src:"".concat(ve.Z.api.baseURL,"/").concat(t.instrumentClusterImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Instrument Cluster"})]})]}):null]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:8,container:!0,spacing:.5,children:t.checkList.sections.map((function(e,t){return(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsxs)(Vt.Z,{sx:{height:"100%"},children:[(0,V.jsx)(ts.Z,{title:e.title}),e.questions.map((function(e,t){var n=a(e),i=n.color,s=n.answer;return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Ft.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)(W.Z,{children:[(0,V.jsx)(v.Z,{children:e.question}),e.note&&(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",sx:{color:"#F80000"},children:e.text}),(0,V.jsx)(W.Z,{direction:"row",children:e.images?e.images.filter((function(t){return t.questionId===e.id})).map((function(e,t){return(0,V.jsx)(f.Z,{sx:{cursor:"pointer"},children:(0,V.jsx)("img",{alt:e.title,src:"".concat(ve.Z.api.baseURL,"/").concat(e.url),crossOrigin:"anonymous",width:"25%"})},t)})):null})]}),(0,V.jsx)(b.Z,{label:s,sx:{bgcolor:i,color:"white"}})]}),(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal"})]},t)}))]})},t)}))})]})})}var us=function(e){var t,n=0,i=[],r=(0,es.Z)(e);try{for(r.s();!(t=r.n()).done;){var a,s=t.value.questions,o=(0,es.Z)(s);try{for(o.s();!(a=o.n()).done;){var l,c=a.value.answers,d=(0,es.Z)(c);try{for(d.s();!(l=d.n()).done;){var u=l.value;u.selected&&(n+=+u.weight,i.push(u))}}catch(m){d.e(m)}finally{d.f()}}}catch(m){o.e(m)}finally{o.f()}}}catch(m){r.e(m)}finally{r.f()}return(100*n/i.length).toFixed(2)},ms=function(e){var t=e.answers.filter((function(e){return e.selected}));return{color:t[0].color,answer:t[0].answer}};var hs=function(){var e=(0,r.useState)(null),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(!1),u=(0,i.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)(),p=(0,i.Z)(x,2),Z=p[0],g=p[1],S=(0,r.useState)(),A=(0,i.Z)(S,2),C=A[0],k=A[1],D=(0,r.useState)(),N=(0,i.Z)(D,2),E=N[0],I=N[1],T=(0,w.Z)((function(e){return e.jobReducer})),q=(0,y.Z)(),L=(0,r.useRef)(null),M=(0,j.TH)(),F=Ie(),U=F.isSuperAdmin,B=F.isTechAdmin;(0,r.useEffect)((function(){if(M.state){var e=M.state.job.id;q((0,Rt.nF)(e))}}),[q,M.state]),(0,r.useEffect)((function(){if("completed"===T.getJobStatus){var e=T.job;if(e&&(a(e),e.checkList)){var t=e.checkList;c(t.approvedByGarageAdmin)}}}),[q,T.getJobStatus,T.job]),(0,r.useEffect)((function(){"completed"===T.approveJobCheckListStatus&&I({message:T.approveJobCheckListSuccess})}),[T.approveJobCheckListStatus,T.approveJobCheckListSuccess]),(0,r.useEffect)((function(){"failed"===T.approveJobCheckListStatus&&T.approveJobCheckListError&&k({message:T.approveJobCheckListError})}),[T.approveJobCheckListStatus,T.approveJobCheckListError]),(0,r.useEffect)((function(){return function(){q((0,rn.C_)())}}),[q]);var R=(0,os.useReactToPrint)({content:function(){return L.current}}),O=function(){var e=(0,ht.Z)((0,mt.Z)().mark((function e(t){var n,i;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.Z.get(t,{responseType:"blob"});case 2:n=e.sent,(i=new FileReader).readAsDataURL(n.data),i.onloadend=function(){var e=i.result;g(e)},setTimeout((function(){return h(!0)}),500);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=(0,r.useCallback)((0,ht.Z)((0,mt.Z)().mark((function e(){var t,i,r,a,s,o,l;return(0,mt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.getElementById("_report"))){e.next=14;break}return t.style.display="block",i=P()().utc(!1),r="report",e.next=7,cs()(t,{allowTaint:!0,useCORS:!0});case 7:a=e.sent,t.style.display="none",s=a.toDataURL("image/png",1),n&&n.createdAt&&(i=P()(n.createdAt).utc(!1),r="job_".concat(n.id,"_").concat(i.year()).concat(i.month()+1).concat(i.date()).concat(i.hours()).concat(i.minutes(),".png")),o=Se(s),l=new File([o],r,{type:"image/png"}),q((0,Rt.LT)({file:l,jobId:null===n||void 0===n?void 0:n.id}));case 14:case"end":return e.stop()}}),e)}))),[q,n]);return(0,r.useEffect)((function(){var e=setTimeout((function(){n&&!n.reportFileUrl&&G()}),1e3);return function(){clearTimeout(e)}}),[n,G]),(0,V.jsxs)(r.Fragment,{children:[n?(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Q.ZP,{container:!0,mb:1,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,hidden:!U,children:(0,V.jsx)(Le.Z,{onClick:function(){return R()},variant:"outlined",color:"error",endIcon:(0,V.jsx)(is.Z,{}),children:"Print"})}),(0,V.jsx)(Q.ZP,{item:!0,hidden:B&&n.checkList.approvedByGarageAdmin,children:(0,V.jsx)(ti.Z,{control:(0,V.jsx)(Si.Z,{checked:l,onChange:function(e,t){return function(e,t){c(t),q((0,Rt.lr)({jobId:e,approved:t}))}(n.id,t)}}),label:"Approve"})})]}),(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:.5,md:.5},columns:{xs:4,sm:8,md:12},ref:L,children:[(0,V.jsx)("style",{type:"text/css",media:"print",children:"               @page { size: portrait; }           "}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:4,children:(0,V.jsxs)(K.Z,{sx:{p:2},elevation:7,children:[(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:7,children:"Logo"}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:"Programme"}),(0,V.jsxs)(Q.ZP,{item:!0,xs:7,children:[(0,V.jsxs)(v.Z,{variant:"body1",component:"div",gutterBottom:!0,children:[n.vehicle.modelYear," ",n.vehicle.make," ",n.vehicle.model]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["VIN: ",n.vehicle.vin]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["License Plate: ",n.vehicle.plateNumber]}),(0,V.jsxs)(v.Z,{variant:"caption",component:"div",gutterBottom:!0,children:["Mileage: ",n.mileageValue,"/",n.mileageUnit]})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.driverBaseURL,"/").concat(n.vehicle.imageUrl))},children:(0,V.jsx)("img",{width:"100%",height:"100%",crossOrigin:"anonymous",alt:"",src:"".concat(ve.Z.api.driverBaseURL,"/").concat(n.vehicle.imageUrl)})})})]}),(0,V.jsx)(K.Z,{sx:{mt:4,p:2,bgcolor:"#FFEAAB",color:function(e){return"dark"===e.palette.mode?"#263238":"#000000"}},children:(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsx)(gt.Z,{sx:{width:24,height:24},src:ns})}),(0,V.jsx)(Q.ZP,{item:!0,xs:6,alignSelf:"center",children:(0,V.jsx)(v.Z,{variant:"subtitle2",component:"p",children:n.checkList.description})}),(0,V.jsx)(Q.ZP,{item:!0,children:(0,V.jsxs)(v.Z,{variant:"h4",children:[us(n.checkList.sections),"%"]})})]})}),(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{mt:4}}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:12,spacing:1,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:!0,alignSelf:"center",children:(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.partner.logo))},children:(0,V.jsx)("img",{src:"".concat(ve.Z.api.baseURL,"/").concat(n.partner.logo),crossOrigin:"anonymous",alt:"logo",width:"100%"})})}),(0,V.jsx)(Q.ZP,{item:!0,xs:9,children:(0,V.jsxs)(Et.Z,{children:[(0,V.jsx)(It.ZP,{disablePadding:!0,children:(0,V.jsxs)(Ca.Z,{children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(rs.Z,{})}),(0,V.jsx)(qt.Z,{primary:P()(n.jobDate).format("LT")})]})}),(0,V.jsx)(It.ZP,{disablePadding:!0,children:(0,V.jsxs)(Ca.Z,{children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(as.Z,{})}),(0,V.jsx)(qt.Z,{primary:P()(n.jobDate).format("LL")})]})}),(0,V.jsx)(It.ZP,{disablePadding:!0,children:(0,V.jsxs)(Ca.Z,{children:[(0,V.jsx)(hr.Z,{children:(0,V.jsx)(ss.Z,{})}),(0,V.jsx)(qt.Z,{primary:n.partner.contact.address})]})})]})})]}),(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal",sx:{mb:4}}),n.vehicle?(0,V.jsxs)(Q.ZP,{item:!0,xs:12,container:!0,spacing:1,children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.frontImageUrl))},children:(0,V.jsx)("img",{alt:"front",src:"".concat(ve.Z.api.baseURL,"/").concat(n.frontImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Front"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.rearImageUrl))},children:(0,V.jsx)("img",{alt:"rear",src:"".concat(ve.Z.api.baseURL,"/").concat(n.rearImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Rear"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.rightSideImageUrl))},children:(0,V.jsx)("img",{alt:"right",src:"".concat(ve.Z.api.baseURL,"/").concat(n.rightSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Right"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.leftSideImageUrl))},children:(0,V.jsx)("img",{alt:"left",src:"".concat(ve.Z.api.baseURL,"/").concat(n.leftSideImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Left"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.engineBayImageUrl))},children:(0,V.jsx)("img",{alt:"engine bay",src:"".concat(ve.Z.api.baseURL,"/").concat(n.engineBayImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Engine Bay"})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[(0,V.jsx)(Qr.Z,{onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(n.instrumentClusterImageUrl))},children:(0,V.jsx)("img",{alt:"instrument cluster",src:"".concat(ve.Z.api.baseURL,"/").concat(n.instrumentClusterImageUrl),crossOrigin:"anonymous",width:"100%"})}),(0,V.jsx)(v.Z,{variant:"caption",children:"Instrument Cluster"})]})]}):null]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:8,container:!0,spacing:.5,children:n.checkList.sections.map((function(e,t){return(0,V.jsx)(Q.ZP,{item:!0,xs:12,md:6,children:(0,V.jsxs)(Vt.Z,{sx:{height:"100%"},children:[(0,V.jsx)(ts.Z,{title:e.title}),e.questions.map((function(e,t){var n=ms(e),i=n.color,a=n.answer;return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(Ft.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)(W.Z,{children:[(0,V.jsx)(v.Z,{children:e.question}),e.note&&(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"caption",sx:{color:"#F80000"},children:e.text}),(0,V.jsx)(W.Z,{direction:"row",children:e.images?e.images.filter((function(t){return t.questionId===e.id})).map((function(e,t){return(0,V.jsx)(f.Z,{sx:{cursor:"pointer"},onClick:function(){return O("".concat(ve.Z.api.baseURL,"/").concat(e.url))},children:(0,V.jsx)("img",{alt:e.title,src:"".concat(ve.Z.api.baseURL,"/").concat(e.url),crossOrigin:"anonymous",width:"25%"})},t)})):null})]}),(0,V.jsx)(b.Z,{label:a,sx:{bgcolor:i,color:"white"}})]}),(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal"})]},t)}))]})},t)}))})]}),(0,V.jsx)(ds,{job:n,computeScore:us,getQuestionAnswer:ms,hidden:!0})]}):null,(0,V.jsx)(Ct,{show:m,title:"",size:"sm",fullWidth:!0,Content:(0,V.jsx)("img",{width:"100%",height:"100%",src:Z,alt:"Driver license",crossOrigin:"anonymous"}),onClose:function(){return h(!1)}}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==E,message:null===E||void 0===E?void 0:E.message,onClose:function(){return I(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==C,message:null===C||void 0===C?void 0:C.message,onClose:function(){return k(void 0)}}),(0,V.jsx)(ye.Z,{show:"loading"===T.approveJobCheckListStatus}),(0,V.jsx)(ye.Z,{show:"loading"===T.getJobStatus})]})},xs=(0,r.createContext)(null);var fs=function(){var e,t,n=(0,w.Z)((function(e){return e.estimateReducer})),a=(0,y.Z)(),s=(0,r.useState)([]),l=(0,i.Z)(s,2),c=(l[0],l[1]),d=Hi(),u=Ie().isTechAdmin,m=(0,j.s0)();(0,r.useEffect)((function(){var e=d.estimates;c(e)}),[d.estimates]);var h=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",sortable:!0,type:"string"},{field:"status",headerName:"Status",headerAlign:"center",align:"center",type:"string",width:100,sortable:!0,renderCell:function(e){return e.row.status===o.GM.sent?(0,V.jsx)(b.Z,{label:o.GM.sent,size:"small",color:"info"}):e.row.status===o.GM.draft?(0,V.jsx)(b.Z,{label:o.GM.draft,size:"small",color:"warning"}):e.row.status===o.GM.invoiced?(0,V.jsx)(b.Z,{label:o.GM.invoiced,size:"small",color:"success"}):null}},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){var t=e.row.rideShareDriver,n=e.row.customer;return t?"".concat(t.firstName," ").concat(t.lastName):"".concat(n.firstName," ").concat(n.lastName)}},{field:"phone",headerName:"Phone",headerAlign:"center",align:"center",type:"string",width:100,sortable:!0,valueGetter:function(e){var t=e.row.rideShareDriver,n=e.row.customer;return"".concat(t?t.phone:n.phone)}},{field:"model",headerName:"Vehicle",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){var t=e.row.vehicle;return t?"".concat(null===t||void 0===t?void 0:t.modelYear," ").concat(null===t||void 0===t?void 0:t.make," ").concat(null===t||void 0===t?void 0:t.model," (").concat(t.plateNumber,")"):"-"}},{field:"grandTotal",headerName:"Grand Total",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"depositAmount",headerName:"Deposit Amount",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0,sortingOrder:["desc"]},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(e){var t=e.row;return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){a((0,Gi.UD)()),m("/estimates/".concat(t.id),{state:{estimate:t}})},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{sx:{display:u?"block":"none"},icon:(0,V.jsx)(fi.Z,{sx:{color:"limegreen"}}),onClick:function(){return d.onEdit(t.id)},disabled:!u,label:"Edit",showInMenu:!1},1),(0,V.jsx)(k.u,{sx:{display:u?"block":"none"},icon:(0,V.jsx)(pi.Z,{sx:{color:"indianred"}}),onClick:function(){return d.onDelete(t.id)},label:"Delete",disabled:t.status===o.GM.invoiced,showInMenu:!1},2)]}}]}),[u,a,m,d]);return(0,r.useEffect)((function(){return function(){a((0,Ji.JA)()),a((0,Ji.HJ)()),a((0,Ji.Ys)()),a((0,Ji.B$)()),a((0,Ji.d9)())}}),[a]),(0,V.jsxs)(xs.Provider,{value:{driver:d.driver,setDriver:d.setDriver,estimates:d.estimates,setEstimates:d.setEstimates,showCreate:d.showCreate,setShowCreate:d.setShowCreate,showEdit:d.showEdit,setShowEdit:d.setShowEdit},children:[(0,V.jsxs)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Estimates"})}),(0,V.jsx)(Q.ZP,{item:!0,hidden:!u,children:(0,V.jsx)(Le.Z,{variant:"outlined",color:"success",size:"small",onClick:function(){return d.setShowCreate(!0)},children:"Generate"})})]}),(0,V.jsx)(Q.ZP,{container:!0,children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(U,{rows:d.estimates,columns:h,showToolbar:!0,loading:"loading"===n.getEstimatesStatus})})}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==d.success,message:null===(e=d.success)||void 0===e?void 0:e.message,onClose:function(){return d.setSuccess(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==d.error,message:null===(t=d.error)||void 0===t?void 0:t.message,onClose:function(){return d.setError(void 0)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"xl",show:d.showCreate,Content:(0,V.jsx)(dn.J9,{initialValues:d.initialValues,validationSchema:Ti.schema,validateOnChange:!0,onSubmit:function(e,t){d.save?d.handleSaveEstimate(e,t):d.handleCreateEstimate(e,t)},children:(0,V.jsx)(zi,{showCreate:d.showCreate,isPopUp:!0,setLabourTotal:d.setLabourTotal,setPartTotal:d.setPartTotal,setGrandTotal:d.setGrandTotal,labourTotal:d.labourTotal,partTotal:d.partTotal,grandTotal:d.grandTotal,isSubmitting:"loading"===n.createEstimateStatus||"loading"===n.saveEstimateStatus,setSave:d.setSave})}),onClose:function(){return d.setShowCreate(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,size:"xl",show:d.showEdit,Content:(0,V.jsx)(dn.J9,{initialValues:d.initialValues,validationSchema:Ti.schema,onSubmit:function(e,t){d.save&&d.handleUpdateEstimate(e,t),d.save||d.handleSendDraftEstimate(e,t)},enableReinitialize:!0,validateOnChange:!0,children:(0,V.jsx)(zi,{showEdit:d.showEdit,isPopUp:!0,setLabourTotal:d.setLabourTotal,setPartTotal:d.setPartTotal,setGrandTotal:d.setGrandTotal,labourTotal:d.labourTotal,partTotal:d.partTotal,grandTotal:d.grandTotal,isSubmitting:"loading"===n.updateEstimateStatus||"loading"===n.sendDraftEstimateStatus,setSave:d.setSave})}),onClose:function(){return d.setShowEdit(!1)}}),(0,V.jsx)(Ct,{fullWidth:!0,show:d.showDelete,Content:(0,V.jsx)(Te.Z,{children:o.X3.cancelText}),ActionComponent:(0,V.jsxs)(qe.Z,{children:[(0,V.jsx)(Le.Z,{onClick:function(){return d.setShowDelete(!1)},children:"Disagree"}),(0,V.jsx)(Le.Z,{onClick:d.handleDelete,children:"Agree"})]}),onClose:function(){return d.setShowDelete(!1)}}),(0,V.jsx)(ye.Z,{show:"loading"===n.deleteEstimateStatus})]})},ps="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFJSURBVHgBjVLLbYNAEGUXy9c4DZAtgTMCRCpIOkgJoQNDB6EDH3NLOggChLgFV5ClA3KL+OYNAglbWDDSandm33vzYIcpC+E4zqHrulc6R1HkL2HYHFxVldjtdk9937soHcYrCZEAtXC/38swDMuBaJrmN2NMn6sRCJsPEdm2rYfzy0U3xnJmWdYPzgXWCQQJcD6pzt00TaODIEYRMRHPcRw/KxsCDj8454LTN6DTnbIx0JV+XMlBKqFw2EoEfsByKPxOydaOWHLoiFwo20OAU1DHnDLDMB7WGMDoY9ecq6r6SQmewV0jAjtMU13XuSql/NM07R65K4SQRVGcl0i2bdP7ebAZpGn6PozcOJtfKJKVExT9LMvk7O5IY0gTlSTJ42B3rorH9eD/iGOJ/Y1q49zSHoDkTVh2bQkdxNV8XjhYDRKAA+fW/T9Pe6qWL2unGwAAAABJRU5ErkJggg==",vs=n(13962);var Zs=function(){var e,t,n,a,s,o,l=(0,r.useState)(),c=(0,i.Z)(l,2),d=c[0],u=c[1],m=(0,r.useState)(""),h=(0,i.Z)(m,2),x=h[0],f=h[1],p=(0,r.useState)([]),Z=(0,i.Z)(p,2),g=Z[0],b=Z[1],S=(0,r.useState)([]),w=(0,i.Z)(S,2),y=w[0],A=w[1],C=(0,r.useState)(),P=(0,i.Z)(C,2),k=P[0],D=P[1],N=(0,j.TH)();return(0,r.useEffect)((function(){if(N.state){var e=N.state;u(e.estimate)}}),[N]),(0,r.useEffect)((function(){if(d){var e=d.rideShareDriver,t=d.customer,n=d.parts,i=d.labours,r=e?"".concat(e.firstName," ").concat(e.lastName):"".concat(t.firstName," ").concat(t.lastName);f(Kt().words(r)),D(t.billingInformation),b(n),A(i)}}),[d]),d?(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Q.ZP,{children:(0,V.jsx)(Q.ZP,{children:(0,V.jsx)(vs.Z,{onClick:function(){return window.history.back()},style:{position:"absolute",cursor:"pointer"}})})}),(0,V.jsxs)(v.Z,{mb:3,textAlign:"center",display:"block",variant:"subtitle1",children:["#",d.code]}),(0,V.jsxs)(Q.ZP,{container:!0,my:3,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:"Billing Information"}),(0,V.jsxs)(W.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:x}),k?(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[(0,V.jsxs)(v.Z,{variant:"body2",gutterBottom:!0,children:[k.address," ",k.district," ",k.state]}),(0,V.jsx)(v.Z,{variant:"body2",gutterBottom:!0,children:k.phone})]}):(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:d.address})]})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)("img",{alt:"",width:"20%",crossOrigin:"anonymous",src:"".concat(ve.Z.api.baseURL,"/").concat(null===d||void 0===d||null===(e=d.partner)||void 0===e?void 0:e.logo)})}),(0,V.jsxs)(Q.ZP,{item:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:null===d||void 0===d?void 0:d.partner.name}),(0,V.jsxs)(W.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===d||void 0===d||null===(t=d.partner)||void 0===t?void 0:t.contact.address}),(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[null===d||void 0===d||null===(n=d.partner)||void 0===n||null===(a=n.contact)||void 0===a?void 0:a.district," ",null===d||void 0===d||null===(s=d.partner)||void 0===s||null===(o=s.contact)||void 0===o?void 0:o.state]}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===d||void 0===d?void 0:d.partner.phone}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===d||void 0===d?void 0:d.partner.email})]})]})]}),(0,V.jsx)(Q.ZP,{container:!0,children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})})}),d.vehicle?(0,V.jsxs)(Q.ZP,{container:!0,my:3,children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Vehicle"}),(0,V.jsxs)(v.Z,{children:[null===d||void 0===d?void 0:d.vehicle.modelYear," ",null===d||void 0===d?void 0:d.vehicle.make," ",null===d||void 0===d?void 0:d.vehicle.model]})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Reg. No"}),(0,V.jsx)(v.Z,{children:null===d||void 0===d?void 0:d.vehicle.plateNumber})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Mileage"}),(0,V.jsxs)(v.Z,{children:[null===d||void 0===d?void 0:d.vehicle.mileageValue," ",null===d||void 0===d?void 0:d.vehicle.mileageUnit]})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"VIN"}),(0,V.jsx)(v.Z,{children:null===d||void 0===d?void 0:d.vehicle.vin})]})]}):(0,V.jsx)(Q.ZP,{container:!0,my:3,children:(0,V.jsx)(v.Z,{gutterBottom:!0,children:"No Vehicle Info."})}),(0,V.jsx)(Q.ZP,{container:!0,children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})})}),(0,V.jsxs)(Q.ZP,{container:!0,my:3,sx:{pb:1.5},borderBottom:"3px solid",borderColor:function(e){return"dark"===e.palette.mode?"#676767":"#000000"},justifyContent:"center",alignItems:"center",columns:14,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(gt.Z,{src:ps,sx:{width:20,height:20}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Item Description"}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Warranty"}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Unit Cost x Qty"}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Amount"})]}),(0,V.jsxs)(Q.ZP,{container:!0,children:[g.map((function(e,t){var n=Ze(parseInt(e.amount));return(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:e.name}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,children:[e.warranty.warranty," ",e.warranty.interval]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,children:[Ze(+e.price)," x ",e.quantity.quantity," ",e.quantity.unit]}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:n})]},t)})),y.map((function(e,t){return(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:e.title}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"-"}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,children:[Ze(+e.cost)," x 1"]}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:Ze(+e.cost)})]},t)}))]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsxs)(Q.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["Subtotal: ",Ze(d.partsTotal+d.laboursTotal)]}),(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["VAT(7.5%):",Ze(parseFloat((null===d||void 0===d?void 0:d.tax)||0)+parseFloat((null===d||void 0===d?void 0:d.taxPart)||0))]})]})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["TOTAL: ",Ze(d.grandTotal)]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,fontStyle:"italic",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"},children:["Job Duration: ",d.jobDurationValue," ",d.jobDurationUnit]})})]})]}):(0,V.jsx)(Q.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Yt.Z,{severity:"warning",variant:"outlined",children:(0,V.jsx)(v.Z,{children:"You do not have any estimate. Please contact support"})})})})},gs=n(79493),js=n(96191),bs=n(86984),Ss="".concat("https://pdms.jiffixtech.com","/invoices");function ws(e,t,n,i,r,a,s){return{id:e,parts:t.parts,labours:t.labours,tax:t.tax,addressType:t.addressType,address:t.address,depositAmount:t.depositAmount,additionalDeposit:t.additionalDeposit,jobDurationValue:t.jobDuration.count,jobDurationUnit:t.jobDuration.interval,partsTotal:Math.round(n),laboursTotal:Math.round(i),grandTotal:Math.round(r),refundable:Math.round(a),dueAmount:Math.round(s)}}var ys=Ti.fields;function As(e){var t=(0,r.useState)(0),n=(0,i.Z)(t,2),a=n[0],s=n[1],o=(0,r.useState)(0),l=(0,i.Z)(o,2),c=l[0],d=l[1],u=(0,r.useState)(),m=(0,i.Z)(u,2),h=m[0],f=m[1],p=(0,r.useState)(),g=(0,i.Z)(p,2),j=g[0],b=g[1],S=(0,r.useState)(!1),A=(0,i.Z)(S,2),C=A[0],P=A[1],k=(0,r.useState)(!1),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,w.Z)((function(e){return e.invoiceReducer})),T=(0,y.Z)(),q=(0,dn.u6)(),L=q.values,M=q.handleChange,F=q.setFieldValue,U=q.resetForm,B=e.setGrandTotal,R=e.setPartTotal,O=e.setLabourTotal,G=e.showCreate,J=e.showEdit,H=e.grandTotal,Y=e.labourTotal,K=e.partTotal,X=e.dueBalance,_=e.setDueBalance,$=e.setRefundable,ee=e.refundable,te=e.setSave;(0,r.useEffect)((function(){setTimeout((function(){if(console.log(Object.keys(L),"_lab, _part"),void 0!=L.invoice){var e,t,n=void 0===(null===L||void 0===L||null===(e=L.invoice)||void 0===e?void 0:e.tax)||0!==parseInt(L.invoice.tax);P(n);var i=void 0!==(null===L||void 0===L||null===(t=L.invoice)||void 0===t?void 0:t.taxPart)&&(parseInt(L.invoice.taxPart),!1);E(i),console.log(n,i,"_lab, _part")}else console.log("did not reach","_lab, _part")}),3e3)}),[e,L.email]),(0,r.useEffect)((function(){G&&J||(U(),$(0))}),[U,$,G,J,L.status]),(0,r.useEffect)((function(){for(var e=0,t=0;t<L.parts.length;t++)L.parts[t].amount&&(e+=parseInt(L.parts[t].amount));R(e)}),[R,L.parts]),(0,r.useEffect)((function(){for(var e=0,t=0;t<L.labours.length;t++)L.labours[t].cost&&(e+=parseInt(L.labours[t].cost));O(e)}),[O,L.labours]),(0,r.useEffect)((function(){var e=.075*Y;F("tax",Ze(e)),s(e)}),[Y,F]),(0,r.useEffect)((function(){var e=.075*K;F("taxPart",Ze(e)),d(e)}),[K,F]),(0,r.useEffect)((function(){var e=a+c+K+Y,t=parseInt(L.depositAmount),n=e-t;B(e),_(n),t>e?($(t-e),_(0)):$(0)}),[a,c,K,Y,B,_,H,L.depositAmount,$]);var ne=(0,r.useCallback)((function(e){var t=e.target.value;f(setTimeout((function(){T((0,Ot.xv)(t))}),2e3)),F("vin",t)}),[T,F]),ie=(0,r.useCallback)((function(e,t){var n="parts.".concat(t,".quantity.quantity"),i="parts.".concat(t,".quantity.unit"),r="parts.".concat(t,".price"),a="parts.".concat(t,".amount"),s=n===e.target.name,o=r===e.target.name,l=i===e.target.name;if(s){var c=+L.parts[t].price*+e.target.value;F(n,e.target.value),F(a,"".concat(c))}if(o){var d=+L.parts[t].quantity.quantity*+e.target.value;F(r,e.target.value),F(a,"".concat(d))}l&&F(i,e.target.value)}),[F,L.parts]);(0,r.useEffect)((function(){return function(){clearTimeout(h),T((0,Ye.i3)())}}),[h,T]);var re=(0,r.useCallback)((function(){te&&te(!0)}),[te]),ae=(0,r.useCallback)((function(){te&&te(!1)}),[te]);return(0,r.useEffect)((function(){C||(F(ys.tax.name,0),console.log("making labor 0","mainLog1")),N||(F(ys.taxPart.name,0),console.log("making part 0","mainLog1"))}),[C,N]),(0,r.useEffect)((function(){"completed"!=I.saveInvoiceStatus&&"completed"!=I.sendInvoiceStatus||be()}),[I.saveInvoiceStatus,I.sendInvoiceSuccess]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(dn.l0,{autoComplete:"off",autoCorrect:"off",children:(0,V.jsxs)(Q.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},sx:{p:1},children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Customer Information"}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{onChange:M,disabled:!0,label:ys.firstName.label,value:L.firstName,name:ys.firstName.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(fn.Z,{onChange:M,disabled:!0,label:ys.lastName.label,value:L.lastName,name:ys.lastName.name})}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(fn.Z,{type:"tel",onChange:M,disabled:!0,label:ys.phone.label,value:L.phone,name:ys.phone.name})}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,xs:!0,spacing:.2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:(0,V.jsx)(On.Z,{data:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}],onChange:M,disabled:!0,value:L.addressType,name:ys.addressType.name,label:ys.addressType.label,fullWidth:!0})}),(0,V.jsx)(Q.ZP,{item:!0,xs:9,children:(0,V.jsx)(fn.Z,{onChange:M,disabled:!0,value:L.address,name:ys.address.name,label:ys.address.label})})]}),(0,V.jsx)(Bi,{disabled:!0,values:L,handleChange:M,handleChangeVIN:ne}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:ys.parts.label}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(dn.F2,{name:ys.parts.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[L.parts.length>0&&L.parts.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:13,columns:14,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["name"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:M})}),"warranty"===e&&(0,V.jsx)(Vi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:M,index:n,values:L})),"quantity"===e&&(0,V.jsx)(Mi,(0,x.Z)((0,x.Z)({},t),{},{handleChange:function(e){return ie(e,n)},index:n,values:L})),"price"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:function(e){return ie(e,n)},type:"number",inputProps:{min:"0"}})}),"amount"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"parts.".concat(n,".").concat(e),label:e,value:t[e],onChange:M,type:"number",disabled:!0})})]},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({name:"",warranty:{warranty:"",interval:""},quantity:{quantity:"0",unit:""},price:"0",amount:"0"})},children:(0,V.jsx)(Sn.Z,{})})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:8}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[N&&(0,V.jsx)(Ht.Z,{name:ys.taxPart.name,value:L.taxPart,label:"".concat(ys.taxPart.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),"Sub Total: \u20a6",Ze(Math.round(K))]})]})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:ys.labours.label}),(0,V.jsx)(z.Z,{orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,container:!0,children:(0,V.jsx)(dn.F2,{name:ys.labours.name,render:function(e){return(0,V.jsxs)(r.Fragment,{children:[L.labours.length>0&&L.labours.map((function(t,n){return(0,V.jsxs)(Q.ZP,{container:!0,item:!0,spacing:2,xs:12,columns:13,mb:2,children:[Object.keys(t).map((function(e){return(0,V.jsxs)(r.Fragment,{children:["title"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:8,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:M})}),"cost"===e&&(0,V.jsx)(Q.ZP,{item:!0,xs:4,children:(0,V.jsx)(Ht.Z,{fullWidth:!0,variant:"outlined",name:"labours.".concat(n,".").concat(e),label:e,value:t[e],onChange:M,type:"number",inputProps:{min:"0"}})})]},"".concat(e))})),(0,V.jsx)(Q.ZP,{item:!0,xs:1,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.remove(n)},children:(0,V.jsx)(bn.Z,{})})})]},n)})),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Z.Z,{onClick:function(){return e.push({title:"",cost:"0"})},children:(0,V.jsx)(Sn.Z,{})})})]})}})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,container:!0,spacing:2,columns:13,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:6}),(0,V.jsxs)(Q.ZP,{item:!0,xs:4,children:[C&&(0,V.jsx)(Ht.Z,{name:ys.tax.name,value:L.tax,label:"".concat(ys.tax.label," (VAT 7.5%)"),variant:"outlined",fullWidth:!0,sx:{mb:2}}),(0,V.jsxs)(v.Z,{children:[" Sub Total: \u20a6",Ze(Math.round(Y))]})]}),(0,V.jsx)(Q.ZP,{item:!0,style:{},children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{children:"Apply Tax"}),(0,V.jsx)(qi.Z,{checked:C,onClick:function(){return P(!C)}})]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:12,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,variant:"subtitle1",component:"h1",children:"Job Information"}),(0,V.jsx)(z.Z,{flexItem:!0,orientation:"horizontal"})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Grand Total: \u20a6",Ze(Math.round(H))]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,alignSelf:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Due Balance: \u20a6",Ze(Math.round(X))]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:2,container:!0,justifyContent:"space-around",alignItems:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Refundable: \u20a6",Ze(ee)]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,container:!0,justifyContent:"space-around",alignItems:"center",children:(0,V.jsxs)(v.Z,{variant:"body1",children:["Deposited Amount: \u20a6",Ze(+L.depositAmount)]})}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,container:!0,spacing:.5,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:6,children:(0,V.jsx)(fn.Z,{onChange:M,value:L.jobDuration.count,name:"jobDuration.count",label:ys.jobDuration.label,type:"number",inputProps:{min:"1"}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(On.Z,{data:[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],onChange:M,value:L.jobDuration.interval,name:"jobDuration.interval",label:"Interval",fullWidth:!0})})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(z.Z,{sx:{mb:3},flexItem:!0,orientation:"horizontal"})}),(0,V.jsx)(Q.ZP,{item:!0,xs:6,children:(0,V.jsxs)(W.Z,{direction:"row",spacing:2,children:[(0,V.jsx)(pn.Z,{onClick:re,sx:{ml:2},type:"submit",variant:"contained",color:"info",loading:"loading"===I.saveInvoiceStatus,endIcon:(0,V.jsx)(vn.Z,{}),children:"Save"}),(0,V.jsx)(pn.Z,{onClick:ae,sx:{ml:2},type:"submit",variant:"contained",color:"success",loading:"loading"===I.sendInvoiceStatus,endIcon:(0,V.jsx)(bi.Z,{}),children:"Send"})]})}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0})]})}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==j,message:null===j||void 0===j?void 0:j.message,onClose:function(){return b(void 0)}})]})}var Cs=(0,r.memo)(As),Ps=function(e){var t=e.onClose,n=e.show,i=e.authUrl,a=(0,r.useRef)(null);return(0,V.jsx)(Ct,{fullWidth:!0,size:"xs",show:n,contentHeight:800,Content:i.length?(0,V.jsx)("iframe",{ref:a,src:i,style:{border:"none"},title:"Online Payment",width:"100%",height:"100%"}):(0,V.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,V.jsx)(Ln.Z,{color:"inherit"})}),onClose:t})},ks=n(56474);var Ds=function(){var e,t,n=(0,w.Z)((function(e){return e.invoiceReducer})),a=(0,w.Z)((function(e){return e.transactionReducer})),s=(0,y.Z)(),l=function(){var e=(0,r.useState)([]),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(),o=(0,i.Z)(s,2),l=o[0],c=o[1],d=(0,r.useState)(Ti.initialValues),u=(0,i.Z)(d,2),m=u[0],h=u[1],f=(0,r.useState)(0),p=(0,i.Z)(f,2),v=p[0],Z=p[1],g=(0,r.useState)(0),j=(0,i.Z)(g,2),b=j[0],S=j[1],A=(0,r.useState)(0),C=(0,i.Z)(A,2),P=C[0],k=C[1],D=(0,r.useState)(0),N=(0,i.Z)(D,2),E=N[0],I=N[1],T=(0,r.useState)(0),q=(0,i.Z)(T,2),L=q[0],V=q[1],M=(0,r.useState)(),F=(0,i.Z)(M,2),U=F[0],B=F[1],R=(0,r.useState)(),O=(0,i.Z)(R,2),W=O[0],z=O[1],G=(0,r.useState)(!1),J=(0,i.Z)(G,2),H=J[0],Y=J[1],Q=(0,r.useState)(!1),K=(0,i.Z)(Q,2),X=K[0],_=K[1],$=(0,r.useState)(),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],ie=(0,r.useState)(),re=(0,i.Z)(ie,2),ae=re[0],se=re[1],oe=(0,r.useState)(!1),le=(0,i.Z)(oe,2),ce=le[0],de=le[1],ue=(0,w.Z)((function(e){return e.invoiceReducer})),me=(0,y.Z)(),he=(0,r.useCallback)((function(){me((0,js.yZ)()),me((0,Ji.HJ)()),me((0,Ji.Ys)())}),[me]);(0,r.useEffect)((function(){me((0,gs.wV)())}),[me]),(0,r.useEffect)((function(){if("completed"===ue.getInvoicesStatus){for(var e=ue.invoices.map((function(e){return(0,x.Z)({},e)})),t=[],n=0;n<e.length;n++){var i=e[n].draftInvoice;if(i){var r=i.parts.length?i.parts.map((function(e){return JSON.parse(e)})):[],s=i.labours.length?i.labours.map((function(e){return JSON.parse(e)})):[],o=(0,x.Z)((0,x.Z)({},i),{},{parts:r,labours:s,estimate:e[n].estimate,transactions:e[n].transactions});o.id=e[n].id,t.push(o)}else t.push(e[n])}a(t)}}),[me,ue.getInvoicesStatus,ue.invoices]),(0,r.useEffect)((function(){"failed"===ue.getInvoicesStatus&&z({message:ue.getInvoicesError})}),[me,he,ue.getInvoicesError,ue.getInvoicesStatus]),(0,r.useEffect)((function(){"completed"===ue.saveInvoiceStatus&&(B({message:ue.saveInvoiceSuccess}),me((0,gs.wV)()),he())}),[me,he,ue.saveInvoiceStatus,ue.saveInvoiceSuccess]),(0,r.useEffect)((function(){"failed"===ue.saveInvoiceStatus&&z({message:ue.saveInvoiceError})}),[me,he,ue.saveInvoiceError,ue.saveInvoiceStatus]),(0,r.useEffect)((function(){"completed"===ue.sendInvoiceStatus&&(B({message:ue.sendInvoiceSuccess}),me((0,gs.wV)()),he())}),[me,he,ue.sendInvoiceStatus,ue.sendInvoiceSuccess]),(0,r.useEffect)((function(){"failed"===ue.sendInvoiceStatus&&z({message:ue.sendInvoiceError})}),[me,he,ue.sendInvoiceError,ue.sendInvoiceStatus]),(0,r.useEffect)((function(){return function(){me((0,js.yZ)()),me((0,Ji.HJ)()),me((0,Ji.Ys)()),de(!1),se(void 0),ne(void 0),B(void 0),z(void 0),V(0),k(0),S(0),I(0)}}),[me]);var xe=(0,r.useCallback)((function(e){me((0,gs.wV)());var t=n.find((function(t){return t.id===e}));if(t&&t.estimate){var i=t.estimate.rideShareDriver,r=t.estimate.customer,a=t.estimate.vehicle,s=i?i.firstName:r.firstName,o=i?i.lastName:r.lastName,l=i?i.phone:r.phone,d=a&&a.make?a.make:"",u=a&&a.model?a.model:"",m=a&&a.plateNumber?a.plateNumber:"",f=a&&a.vin?a.vin:"",p=a&&a.modelYear?a.modelYear:"",v=t.estimate.address?t.estimate.address:"",g=t.estimate.addressType?t.estimate.addressType:"",j={count:a&&a.mileageValue?a.mileageValue:"",unit:a&&a.mileageUnit?a.mileageUnit:""};if(t.edited&&t.draftInvoice){var b=t.draftInvoice,w=b.parts.map((function(e){return JSON.parse(e)})),y=b.labours.map((function(e){return JSON.parse(e)})),A={count:"".concat(b.jobDurationValue),interval:b.jobDurationUnit},C="".concat(b.depositAmount),P="".concat(b.tax),D=b.status;h((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:s,lastName:o,phone:l,make:d,model:u,plateNumber:m,vin:f,modelYear:p,address:v,addressType:g,jobDuration:A,depositAmount:C,tax:P,mileage:j,parts:w,labours:y,status:D,invoice:t})})),k(b.grandTotal),S(b.partsTotal),Z(b.laboursTotal),I(b.dueAmount),V(b.refundable),se(t.id)}if(t.edited&&!t.draftInvoice){var N=t.parts,E=t.labours,T={count:"".concat(t.jobDurationValue),interval:t.jobDurationUnit},q="".concat(t.depositAmount),L="".concat(t.tax),M=t.estimate.status;h((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:s,lastName:o,phone:l,make:d,model:u,plateNumber:m,vin:f,modelYear:p,address:v,addressType:g,jobDuration:T,depositAmount:q,tax:L,mileage:j,parts:N,labours:E,status:M,invoice:t})})),k(t.grandTotal),S(t.partsTotal),Z(t.laboursTotal),I(t.dueAmount),V(t.refundable),se(t.id)}if(!t.edited){var F=t.estimate,U=F.parts,B=F.labours,R={count:"".concat(F.jobDurationValue),interval:F.jobDurationUnit},O="".concat(t.depositAmount),W="".concat(F.tax),z=F.status;h((function(e){return(0,x.Z)((0,x.Z)({},e),{},{firstName:s,lastName:o,phone:l,make:d,model:u,plateNumber:m,vin:f,modelYear:p,address:v,addressType:g,jobDuration:R,depositAmount:O,tax:W,mileage:j,parts:U,labours:B,status:z,invoice:t})})),k(F.grandTotal),S(F.partsTotal),Z(F.laboursTotal),I(t.dueAmount),V(t.refundable),se(t.id)}c(t),ne(te),Y(!0)}}),[me,te,n]);return{invoices:n,error:W,setError:z,onEdit:xe,showEdit:H,setShowEdit:Y,initialValues:m,labourTotal:v,grandTotal:P,partTotal:b,setSuccess:B,success:U,setLabourTotal:Z,setPartTotal:S,setGrandTotal:k,dueBalance:E,setDueBalance:I,refundable:L,setRefundable:V,showRefund:X,setShowRefund:_,save:ce,setSave:de,handleInitiateRefund:function(){me((0,bs.B)({callbackUrl:Ss,amount:L,invoiceId:ae}))},handleSaveInvoice:function(e){var t=e.parts,n=e.labours;if(!t.length)return z({message:"Parts Items Cannot not be empty!"});if(!n.length)return z({message:"Labour Items Cannot not be empty!"});var i=ws(ae,e,b,v,P,L,E);de(!1),me((0,gs.$p)(i))},handleSendInvoice:function(e){var t=e.parts,n=e.labours;if(!t.length)return z({message:"Parts Items Cannot not be empty!"});if(!n.length)return z({message:"Labour Items Cannot not be empty!"});var i=ws(ae,e,b,v,P,L,E);me((0,gs.zJ)(i))},handleCloseEdit:function(){Y(!1),de(!1),se(void 0),ne(void 0),B(void 0),z(void 0),V(0),k(0),S(0),I(0),h(Ti.initialValues),me((0,gs.wV)())},invoice:l}}(),c=(0,j.s0)(),d=Ie().isTechAdmin,u=function(){var e=(0,j.TH)();return(0,r.useMemo)((function(){return new URLSearchParams(e.search)}),[e.search])}();(0,r.useEffect)((function(){var e=u.get("reference"),t=u.get("pay_canceled");e&&localStorage.setItem(o.H3.referenceNumber,e),t&&localStorage.setItem(o.H3.payCancelled,t)}),[u]);var m=(0,r.useCallback)((function(){s((0,ks.lQ)()),s((0,ks.Mn)()),s((0,ks.XB)(!1))}),[s]),h=(0,r.useCallback)((function(e){e.key===o.H3.referenceNumber&&e.newValue&&a.invoiceId&&s((0,bs._)({reference:e.newValue,invoiceId:a.invoiceId})),e.key===o.H3.payCancelled&&e.newValue&&m()}),[s,m,a.invoiceId]);(0,r.useEffect)((function(){return window.addEventListener("storage",h),function(){window.removeEventListener("storage",h)}}),[h]),(0,r.useEffect)((function(){"completed"===a.verifyRefundCustomerStatus&&(localStorage.removeItem(o.H3.referenceNumber),localStorage.removeItem(o.H3.payCancelled),m(),s((0,gs.wV)()))}),[s,m,a.authorizationUrl,a.verifyRefundCustomerStatus]);var f=(0,r.useMemo)((function(){return[{field:"id",headerName:"ID",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"code",headerName:"Code",headerAlign:"center",align:"center",sortable:!0,type:"number"},{field:"fullName",headerName:"Full Name",headerAlign:"center",align:"center",type:"string",width:250,sortable:!0,valueGetter:function(e){var t=e.row.estimate.customer;return"".concat(t.firstName," ").concat(t.lastName)}},{field:"status",headerName:"Status",headerAlign:"center",align:"center",sortable:!0,type:"string",renderCell:function(e){return e.row.status===o.Ux.paid?(0,V.jsx)(b.Z,{label:o.Ux.paid,size:"small",color:"success"}):e.row.status===o.Ux.deposit?(0,V.jsx)(b.Z,{label:o.Ux.deposit,size:"small",color:"warning"}):e.row.status===o.Ux.overDue?(0,V.jsx)(b.Z,{label:o.Ux.overDue,size:"small",color:"error"}):null}},{field:"updateStatus",headerName:"Update Status",headerAlign:"center",align:"center",sortable:!0,type:"string",width:180,renderCell:function(e){return e.row.updateStatus===o.Ux.update.sent?(0,V.jsx)(b.Z,{label:o.Ux.update.sent,size:"small",color:"success"}):e.row.updateStatus===o.Ux.update.draft?(0,V.jsx)(b.Z,{label:o.Ux.update.draft,size:"small",color:"info"}):e.row.updateStatus===o.Ux.update.refund?(0,V.jsx)(b.Z,{label:o.Ux.update.refund,size:"small",color:"error"}):null}},{field:"phone",headerName:"Phone",headerAlign:"center",align:"center",type:"string",width:150,sortable:!0,valueGetter:function(e){var t=e.row.estimate.customer;return"".concat(t.phone)}},{field:"model",headerName:"Vehicle",headerAlign:"center",align:"center",type:"string",width:200,sortable:!0,valueGetter:function(e){var t=e.row.estimate.vehicle;return"".concat(t.modelYear," ").concat(t.make," ").concat(t.model," (").concat(t.plateNumber,")")}},{field:"grandTotal",headerName:"Grand Total",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"depositAmount",headerName:"Deposit Amount",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"dueAmount",headerName:"Due Amount",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0,valueFormatter:function(e){var t=e.value;return t?-1===Math.sign(t)?0:t:0}},{field:"refundable",headerName:"Due Refund",headerAlign:"center",align:"center",type:"number",width:150,sortable:!0},{field:"createdAt",headerName:"Created Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0},{field:"updatedAt",headerName:"Modified Date",headerAlign:"center",align:"center",width:200,type:"string",valueFormatter:function(e){var t=e.value;return t?P()(t).format("LLL"):"-"},sortable:!0},{field:"actions",type:"actions",headerAlign:"center",align:"center",getActions:function(e){return[(0,V.jsx)(k.u,{icon:(0,V.jsx)(S.Z,{sx:{color:"dodgerblue"}}),onClick:function(){s((0,gs.wV)());var t=e.row,n=t.estimate;c("/invoices/".concat(t.id),{state:{invoice:t,estimate:n}})},label:"View",showInMenu:!1},0),(0,V.jsx)(k.u,{icon:(0,V.jsx)(fi.Z,{sx:{display:d?"block":"none",color:"limegreen"}}),disabled:!d,onClick:function(){var t=e.row;l.onEdit(t.id)},label:"Edit",showInMenu:!1},2),(0,V.jsx)(k.u,{icon:(0,V.jsx)(pi.Z,{sx:{color:"indianred"}}),onClick:function(){},label:"Delete",showInMenu:!1},2)]}}]}),[s,l,d,c]);return(0,r.useEffect)((function(){return function(){s((0,js.v7)()),s((0,js.Zp)())}}),[s]),(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Q.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:10,children:(0,V.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Invoices"})})}),(0,V.jsx)(Q.ZP,{container:!0,children:(0,V.jsx)(Q.ZP,{item:!0,xs:12,children:(0,V.jsx)(U,{rows:l.invoices,columns:f,showToolbar:!0,loading:"loading"===n.getInvoicesStatus})})}),(0,V.jsx)(_t.Z,{alertType:"success",show:void 0!==l.success,message:null===(e=l.success)||void 0===e?void 0:e.message,onClose:function(){return l.setSuccess(void 0)}}),(0,V.jsx)(_t.Z,{alertType:"error",show:void 0!==l.error,message:null===(t=l.error)||void 0===t?void 0:t.message,onClose:function(){return l.setError(void 0)}}),(0,V.jsx)(Ct,{fullWidth:!0,fullScreen:!0,show:l.showEdit,Content:(0,V.jsx)(dn.J9,{initialValues:l.initialValues,validationSchema:Ti.schema,onSubmit:function(e){l.save&&l.handleSaveInvoice(e),l.save||l.handleSendInvoice(e)},validateOnChange:!0,enableReinitialize:!0,children:(0,V.jsx)(Cs,{showEdit:l.showEdit,setLabourTotal:l.setLabourTotal,setPartTotal:l.setPartTotal,setGrandTotal:l.setGrandTotal,labourTotal:l.labourTotal,partTotal:l.partTotal,grandTotal:l.grandTotal,dueBalance:l.dueBalance,setDueBalance:l.setDueBalance,refundable:l.refundable,setRefundable:l.setRefundable,showRefund:l.showRefund,setShowRefund:l.setShowRefund,onInitiateRefund:l.handleInitiateRefund,setSave:l.setSave,invoice:l.invoice})}),onClose:function(){return l.handleCloseEdit()}}),(0,V.jsx)(Ps,{show:a.openTransactionPopup,authUrl:a.authorizationUrl,onClose:function(){s((0,ks.ID)("")),s((0,ks.lQ)()),s((0,ks.Mn)()),s((0,ks.XB)(!1))}}),(0,V.jsx)(ye.Z,{show:"loading"===a.initRefundCustomerStatus}),(0,V.jsx)(ye.Z,{show:"loading"===a.verifyRefundCustomerStatus})]})};var Ns=function(){var e,t,n,a,s,l,c=(0,r.useState)(),d=(0,i.Z)(c,2),u=d[0],m=d[1],h=(0,r.useState)(),x=(0,i.Z)(h,2),p=x[0],Z=x[1],g=(0,r.useState)(""),b=(0,i.Z)(g,2),S=b[0],w=b[1],y=(0,r.useState)([]),A=(0,i.Z)(y,2),C=A[0],P=A[1],k=(0,r.useState)([]),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,r.useState)(),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,j.TH)();(0,r.useEffect)((function(){if(M.state){var e=M.state;Z(e.invoice),m(e.estimate)}}),[M]),(0,r.useEffect)((function(){if(u&&p){var e,t,n=u.rideShareDriver,i=u.customer,r=n?"".concat(n.firstName," ").concat(n.lastName):"".concat(i.firstName," ").concat(i.lastName);p.edited&&o.Ux.update.draft||p.edited&&p.updateStatus===o.Ux.update.sent?(e=p.parts.length?p.parts:[],t=p.labours.length?p.labours:[]):(e=u.parts.length?u.parts:[],t=u.labours.length?u.labours:[]),P(e),E(t),w(Kt().words(r)),L(i.billingInformation)}}),[u,p]);var F=(0,r.useMemo)((function(){return p&&u?(p.edited?p.laboursTotal:u.laboursTotal)+(p&&p.edited?p.partsTotal:u.partsTotal):0}),[u,p]),U=(0,r.useMemo)((function(){return p&&u?p.edited?p.grandTotal:u.grandTotal:0}),[u,p]);return u&&p?(0,V.jsxs)(r.Fragment,{children:[(0,V.jsx)(Q.ZP,{children:(0,V.jsx)(Q.ZP,{children:(0,V.jsx)(vs.Z,{onClick:function(){return window.history.back()},style:{position:"absolute",cursor:"pointer"}})})}),(0,V.jsxs)(v.Z,{mb:3,textAlign:"center",display:"block",variant:"subtitle1",children:["#",p.code]}),(0,V.jsxs)(Q.ZP,{container:!0,my:3,justifyContent:"space-between",alignItems:"center",children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:"Billing Information"}),(0,V.jsxs)(W.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:S}),q?(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[(0,V.jsxs)(v.Z,{variant:"body2",gutterBottom:!0,children:[q.address," ",q.district," ",q.state]}),(0,V.jsx)(v.Z,{variant:"body2",gutterBottom:!0,children:q.phone})]}):(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:u.address})]})]}),(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)("img",{alt:"",width:"20%",crossOrigin:"anonymous",src:"".concat(ve.Z.api.baseURL,"/").concat(null===u||void 0===u||null===(e=u.partner)||void 0===e?void 0:e.logo)})}),(0,V.jsxs)(Q.ZP,{item:!0,children:[(0,V.jsx)(v.Z,{variant:"h6",gutterBottom:!0,children:null===u||void 0===u?void 0:u.partner.name}),(0,V.jsxs)(W.Z,{children:[(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===u||void 0===u||null===(t=u.partner)||void 0===t?void 0:t.contact.address}),(0,V.jsxs)(v.Z,{variant:"body1",gutterBottom:!0,children:[null===u||void 0===u||null===(n=u.partner)||void 0===n||null===(a=n.contact)||void 0===a?void 0:a.district," ",null===u||void 0===u||null===(s=u.partner)||void 0===s||null===(l=s.contact)||void 0===l?void 0:l.state]}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===u||void 0===u?void 0:u.partner.phone}),(0,V.jsx)(v.Z,{variant:"body1",gutterBottom:!0,children:null===u||void 0===u?void 0:u.partner.email})]})]})]}),(0,V.jsx)(Q.ZP,{container:!0,children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})})}),(0,V.jsxs)(Q.ZP,{container:!0,my:3,children:[(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Vehicle"}),(0,V.jsxs)(v.Z,{children:[null===u||void 0===u?void 0:u.vehicle.modelYear," ",null===u||void 0===u?void 0:u.vehicle.make," ",null===u||void 0===u?void 0:u.vehicle.model]})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Reg. No"}),(0,V.jsx)(v.Z,{children:null===u||void 0===u?void 0:u.vehicle.plateNumber})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"Mileage"}),(0,V.jsxs)(v.Z,{children:[null===u||void 0===u?void 0:u.vehicle.mileageValue," ",null===u||void 0===u?void 0:u.vehicle.mileageUnit]})]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:!0,children:[(0,V.jsx)(v.Z,{gutterBottom:!0,children:"VIN"}),(0,V.jsx)(v.Z,{children:null===u||void 0===u?void 0:u.vehicle.vin})]})]}),(0,V.jsx)(Q.ZP,{container:!0,children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(z.Z,{orientation:"horizontal",flexItem:!0})})}),(0,V.jsxs)(Q.ZP,{container:!0,my:3,sx:{pb:1.5},borderBottom:"3px solid",borderColor:function(e){return"dark"===e.palette.mode?"#676767":"#000000"},justifyContent:"center",alignItems:"center",columns:14,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2,children:(0,V.jsx)(gt.Z,{src:ps,sx:{width:20,height:20}})}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Item Description"}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Warranty"}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Unit Cost x Qty"}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"Amount"})]}),(0,V.jsxs)(Q.ZP,{container:!0,children:[C.length?C.map((function(e,t){var n=Ze(parseInt(e.amount));return(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:e.name}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,children:[e.warranty.warranty," ",e.warranty.interval]}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,children:[Ze(+e.price)," x ",e.quantity.quantity,"$",e.quantity.unit]}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:n})]},t)})):null,N.length?N.map((function(e,t){return(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",columns:14,sx:{pb:2.5},borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:2}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:e.title}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:"-"}),(0,V.jsxs)(Q.ZP,{item:!0,xs:3,children:[Ze(+e.cost)," x 1"]}),(0,V.jsx)(Q.ZP,{item:!0,xs:3,children:Ze(+e.cost)})]},t)})):null]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsxs)(Q.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:[(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["Subtotal: ",Ze(F)]}),(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["VAT(7.5%): ",Ze(parseFloat((null===u||void 0===u?void 0:u.tax)||0)+parseFloat((null===u||void 0===u?void 0:u.taxPart)||0))]})]})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",my:3,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",borderBottom:"0.01px solid",borderColor:"#676767",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,children:["TOTAL: ",Ze(U)]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",mt:1,mb:2,children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,sx:{pb:2.5},textAlign:"right",children:(0,V.jsxs)(v.Z,{gutterBottom:!0,fontStyle:"italic",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"},children:["Job Duration: ",u.jobDurationValue," ",u.jobDurationUnit,"(s)"]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,children:(0,V.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"}},children:[(0,V.jsx)(v.Z,{children:"Paid"}),(0,V.jsx)(v.Z,{sx:{ml:5}}),(0,V.jsxs)(v.Z,{children:["\u20a6",Ze(p.depositAmount)]})]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,children:(0,V.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"}},children:[(0,V.jsx)(v.Z,{children:"Balance Due"}),(0,V.jsx)(v.Z,{sx:{mr:7}}),(0,V.jsxs)(v.Z,{children:["\u20a6",-1===Math.sign(p.dueAmount)?"0.00":Ze(p.dueAmount)]})]})})]}),(0,V.jsxs)(Q.ZP,{item:!0,container:!0,justifyContent:"center",alignItems:"center",children:[(0,V.jsx)(Q.ZP,{item:!0,xs:10}),(0,V.jsx)(Q.ZP,{item:!0,flexGrow:1,children:(0,V.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:function(e){return"dark"===e.palette.mode?"#ededed":"#263238"}},children:[(0,V.jsx)(v.Z,{children:"Refund Due"}),(0,V.jsx)(v.Z,{sx:{mr:7}}),(0,V.jsxs)(v.Z,{children:["\u20a6",Ze(p.refundable)]})]})})]})]}):(0,V.jsx)(Q.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,V.jsx)(Q.ZP,{item:!0,xs:!0,children:(0,V.jsx)(Yt.Z,{severity:"warning",variant:"outlined",children:(0,V.jsx)(v.Z,{children:"You do not have any estimate. Please contact support"})})})})};var Es=(0,Va.Z)((function(){var e=(0,r.useContext)(Is),t=e.setOpenSideNav,n=e.openSideNav,i=(0,w.Z)((function(e){return e.appointmentReducer}));return(0,V.jsxs)(r.Fragment,{children:[(0,V.jsxs)(f.Z,{sx:{display:"flex"},children:[(0,V.jsx)(La,{position:"fixed",open:n,children:(0,V.jsxs)(p.Z,{children:[(0,V.jsx)(Z.Z,{color:"inherit","aria-label":"open drawer",onClick:function(){t(!0)},edge:"start",sx:(0,x.Z)({marginRight:5},n&&{display:"none"}),children:(0,V.jsx)(g.Z,{})}),(0,V.jsx)(v.Z,{variant:"h6",noWrap:!0,component:"div",children:"Auto HYVE"})]})}),(0,V.jsx)(qa,{}),(0,V.jsxs)(f.Z,{component:"main",sx:{flexGrow:1,p:3},children:[(0,V.jsx)(Na,{}),(0,V.jsxs)(j.Z5,{children:[(0,V.jsx)(j.AW,{path:"/dashboard",element:(0,V.jsx)(nr,{})}),(0,V.jsx)(j.AW,{path:"/appointments",element:(0,V.jsx)(R,{})}),(0,V.jsx)(j.AW,{path:"/appointments/:id",element:(0,V.jsx)(la,{})}),(0,V.jsx)(j.AW,{path:"/customers",element:(0,V.jsx)(Y,{})}),(0,V.jsx)(j.AW,{path:"/customers/:id",element:(0,V.jsx)(_e,{})}),(0,V.jsx)(j.AW,{path:"/transactions",element:(0,V.jsx)(ir,{})}),(0,V.jsx)(j.AW,{path:"/transactions/:id",element:(0,V.jsx)(Gr,{})}),(0,V.jsx)(j.AW,{path:"/vehicles",element:(0,V.jsx)(O,{})}),(0,V.jsx)(j.AW,{path:"/vehicles/:id",element:(0,V.jsx)(Hr,{})}),(0,V.jsx)(j.AW,{path:"/partners",element:(0,V.jsx)(Za,{})}),(0,V.jsx)(j.AW,{path:"/partner/:id",element:(0,V.jsx)(tr,{})}),(0,V.jsx)(j.AW,{path:"/partner/dashboard",element:(0,V.jsx)(r.Fragment,{})}),(0,V.jsx)(j.AW,{path:"/technicians",element:(0,V.jsx)(Ei,{})}),(0,V.jsx)(j.AW,{path:"/technician/:id",element:(0,V.jsx)(Di,{})}),(0,V.jsx)(j.AW,{path:"/drivers",element:(0,V.jsx)(ja,{})}),(0,V.jsx)(j.AW,{path:"/drivers/:id",element:(0,V.jsx)(ga,{})}),(0,V.jsx)(j.AW,{path:"/garage",element:(0,V.jsx)(tr,{})}),(0,V.jsx)(j.AW,{path:"/ride-share",element:(0,V.jsx)(tr,{})}),(0,V.jsx)(j.AW,{path:"/checkLists",element:(0,V.jsx)(Wa,{})}),(0,V.jsx)(j.AW,{path:"/checkLists/:id",element:(0,V.jsx)($a,{})}),(0,V.jsx)(j.AW,{path:"/estimates",element:(0,V.jsx)(fs,{})}),(0,V.jsx)(j.AW,{path:"/estimates/:id",element:(0,V.jsx)(Zs,{})}),(0,V.jsx)(j.AW,{path:"/invoices",element:(0,V.jsx)(Ds,{})}),(0,V.jsx)(j.AW,{path:"/invoices/:id",element:(0,V.jsx)(Ns,{})}),(0,V.jsx)(j.AW,{path:"/job-check-list-report/:id",element:(0,V.jsx)(hs,{})})]})]})]}),(0,V.jsx)(ye.Z,{show:"loading"===i.updateAppointmentStatus})]})})),Is=(0,r.createContext)(null);function Ts(){var e=(0,r.useState)(!1),t=(0,i.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,i.Z)(s,2),l=o[0],d=o[1],u=(0,r.useState)(!1),m=(0,i.Z)(u,2),x=m[0],f=m[1],p=(0,r.useState)(!1),v=(0,i.Z)(p,2),Z=v[0],g=v[1],j=(0,r.useState)(!1),b=(0,i.Z)(j,2),S=b[0],w=b[1],y=(0,r.useState)(0),A=(0,i.Z)(y,2),C=A[0],P=A[1],k=(0,r.useState)(!1),D=(0,i.Z)(k,2),N=D[0],E=D[1],I=(0,r.useState)(!1),T=(0,i.Z)(I,2),q=T[0],L=T[1],M=(0,r.useState)(null),F=(0,i.Z)(M,2),U=F[0],B=F[1],R=(0,r.useState)(null),O=(0,i.Z)(R,2),W=O[0],z=O[1],G=(0,r.useState)(null),J=(0,i.Z)(G,2),H=J[0],Y=J[1],Q=(0,r.useState)([]),K=(0,i.Z)(Q,2),X=K[0],_=K[1],$=(0,r.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1];return(0,V.jsx)(h.Provider,{value:c,children:(0,V.jsx)(Is.Provider,{value:{openSideNav:n,setOpenSideNav:a,isSignedIn:l,setIsSignedIn:d,showBooking:x,setShowBooking:f,showBookingBtn:Z,setShowBookingBtn:g,checkedSlot:S,setCheckedSlot:w,planTab:C,setPlanTab:P,mobileDate:N,setMobileDate:E,showTime:q,setShowTime:L,customer:U,setCustomer:B,vehicle:H,setVehicle:Y,vehicles:X,setVehicles:_,showVehicles:te,setShowVehicles:ne,driver:W,setDriver:z},children:(0,V.jsx)(Es,{})})})}},60092:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(1413),r=n(15671),a=n(43144),s=n(60136),o=n(29388),l=n(72791),c=n(16871),d=n(80184);function u(e){return function(t){(0,s.Z)(l,t);var n=(0,o.Z)(l);function l(){var e;(0,r.Z)(this,l);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).state={hasError:!1,errorMessage:""},e}return(0,a.Z)(l,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t.componentStack),this.setState({hasError:!0,errorMessage:e.message})}},{key:"render",value:function(){return this.state.hasError?(0,d.jsx)(c.Fg,{to:"/error",state:(0,i.Z)({},this.state)}):(0,d.jsx)(e,{})}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,errorMessage:e.message}}}]),l}(l.Component)}},9911:function(e,t,n){"use strict";var i=n(59434).I0;t.Z=i},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);
//# sourceMappingURL=162.39236bb2.chunk.js.map